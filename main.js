(()=>{"use strict";const e=()=>{const e=["A","B","C","D","E","F","G","H","I","J"],t=["1","2","3","4","5","6","7","8","9","10"],a=[],r=[],s=(r,s)=>{const o=e.indexOf(r),i=t.indexOf(s);return-1===o||-1===i?null:a[i][o]},o=(r,s,o,i)=>{const n=e.indexOf(r),l=t.indexOf(s);return-1===n||-1===l?null:(a[l][n].status=o,i&&(a[l][n].takenBy=i),a[l][n])};return(()=>{for(let r=0;r<10;r+=1){a[r]=[];for(let s=0;s<10;s+=1)a[r][s]={col:e[s],row:t[r],status:"empty",takenBy:null}}})(),{clearBoard:()=>{for(let e=0;e<10;e+=1)for(let t=0;t<10;t+=1)a[e][t].status="empty",a[e][t].takenBy=void 0;r.length=0},getCell:s,setCell:o,removeShip:(e,t)=>{t.array.flat().forEach((a=>{let s;"taken"===a.status&&a.takenBy.name===e.name&&(a.status="empty",a.takenBy=null),r.forEach((e=>{null===e.takenBy&&r.splice(r.indexOf(e),1)})),t===l.humanGameboard?s="firstBoard":t===l.computerGameboard&&(s="secondBoard");document.querySelectorAll(`#${s} .cell`).forEach((t=>{t.classList.contains("taken")&&t.getAttribute("data-shipName")===e.name.toLowerCase()&&(t.classList.remove("taken"),t.classList.add("empty"),t.removeAttribute("data-shipName"))}))}))},placeShip:(a,i,n,l)=>{a.isVertical="horizontal"!==l;const c="horizontal"===l,d=c?e:t,u=d.indexOf(c?i:n);let h=[];if(u<0||u+a.size>d.length)return!1;for(let e=0;e<a.size;e+=1){const t=c?d[u+e]:i,r=c?n:d[u+e];if("empty"!==s(t,r).status)return!1;o(t,r,"taken",a),h.push(s(t,r))}return r.push(h[0]),!0},receiveAttack:(e,t)=>{const a=s(e,t);return"taken"===a.status?(a.takenBy.hit(),o(e,t,"hit"),a.status):"empty"===a.status||"reserved"===a.status?(o(e,t,"miss"),a.status):null},receiveAround:(e,t)=>{const a=s(e,t);return"empty"===a.status?(o(e,t,"reserved"),a.status):null},reserveSpace:(e,t,a)=>{const r=e.getCell(t,a);if(r&&r.takenBy){e.array.flat().filter((e=>e.takenBy&&e.takenBy.name===r.takenBy.name)).forEach((t=>{[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0},{col:-1,row:-1},{col:-1,row:1},{col:1,row:-1},{col:1,row:1}].forEach((a=>{const r=String.fromCharCode(t.col.charCodeAt(0)+a.col),s=(Number(t.row)+a.row).toString();e.getCell(r,s)&&e.receiveAround(r,s)}))}))}},hitButNotSunk:e=>e.array.flat().some((e=>"hit"===e.status&&!1===e.takenBy.isSunk())),sinkShip:(e,t,a)=>{const r=e.getCell(t,a);if(r&&r.takenBy&&r.takenBy.isSunk()){e.array.flat().filter((e=>e.takenBy&&e.takenBy.name===r.takenBy.name)).forEach((t=>{[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0},{col:-1,row:-1},{col:-1,row:1},{col:1,row:-1},{col:1,row:1}].forEach((a=>{const r=String.fromCharCode(t.col.charCodeAt(0)+a.col),s=(Number(t.row)+a.row).toString();e.getCell(r,s)&&e.receiveAttack(r,s)}))}))}},allSunk:e=>{let t=e.array.flat().filter((e=>e.takenBy));return!!(t.length>0&&t.every((e=>e.takenBy.isSunk())))},array:a,canBePlaced:(a,r,o,i)=>{const n="horizontal"===i,l=n?e:t,c=l.indexOf(n?r:o);if(c<0||c+a>l.length)return!1;const d=[];for(let e=0;e<a;e+=1){const t=n?l[c+e]:r,a=n?o:l[c+e];d.push("empty"===s(t,a).status)}return d.every((e=>!0===e))},shipsPlaced:r,removeReservedSpace:e=>{e.array.flat().forEach((e=>{"reserved"===e.status&&o(e.col,e.row,"empty")}))}}},t=e=>{let t;return"Carrier"===e&&(t=5),"Battleship"===e&&(t=4),"Destroyer"===e&&(t=3),"Submarine"===e&&(t=3),"PatrolBoat"===e&&(t=2),{name:e,size:t,hitCount:0,isVertical:!1,rotate(){this.isVertical=!this.isVertical},hit(){this.hitCount+=1},isSunk(){return this.hitCount===t}}},a=()=>{const e=["A","B","C","D","E","F","G","H","I","J"];let t=null,a=null;let r=1,s=!0,o=!0;const i=(e,t,c,d)=>{if(d.row===c)if(s){r=1;let o=String.fromCharCode(t.charCodeAt(0)+r);for(;e.getCell(o,c)&&"hit"===e.getCell(o,c).status;)r+=1,o=String.fromCharCode(t.charCodeAt(0)+r);e.getCell(o,c)&&"hit"!==e.getCell(o,c).status&&"miss"!==e.getCell(o,c).status?(e.receiveAttack(o,c),"hit"===e.getCell(o,c).status&&(n(a),l({col:o,row:c})),r+=1):(r=1,s=!1,i(e,o,c,d))}else{r=1;let o=String.fromCharCode(t.charCodeAt(0)-r);for(;e.getCell(o,c)&&"hit"===e.getCell(o,c).status;)r+=1,o=String.fromCharCode(t.charCodeAt(0)-r);e.getCell(o,c)&&"hit"!==e.getCell(o,c).status&&"miss"!==e.getCell(o,c).status?(e.receiveAttack(o,c),"hit"===e.getCell(o,c).status&&(n(a),l({col:o,row:c})),r+=1):(r=1,s=!0,i(e,o,c,d))}else if(d.col===t)if(o){r=1;let s=(Number(c)+r).toString();for(;e.getCell(t,s)&&"hit"===e.getCell(t,s).status;)r+=1,s=(Number(c)+r).toString();e.getCell(t,s)&&"hit"!==e.getCell(t,s).status&&"miss"!==e.getCell(t,s).status?(e.receiveAttack(t,s),"hit"===e.getCell(t,s).status&&(n(a),l({col:t,row:s})),r+=1):(r=1,o=!1,i(e,t,s,d))}else{r=1;let s=(Number(c)-r).toString();for(;e.getCell(t,s)&&"hit"===e.getCell(t,s).status;)r+=1,s=(Number(c)-r).toString();e.getCell(t,s)&&"hit"!==e.getCell(t,s).status&&"miss"!==e.getCell(t,s).status?(e.receiveAttack(t,s),"hit"===e.getCell(t,s).status&&(n(a),l({col:t,row:s})),r+=1):(r=1,o=!0,i(e,t,s,d))}},n=e=>{t=e},l=e=>{a=e};return{attack:(e,t,r)=>{if("hit"!==e.getCell(t,r).status&&"miss"!==e.getCell(t,r).status){let s=e.receiveAttack(t,r);return"hit"===s&&(n(a),l({col:t,row:r})),s}return"already shot"},randomAttack:t=>{let r,s;do{r=e[Math.floor(Math.random()*e.length)],s=Math.ceil(10*Math.random()).toString()}while("hit"===t.getCell(r,s).status||"miss"===t.getCell(r,s).status);if("hit"!==t.getCell(r,s).status&&"miss"!==t.getCell(r,s).status){const e=t.receiveAttack(r,s);return"hit"===t.getCell(r,s).status&&(n(a),l({col:r,row:s})),{result:e,col:r,row:s}}return{result:"already shot",col:r,row:s}},followupAttack:(e,t,s)=>{const o=[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0}].filter((a=>{const r=String.fromCharCode(t.charCodeAt(0)+a.col),o=(Number(s)+a.row).toString(),i=e.getCell(r,o);return!(!i||"miss"===i.status||"hit"===i.status)}));if(o.length>0){const i=o[Math.floor(Math.random()*o.length)],c=String.fromCharCode(t.charCodeAt(0)+i.col),d=(Number(s)+i.row).toString();e.receiveAttack(c,d),r=1,"hit"===e.getCell(c,d).status&&(n(a),l({col:c,row:d}))}},finishingAttack:i,prevHit:t,lastHit:a,getPrevHit:()=>t,getLastHit:()=>a,setPrevHit:n,setLastHit:l}};var r=function(e,t,a,r){return new(a||(a=Promise))((function(s,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function n(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,n)}l((r=r.apply(e,t||[])).next())}))};const s=(()=>{const e=document.querySelector("#messageBox p"),t=document.querySelector("#boards"),a=document.querySelector("#playerVsComputer"),o=document.querySelector("#newGame"),i=document.querySelector("#computerVsComputer"),n=document.querySelector("#start"),c=document.querySelector("#randomPlacement"),d=[a,o,i,n,c],u=document.getElementsByName("speed"),h=(e,t)=>{e.array.forEach((e=>{e.forEach((e=>{const a=(e=>{const t=document.createElement("div");return t.classList.add("cell"),t.classList.add(e.status),t.setAttribute("data-col",e.col),t.setAttribute("data-row",e.row),e.takenBy&&t.setAttribute("data-shipName",e.takenBy.name.toLowerCase()),t})(e);t.append(a)}))}))},m=e=>{let t;e===l.humanGameboard?t="firstBoard":e===l.computerGameboard&&(t="secondBoard");const a=document.querySelector(`#${t}`);a.innerHTML="",h(e,a)},f=e=>{if(!e.target.classList.contains("hit")&&!e.target.classList.contains("miss")){return{col:e.target.getAttribute("data-col"),row:e.target.getAttribute("data-row")}}},p=(e,t)=>{t.classList.remove("selected"),e.classList.contains("selected")||(e.classList.add("selected"),e===a&&r(void 0,void 0,void 0,(function*(){g(!0),d.forEach((e=>e.disabled=!0)),a.textContent="Restarting...",yield new Promise((e=>setTimeout(e,L()))),a.textContent="Player vs Computer",d.forEach((e=>e.disabled=!1)),g(!1),S(),w()})),e===i&&r(void 0,void 0,void 0,(function*(){g(!0),d.forEach((e=>e.disabled=!0)),i.textContent="Starting...",yield new Promise((e=>setTimeout(e,L()))),i.textContent="Computer vs Computer",d.forEach((e=>e.disabled=!1)),g(!1),n.disabled=!0,c.disabled=!0})),l.restart())},g=e=>{document.documentElement.classList.toggle("wait",e)},v=(e,t)=>{t.forEach((t=>{const a=document.createElement("div"),r=t.takenBy.name.toLowerCase(),s=t.takenBy.size,o=t.takenBy.isVertical;a.classList.add("ship",r),a.setAttribute("data-size",`${s}`),a.setAttribute("data-name",`${r}`),a.setAttribute("draggable","true"),a.classList.add("draggable");const i=()=>{o?o&&(a.style.width=l/16+"rem",a.style.height=s*(l/16)+"rem"):(a.style.width=s*(l/16)+"rem",a.style.height=l/16+"rem")};let n,l=document.querySelector(".board .cell").getBoundingClientRect().width;i(),window.addEventListener("resize",(function(){l=document.querySelector(".board .cell").getBoundingClientRect().width,i()})),"first"===e?n="firstBoard":"second"===e&&(n="secondBoard");document.querySelector(`#${n} .cell[data-col="${t.col}"][data-row="${t.row}"]`).appendChild(a)}))},S=()=>5===l.humanGameboard.shipsPlaced.length&&0===l.computerGameboard.shipsPlaced.length?(n.disabled=!1,!0):(n.disabled=!0,!1),w=()=>{e.textContent="Drag and drop ships onto the left board or use 'Random Placement' button. Right click to rotate. When ready, press Start!"},C=()=>{S()&&(e.textContent="You can now begin the game. Press start!")},y=(e,t,a)=>{let s,o,i,n,c=0,d=0,u=[];const h={carrier:a[0],battleship:a[1],destroyer:a[2],submarine:a[3],patrolboat:a[4]},f=document.querySelector("#firstBoard"),p=document.querySelector("#secondBoard"),g=f.querySelectorAll(".cell"),w=p.querySelectorAll(".cell"),B=[];for(let e of g)e.classList.contains("taken")||B.push(e);for(let e of w)e.classList.contains("taken")||B.push(e);document.querySelectorAll(".draggable").forEach((e=>{e.addEventListener("mousedown",b),e.addEventListener("mouseup",k),e.addEventListener("dragstart",P),e.addEventListener("dragend",V),e.addEventListener("contextmenu",M),B.forEach((e=>{e.addEventListener("contextmenu",x)}))}));let L=null;function b(a){e.removeReservedSpace(e),t.removeReservedSpace(t);const r=a.target.getAttribute("data-name");let s=e.shipsPlaced.filter((e=>r!==e.takenBy.name.toLowerCase())),o=t.shipsPlaced.filter((e=>r!==e.takenBy.name.toLowerCase()));s.forEach((t=>{e.reserveSpace(e,t.col,t.row)})),o.forEach((e=>{t.reserveSpace(t,e.col,e.row)})),m(e),m(t),v("first",e.shipsPlaced),v("second",t.shipsPlaced),y(e,t,l.humanShips)}function k(){e.shipsPlaced.forEach((t=>{e.reserveSpace(e,t.col,t.row)})),t.shipsPlaced.forEach((e=>{t.reserveSpace(t,e.col,e.row)})),m(e),m(t),v("first",e.shipsPlaced),v("second",t.shipsPlaced),y(e,t,l.humanShips)}function P(a){return r(this,void 0,void 0,(function*(){yield new Promise((e=>setTimeout(e,0)));const r=a.target;r.style.visibility="hidden",this.classList.add("dragging"),s=r.getAttribute("data-name"),o=Number(r.getAttribute("data-size")),c=a.offsetX,d=a.offsetY,i=h[s],n=i.isVertical?"vertical":"horizontal","firstBoard"===r.closest(".board").id&&e.removeShip(i,e),"secondBoard"===r.closest(".board").id&&t.removeShip(i,t)}))}function E(e){return function(t){const a=t.target;if("firstBoard"===a.closest(".board").id&&(t.preventDefault(),i)){let t=e-(i.isVertical?10*Math.floor(d/this.offsetHeight):Math.floor(c/this.offsetWidth));const a=[];for(let e=0;e<o;e++){let r=i.isVertical?t+10*e:t+e;g[r]&&(a.push(g[r]),u.push(g[r]))}G(a)&&(a.forEach((e=>{e.classList.add("highlight")})),L||(L=z(u,o)))}if("secondBoard"===a.closest(".board").id&&(t.preventDefault(),i)){let t=e-(i.isVertical?10*Math.floor(d/this.offsetHeight):Math.floor(c/this.offsetWidth));const a=[];for(let e=0;e<o;e++){let r=i.isVertical?t+10*e:t+e;w[r]&&(a.push(w[r]),u.push(w[r]))}G(a)&&(a.forEach((e=>{e.classList.add("highlight")})),L||(L=z(u,o)))}}}function A(){u.forEach((e=>{e.classList.remove("highlight")})),u=[]}function H(a){u.forEach((e=>{e.classList.remove("highlight")}));const r=z(u,o),s=a.target;"firstBoard"===s.closest(".board").id&&i&&null!==L&&(e.canBePlaced(i.size,r[0].dataset.col,r[0].dataset.row,n)?(e.placeShip(i,r[0].dataset.col,r[0].dataset.row,n),e.reserveSpace(e,r[0].dataset.col,r[0].dataset.row)):(e.placeShip(i,L[0].dataset.col,L[0].dataset.row,n),e.reserveSpace(e,L[0].dataset.col,L[0].dataset.row))),"secondBoard"===s.closest(".board").id&&i&&null!==L&&(t.canBePlaced(i.size,r[0].dataset.col,r[0].dataset.row,n)?(t.placeShip(i,r[0].dataset.col,r[0].dataset.row,n),t.reserveSpace(t,r[0].dataset.col,r[0].dataset.row)):(t.placeShip(i,L[0].dataset.col,L[0].dataset.row,n),t.reserveSpace(t,L[0].dataset.col,L[0].dataset.row))),e.removeReservedSpace(e),t.removeReservedSpace(t),e.shipsPlaced.forEach((t=>{e.reserveSpace(e,t.col,t.row)})),t.shipsPlaced.forEach((e=>{t.reserveSpace(t,e.col,e.row)})),m(e),m(t),v("first",e.shipsPlaced),v("second",t.shipsPlaced),y(e,t,l.humanShips),S(),C(),L=null}function V(a){const r=a.target;r.style.visibility="visible",this.classList.remove("dragging"),0===u.length&&("firstBoard"===r.closest(".board").id?L&&e.canBePlaced(i.size,L[0].dataset.col,L[0].dataset.row,n)&&(e.placeShip(i,L[0].dataset.col,L[0].dataset.row,n),e.reserveSpace(e,L[0].dataset.col,L[0].dataset.row),m(e),m(t),v("first",e.shipsPlaced),v("second",t.shipsPlaced),y(e,t,l.humanShips)):"secondBoard"===r.closest(".board").id&&L&&t.canBePlaced(i.size,L[0].dataset.col,L[0].dataset.row,n)&&(t.placeShip(i,L[0].dataset.col,L[0].dataset.row,n),t.reserveSpace(t,L[0].dataset.col,L[0].dataset.row),m(e),m(t),v("first",e.shipsPlaced),v("second",t.shipsPlaced),y(e,t,l.humanShips)))}function G(e){return e.every((e=>e.classList.contains("empty")))&&(e.every((t=>t.dataset.col===e[0].dataset.col))||e.every((t=>t.dataset.row===e[0].dataset.row)))&&e.length===o&&e.every((e=>e.dataset.col>="A"&&e.dataset.col<="J"))&&e.every((e=>Number(e.dataset.row)>=1&&Number(e.dataset.row)<=10))}function z(e,t){return e.slice(Math.min(e.length-t,0))}function M(a){a.preventDefault();const r=a.target;let c;"firstBoard"===r.closest(".board").id&&(c=e),"secondBoard"===r.closest(".board").id&&(c=t),s=r.getAttribute("data-name"),o=Number(r.getAttribute("data-size")),i=h[s];const d=i,u=c.shipsPlaced.filter((e=>e.takenBy.name.toLowerCase()===s));c.removeShip(i,c),c.removeReservedSpace(c),c.shipsPlaced.forEach((e=>{c.reserveSpace(c,e.col,e.row)})),d.rotate(),n=d.isVertical?"vertical":"horizontal",c.canBePlaced(d.size,u[0].col,u[0].row,n)||(d.rotate(),n=d.isVertical?"vertical":"horizontal"),c.placeShip(d,u[0].col,u[0].row,n),c.shipsPlaced.forEach((e=>{c.reserveSpace(c,e.col,e.row)})),m(c),v("first",e.shipsPlaced),v("second",t.shipsPlaced),y(e,t,l.humanShips)}function x(e){e.preventDefault()}g.forEach(((e,t)=>{e.addEventListener("dragover",E(t)),e.addEventListener("dragleave",A),e.addEventListener("drop",H)})),w.forEach(((e,t)=>{e.addEventListener("dragover",E(t)),e.addEventListener("dragleave",A),e.addEventListener("drop",H)}))};a.addEventListener("click",(()=>{p(a,i);document.querySelector("#secondBoard").classList.remove("start")})),i.addEventListener("click",(()=>{p(i,a);const e=document.querySelector("#secondBoard");e.classList.remove("hide"),e.classList.add("start")})),o.addEventListener("click",(()=>r(void 0,void 0,void 0,(function*(){s.removeBoardPointer(),yield r(void 0,void 0,void 0,(function*(){g(!0),d.forEach((e=>e.disabled=!0)),o.textContent="Restarting...",yield l.newGame(),o.textContent="New Game",d.forEach((e=>e.disabled=!1)),g(!1),S(),w()}));const e=document.querySelector("#secondBoard");e.classList.remove("hide"),a.classList.contains("selected")&&e.classList.remove("start"),i.classList.contains("selected")&&(e.classList.add("start"),c.disabled=!0)})))),n.addEventListener("click",(()=>{l.start();document.querySelector("#firstBoard").classList.add("hide");const e=document.querySelector("#secondBoard");e.classList.add("hide"),e.classList.add("start"),n.disabled=!0,c.disabled=!0})),c.addEventListener("click",(()=>{l.computerGameboard.clearBoard(),m(l.computerGameboard),l.randomizeShipsPlacement("first",l.humanGameboard),y(l.humanGameboard,l.computerGameboard,l.humanShips),S(),C()}));let B=1e3;u.forEach((e=>{e.addEventListener("click",(()=>{let t=e;t.checked&&(B=Number(t.value))}))}));const L=()=>B;return{renderBoard:e=>{const a=document.createElement("div");a.classList.add("board"),e===l.humanGameboard?a.id="firstBoard":e===l.computerGameboard&&(a.id="secondBoard"),h(e,a),t.append(a)},refreshBoard:m,handleUserInput:()=>r(void 0,void 0,void 0,(function*(){const e=document.querySelectorAll("#secondBoard .cell");let t;do{t=yield new Promise((t=>{e.forEach((e=>{e.classList.contains("hit")||e.classList.contains("miss")||e.addEventListener("click",(e=>{t(f(e))}),{once:!0})}))}))}while(!t);return{col:t.col.toString(),row:t.row.toString()}})),pVcBtn:a,cVcBtn:i,waiting:g,setBoardPointer:e=>{const t=document.querySelector("#secondBoard");"player"===e?t.classList.add("boardOutline"):"computer"===e&&t.classList.remove("boardOutline")},removeBoardPointer:()=>{document.querySelector("#secondBoard").classList.remove("boardOutline")},createShipOverlay:v,dragAndDrop:y,canBeStarted:S,setTurnMessagePvC:t=>{e.textContent=t?"Player's turn. Take aim and attack!":"Computer's turn. The shot is coming!"},setTurnMessageCvC:t=>{e.textContent=t?"Violet's turn":"Blue's turn"},setGameOverMessagePvC:t=>{"player"===t?e.textContent="Game over, Player wins!":"computer"===t&&(e.textContent="Game over, Computer wins!")},setGameOverMessageCvC:t=>{"player"===t?e.textContent="Game over, Blue Computer wins!":"computer"===t&&(e.textContent="Game over, Violet Computer wins!")},getSpeedValue:L}})(),o=s;var i=function(e,t,a,r){return new(a||(a=Promise))((function(s,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function n(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,n)}l((r=r.apply(e,t||[])).next())}))};const n=(()=>{const r=e(),s=e(),l=a(),c=a();let d=!0,u=t("Carrier"),h=t("Battleship"),m=t("Destroyer"),f=t("Submarine"),p=t("PatrolBoat");const g=[u,h,m,f,p],v=()=>{s.placeShip(u,"A","1","horizontal"),s.placeShip(h,"A","3","horizontal"),s.placeShip(m,"A","5","horizontal"),s.placeShip(f,"A","7","horizontal"),s.placeShip(p,"A","9","horizontal"),s.reserveSpace(s,"A","1"),s.reserveSpace(s,"A","3"),s.reserveSpace(s,"A","5"),s.reserveSpace(s,"A","7"),s.reserveSpace(s,"A","9")},S=()=>s.allSunk(s)?(o.removeBoardPointer(),o.pVcBtn.classList.contains("selected")&&o.setGameOverMessagePvC("player"),o.cVcBtn.classList.contains("selected")&&o.setGameOverMessageCvC("player"),!0):!!r.allSunk(r)&&(o.removeBoardPointer(),o.pVcBtn.classList.contains("selected")&&o.setGameOverMessagePvC("computer"),o.cVcBtn.classList.contains("selected")&&o.setGameOverMessageCvC("computer"),!0),w=e=>{let t;if(e===r?t=c:e===s&&(t=l),e.hitButNotSunk(e)){if(null!==t.getPrevHit()&&null!==t.getLastHit()&&e.getCell(t.getLastHit().col,t.getLastHit().row).takenBy.hitCount>=2&&e.getCell(t.getLastHit().col,t.getLastHit().row).takenBy.hitCount<=4){if(t.finishingAttack(e,t.getLastHit().col,t.getLastHit().row,t.getPrevHit()),e.sinkShip(e,t.getLastHit().col,t.getLastHit().row),S())return}else if(1===e.getCell(t.getLastHit().col,t.getLastHit().row).takenBy.hitCount&&(t.followupAttack(e,t.getLastHit().col,t.getLastHit().row),e.sinkShip(e,t.getLastHit().col,t.getLastHit().row),S()))return}else{const{col:a,row:r}=t.randomAttack(e);if("hit"===e.getCell(a,r).status&&(t.setPrevHit(t.getLastHit()),t.setLastHit({col:a,row:r})),"hit"===e.getCell(a,r).status&&e.getCell(a,r).takenBy.isSunk()&&(e.sinkShip(e,a,r),t.setPrevHit(null),t.setLastHit(null),S()))return}},C=(e,a)=>{a.clearBoard(),(e=>{let a;e===r?(u=t("Carrier"),h=t("Battleship"),m=t("Destroyer"),f=t("Submarine"),p=t("PatrolBoat"),a=[u,h,m,f,p]):e===s&&(a=[t("Carrier"),t("Battleship"),t("Destroyer"),t("Submarine"),t("PatrolBoat")]);n.humanShips.length=0;const o=["A","B","C","D","E","F","G","H","I","J"],i=()=>o[Math.floor(Math.random()*o.length)],l=()=>Math.ceil(10*Math.random()).toString(),c=()=>Math.random()>.5?"horizontal":"vertical";a.forEach((t=>{let a=i(),r=l(),s=c(),o=e.canBePlaced(t.size,a,r,s);for(;!o;)a=i(),r=l(),s=c(),o=e.canBePlaced(t.size,a,r,s);o&&(e.placeShip(t,a,r,s),e.reserveSpace(e,a,r)),n.humanShips.push(t)}))})(a),o.refreshBoard(a),"first"===e&&o.createShipOverlay("first",a.shipsPlaced)},y=()=>{o.cVcBtn.classList.contains("selected")&&(C("first",r),C("second",s),d=!1,i(void 0,void 0,void 0,(function*(){o.removeBoardPointer();let e=!0;for(;!S()&&!d;){if(o.waiting(!0),e){if(o.setTurnMessageCvC(e),yield new Promise((e=>setTimeout(e,o.getSpeedValue()))),!o.cVcBtn.classList.contains("selected")||d)break;w(r),o.refreshBoard(r),e=!1}if(S()||d)break;if(!e){if(o.setTurnMessageCvC(e),yield new Promise((e=>setTimeout(e,o.getSpeedValue()))),!o.cVcBtn.classList.contains("selected")||d)break;w(s),o.refreshBoard(s),e=!0}}d=!1,o.waiting(!1)})),o.refreshBoard(r))},B=()=>{d=!0,l.setPrevHit(null),l.setLastHit(null),c.setPrevHit(null),c.setLastHit(null),r.clearBoard(),s.clearBoard(),v(),o.refreshBoard(r),o.refreshBoard(s),o.createShipOverlay("second",s.shipsPlaced),o.dragAndDrop(r,s,g),o.canBeStarted(),y(),g.forEach((e=>{!0===e.isVertical&&(e.isVertical=!1)}))};return{init:()=>{o.renderBoard(r),o.renderBoard(s),v(),o.refreshBoard(s),o.createShipOverlay("second",s.shipsPlaced),o.dragAndDrop(r,s,g),o.canBeStarted(),y()},humanGameboard:r,computerGameboard:s,restart:B,newGame:()=>i(void 0,void 0,void 0,(function*(){d=!0,yield new Promise((e=>setTimeout(e,o.getSpeedValue()))),d=!1,B()})),start:()=>{o.refreshBoard(r),C("second",s),d=!1,i(void 0,void 0,void 0,(function*(){let e=!0;for(;!S()&&!d;){if(e){o.setTurnMessagePvC(e),o.setBoardPointer("player"),o.waiting(!1);const{col:t,row:a}=yield o.handleUserInput();l.attack(s,t,a),s.sinkShip(s,t,a),o.refreshBoard(s),e=!1}if(S()||d)break;if(!e){if(o.setTurnMessagePvC(e),o.setBoardPointer("computer"),o.waiting(!0),yield new Promise((e=>setTimeout(e,o.getSpeedValue()))),!o.pVcBtn.classList.contains("selected")||d)break;w(r),o.refreshBoard(r),e=!0}}d=!1,o.waiting(!1)}))},randomizeShipsPlacement:C,humanShips:g}})(),l=n;l.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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V29FN0csTUF2Q3RELEtBQ1YsRUFBRzhGLGFBQWE5RyxHQUNoQjJNLEVBQXdCLFNBQVUxTSxHQUNsQytOLEdBQVksRUFwSW1CLE9BQVUsT0FBUSxPQUFRLEdBQVEsWUFDakUsSUFBSVQsR0FBZSxFQUNuQixNQUFRZ0IsTUFBaUJQLEdBQVcsQ0FDaEMsR0FBSVQsRUFBYyxDQUNkLEVBQUdELGtCQUFrQkMsR0FDckIsRUFBR0gsZ0JBQWdCLFVBQ25CLEVBQUcvRixTQUFRLEdBQ1gsTUFBTSxJQUFFOUksRUFBRyxJQUFFQyxTQUFjLEVBQUd5TyxrQkFDOUJZLEVBQU1qSyxPQUFPM0QsRUFBbUIxQixFQUFLQyxHQUNyQ3lCLEVBQWtCc0MsU0FBU3RDLEVBQW1CMUIsRUFBS0MsR0FDbkQsRUFBR3NJLGFBQWE3RyxHQUNoQnNOLEdBQWUsQ0FDbkIsQ0FDQSxHQUFJZ0IsS0FBZ0JQLEVBQ2hCLE1BRUosSUFBS1QsRUFBYyxDQUtmLEdBSkEsRUFBR0Qsa0JBQWtCQyxHQUNyQixFQUFHSCxnQkFBZ0IsWUFDbkIsRUFBRy9GLFNBQVEsU0FDTCxJQUFJdEMsU0FBU0MsR0FBWXlDLFdBQVd6QyxFQUFTLEVBQUcwQyxvQkFDakQsRUFBRzNCLE9BQU8zRixVQUFVQyxTQUFTLGFBQWUyTixFQUM3QyxNQUVKUSxFQUFXeE8sR0FDWCxFQUFHOEcsYUFBYTlHLEdBQ2hCdU4sR0FBZSxDQUNuQixDQUNKLENBQ0FTLEdBQVksRUFDWixFQUFHM0csU0FBUSxFQUNmLEdBc0cwQixFQW1DaURzRiwwQkFBeUI1QixhQUN2RyxFQXRRa0IsR0F1UW5CLElDalJBLEVBQVc4RCxNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL2dhbWVib2FyZC50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvc2hpcC50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvcGxheWVyLnRzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy91aS50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvY29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb250cm9sbGVyIGZyb20gJy4vY29udHJvbGxlcic7XG5jb25zdCBnYW1lYm9hcmRGYWN0b3J5ID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvbHMgPSBbJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onXTtcbiAgICBjb25zdCByb3dzID0gWycxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsICcxMCddO1xuICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgY29uc3Qgc2hpcHNQbGFjZWQgPSBbXTtcbiAgICBjb25zdCBnZW5lcmF0ZUFycmF5ID0gKCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGFycmF5W2ldID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwOyBqICs9IDEpIHtcbiAgICAgICAgICAgICAgICBhcnJheVtpXVtqXSA9IHsgY29sOiBjb2xzW2pdLCByb3c6IHJvd3NbaV0sIHN0YXR1czogJ2VtcHR5JywgdGFrZW5CeTogbnVsbCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBjbGVhckJvYXJkID0gKCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGogKz0gMSkge1xuICAgICAgICAgICAgICAgIGFycmF5W2ldW2pdLnN0YXR1cyA9ICdlbXB0eSc7XG4gICAgICAgICAgICAgICAgYXJyYXlbaV1bal0udGFrZW5CeSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzaGlwc1BsYWNlZC5sZW5ndGggPSAwO1xuICAgIH07XG4gICAgY29uc3QgZ2V0Q2VsbCA9IChjb2wsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBjb2xJbmRleCA9IGNvbHMuaW5kZXhPZihjb2wpO1xuICAgICAgICBjb25zdCByb3dJbmRleCA9IHJvd3MuaW5kZXhPZihyb3cpO1xuICAgICAgICBpZiAoY29sSW5kZXggPT09IC0xIHx8IHJvd0luZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFycmF5W3Jvd0luZGV4XVtjb2xJbmRleF07XG4gICAgfTtcbiAgICBjb25zdCBzZXRDZWxsID0gKGNvbCwgcm93LCBuZXdTdGF0dXMsIG5ld1Rha2VuQnkpID0+IHtcbiAgICAgICAgY29uc3QgY29sSW5kZXggPSBjb2xzLmluZGV4T2YoY29sKTtcbiAgICAgICAgY29uc3Qgcm93SW5kZXggPSByb3dzLmluZGV4T2Yocm93KTtcbiAgICAgICAgaWYgKGNvbEluZGV4ID09PSAtMSB8fCByb3dJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGFycmF5W3Jvd0luZGV4XVtjb2xJbmRleF0uc3RhdHVzID0gbmV3U3RhdHVzO1xuICAgICAgICBpZiAobmV3VGFrZW5CeSkge1xuICAgICAgICAgICAgYXJyYXlbcm93SW5kZXhdW2NvbEluZGV4XS50YWtlbkJ5ID0gbmV3VGFrZW5CeTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyYXlbcm93SW5kZXhdW2NvbEluZGV4XTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVNoaXAgPSAoc2hpcCwgZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGNvbnN0IGdhbWVib2FyZENlbGxzID0gZ2FtZWJvYXJkLmFycmF5LmZsYXQoKTtcbiAgICAgICAgZ2FtZWJvYXJkQ2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNlbGwuc3RhdHVzID09PSAndGFrZW4nICYmIGNlbGwudGFrZW5CeS5uYW1lID09PSBzaGlwLm5hbWUpIHtcbiAgICAgICAgICAgICAgICBjZWxsLnN0YXR1cyA9ICdlbXB0eSc7XG4gICAgICAgICAgICAgICAgY2VsbC50YWtlbkJ5ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNoaXBzUGxhY2VkLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc2hpcC50YWtlbkJ5ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoaXBzUGxhY2VkLnNwbGljZShzaGlwc1BsYWNlZC5pbmRleE9mKHNoaXApLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxldCBib2FyZElkO1xuICAgICAgICAgICAgaWYgKGdhbWVib2FyZCA9PT0gY29udHJvbGxlci5odW1hbkdhbWVib2FyZCkge1xuICAgICAgICAgICAgICAgIGJvYXJkSWQgPSAnZmlyc3RCb2FyZCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChnYW1lYm9hcmQgPT09IGNvbnRyb2xsZXIuY29tcHV0ZXJHYW1lYm9hcmQpIHtcbiAgICAgICAgICAgICAgICBib2FyZElkID0gJ3NlY29uZEJvYXJkJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgIyR7Ym9hcmRJZH0gLmNlbGxgKTtcbiAgICAgICAgICAgIGNlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ3Rha2VuJykgJiYgY2VsbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2hpcE5hbWUnKSA9PT0gc2hpcC5uYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCd0YWtlbicpO1xuICAgICAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2VtcHR5Jyk7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXNoaXBOYW1lJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgcGxhY2VTaGlwID0gKHNoaXAsIGNvbCwgcm93LCBvcmllbnRhdGlvbikgPT4ge1xuICAgICAgICBpZiAob3JpZW50YXRpb24gPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgICAgc2hpcC5pc1ZlcnRpY2FsID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzaGlwLmlzVmVydGljYWwgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzSG9yaXpvbnRhbCA9IG9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCc7XG4gICAgICAgIGNvbnN0IGNlbGxzID0gaXNIb3Jpem9udGFsID8gY29scyA6IHJvd3M7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gY2VsbHMuaW5kZXhPZihpc0hvcml6b250YWwgPyBjb2wgOiByb3cpO1xuICAgICAgICBsZXQgc2hpcENlbGxzID0gW107XG4gICAgICAgIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgKyBzaGlwLnNpemUgPiBjZWxscy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAuc2l6ZTsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q29sID0gaXNIb3Jpem9udGFsID8gY2VsbHNbc3RhcnQgKyBpXSA6IGNvbDtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRSb3cgPSBpc0hvcml6b250YWwgPyByb3cgOiBjZWxsc1tzdGFydCArIGldO1xuICAgICAgICAgICAgaWYgKGdldENlbGwoY3VycmVudENvbCwgY3VycmVudFJvdykuc3RhdHVzICE9PSAnZW1wdHknKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0Q2VsbChjdXJyZW50Q29sLCBjdXJyZW50Um93LCAndGFrZW4nLCBzaGlwKTtcbiAgICAgICAgICAgIHNoaXBDZWxscy5wdXNoKGdldENlbGwoY3VycmVudENvbCwgY3VycmVudFJvdykpO1xuICAgICAgICB9XG4gICAgICAgIHNoaXBzUGxhY2VkLnB1c2goc2hpcENlbGxzWzBdKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBjb25zdCBjYW5CZVBsYWNlZCA9IChzaXplLCBjb2wsIHJvdywgb3JpZW50YXRpb24pID0+IHtcbiAgICAgICAgY29uc3QgaXNIb3Jpem9udGFsID0gb3JpZW50YXRpb24gPT09ICdob3Jpem9udGFsJztcbiAgICAgICAgY29uc3QgY2VsbHMgPSBpc0hvcml6b250YWwgPyBjb2xzIDogcm93cztcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBjZWxscy5pbmRleE9mKGlzSG9yaXpvbnRhbCA/IGNvbCA6IHJvdyk7XG4gICAgICAgIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgKyBzaXplID4gY2VsbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXJlRW1wdHkgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb2wgPSBpc0hvcml6b250YWwgPyBjZWxsc1tzdGFydCArIGldIDogY29sO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFJvdyA9IGlzSG9yaXpvbnRhbCA/IHJvdyA6IGNlbGxzW3N0YXJ0ICsgaV07XG4gICAgICAgICAgICBhcmVFbXB0eS5wdXNoKGdldENlbGwoY3VycmVudENvbCwgY3VycmVudFJvdykuc3RhdHVzID09PSAnZW1wdHknKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJlRW1wdHkuZXZlcnkoKGl0ZW0pID0+IGl0ZW0gPT09IHRydWUpO1xuICAgIH07XG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb2wsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gZ2V0Q2VsbChjb2wsIHJvdyk7XG4gICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ3Rha2VuJykge1xuICAgICAgICAgICAgY2VsbC50YWtlbkJ5LmhpdCgpO1xuICAgICAgICAgICAgc2V0Q2VsbChjb2wsIHJvdywgJ2hpdCcpO1xuICAgICAgICAgICAgcmV0dXJuIGNlbGwuc3RhdHVzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ2VtcHR5JyB8fCBjZWxsLnN0YXR1cyA9PT0gJ3Jlc2VydmVkJykge1xuICAgICAgICAgICAgc2V0Q2VsbChjb2wsIHJvdywgJ21pc3MnKTtcbiAgICAgICAgICAgIHJldHVybiBjZWxsLnN0YXR1cztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IHJlY2VpdmVBcm91bmQgPSAoY29sLCByb3cpID0+IHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGdldENlbGwoY29sLCByb3cpO1xuICAgICAgICBpZiAoY2VsbC5zdGF0dXMgPT09ICdlbXB0eScpIHtcbiAgICAgICAgICAgIHNldENlbGwoY29sLCByb3csICdyZXNlcnZlZCcpO1xuICAgICAgICAgICAgcmV0dXJuIGNlbGwuc3RhdHVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgY29uc3QgcmVzZXJ2ZVNwYWNlID0gKGdhbWVib2FyZCwgY29sLCByb3cpID0+IHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KTtcbiAgICAgICAgaWYgKGNlbGwgJiYgY2VsbC50YWtlbkJ5KSB7XG4gICAgICAgICAgICBjb25zdCBzaGlwQ2VsbHMgPSBnYW1lYm9hcmQuYXJyYXkuZmxhdCgpLmZpbHRlcigoYykgPT4gYy50YWtlbkJ5ICYmIGMudGFrZW5CeS5uYW1lID09PSBjZWxsLnRha2VuQnkubmFtZSk7XG4gICAgICAgICAgICBzaGlwQ2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAwLCByb3c6IC0xIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAwLCByb3c6IDEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IC0xLCByb3c6IDAgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogMCB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogLTEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IC0xLCByb3c6IDEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogLTEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogMSB9LFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9ucy5mb3JFYWNoKChkaXJlY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Q29sID0gU3RyaW5nLmZyb21DaGFyQ29kZShjZWxsLmNvbC5jaGFyQ29kZUF0KDApICsgZGlyZWN0aW9uLmNvbCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1JvdyA9IChOdW1iZXIoY2VsbC5yb3cpICsgZGlyZWN0aW9uLnJvdykudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgbmV3Um93KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBcm91bmQobmV3Q29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlUmVzZXJ2ZWRTcGFjZSA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgZ2FtZWJvYXJkQ2VsbHMgPSBnYW1lYm9hcmQuYXJyYXkuZmxhdCgpO1xuICAgICAgICBnYW1lYm9hcmRDZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2VsbC5zdGF0dXMgPT09ICdyZXNlcnZlZCcpIHtcbiAgICAgICAgICAgICAgICBzZXRDZWxsKGNlbGwuY29sLCBjZWxsLnJvdywgJ2VtcHR5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3Qgc2lua1NoaXAgPSAoZ2FtZWJvYXJkLCBjb2wsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpO1xuICAgICAgICBpZiAoY2VsbCAmJiBjZWxsLnRha2VuQnkgJiYgY2VsbC50YWtlbkJ5LmlzU3VuaygpKSB7XG4gICAgICAgICAgICBjb25zdCBzaGlwQ2VsbHMgPSBnYW1lYm9hcmQuYXJyYXkuZmxhdCgpLmZpbHRlcigoYykgPT4gYy50YWtlbkJ5ICYmIGMudGFrZW5CeS5uYW1lID09PSBjZWxsLnRha2VuQnkubmFtZSk7XG4gICAgICAgICAgICBzaGlwQ2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAwLCByb3c6IC0xIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAwLCByb3c6IDEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IC0xLCByb3c6IDAgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogMCB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogLTEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IC0xLCByb3c6IDEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogLTEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogMSB9LFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9ucy5mb3JFYWNoKChkaXJlY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Q29sID0gU3RyaW5nLmZyb21DaGFyQ29kZShjZWxsLmNvbC5jaGFyQ29kZUF0KDApICsgZGlyZWN0aW9uLmNvbCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1JvdyA9IChOdW1iZXIoY2VsbC5yb3cpICsgZGlyZWN0aW9uLnJvdykudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgbmV3Um93KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2sobmV3Q29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGl0QnV0Tm90U3VuayA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgZ2FtZWJvYXJkQ2VsbHMgPSBnYW1lYm9hcmQuYXJyYXkuZmxhdCgpO1xuICAgICAgICByZXR1cm4gZ2FtZWJvYXJkQ2VsbHMuc29tZSgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNlbGwuc3RhdHVzID09PSAnaGl0JyAmJiBjZWxsLnRha2VuQnkuaXNTdW5rKCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgYWxsU3VuayA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgZ2FtZWJvYXJkQ2VsbHMgPSBnYW1lYm9hcmQuYXJyYXkuZmxhdCgpO1xuICAgICAgICBsZXQgdGFrZW5CeUNlbGxzID0gZ2FtZWJvYXJkQ2VsbHMuZmlsdGVyKChjZWxsKSA9PiBjZWxsLnRha2VuQnkpO1xuICAgICAgICBpZiAodGFrZW5CeUNlbGxzLmxlbmd0aCA+IDAgJiYgdGFrZW5CeUNlbGxzLmV2ZXJ5KChjZWxsKSA9PiBjZWxsLnRha2VuQnkuaXNTdW5rKCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgZ2VuZXJhdGVBcnJheSgpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNsZWFyQm9hcmQsXG4gICAgICAgIGdldENlbGwsXG4gICAgICAgIHNldENlbGwsXG4gICAgICAgIHJlbW92ZVNoaXAsXG4gICAgICAgIHBsYWNlU2hpcCxcbiAgICAgICAgcmVjZWl2ZUF0dGFjayxcbiAgICAgICAgcmVjZWl2ZUFyb3VuZCxcbiAgICAgICAgcmVzZXJ2ZVNwYWNlLFxuICAgICAgICBoaXRCdXROb3RTdW5rLFxuICAgICAgICBzaW5rU2hpcCxcbiAgICAgICAgYWxsU3VuayxcbiAgICAgICAgYXJyYXksXG4gICAgICAgIGNhbkJlUGxhY2VkLFxuICAgICAgICBzaGlwc1BsYWNlZCxcbiAgICAgICAgcmVtb3ZlUmVzZXJ2ZWRTcGFjZSxcbiAgICB9O1xufTtcbmV4cG9ydCBkZWZhdWx0IGdhbWVib2FyZEZhY3Rvcnk7XG4iLCJjb25zdCBzaGlwRmFjdG9yeSA9IChuYW1lKSA9PiB7XG4gICAgbGV0IHNpemU7XG4gICAgaWYgKG5hbWUgPT09ICdDYXJyaWVyJykge1xuICAgICAgICBzaXplID0gNTtcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09ICdCYXR0bGVzaGlwJykge1xuICAgICAgICBzaXplID0gNDtcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09ICdEZXN0cm95ZXInKSB7XG4gICAgICAgIHNpemUgPSAzO1xuICAgIH1cbiAgICBpZiAobmFtZSA9PT0gJ1N1Ym1hcmluZScpIHtcbiAgICAgICAgc2l6ZSA9IDM7XG4gICAgfVxuICAgIGlmIChuYW1lID09PSAnUGF0cm9sQm9hdCcpIHtcbiAgICAgICAgc2l6ZSA9IDI7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIHNpemUsXG4gICAgICAgIGhpdENvdW50OiAwLFxuICAgICAgICBpc1ZlcnRpY2FsOiBmYWxzZSxcbiAgICAgICAgcm90YXRlKCkge1xuICAgICAgICAgICAgdGhpcy5pc1ZlcnRpY2FsID0gIXRoaXMuaXNWZXJ0aWNhbDtcbiAgICAgICAgfSxcbiAgICAgICAgaGl0KCkge1xuICAgICAgICAgICAgdGhpcy5oaXRDb3VudCArPSAxO1xuICAgICAgICB9LFxuICAgICAgICBpc1N1bmsoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oaXRDb3VudCA9PT0gc2l6ZTtcbiAgICAgICAgfSxcbiAgICB9O1xufTtcbmV4cG9ydCBkZWZhdWx0IHNoaXBGYWN0b3J5O1xuIiwiY29uc3QgcGxheWVyRmFjdG9yeSA9ICgpID0+IHtcbiAgICBjb25zdCBjb2xzID0gWydBJywgJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAnSScsICdKJ107XG4gICAgbGV0IHByZXZIaXQgPSBudWxsO1xuICAgIGxldCBsYXN0SGl0ID0gbnVsbDtcbiAgICBjb25zdCBhdHRhY2sgPSAoZ2FtZWJvYXJkLCBjb2wsIHJvdykgPT4ge1xuICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpLnN0YXR1cyAhPT0gJ2hpdCcgJiYgZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpLnN0YXR1cyAhPT0gJ21pc3MnKSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soY29sLCByb3cpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICBzZXRQcmV2SGl0KGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IGNvbCwgcm93OiByb3cgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnYWxyZWFkeSBzaG90JztcbiAgICB9O1xuICAgIGNvbnN0IHJhbmRvbUF0dGFjayA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgbGV0IHJhbmRvbUNvbDtcbiAgICAgICAgbGV0IHJhbmRvbVJvdztcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgcmFuZG9tQ29sID0gY29sc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb2xzLmxlbmd0aCldO1xuICAgICAgICAgICAgcmFuZG9tUm93ID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAxMCkudG9TdHJpbmcoKTtcbiAgICAgICAgfSB3aGlsZSAoZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyA9PT0gJ2hpdCcgfHwgZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyA9PT0gJ21pc3MnKTtcbiAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKHJhbmRvbUNvbCwgcmFuZG9tUm93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKHJhbmRvbUNvbCwgcmFuZG9tUm93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2socmFuZG9tQ29sLCByYW5kb21Sb3cpO1xuICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKHJhbmRvbUNvbCwgcmFuZG9tUm93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICBzZXRMYXN0SGl0KHsgY29sOiByYW5kb21Db2wsIHJvdzogcmFuZG9tUm93IH0pO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLS0nKTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncmFuZG9tQXR0YWNrIHByZXZIaXQnLCBwcmV2SGl0KTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncmFuZG9tQXR0YWNrIGxhc3RIaXQnLCBsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncmFuZG9tQXR0YWNrIHJhbmdlJywgcmFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgcmVzdWx0LCBjb2w6IHJhbmRvbUNvbCwgcm93OiByYW5kb21Sb3cgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyByZXN1bHQ6ICdhbHJlYWR5IHNob3QnLCBjb2w6IHJhbmRvbUNvbCwgcm93OiByYW5kb21Sb3cgfTtcbiAgICB9O1xuICAgIGNvbnN0IGZvbGxvd3VwQXR0YWNrID0gKGdhbWVib2FyZCwgY29sLCByb3cpID0+IHtcbiAgICAgICAgY29uc3QgZGlyZWN0aW9ucyA9IFtcbiAgICAgICAgICAgIHsgY29sOiAwLCByb3c6IC0xIH0sXG4gICAgICAgICAgICB7IGNvbDogMCwgcm93OiAxIH0sXG4gICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogMCB9LFxuICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogMCB9LFxuICAgICAgICBdO1xuICAgICAgICBjb25zdCB2YWxpZERpcmVjdGlvbnMgPSBkaXJlY3Rpb25zLmZpbHRlcigoZGlyZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApICsgZGlyZWN0aW9uLmNvbCk7XG4gICAgICAgICAgICBjb25zdCBuZXdSb3cgPSAoTnVtYmVyKHJvdykgKyBkaXJlY3Rpb24ucm93KS50b1N0cmluZygpO1xuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgbmV3Um93KTtcbiAgICAgICAgICAgIGlmIChjZWxsICYmIGNlbGwuc3RhdHVzICE9PSAnbWlzcycgJiYgY2VsbC5zdGF0dXMgIT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodmFsaWREaXJlY3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJhbmRvbURpcmVjdGlvbiA9IHZhbGlkRGlyZWN0aW9uc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB2YWxpZERpcmVjdGlvbnMubGVuZ3RoKV07XG4gICAgICAgICAgICBjb25zdCBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApICsgcmFuZG9tRGlyZWN0aW9uLmNvbCk7XG4gICAgICAgICAgICBjb25zdCBuZXdSb3cgPSAoTnVtYmVyKHJvdykgKyByYW5kb21EaXJlY3Rpb24ucm93KS50b1N0cmluZygpO1xuICAgICAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2sobmV3Q29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgbmV3Um93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICBzZXRMYXN0SGl0KHsgY29sOiBuZXdDb2wsIHJvdzogbmV3Um93IH0pO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLS0nKTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZm9sbG93dXBBdHRhY2sgcHJldkhpdCcsIHByZXZIaXQpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdmb2xsb3d1cEF0dGFjayBsYXN0SGl0JywgbGFzdEhpdCk7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2ZvbGxvd3VwQXR0YWNrIHJhbmdlJywgcmFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ05pZSBtYSBkb3N0xJlwbnljaCBraWVydW5rw7N3IGRvIGF0YWt1Jyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGxldCByYW5nZSA9IDE7XG4gICAgbGV0IGdvUmlnaHQgPSB0cnVlO1xuICAgIGxldCBnb0Rvd24gPSB0cnVlO1xuICAgIGNvbnN0IGZpbmlzaGluZ0F0dGFjayA9IChnYW1lYm9hcmQsIGNvbCwgcm93LCBwcmV2SGl0KSA9PiB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdzdGFydCBmaW5pc2hpbmdBdHRhY2sgcHJldkhpdCcsIHByZXZIaXQpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnc3RhcnQgZmluaXNoaW5nQXR0YWNrIGxhc3RIaXQnLCB7IGNvbCwgcm93IH0pO1xuICAgICAgICBpZiAocHJldkhpdC5yb3cgPT09IHJvdykge1xuICAgICAgICAgICAgLy8gaG9yaXpvbnRhbCBzaGlwIGNhc2VcbiAgICAgICAgICAgIGlmIChnb1JpZ2h0KSB7XG4gICAgICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdnb1JpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgbGV0IG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgKyByYW5nZSk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgICAgICBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApICsgcmFuZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhuZXdDb2wsIHJvdyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IG5ld0NvbCwgcm93OiByb3cgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3ByZXZIaXQnLCBwcmV2SGl0KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2xhc3RIaXQnLCBsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3JhbmdlJywgcmFuZ2UpO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnLS0tLS0tLS0tLS0tLS0tJyk7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGdvUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZmluaXNoaW5nQXR0YWNrKGdhbWVib2FyZCwgbmV3Q29sLCByb3csIHByZXZIaXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJhbmdlID0gMTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZ29MZWZ0Jyk7XG4gICAgICAgICAgICAgICAgbGV0IG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgLSByYW5nZSk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgICAgICBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApIC0gcmFuZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhuZXdDb2wsIHJvdyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IG5ld0NvbCwgcm93OiByb3cgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3ByZXZIaXQnLCBwcmV2SGl0KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2xhc3RIaXQnLCBsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3JhbmdlJywgcmFuZ2UpO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnLS0tLS0tLS0tLS0tLS0tJyk7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGdvUmlnaHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hpbmdBdHRhY2soZ2FtZWJvYXJkLCBuZXdDb2wsIHJvdywgcHJldkhpdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHByZXZIaXQuY29sID09PSBjb2wpIHtcbiAgICAgICAgICAgIC8vIHZlcnRpY2FsIHNoaXAgY2FzZVxuICAgICAgICAgICAgaWYgKGdvRG93bikge1xuICAgICAgICAgICAgICAgIHJhbmdlID0gMTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZ29Eb3duJyk7XG4gICAgICAgICAgICAgICAgbGV0IG5ld1JvdyA9IChOdW1iZXIocm93KSArIHJhbmdlKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1JvdykgJiYgZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgbmV3Um93ID0gKE51bWJlcihyb3cpICsgcmFuZ2UpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1JvdykgJiYgZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpLnN0YXR1cyAhPT0gJ2hpdCcgJiYgZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpLnN0YXR1cyAhPT0gJ21pc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKGNvbCwgbmV3Um93KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRQcmV2SGl0KGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGFzdEhpdCh7IGNvbDogY29sLCByb3c6IG5ld1JvdyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncHJldkhpdCcsIHByZXZIaXQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbGFzdEhpdCcsIGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncmFuZ2UnLCByYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLS0nKTtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgZ29Eb3duID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGZpbmlzaGluZ0F0dGFjayhnYW1lYm9hcmQsIGNvbCwgbmV3Um93LCBwcmV2SGl0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2dvVXAnKTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Um93ID0gKE51bWJlcihyb3cpIC0gcmFuZ2UpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgICAgICBuZXdSb3cgPSAoTnVtYmVyKHJvdykgLSByYW5nZSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzICE9PSAnaGl0JyAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzICE9PSAnbWlzcycpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soY29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFByZXZIaXQobGFzdEhpdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMYXN0SGl0KHsgY29sOiBjb2wsIHJvdzogbmV3Um93IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdwcmV2SGl0JywgcHJldkhpdCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdsYXN0SGl0JywgbGFzdEhpdCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdyYW5nZScsIHJhbmdlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLScpO1xuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgICAgICAgICBnb0Rvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hpbmdBdHRhY2soZ2FtZWJvYXJkLCBjb2wsIG5ld1JvdywgcHJldkhpdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBnZXRQcmV2SGl0ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gcHJldkhpdDtcbiAgICB9O1xuICAgIGNvbnN0IGdldExhc3RIaXQgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBsYXN0SGl0O1xuICAgIH07XG4gICAgY29uc3Qgc2V0UHJldkhpdCA9IChuZXdQcmV2SGl0KSA9PiB7XG4gICAgICAgIHByZXZIaXQgPSBuZXdQcmV2SGl0O1xuICAgIH07XG4gICAgY29uc3Qgc2V0TGFzdEhpdCA9IChuZXdMYXN0SGl0KSA9PiB7XG4gICAgICAgIGxhc3RIaXQgPSBuZXdMYXN0SGl0O1xuICAgIH07XG4gICAgcmV0dXJuIHsgYXR0YWNrLCByYW5kb21BdHRhY2ssIGZvbGxvd3VwQXR0YWNrLCBmaW5pc2hpbmdBdHRhY2ssIHByZXZIaXQsIGxhc3RIaXQsIGdldFByZXZIaXQsIGdldExhc3RIaXQsIHNldFByZXZIaXQsIHNldExhc3RIaXQgfTtcbn07XG5leHBvcnQgZGVmYXVsdCBwbGF5ZXJGYWN0b3J5O1xuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgY29udHJvbGxlciBmcm9tICcuL2NvbnRyb2xsZXInO1xuY29uc3QgdWkgPSAoKCkgPT4ge1xuICAgIGNvbnN0IHN0YXR1c0JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQm94IHAnKTtcbiAgICBjb25zdCBib2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9hcmRzJyk7XG4gICAgY29uc3QgcFZjQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsYXllclZzQ29tcHV0ZXInKTtcbiAgICBjb25zdCBuZXdHYW1lQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25ld0dhbWUnKTtcbiAgICBjb25zdCBjVmNCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29tcHV0ZXJWc0NvbXB1dGVyJyk7XG4gICAgY29uc3Qgc3RhcnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3RhcnQnKTtcbiAgICBjb25zdCByYW5kb21CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmFuZG9tUGxhY2VtZW50Jyk7XG4gICAgY29uc3QgYWxsQnRucyA9IFtwVmNCdG4sIG5ld0dhbWVCdG4sIGNWY0J0biwgc3RhcnRCdG4sIHJhbmRvbUJ0bl07XG4gICAgY29uc3Qgc3BlZWRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoJ3NwZWVkJyk7XG4gICAgY29uc3QgY3JlYXRlQ2VsbCA9IChjZWxsKSA9PiB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjZWxsJyk7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjZWxsLnN0YXR1cyk7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWNvbCcsIGNlbGwuY29sKTtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcm93JywgY2VsbC5yb3cpO1xuICAgICAgICBpZiAoY2VsbC50YWtlbkJ5KSB7XG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1zaGlwTmFtZScsIGNlbGwudGFrZW5CeS5uYW1lLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH07XG4gICAgY29uc3QgcmVuZGVyQ2VsbHMgPSAoZ2FtZWJvYXJkLCBib2FyZCkgPT4ge1xuICAgICAgICBnYW1lYm9hcmQuYXJyYXkuZm9yRWFjaCgocm93KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgoY29sKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IGNyZWF0ZUNlbGwoY29sKTtcbiAgICAgICAgICAgICAgICBib2FyZC5hcHBlbmQoY2VsbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCByZW5kZXJCb2FyZCA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgYm9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgYm9hcmQuY2xhc3NMaXN0LmFkZCgnYm9hcmQnKTtcbiAgICAgICAgaWYgKGdhbWVib2FyZCA9PT0gY29udHJvbGxlci5odW1hbkdhbWVib2FyZCkge1xuICAgICAgICAgICAgYm9hcmQuaWQgPSAnZmlyc3RCb2FyZCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZ2FtZWJvYXJkID09PSBjb250cm9sbGVyLmNvbXB1dGVyR2FtZWJvYXJkKSB7XG4gICAgICAgICAgICBib2FyZC5pZCA9ICdzZWNvbmRCb2FyZCc7XG4gICAgICAgIH1cbiAgICAgICAgcmVuZGVyQ2VsbHMoZ2FtZWJvYXJkLCBib2FyZCk7XG4gICAgICAgIGJvYXJkcy5hcHBlbmQoYm9hcmQpO1xuICAgIH07XG4gICAgY29uc3QgcmVmcmVzaEJvYXJkID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBsZXQgYm9hcmRJZDtcbiAgICAgICAgaWYgKGdhbWVib2FyZCA9PT0gY29udHJvbGxlci5odW1hbkdhbWVib2FyZCkge1xuICAgICAgICAgICAgYm9hcmRJZCA9ICdmaXJzdEJvYXJkJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChnYW1lYm9hcmQgPT09IGNvbnRyb2xsZXIuY29tcHV0ZXJHYW1lYm9hcmQpIHtcbiAgICAgICAgICAgIGJvYXJkSWQgPSAnc2Vjb25kQm9hcmQnO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7Ym9hcmRJZH1gKTtcbiAgICAgICAgYm9hcmQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIHJlbmRlckNlbGxzKGdhbWVib2FyZCwgYm9hcmQpO1xuICAgIH07XG4gICAgY29uc3QgZ2V0VXNlcklucHV0ID0gKGUpID0+IHtcbiAgICAgICAgaWYgKCFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpdCcpICYmICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21pc3MnKSkge1xuICAgICAgICAgICAgY29uc3QgY29sID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbCcpO1xuICAgICAgICAgICAgY29uc3Qgcm93ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXJvdycpO1xuICAgICAgICAgICAgcmV0dXJuIHsgY29sLCByb3cgfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlVXNlcklucHV0ID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnN0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3NlY29uZEJvYXJkIC5jZWxsJyk7XG4gICAgICAgIGxldCB1c2VySW5wdXQ7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIHVzZXJJbnB1dCA9IHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaXQnKSAmJiAhY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ21pc3MnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShnZXRVc2VySW5wdXQoZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSB3aGlsZSAoIXVzZXJJbnB1dCk7XG4gICAgICAgIGNvbnN0IGNvbCA9IHVzZXJJbnB1dC5jb2wudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3Qgcm93ID0gdXNlcklucHV0LnJvdy50b1N0cmluZygpO1xuICAgICAgICByZXR1cm4geyBjb2wsIHJvdyB9O1xuICAgIH0pO1xuICAgIGNvbnN0IGhhbmRsZVB2QyA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICB3YWl0aW5nKHRydWUpO1xuICAgICAgICBhbGxCdG5zLmZvckVhY2goKGJ0bikgPT4gKGJ0bi5kaXNhYmxlZCA9IHRydWUpKTtcbiAgICAgICAgcFZjQnRuLnRleHRDb250ZW50ID0gJ1Jlc3RhcnRpbmcuLi4nO1xuICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBnZXRTcGVlZFZhbHVlKCkpKTtcbiAgICAgICAgcFZjQnRuLnRleHRDb250ZW50ID0gJ1BsYXllciB2cyBDb21wdXRlcic7XG4gICAgICAgIGFsbEJ0bnMuZm9yRWFjaCgoYnRuKSA9PiAoYnRuLmRpc2FibGVkID0gZmFsc2UpKTtcbiAgICAgICAgd2FpdGluZyhmYWxzZSk7XG4gICAgICAgIGNhbkJlU3RhcnRlZCgpO1xuICAgICAgICBzZXRJbml0TWVzc2FnZSgpO1xuICAgIH0pO1xuICAgIGNvbnN0IGhhbmRsZU5ld0dhbWUgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgd2FpdGluZyh0cnVlKTtcbiAgICAgICAgYWxsQnRucy5mb3JFYWNoKChidG4pID0+IChidG4uZGlzYWJsZWQgPSB0cnVlKSk7XG4gICAgICAgIG5ld0dhbWVCdG4udGV4dENvbnRlbnQgPSAnUmVzdGFydGluZy4uLic7XG4gICAgICAgIHlpZWxkIGNvbnRyb2xsZXIubmV3R2FtZSgpO1xuICAgICAgICBuZXdHYW1lQnRuLnRleHRDb250ZW50ID0gJ05ldyBHYW1lJztcbiAgICAgICAgYWxsQnRucy5mb3JFYWNoKChidG4pID0+IChidG4uZGlzYWJsZWQgPSBmYWxzZSkpO1xuICAgICAgICB3YWl0aW5nKGZhbHNlKTtcbiAgICAgICAgY2FuQmVTdGFydGVkKCk7XG4gICAgICAgIHNldEluaXRNZXNzYWdlKCk7XG4gICAgfSk7XG4gICAgY29uc3QgaGFuZGxlQ3ZDID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHdhaXRpbmcodHJ1ZSk7XG4gICAgICAgIGFsbEJ0bnMuZm9yRWFjaCgoYnRuKSA9PiAoYnRuLmRpc2FibGVkID0gdHJ1ZSkpO1xuICAgICAgICBjVmNCdG4udGV4dENvbnRlbnQgPSAnU3RhcnRpbmcuLi4nO1xuICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBnZXRTcGVlZFZhbHVlKCkpKTtcbiAgICAgICAgY1ZjQnRuLnRleHRDb250ZW50ID0gJ0NvbXB1dGVyIHZzIENvbXB1dGVyJztcbiAgICAgICAgYWxsQnRucy5mb3JFYWNoKChidG4pID0+IChidG4uZGlzYWJsZWQgPSBmYWxzZSkpO1xuICAgICAgICB3YWl0aW5nKGZhbHNlKTtcbiAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICByYW5kb21CdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0pO1xuICAgIGNvbnN0IGhhbmRsZUdhbWVNb2RlID0gKHNlbGVjdGVkRWxlbWVudCwgZGVzZWxlY3RlZEVsZW1lbnQpID0+IHtcbiAgICAgICAgZGVzZWxlY3RlZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgaWYgKCFzZWxlY3RlZEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZEVsZW1lbnQgPT09IHBWY0J0bikge1xuICAgICAgICAgICAgICAgIGhhbmRsZVB2QygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkRWxlbWVudCA9PT0gY1ZjQnRuKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlQ3ZDKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250cm9sbGVyLnJlc3RhcnQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgd2FpdGluZyA9IChib29sKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCd3YWl0JywgYm9vbCk7XG4gICAgfTtcbiAgICBjb25zdCBzZXRCb2FyZFBvaW50ZXIgPSAod2hpY2gpID0+IHtcbiAgICAgICAgY29uc3Qgc2Vjb25kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIGlmICh3aGljaCA9PT0gJ3BsYXllcicpIHtcbiAgICAgICAgICAgIHNlY29uZC5jbGFzc0xpc3QuYWRkKCdib2FyZE91dGxpbmUnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh3aGljaCA9PT0gJ2NvbXB1dGVyJykge1xuICAgICAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5yZW1vdmUoJ2JvYXJkT3V0bGluZScpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVCb2FyZFBvaW50ZXIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlY29uZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWNvbmRCb2FyZCcpO1xuICAgICAgICBzZWNvbmQuY2xhc3NMaXN0LnJlbW92ZSgnYm9hcmRPdXRsaW5lJyk7XG4gICAgfTtcbiAgICBjb25zdCBjcmVhdGVTaGlwT3ZlcmxheSA9IChnYW1lYm9hcmROYW1lLCBzaGlwcykgPT4ge1xuICAgICAgICBzaGlwcy5mb3JFYWNoKChmaXJzdENlbGwpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBjb25zdCBzaGlwTmFtZSA9IGZpcnN0Q2VsbC50YWtlbkJ5Lm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBTaXplID0gZmlyc3RDZWxsLnRha2VuQnkuc2l6ZTtcbiAgICAgICAgICAgIGNvbnN0IGlzVmVydGljYWwgPSBmaXJzdENlbGwudGFrZW5CeS5pc1ZlcnRpY2FsO1xuICAgICAgICAgICAgc2hpcEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2hpcCcsIHNoaXBOYW1lKTtcbiAgICAgICAgICAgIHNoaXBFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1zaXplJywgYCR7c2hpcFNpemV9YCk7XG4gICAgICAgICAgICBzaGlwRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScsIGAke3NoaXBOYW1lfWApO1xuICAgICAgICAgICAgc2hpcEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkcmFnZ2FibGUnLCAndHJ1ZScpO1xuICAgICAgICAgICAgc2hpcEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZHJhZ2dhYmxlJyk7XG4gICAgICAgICAgICBjb25zdCBzZXRTaGlwU3R5bGUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZlcnRpY2FsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoaXBFbGVtZW50LnN0eWxlLndpZHRoID0gc2hpcFNpemUgKiAoY2VsbFNpemUgLyAxNikgKyAncmVtJztcbiAgICAgICAgICAgICAgICAgICAgc2hpcEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gY2VsbFNpemUgLyAxNiArICdyZW0nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc1ZlcnRpY2FsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoaXBFbGVtZW50LnN0eWxlLndpZHRoID0gY2VsbFNpemUgLyAxNiArICdyZW0nO1xuICAgICAgICAgICAgICAgICAgICBzaGlwRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBzaGlwU2l6ZSAqIChjZWxsU2l6ZSAvIDE2KSArICdyZW0nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBsZXQgY2VsbFNpemUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm9hcmQgLmNlbGwnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgICAgIHNldFNoaXBTdHlsZSgpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjZWxsU2l6ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib2FyZCAuY2VsbCcpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgICAgICAgICAgIHNldFNoaXBTdHlsZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgYm9hcmQ7XG4gICAgICAgICAgICBpZiAoZ2FtZWJvYXJkTmFtZSA9PT0gJ2ZpcnN0Jykge1xuICAgICAgICAgICAgICAgIGJvYXJkID0gJ2ZpcnN0Qm9hcmQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZ2FtZWJvYXJkTmFtZSA9PT0gJ3NlY29uZCcpIHtcbiAgICAgICAgICAgICAgICBib2FyZCA9ICdzZWNvbmRCb2FyZCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBmaXJzdENlbGxFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7Ym9hcmR9IC5jZWxsW2RhdGEtY29sPVwiJHtmaXJzdENlbGwuY29sfVwiXVtkYXRhLXJvdz1cIiR7Zmlyc3RDZWxsLnJvd31cIl1gKTtcbiAgICAgICAgICAgIGZpcnN0Q2VsbEVsZW1lbnQuYXBwZW5kQ2hpbGQoc2hpcEVsZW1lbnQpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IGNhbkJlU3RhcnRlZCA9ICgpID0+IHtcbiAgICAgICAgaWYgKGNvbnRyb2xsZXIuaHVtYW5HYW1lYm9hcmQuc2hpcHNQbGFjZWQubGVuZ3RoID09PSA1ICYmIGNvbnRyb2xsZXIuY29tcHV0ZXJHYW1lYm9hcmQuc2hpcHNQbGFjZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzdGFydEJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdGFydEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldEluaXRNZXNzYWdlID0gKCkgPT4ge1xuICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSBcIkRyYWcgYW5kIGRyb3Agc2hpcHMgb250byB0aGUgbGVmdCBib2FyZCBvciB1c2UgJ1JhbmRvbSBQbGFjZW1lbnQnIGJ1dHRvbi4gUmlnaHQgY2xpY2sgdG8gcm90YXRlLiBXaGVuIHJlYWR5LCBwcmVzcyBTdGFydCFcIjtcbiAgICB9O1xuICAgIGNvbnN0IHNldFN0YXJ0TWVzc2FnZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKGNhbkJlU3RhcnRlZCgpKSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSAnWW91IGNhbiBub3cgYmVnaW4gdGhlIGdhbWUuIFByZXNzIHN0YXJ0ISc7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldFR1cm5NZXNzYWdlUHZDID0gKGlzUGxheWVyVHVybikgPT4ge1xuICAgICAgICBpZiAoaXNQbGF5ZXJUdXJuKSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSBcIlBsYXllcidzIHR1cm4uIFRha2UgYWltIGFuZCBhdHRhY2shXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSBcIkNvbXB1dGVyJ3MgdHVybi4gVGhlIHNob3QgaXMgY29taW5nIVwiO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRUdXJuTWVzc2FnZUN2QyA9IChpc1BsYXllclR1cm4pID0+IHtcbiAgICAgICAgaWYgKGlzUGxheWVyVHVybikge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gXCJWaW9sZXQncyB0dXJuXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSBcIkJsdWUncyB0dXJuXCI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldEdhbWVPdmVyTWVzc2FnZVB2QyA9ICh3aG8pID0+IHtcbiAgICAgICAgaWYgKHdobyA9PT0gJ3BsYXllcicpIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9ICdHYW1lIG92ZXIsIFBsYXllciB3aW5zISc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAod2hvID09PSAnY29tcHV0ZXInKSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSAnR2FtZSBvdmVyLCBDb21wdXRlciB3aW5zISc7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldEdhbWVPdmVyTWVzc2FnZUN2QyA9ICh3aG8pID0+IHtcbiAgICAgICAgaWYgKHdobyA9PT0gJ3BsYXllcicpIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9ICdHYW1lIG92ZXIsIEJsdWUgQ29tcHV0ZXIgd2lucyEnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHdobyA9PT0gJ2NvbXB1dGVyJykge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gJ0dhbWUgb3ZlciwgVmlvbGV0IENvbXB1dGVyIHdpbnMhJztcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgZHJhZ0FuZERyb3AgPSAoZmlyc3RHYW1lYm9hcmQsIHNlY29uZEdhbWVib2FyZCwgc2hpcHMpID0+IHtcbiAgICAgICAgbGV0IHNoaXBOYW1lO1xuICAgICAgICBsZXQgc2hpcFNpemU7XG4gICAgICAgIGxldCBncmFiUG9pbnRYID0gMDtcbiAgICAgICAgbGV0IGdyYWJQb2ludFkgPSAwO1xuICAgICAgICBsZXQgc2hpcE9iajtcbiAgICAgICAgbGV0IG9yaWVudGF0aW9uO1xuICAgICAgICBsZXQgaGlnaGxpZ2h0ZWRDZWxscyA9IFtdO1xuICAgICAgICBjb25zdCBzaGlwTmFtZVRvT2JqID0ge1xuICAgICAgICAgICAgY2Fycmllcjogc2hpcHNbMF0sXG4gICAgICAgICAgICBiYXR0bGVzaGlwOiBzaGlwc1sxXSxcbiAgICAgICAgICAgIGRlc3Ryb3llcjogc2hpcHNbMl0sXG4gICAgICAgICAgICBzdWJtYXJpbmU6IHNoaXBzWzNdLFxuICAgICAgICAgICAgcGF0cm9sYm9hdDogc2hpcHNbNF0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGZpcnN0Qm9hcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpcnN0Qm9hcmQnKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kQm9hcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIGNvbnN0IGZpcnN0Qm9hcmRDZWxscyA9IGZpcnN0Qm9hcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJyk7XG4gICAgICAgIGNvbnN0IHNlY29uZEJvYXJkQ2VsbHMgPSBzZWNvbmRCb2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKTtcbiAgICAgICAgY29uc3Qgbm9uU2hpcENlbGxzID0gW107XG4gICAgICAgIGZvciAobGV0IGNlbGwgb2YgZmlyc3RCb2FyZENlbGxzKSB7XG4gICAgICAgICAgICBpZiAoIWNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YWtlbicpKSB7XG4gICAgICAgICAgICAgICAgbm9uU2hpcENlbGxzLnB1c2goY2VsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgY2VsbCBvZiBzZWNvbmRCb2FyZENlbGxzKSB7XG4gICAgICAgICAgICBpZiAoIWNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YWtlbicpKSB7XG4gICAgICAgICAgICAgICAgbm9uU2hpcENlbGxzLnB1c2goY2VsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZHJhZ2dhYmxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcmFnZ2FibGUnKTtcbiAgICAgICAgZHJhZ2dhYmxlcy5mb3JFYWNoKChkcmFnZ2FibGUpID0+IHtcbiAgICAgICAgICAgIGRyYWdnYWJsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVNb3VzZWRvd24pO1xuICAgICAgICAgICAgZHJhZ2dhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBoYW5kbGVNb3VzZXVwKTtcbiAgICAgICAgICAgIGRyYWdnYWJsZS5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBoYW5kbGVEcmFnU3RhcnQpO1xuICAgICAgICAgICAgZHJhZ2dhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCBoYW5kbGVEcmFnRW5kKTtcbiAgICAgICAgICAgIGRyYWdnYWJsZS5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIGhhbmRsZVJvdGF0ZSk7XG4gICAgICAgICAgICBub25TaGlwQ2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBibG9ja1JpZ2h0Q2xpY2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgbGFzdERyYWdnZWQgPSBudWxsO1xuICAgICAgICBmdW5jdGlvbiBoYW5kbGVNb3VzZWRvd24oZSkge1xuICAgICAgICAgICAgZmlyc3RHYW1lYm9hcmQucmVtb3ZlUmVzZXJ2ZWRTcGFjZShmaXJzdEdhbWVib2FyZCk7XG4gICAgICAgICAgICBzZWNvbmRHYW1lYm9hcmQucmVtb3ZlUmVzZXJ2ZWRTcGFjZShzZWNvbmRHYW1lYm9hcmQpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0U2hpcE5hbWUgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScpO1xuICAgICAgICAgICAgbGV0IHVwZGF0ZWRTaGlwc1BsYWNlZEZpcnN0ID0gZmlyc3RHYW1lYm9hcmQuc2hpcHNQbGFjZWQuZmlsdGVyKChzaGlwKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFNoaXBOYW1lICE9PSBzaGlwLnRha2VuQnkubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgdXBkYXRlZFNoaXBzUGxhY2VkVGVtcCA9IHNlY29uZEdhbWVib2FyZC5zaGlwc1BsYWNlZC5maWx0ZXIoKHNoaXApID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0U2hpcE5hbWUgIT09IHNoaXAudGFrZW5CeS5uYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHVwZGF0ZWRTaGlwc1BsYWNlZEZpcnN0LmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgICAgICAgICBmaXJzdEdhbWVib2FyZC5yZXNlcnZlU3BhY2UoZmlyc3RHYW1lYm9hcmQsIHNoaXAuY29sLCBzaGlwLnJvdyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHVwZGF0ZWRTaGlwc1BsYWNlZFRlbXAuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgICAgICAgICAgIHNlY29uZEdhbWVib2FyZC5yZXNlcnZlU3BhY2Uoc2Vjb25kR2FtZWJvYXJkLCBzaGlwLmNvbCwgc2hpcC5yb3cpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZWZyZXNoQm9hcmQoZmlyc3RHYW1lYm9hcmQpO1xuICAgICAgICAgICAgcmVmcmVzaEJvYXJkKHNlY29uZEdhbWVib2FyZCk7XG4gICAgICAgICAgICBjcmVhdGVTaGlwT3ZlcmxheSgnZmlyc3QnLCBmaXJzdEdhbWVib2FyZC5zaGlwc1BsYWNlZCk7XG4gICAgICAgICAgICBjcmVhdGVTaGlwT3ZlcmxheSgnc2Vjb25kJywgc2Vjb25kR2FtZWJvYXJkLnNoaXBzUGxhY2VkKTtcbiAgICAgICAgICAgIGRyYWdBbmREcm9wKGZpcnN0R2FtZWJvYXJkLCBzZWNvbmRHYW1lYm9hcmQsIGNvbnRyb2xsZXIuaHVtYW5TaGlwcyk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlTW91c2V1cCgpIHtcbiAgICAgICAgICAgIGZpcnN0R2FtZWJvYXJkLnNoaXBzUGxhY2VkLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgICAgICAgICBmaXJzdEdhbWVib2FyZC5yZXNlcnZlU3BhY2UoZmlyc3RHYW1lYm9hcmQsIHNoaXAuY29sLCBzaGlwLnJvdyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNlY29uZEdhbWVib2FyZC5zaGlwc1BsYWNlZC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICAgICAgc2Vjb25kR2FtZWJvYXJkLnJlc2VydmVTcGFjZShzZWNvbmRHYW1lYm9hcmQsIHNoaXAuY29sLCBzaGlwLnJvdyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlZnJlc2hCb2FyZChmaXJzdEdhbWVib2FyZCk7XG4gICAgICAgICAgICByZWZyZXNoQm9hcmQoc2Vjb25kR2FtZWJvYXJkKTtcbiAgICAgICAgICAgIGNyZWF0ZVNoaXBPdmVybGF5KCdmaXJzdCcsIGZpcnN0R2FtZWJvYXJkLnNoaXBzUGxhY2VkKTtcbiAgICAgICAgICAgIGNyZWF0ZVNoaXBPdmVybGF5KCdzZWNvbmQnLCBzZWNvbmRHYW1lYm9hcmQuc2hpcHNQbGFjZWQpO1xuICAgICAgICAgICAgZHJhZ0FuZERyb3AoZmlyc3RHYW1lYm9hcmQsIHNlY29uZEdhbWVib2FyZCwgY29udHJvbGxlci5odW1hblNoaXBzKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVEcmFnU3RhcnQoZSkge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2RyYWdnaW5nJyk7XG4gICAgICAgICAgICAgICAgc2hpcE5hbWUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnKTtcbiAgICAgICAgICAgICAgICBzaGlwU2l6ZSA9IE51bWJlcih0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNpemUnKSk7XG4gICAgICAgICAgICAgICAgZ3JhYlBvaW50WCA9IGUub2Zmc2V0WDtcbiAgICAgICAgICAgICAgICBncmFiUG9pbnRZID0gZS5vZmZzZXRZO1xuICAgICAgICAgICAgICAgIHNoaXBPYmogPSBzaGlwTmFtZVRvT2JqW3NoaXBOYW1lXTtcbiAgICAgICAgICAgICAgICBvcmllbnRhdGlvbiA9IHNoaXBPYmouaXNWZXJ0aWNhbCA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCc7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuYm9hcmQnKS5pZCA9PT0gJ2ZpcnN0Qm9hcmQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0R2FtZWJvYXJkLnJlbW92ZVNoaXAoc2hpcE9iaiwgZmlyc3RHYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5ib2FyZCcpLmlkID09PSAnc2Vjb25kQm9hcmQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlY29uZEdhbWVib2FyZC5yZW1vdmVTaGlwKHNoaXBPYmosIHNlY29uZEdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlRHJhZ092ZXIoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQgPT09ICdmaXJzdEJvYXJkJykge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaGlwT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RhcnRDZWxsID0gaW5kZXggLSAoc2hpcE9iai5pc1ZlcnRpY2FsID8gTWF0aC5mbG9vcihncmFiUG9pbnRZIC8gdGhpcy5vZmZzZXRIZWlnaHQpICogMTAgOiBNYXRoLmZsb29yKGdyYWJQb2ludFggLyB0aGlzLm9mZnNldFdpZHRoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b0hpZ2hsaWdodCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwU2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNlbGxJbmRleCA9IHNoaXBPYmouaXNWZXJ0aWNhbCA/IHN0YXJ0Q2VsbCArIGkgKiAxMCA6IHN0YXJ0Q2VsbCArIGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0Qm9hcmRDZWxsc1tjZWxsSW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvSGlnaGxpZ2h0LnB1c2goZmlyc3RCb2FyZENlbGxzW2NlbGxJbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRlZENlbGxzLnB1c2goZmlyc3RCb2FyZENlbGxzW2NlbGxJbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1ZhbGlkUGxhY2VtZW50KHRvSGlnaGxpZ2h0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvSGlnaGxpZ2h0LmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxhc3REcmFnZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3REcmFnZ2VkID0gZ2V0TGFzdFNoaXBTaXplRWxlbWVudHMoaGlnaGxpZ2h0ZWRDZWxscywgc2hpcFNpemUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHRjb25zb2xlLmxvZygnc2hpcCBpcyBvbiB0aGUgZWRnZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQgPT09ICdzZWNvbmRCb2FyZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2hpcE9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXJ0Q2VsbCA9IGluZGV4IC0gKHNoaXBPYmouaXNWZXJ0aWNhbCA/IE1hdGguZmxvb3IoZ3JhYlBvaW50WSAvIHRoaXMub2Zmc2V0SGVpZ2h0KSAqIDEwIDogTWF0aC5mbG9vcihncmFiUG9pbnRYIC8gdGhpcy5vZmZzZXRXaWR0aCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9IaWdobGlnaHQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcFNpemU7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjZWxsSW5kZXggPSBzaGlwT2JqLmlzVmVydGljYWwgPyBzdGFydENlbGwgKyBpICogMTAgOiBzdGFydENlbGwgKyBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWNvbmRCb2FyZENlbGxzW2NlbGxJbmRleF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9IaWdobGlnaHQucHVzaChzZWNvbmRCb2FyZENlbGxzW2NlbGxJbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRlZENlbGxzLnB1c2goc2Vjb25kQm9hcmRDZWxsc1tjZWxsSW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZFBsYWNlbWVudCh0b0hpZ2hsaWdodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b0hpZ2hsaWdodC5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnaGlnaGxpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsYXN0RHJhZ2dlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0RHJhZ2dlZCA9IGdldExhc3RTaGlwU2l6ZUVsZW1lbnRzKGhpZ2hsaWdodGVkQ2VsbHMsIHNoaXBTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx0Y29uc29sZS5sb2coJ3NoaXAgaXMgb24gdGhlIGVkZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlRHJhZ0xlYXZlKCkge1xuICAgICAgICAgICAgaGlnaGxpZ2h0ZWRDZWxscy5mb3JFYWNoKChoaWdobGlnaHRlZENlbGwpID0+IHtcbiAgICAgICAgICAgICAgICBoaWdobGlnaHRlZENlbGwuY2xhc3NMaXN0LnJlbW92ZSgnaGlnaGxpZ2h0Jyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGhpZ2hsaWdodGVkQ2VsbHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVEcm9wKGUpIHtcbiAgICAgICAgICAgIGhpZ2hsaWdodGVkQ2VsbHMuZm9yRWFjaCgoaGlnaGxpZ2h0ZWRDZWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgaGlnaGxpZ2h0ZWRDZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZ2hsaWdodCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBsYXN0ID0gZ2V0TGFzdFNoaXBTaXplRWxlbWVudHMoaGlnaGxpZ2h0ZWRDZWxscywgc2hpcFNpemUpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5ib2FyZCcpLmlkID09PSAnZmlyc3RCb2FyZCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2hpcE9iaiAmJiBsYXN0RHJhZ2dlZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RHYW1lYm9hcmQuY2FuQmVQbGFjZWQoc2hpcE9iai5zaXplLCBsYXN0WzBdLmRhdGFzZXQuY29sLCBsYXN0WzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0R2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwT2JqLCBsYXN0WzBdLmRhdGFzZXQuY29sLCBsYXN0WzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdEdhbWVib2FyZC5yZXNlcnZlU3BhY2UoZmlyc3RHYW1lYm9hcmQsIGxhc3RbMF0uZGF0YXNldC5jb2wsIGxhc3RbMF0uZGF0YXNldC5yb3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RHYW1lYm9hcmQucGxhY2VTaGlwKHNoaXBPYmosIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQuY29sLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LnJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGZpcnN0R2FtZWJvYXJkLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuYm9hcmQnKS5pZCA9PT0gJ3NlY29uZEJvYXJkJykge1xuICAgICAgICAgICAgICAgIGlmIChzaGlwT2JqICYmIGxhc3REcmFnZ2VkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWNvbmRHYW1lYm9hcmQuY2FuQmVQbGFjZWQoc2hpcE9iai5zaXplLCBsYXN0WzBdLmRhdGFzZXQuY29sLCBsYXN0WzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZEdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcE9iaiwgbGFzdFswXS5kYXRhc2V0LmNvbCwgbGFzdFswXS5kYXRhc2V0LnJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kR2FtZWJvYXJkLnJlc2VydmVTcGFjZShzZWNvbmRHYW1lYm9hcmQsIGxhc3RbMF0uZGF0YXNldC5jb2wsIGxhc3RbMF0uZGF0YXNldC5yb3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kR2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwT2JqLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZEdhbWVib2FyZC5yZXNlcnZlU3BhY2Uoc2Vjb25kR2FtZWJvYXJkLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmlyc3RHYW1lYm9hcmQucmVtb3ZlUmVzZXJ2ZWRTcGFjZShmaXJzdEdhbWVib2FyZCk7XG4gICAgICAgICAgICBzZWNvbmRHYW1lYm9hcmQucmVtb3ZlUmVzZXJ2ZWRTcGFjZShzZWNvbmRHYW1lYm9hcmQpO1xuICAgICAgICAgICAgZmlyc3RHYW1lYm9hcmQuc2hpcHNQbGFjZWQuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgICAgICAgICAgIGZpcnN0R2FtZWJvYXJkLnJlc2VydmVTcGFjZShmaXJzdEdhbWVib2FyZCwgc2hpcC5jb2wsIHNoaXAucm93KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2Vjb25kR2FtZWJvYXJkLnNoaXBzUGxhY2VkLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgICAgICAgICBzZWNvbmRHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKHNlY29uZEdhbWVib2FyZCwgc2hpcC5jb2wsIHNoaXAucm93KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVmcmVzaEJvYXJkKGZpcnN0R2FtZWJvYXJkKTtcbiAgICAgICAgICAgIHJlZnJlc2hCb2FyZChzZWNvbmRHYW1lYm9hcmQpO1xuICAgICAgICAgICAgY3JlYXRlU2hpcE92ZXJsYXkoJ2ZpcnN0JywgZmlyc3RHYW1lYm9hcmQuc2hpcHNQbGFjZWQpO1xuICAgICAgICAgICAgY3JlYXRlU2hpcE92ZXJsYXkoJ3NlY29uZCcsIHNlY29uZEdhbWVib2FyZC5zaGlwc1BsYWNlZCk7XG4gICAgICAgICAgICBkcmFnQW5kRHJvcChmaXJzdEdhbWVib2FyZCwgc2Vjb25kR2FtZWJvYXJkLCBjb250cm9sbGVyLmh1bWFuU2hpcHMpO1xuICAgICAgICAgICAgY2FuQmVTdGFydGVkKCk7XG4gICAgICAgICAgICBzZXRTdGFydE1lc3NhZ2UoKTtcbiAgICAgICAgICAgIGxhc3REcmFnZ2VkID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVEcmFnRW5kKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWdnaW5nJyk7XG4gICAgICAgICAgICBpZiAoaGlnaGxpZ2h0ZWRDZWxscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5ib2FyZCcpLmlkID09PSAnZmlyc3RCb2FyZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3REcmFnZ2VkICYmIGZpcnN0R2FtZWJvYXJkLmNhbkJlUGxhY2VkKHNoaXBPYmouc2l6ZSwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5jb2wsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0R2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwT2JqLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0R2FtZWJvYXJkLnJlc2VydmVTcGFjZShmaXJzdEdhbWVib2FyZCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5jb2wsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQucm93KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hCb2FyZChmaXJzdEdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoQm9hcmQoc2Vjb25kR2FtZWJvYXJkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZVNoaXBPdmVybGF5KCdmaXJzdCcsIGZpcnN0R2FtZWJvYXJkLnNoaXBzUGxhY2VkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZVNoaXBPdmVybGF5KCdzZWNvbmQnLCBzZWNvbmRHYW1lYm9hcmQuc2hpcHNQbGFjZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0FuZERyb3AoZmlyc3RHYW1lYm9hcmQsIHNlY29uZEdhbWVib2FyZCwgY29udHJvbGxlci5odW1hblNoaXBzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQgPT09ICdzZWNvbmRCb2FyZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3REcmFnZ2VkICYmIHNlY29uZEdhbWVib2FyZC5jYW5CZVBsYWNlZChzaGlwT2JqLnNpemUsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQuY29sLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LnJvdywgb3JpZW50YXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRHYW1lYm9hcmQucGxhY2VTaGlwKHNoaXBPYmosIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQuY29sLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LnJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kR2FtZWJvYXJkLnJlc2VydmVTcGFjZShzZWNvbmRHYW1lYm9hcmQsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQuY29sLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LnJvdyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoQm9hcmQoZmlyc3RHYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaEJvYXJkKHNlY29uZEdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVTaGlwT3ZlcmxheSgnZmlyc3QnLCBmaXJzdEdhbWVib2FyZC5zaGlwc1BsYWNlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVTaGlwT3ZlcmxheSgnc2Vjb25kJywgc2Vjb25kR2FtZWJvYXJkLnNoaXBzUGxhY2VkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdBbmREcm9wKGZpcnN0R2FtZWJvYXJkLCBzZWNvbmRHYW1lYm9hcmQsIGNvbnRyb2xsZXIuaHVtYW5TaGlwcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaXNWYWxpZFBsYWNlbWVudCh0b0hpZ2hsaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuICh0b0hpZ2hsaWdodC5ldmVyeSgoY2VsbCkgPT4gY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2VtcHR5JykpICYmXG4gICAgICAgICAgICAgICAgKHRvSGlnaGxpZ2h0LmV2ZXJ5KChjZWxsKSA9PiBjZWxsLmRhdGFzZXQuY29sID09PSB0b0hpZ2hsaWdodFswXS5kYXRhc2V0LmNvbCkgfHxcbiAgICAgICAgICAgICAgICAgICAgdG9IaWdobGlnaHQuZXZlcnkoKGNlbGwpID0+IGNlbGwuZGF0YXNldC5yb3cgPT09IHRvSGlnaGxpZ2h0WzBdLmRhdGFzZXQucm93KSkgJiZcbiAgICAgICAgICAgICAgICB0b0hpZ2hsaWdodC5sZW5ndGggPT09IHNoaXBTaXplICYmXG4gICAgICAgICAgICAgICAgdG9IaWdobGlnaHQuZXZlcnkoKGNlbGwpID0+IGNlbGwuZGF0YXNldC5jb2wgPj0gJ0EnICYmIGNlbGwuZGF0YXNldC5jb2wgPD0gJ0onKSAmJlxuICAgICAgICAgICAgICAgIHRvSGlnaGxpZ2h0LmV2ZXJ5KChjZWxsKSA9PiBOdW1iZXIoY2VsbC5kYXRhc2V0LnJvdykgPj0gMSAmJiBOdW1iZXIoY2VsbC5kYXRhc2V0LnJvdykgPD0gMTApKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBnZXRMYXN0U2hpcFNpemVFbGVtZW50cyhoaWdobGlnaHRlZENlbGxzLCBzaGlwU2l6ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGhpZ2hsaWdodGVkQ2VsbHMuc2xpY2UoTWF0aC5taW4oaGlnaGxpZ2h0ZWRDZWxscy5sZW5ndGggLSBzaGlwU2l6ZSwgMCkpO1xuICAgICAgICB9XG4gICAgICAgIGZpcnN0Qm9hcmRDZWxscy5mb3JFYWNoKChjZWxsLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGhhbmRsZURyYWdPdmVyKGluZGV4KSk7XG4gICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGhhbmRsZURyYWdMZWF2ZSk7XG4gICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBoYW5kbGVEcm9wKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlY29uZEJvYXJkQ2VsbHMuZm9yRWFjaCgoY2VsbCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBoYW5kbGVEcmFnT3ZlcihpbmRleCkpO1xuICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCBoYW5kbGVEcmFnTGVhdmUpO1xuICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgaGFuZGxlRHJvcCk7XG4gICAgICAgIH0pO1xuICAgICAgICBmdW5jdGlvbiBoYW5kbGVSb3RhdGUoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBsZXQgZ2FtZWJvYXJkO1xuICAgICAgICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuYm9hcmQnKS5pZCA9PT0gJ2ZpcnN0Qm9hcmQnKSB7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkID0gZmlyc3RHYW1lYm9hcmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5ib2FyZCcpLmlkID09PSAnc2Vjb25kQm9hcmQnKSB7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkID0gc2Vjb25kR2FtZWJvYXJkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hpcE5hbWUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnKTtcbiAgICAgICAgICAgIHNoaXBTaXplID0gTnVtYmVyKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2l6ZScpKTtcbiAgICAgICAgICAgIHNoaXBPYmogPSBzaGlwTmFtZVRvT2JqW3NoaXBOYW1lXTtcbiAgICAgICAgICAgIGNvbnN0IHRlbXBTaGlwID0gc2hpcE9iajtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBnYW1lYm9hcmQuc2hpcHNQbGFjZWQuZmlsdGVyKChzaGlwKSA9PiBzaGlwLnRha2VuQnkubmFtZS50b0xvd2VyQ2FzZSgpID09PSBzaGlwTmFtZSk7XG4gICAgICAgICAgICBnYW1lYm9hcmQucmVtb3ZlU2hpcChzaGlwT2JqLCBnYW1lYm9hcmQpO1xuICAgICAgICAgICAgZ2FtZWJvYXJkLnJlbW92ZVJlc2VydmVkU3BhY2UoZ2FtZWJvYXJkKTtcbiAgICAgICAgICAgIGdhbWVib2FyZC5zaGlwc1BsYWNlZC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnJlc2VydmVTcGFjZShnYW1lYm9hcmQsIHNoaXAuY29sLCBzaGlwLnJvdyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRlbXBTaGlwLnJvdGF0ZSgpO1xuICAgICAgICAgICAgb3JpZW50YXRpb24gPSB0ZW1wU2hpcC5pc1ZlcnRpY2FsID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJztcbiAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuY2FuQmVQbGFjZWQodGVtcFNoaXAuc2l6ZSwgY3VycmVudFswXS5jb2wsIGN1cnJlbnRbMF0ucm93LCBvcmllbnRhdGlvbikpIHtcbiAgICAgICAgICAgICAgICBnYW1lYm9hcmQucGxhY2VTaGlwKHRlbXBTaGlwLCBjdXJyZW50WzBdLmNvbCwgY3VycmVudFswXS5yb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRlbXBTaGlwLnJvdGF0ZSgpO1xuICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uID0gdGVtcFNoaXAuaXNWZXJ0aWNhbCA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCc7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnBsYWNlU2hpcCh0ZW1wU2hpcCwgY3VycmVudFswXS5jb2wsIGN1cnJlbnRbMF0ucm93LCBvcmllbnRhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnYW1lYm9hcmQuc2hpcHNQbGFjZWQuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgICAgICAgICAgIGdhbWVib2FyZC5yZXNlcnZlU3BhY2UoZ2FtZWJvYXJkLCBzaGlwLmNvbCwgc2hpcC5yb3cpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZWZyZXNoQm9hcmQoZ2FtZWJvYXJkKTtcbiAgICAgICAgICAgIGNyZWF0ZVNoaXBPdmVybGF5KCdmaXJzdCcsIGZpcnN0R2FtZWJvYXJkLnNoaXBzUGxhY2VkKTtcbiAgICAgICAgICAgIGNyZWF0ZVNoaXBPdmVybGF5KCdzZWNvbmQnLCBzZWNvbmRHYW1lYm9hcmQuc2hpcHNQbGFjZWQpO1xuICAgICAgICAgICAgZHJhZ0FuZERyb3AoZmlyc3RHYW1lYm9hcmQsIHNlY29uZEdhbWVib2FyZCwgY29udHJvbGxlci5odW1hblNoaXBzKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBibG9ja1JpZ2h0Q2xpY2soZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBwVmNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGhhbmRsZUdhbWVNb2RlKHBWY0J0biwgY1ZjQnRuKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIHNlY29uZC5jbGFzc0xpc3QucmVtb3ZlKCdzdGFydCcpO1xuICAgIH0pO1xuICAgIGNWY0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgaGFuZGxlR2FtZU1vZGUoY1ZjQnRuLCBwVmNCdG4pO1xuICAgICAgICBjb25zdCBzZWNvbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5hZGQoJ3N0YXJ0Jyk7XG4gICAgfSk7XG4gICAgbmV3R2FtZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICB1aS5yZW1vdmVCb2FyZFBvaW50ZXIoKTtcbiAgICAgICAgeWllbGQgaGFuZGxlTmV3R2FtZSgpO1xuICAgICAgICBjb25zdCBzZWNvbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcbiAgICAgICAgaWYgKHBWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgIHNlY29uZC5jbGFzc0xpc3QucmVtb3ZlKCdzdGFydCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBzZWNvbmQuY2xhc3NMaXN0LmFkZCgnc3RhcnQnKTtcbiAgICAgICAgICAgIHJhbmRvbUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KSk7XG4gICAgc3RhcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNvbnRyb2xsZXIuc3RhcnQoKTtcbiAgICAgICAgY29uc3QgZmlyc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZmlyc3RCb2FyZCcpO1xuICAgICAgICBmaXJzdC5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XG4gICAgICAgIGNvbnN0IHNlY29uZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWNvbmRCb2FyZCcpO1xuICAgICAgICBzZWNvbmQuY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xuICAgICAgICBzZWNvbmQuY2xhc3NMaXN0LmFkZCgnc3RhcnQnKTtcbiAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICByYW5kb21CdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0pO1xuICAgIHJhbmRvbUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY29udHJvbGxlci5jb21wdXRlckdhbWVib2FyZC5jbGVhckJvYXJkKCk7XG4gICAgICAgIHJlZnJlc2hCb2FyZChjb250cm9sbGVyLmNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgY29udHJvbGxlci5yYW5kb21pemVTaGlwc1BsYWNlbWVudCgnZmlyc3QnLCBjb250cm9sbGVyLmh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgZHJhZ0FuZERyb3AoY29udHJvbGxlci5odW1hbkdhbWVib2FyZCwgY29udHJvbGxlci5jb21wdXRlckdhbWVib2FyZCwgY29udHJvbGxlci5odW1hblNoaXBzKTtcbiAgICAgICAgY2FuQmVTdGFydGVkKCk7XG4gICAgICAgIHNldFN0YXJ0TWVzc2FnZSgpO1xuICAgIH0pO1xuICAgIGxldCBzcGVlZFZhbHVlID0gMTAwMDtcbiAgICBzcGVlZHMuZm9yRWFjaCgoc3BlZWQpID0+IHtcbiAgICAgICAgc3BlZWQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgaW5wdXQgPSBzcGVlZDtcbiAgICAgICAgICAgIGlmIChpbnB1dC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgc3BlZWRWYWx1ZSA9IE51bWJlcihpbnB1dC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGNvbnN0IGdldFNwZWVkVmFsdWUgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBzcGVlZFZhbHVlO1xuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVuZGVyQm9hcmQsXG4gICAgICAgIHJlZnJlc2hCb2FyZCxcbiAgICAgICAgaGFuZGxlVXNlcklucHV0LFxuICAgICAgICBwVmNCdG4sXG4gICAgICAgIGNWY0J0bixcbiAgICAgICAgd2FpdGluZyxcbiAgICAgICAgc2V0Qm9hcmRQb2ludGVyLFxuICAgICAgICByZW1vdmVCb2FyZFBvaW50ZXIsXG4gICAgICAgIGNyZWF0ZVNoaXBPdmVybGF5LFxuICAgICAgICBkcmFnQW5kRHJvcCxcbiAgICAgICAgY2FuQmVTdGFydGVkLFxuICAgICAgICBzZXRUdXJuTWVzc2FnZVB2QyxcbiAgICAgICAgc2V0VHVybk1lc3NhZ2VDdkMsXG4gICAgICAgIHNldEdhbWVPdmVyTWVzc2FnZVB2QyxcbiAgICAgICAgc2V0R2FtZU92ZXJNZXNzYWdlQ3ZDLFxuICAgICAgICBnZXRTcGVlZFZhbHVlLFxuICAgIH07XG59KSgpO1xuZXhwb3J0IGRlZmF1bHQgdWk7XG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCBnYW1lYm9hcmRGYWN0b3J5IGZyb20gJy4vZ2FtZWJvYXJkJztcbmltcG9ydCBzaGlwRmFjdG9yeSBmcm9tICcuL3NoaXAnO1xuaW1wb3J0IHBsYXllckZhY3RvcnkgZnJvbSAnLi9wbGF5ZXInO1xuaW1wb3J0IHVpIGZyb20gJy4vdWknO1xuY29uc3QgY29udHJvbGxlciA9ICgoKSA9PiB7XG4gICAgY29uc3QgaHVtYW5HYW1lYm9hcmQgPSBnYW1lYm9hcmRGYWN0b3J5KCk7XG4gICAgY29uc3QgY29tcHV0ZXJHYW1lYm9hcmQgPSBnYW1lYm9hcmRGYWN0b3J5KCk7XG4gICAgY29uc3QgaHVtYW4gPSBwbGF5ZXJGYWN0b3J5KCk7XG4gICAgY29uc3QgY29tcHV0ZXIgPSBwbGF5ZXJGYWN0b3J5KCk7XG4gICAgbGV0IGlzU3RvcHBlZCA9IHRydWU7XG4gICAgbGV0IGh1bWFuQ2FycmllciA9IHNoaXBGYWN0b3J5KCdDYXJyaWVyJyk7XG4gICAgbGV0IGh1bWFuQmF0dGxlc2hpcCA9IHNoaXBGYWN0b3J5KCdCYXR0bGVzaGlwJyk7XG4gICAgbGV0IGh1bWFuRGVzdHJveWVyID0gc2hpcEZhY3RvcnkoJ0Rlc3Ryb3llcicpO1xuICAgIGxldCBodW1hblN1Ym1hcmluZSA9IHNoaXBGYWN0b3J5KCdTdWJtYXJpbmUnKTtcbiAgICBsZXQgaHVtYW5QYXRyb2xib2F0ID0gc2hpcEZhY3RvcnkoJ1BhdHJvbEJvYXQnKTtcbiAgICBjb25zdCBodW1hblNoaXBzID0gW2h1bWFuQ2FycmllciwgaHVtYW5CYXR0bGVzaGlwLCBodW1hbkRlc3Ryb3llciwgaHVtYW5TdWJtYXJpbmUsIGh1bWFuUGF0cm9sYm9hdF07XG4gICAgY29uc3QgcG9wdWxhdGVTaGlwcyA9ICgpID0+IHtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucGxhY2VTaGlwKGh1bWFuQ2FycmllciwgJ0EnLCAnMScsICdob3Jpem9udGFsJyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnBsYWNlU2hpcChodW1hbkJhdHRsZXNoaXAsICdBJywgJzMnLCAnaG9yaXpvbnRhbCcpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5wbGFjZVNoaXAoaHVtYW5EZXN0cm95ZXIsICdBJywgJzUnLCAnaG9yaXpvbnRhbCcpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5wbGFjZVNoaXAoaHVtYW5TdWJtYXJpbmUsICdBJywgJzcnLCAnaG9yaXpvbnRhbCcpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5wbGFjZVNoaXAoaHVtYW5QYXRyb2xib2F0LCAnQScsICc5JywgJ2hvcml6b250YWwnKTtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGNvbXB1dGVyR2FtZWJvYXJkLCAnQScsICcxJyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnJlc2VydmVTcGFjZShjb21wdXRlckdhbWVib2FyZCwgJ0EnLCAnMycpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5yZXNlcnZlU3BhY2UoY29tcHV0ZXJHYW1lYm9hcmQsICdBJywgJzUnKTtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGNvbXB1dGVyR2FtZWJvYXJkLCAnQScsICc3Jyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnJlc2VydmVTcGFjZShjb21wdXRlckdhbWVib2FyZCwgJ0EnLCAnOScpO1xuICAgIH07XG4gICAgY29uc3QgaXNHYW1lT3ZlciA9ICgpID0+IHtcbiAgICAgICAgaWYgKGNvbXB1dGVyR2FtZWJvYXJkLmFsbFN1bmsoY29tcHV0ZXJHYW1lYm9hcmQpKSB7XG4gICAgICAgICAgICB1aS5yZW1vdmVCb2FyZFBvaW50ZXIoKTtcbiAgICAgICAgICAgIGlmICh1aS5wVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgdWkuc2V0R2FtZU92ZXJNZXNzYWdlUHZDKCdwbGF5ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1aS5jVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgdWkuc2V0R2FtZU92ZXJNZXNzYWdlQ3ZDKCdwbGF5ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdBbGwgY29tcHV0ZXIgc2hpcHMgYXJlIHN1bmsuIEh1bWFuIHBsYXllciB3b24hJyk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHVtYW5HYW1lYm9hcmQuYWxsU3VuayhodW1hbkdhbWVib2FyZCkpIHtcbiAgICAgICAgICAgIHVpLnJlbW92ZUJvYXJkUG9pbnRlcigpO1xuICAgICAgICAgICAgaWYgKHVpLnBWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgICAgICB1aS5zZXRHYW1lT3Zlck1lc3NhZ2VQdkMoJ2NvbXB1dGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodWkuY1ZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgICAgIHVpLnNldEdhbWVPdmVyTWVzc2FnZUN2QygnY29tcHV0ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdBbGwgaHVtYW4gc2hpcHMgYXJlIHN1bmsuIENvbXB1dGVyIHBsYXllciB3b24hJyk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBjb25zdCBjb21wdXRlckFJID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBsZXQgcGxheWVyO1xuICAgICAgICBpZiAoZ2FtZWJvYXJkID09PSBodW1hbkdhbWVib2FyZCkge1xuICAgICAgICAgICAgcGxheWVyID0gY29tcHV0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZ2FtZWJvYXJkID09PSBjb21wdXRlckdhbWVib2FyZCkge1xuICAgICAgICAgICAgcGxheWVyID0gaHVtYW47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdhbWVib2FyZC5oaXRCdXROb3RTdW5rKGdhbWVib2FyZCkpIHtcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuZ2V0UHJldkhpdCgpICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgcGxheWVyLmdldExhc3RIaXQoKSAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIGdhbWVib2FyZC5nZXRDZWxsKHBsYXllci5nZXRMYXN0SGl0KCkuY29sLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLnJvdykudGFrZW5CeS5oaXRDb3VudCA+PSAyICYmXG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLmdldENlbGwocGxheWVyLmdldExhc3RIaXQoKS5jb2wsIHBsYXllci5nZXRMYXN0SGl0KCkucm93KS50YWtlbkJ5LmhpdENvdW50IDw9IDQpIHtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnRklOSVNIOiA+PSAyIHRyYWZpZW5pYSB3IHN0YXRlaycsIHBsYXllci5nZXRQcmV2SGl0KCkpO1xuICAgICAgICAgICAgICAgIHBsYXllci5maW5pc2hpbmdBdHRhY2soZ2FtZWJvYXJkLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLmNvbCwgcGxheWVyLmdldExhc3RIaXQoKS5yb3csIHBsYXllci5nZXRQcmV2SGl0KCkpO1xuICAgICAgICAgICAgICAgIGdhbWVib2FyZC5zaW5rU2hpcChnYW1lYm9hcmQsIHBsYXllci5nZXRMYXN0SGl0KCkuY29sLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLnJvdyk7XG4gICAgICAgICAgICAgICAgaWYgKGlzR2FtZU92ZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZ2FtZWJvYXJkLmdldENlbGwocGxheWVyLmdldExhc3RIaXQoKS5jb2wsIHBsYXllci5nZXRMYXN0SGl0KCkucm93KS50YWtlbkJ5LmhpdENvdW50ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLmZvbGxvd3VwQXR0YWNrKGdhbWVib2FyZCwgcGxheWVyLmdldExhc3RIaXQoKS5jb2wsIHBsYXllci5nZXRMYXN0SGl0KCkucm93KTtcbiAgICAgICAgICAgICAgICBnYW1lYm9hcmQuc2lua1NoaXAoZ2FtZWJvYXJkLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLmNvbCwgcGxheWVyLmdldExhc3RIaXQoKS5yb3cpO1xuICAgICAgICAgICAgICAgIGlmIChpc0dhbWVPdmVyKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHsgY29sLCByb3cgfSA9IHBsYXllci5yYW5kb21BdHRhY2soZ2FtZWJvYXJkKTtcbiAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIHJvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgIHBsYXllci5zZXRQcmV2SGl0KHBsYXllci5nZXRMYXN0SGl0KCkpO1xuICAgICAgICAgICAgICAgIHBsYXllci5zZXRMYXN0SGl0KHsgY29sLCByb3cgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpLnN0YXR1cyA9PT0gJ2hpdCcgJiYgZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpLnRha2VuQnkuaXNTdW5rKCkpIHtcbiAgICAgICAgICAgICAgICBnYW1lYm9hcmQuc2lua1NoaXAoZ2FtZWJvYXJkLCBjb2wsIHJvdyk7XG4gICAgICAgICAgICAgICAgcGxheWVyLnNldFByZXZIaXQobnVsbCk7XG4gICAgICAgICAgICAgICAgcGxheWVyLnNldExhc3RIaXQobnVsbCk7XG4gICAgICAgICAgICAgICAgaWYgKGlzR2FtZU92ZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBwbGF5ZXJWc0NvbXB1dGVyTW9kZSA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBsZXQgaXNQbGF5ZXJUdXJuID0gdHJ1ZTtcbiAgICAgICAgd2hpbGUgKCFpc0dhbWVPdmVyKCkgJiYgIWlzU3RvcHBlZCkge1xuICAgICAgICAgICAgaWYgKGlzUGxheWVyVHVybikge1xuICAgICAgICAgICAgICAgIHVpLnNldFR1cm5NZXNzYWdlUHZDKGlzUGxheWVyVHVybik7XG4gICAgICAgICAgICAgICAgdWkuc2V0Qm9hcmRQb2ludGVyKCdwbGF5ZXInKTtcbiAgICAgICAgICAgICAgICB1aS53YWl0aW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGNvbCwgcm93IH0gPSB5aWVsZCB1aS5oYW5kbGVVc2VySW5wdXQoKTtcbiAgICAgICAgICAgICAgICBodW1hbi5hdHRhY2soY29tcHV0ZXJHYW1lYm9hcmQsIGNvbCwgcm93KTtcbiAgICAgICAgICAgICAgICBjb21wdXRlckdhbWVib2FyZC5zaW5rU2hpcChjb21wdXRlckdhbWVib2FyZCwgY29sLCByb3cpO1xuICAgICAgICAgICAgICAgIHVpLnJlZnJlc2hCb2FyZChjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgaXNQbGF5ZXJUdXJuID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNHYW1lT3ZlcigpIHx8IGlzU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc1BsYXllclR1cm4pIHtcbiAgICAgICAgICAgICAgICB1aS5zZXRUdXJuTWVzc2FnZVB2Qyhpc1BsYXllclR1cm4pO1xuICAgICAgICAgICAgICAgIHVpLnNldEJvYXJkUG9pbnRlcignY29tcHV0ZXInKTtcbiAgICAgICAgICAgICAgICB1aS53YWl0aW5nKHRydWUpO1xuICAgICAgICAgICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIHVpLmdldFNwZWVkVmFsdWUoKSkpO1xuICAgICAgICAgICAgICAgIGlmICghdWkucFZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSB8fCBpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbXB1dGVyQUkoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgIHVpLnJlZnJlc2hCb2FyZChodW1hbkdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgaXNQbGF5ZXJUdXJuID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgdWkud2FpdGluZyhmYWxzZSk7XG4gICAgfSk7XG4gICAgY29uc3QgY29tcHV0ZXJWc0NvbXB1dGVyTW9kZSA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICB1aS5yZW1vdmVCb2FyZFBvaW50ZXIoKTtcbiAgICAgICAgbGV0IGlzUGxheWVyVHVybiA9IHRydWU7XG4gICAgICAgIHdoaWxlICghaXNHYW1lT3ZlcigpICYmICFpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHVpLndhaXRpbmcodHJ1ZSk7XG4gICAgICAgICAgICBpZiAoaXNQbGF5ZXJUdXJuKSB7XG4gICAgICAgICAgICAgICAgdWkuc2V0VHVybk1lc3NhZ2VDdkMoaXNQbGF5ZXJUdXJuKTtcbiAgICAgICAgICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCB1aS5nZXRTcGVlZFZhbHVlKCkpKTtcbiAgICAgICAgICAgICAgICBpZiAoIXVpLmNWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykgfHwgaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb21wdXRlckFJKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgICAgICAgICB1aS5yZWZyZXNoQm9hcmQoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgIGlzUGxheWVyVHVybiA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzR2FtZU92ZXIoKSB8fCBpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNQbGF5ZXJUdXJuKSB7XG4gICAgICAgICAgICAgICAgdWkuc2V0VHVybk1lc3NhZ2VDdkMoaXNQbGF5ZXJUdXJuKTtcbiAgICAgICAgICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCB1aS5nZXRTcGVlZFZhbHVlKCkpKTtcbiAgICAgICAgICAgICAgICBpZiAoIXVpLmNWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykgfHwgaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb21wdXRlckFJKGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgICAgICAgICB1aS5yZWZyZXNoQm9hcmQoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgIGlzUGxheWVyVHVybiA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHVpLndhaXRpbmcoZmFsc2UpO1xuICAgIH0pO1xuICAgIGNvbnN0IHJhbmRvbVBsYWNlbWVudCA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgbGV0IGFsbFNoaXBzO1xuICAgICAgICBpZiAoZ2FtZWJvYXJkID09PSBodW1hbkdhbWVib2FyZCkge1xuICAgICAgICAgICAgaHVtYW5DYXJyaWVyID0gc2hpcEZhY3RvcnkoJ0NhcnJpZXInKTtcbiAgICAgICAgICAgIGh1bWFuQmF0dGxlc2hpcCA9IHNoaXBGYWN0b3J5KCdCYXR0bGVzaGlwJyk7XG4gICAgICAgICAgICBodW1hbkRlc3Ryb3llciA9IHNoaXBGYWN0b3J5KCdEZXN0cm95ZXInKTtcbiAgICAgICAgICAgIGh1bWFuU3VibWFyaW5lID0gc2hpcEZhY3RvcnkoJ1N1Ym1hcmluZScpO1xuICAgICAgICAgICAgaHVtYW5QYXRyb2xib2F0ID0gc2hpcEZhY3RvcnkoJ1BhdHJvbEJvYXQnKTtcbiAgICAgICAgICAgIGFsbFNoaXBzID0gW2h1bWFuQ2FycmllciwgaHVtYW5CYXR0bGVzaGlwLCBodW1hbkRlc3Ryb3llciwgaHVtYW5TdWJtYXJpbmUsIGh1bWFuUGF0cm9sYm9hdF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZ2FtZWJvYXJkID09PSBjb21wdXRlckdhbWVib2FyZCkge1xuICAgICAgICAgICAgY29uc3QgY29tcHV0ZXJDYXJyaWVyID0gc2hpcEZhY3RvcnkoJ0NhcnJpZXInKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVyQmF0dGxlc2hpcCA9IHNoaXBGYWN0b3J5KCdCYXR0bGVzaGlwJyk7XG4gICAgICAgICAgICBjb25zdCBjb21wdXRlckRlc3Ryb3llciA9IHNoaXBGYWN0b3J5KCdEZXN0cm95ZXInKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVyU3VibWFyaW5lID0gc2hpcEZhY3RvcnkoJ1N1Ym1hcmluZScpO1xuICAgICAgICAgICAgY29uc3QgY29tcHV0ZXJQYXRyb2xib2F0ID0gc2hpcEZhY3RvcnkoJ1BhdHJvbEJvYXQnKTtcbiAgICAgICAgICAgIGFsbFNoaXBzID0gW2NvbXB1dGVyQ2FycmllciwgY29tcHV0ZXJCYXR0bGVzaGlwLCBjb21wdXRlckRlc3Ryb3llciwgY29tcHV0ZXJTdWJtYXJpbmUsIGNvbXB1dGVyUGF0cm9sYm9hdF07XG4gICAgICAgIH1cbiAgICAgICAgY29udHJvbGxlci5odW1hblNoaXBzLmxlbmd0aCA9IDA7XG4gICAgICAgIGNvbnN0IGNvbHMgPSBbJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onXTtcbiAgICAgICAgY29uc3QgcmFuZG9tQ29sID0gKCkgPT4gY29sc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb2xzLmxlbmd0aCldO1xuICAgICAgICBjb25zdCByYW5kb21Sb3cgPSAoKSA9PiBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIDEwKS50b1N0cmluZygpO1xuICAgICAgICBjb25zdCByYW5kb21PcmllbnRhdGlvbiA9ICgpID0+IChNYXRoLnJhbmRvbSgpID4gMC41ID8gJ2hvcml6b250YWwnIDogJ3ZlcnRpY2FsJyk7XG4gICAgICAgIGFsbFNoaXBzLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgICAgIGxldCBjb2wgPSByYW5kb21Db2woKTtcbiAgICAgICAgICAgIGxldCByb3cgPSByYW5kb21Sb3coKTtcbiAgICAgICAgICAgIGxldCBvcmllbnRhdGlvbiA9IHJhbmRvbU9yaWVudGF0aW9uKCk7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gZ2FtZWJvYXJkLmNhbkJlUGxhY2VkKHNoaXAuc2l6ZSwgY29sLCByb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgIHdoaWxlICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgY29sID0gcmFuZG9tQ29sKCk7XG4gICAgICAgICAgICAgICAgcm93ID0gcmFuZG9tUm93KCk7XG4gICAgICAgICAgICAgICAgb3JpZW50YXRpb24gPSByYW5kb21PcmllbnRhdGlvbigpO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGdhbWVib2FyZC5jYW5CZVBsYWNlZChzaGlwLnNpemUsIGNvbCwgcm93LCBvcmllbnRhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwLCBjb2wsIHJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICAgICAgICAgIGdhbWVib2FyZC5yZXNlcnZlU3BhY2UoZ2FtZWJvYXJkLCBjb2wsIHJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250cm9sbGVyLmh1bWFuU2hpcHMucHVzaChzaGlwKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCByYW5kb21pemVTaGlwc1BsYWNlbWVudCA9IChnYW1lYm9hcmROYW1lLCBnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgZ2FtZWJvYXJkLmNsZWFyQm9hcmQoKTtcbiAgICAgICAgcmFuZG9tUGxhY2VtZW50KGdhbWVib2FyZCk7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChnYW1lYm9hcmQpO1xuICAgICAgICBpZiAoZ2FtZWJvYXJkTmFtZSA9PT0gJ2ZpcnN0Jykge1xuICAgICAgICAgICAgdWkuY3JlYXRlU2hpcE92ZXJsYXkoJ2ZpcnN0JywgZ2FtZWJvYXJkLnNoaXBzUGxhY2VkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcmVzZXRPcmllbnRhdGlvbiA9ICgpID0+IHtcbiAgICAgICAgaHVtYW5TaGlwcy5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBpZiAoc2hpcC5pc1ZlcnRpY2FsID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgc2hpcC5pc1ZlcnRpY2FsID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgcGlja0dhbWVNb2RlID0gKCkgPT4ge1xuICAgICAgICBpZiAodWkuY1ZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgcmFuZG9taXplU2hpcHNQbGFjZW1lbnQoJ2ZpcnN0JywgaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICAgICAgcmFuZG9taXplU2hpcHNQbGFjZW1lbnQoJ3NlY29uZCcsIGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgICAgIGlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgY29tcHV0ZXJWc0NvbXB1dGVyTW9kZSgpO1xuICAgICAgICAgICAgdWkucmVmcmVzaEJvYXJkKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc3RhcnQgPSAoKSA9PiB7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChodW1hbkdhbWVib2FyZCk7XG4gICAgICAgIHJhbmRvbWl6ZVNoaXBzUGxhY2VtZW50KCdzZWNvbmQnLCBjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIGlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICBwbGF5ZXJWc0NvbXB1dGVyTW9kZSgpO1xuICAgIH07XG4gICAgY29uc3QgcmVzdGFydCA9ICgpID0+IHtcbiAgICAgICAgaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgaHVtYW4uc2V0UHJldkhpdChudWxsKTtcbiAgICAgICAgaHVtYW4uc2V0TGFzdEhpdChudWxsKTtcbiAgICAgICAgY29tcHV0ZXIuc2V0UHJldkhpdChudWxsKTtcbiAgICAgICAgY29tcHV0ZXIuc2V0TGFzdEhpdChudWxsKTtcbiAgICAgICAgaHVtYW5HYW1lYm9hcmQuY2xlYXJCb2FyZCgpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5jbGVhckJvYXJkKCk7XG4gICAgICAgIHBvcHVsYXRlU2hpcHMoKTtcbiAgICAgICAgdWkucmVmcmVzaEJvYXJkKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgdWkucmVmcmVzaEJvYXJkKGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgdWkuY3JlYXRlU2hpcE92ZXJsYXkoJ3NlY29uZCcsIGNvbXB1dGVyR2FtZWJvYXJkLnNoaXBzUGxhY2VkKTtcbiAgICAgICAgdWkuZHJhZ0FuZERyb3AoaHVtYW5HYW1lYm9hcmQsIGNvbXB1dGVyR2FtZWJvYXJkLCBodW1hblNoaXBzKTtcbiAgICAgICAgdWkuY2FuQmVTdGFydGVkKCk7XG4gICAgICAgIHBpY2tHYW1lTW9kZSgpO1xuICAgICAgICByZXNldE9yaWVudGF0aW9uKCk7XG4gICAgfTtcbiAgICBjb25zdCBuZXdHYW1lID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIHVpLmdldFNwZWVkVmFsdWUoKSkpO1xuICAgICAgICBpc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgcmVzdGFydCgpO1xuICAgIH0pO1xuICAgIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgICAgIHVpLnJlbmRlckJvYXJkKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgdWkucmVuZGVyQm9hcmQoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICBwb3B1bGF0ZVNoaXBzKCk7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIHVpLmNyZWF0ZVNoaXBPdmVybGF5KCdzZWNvbmQnLCBjb21wdXRlckdhbWVib2FyZC5zaGlwc1BsYWNlZCk7XG4gICAgICAgIHVpLmRyYWdBbmREcm9wKGh1bWFuR2FtZWJvYXJkLCBjb21wdXRlckdhbWVib2FyZCwgaHVtYW5TaGlwcyk7XG4gICAgICAgIHVpLmNhbkJlU3RhcnRlZCgpO1xuICAgICAgICBwaWNrR2FtZU1vZGUoKTtcbiAgICB9O1xuICAgIHJldHVybiB7IGluaXQsIGh1bWFuR2FtZWJvYXJkLCBjb21wdXRlckdhbWVib2FyZCwgcmVzdGFydCwgbmV3R2FtZSwgc3RhcnQsIHJhbmRvbWl6ZVNoaXBzUGxhY2VtZW50LCBodW1hblNoaXBzIH07XG59KSgpO1xuZXhwb3J0IGRlZmF1bHQgY29udHJvbGxlcjtcbiIsImltcG9ydCAnbm9ybWFsaXplLmNzcyc7XG5pbXBvcnQgJy4vc3R5bGUvc3R5bGUuY3NzJztcbmltcG9ydCBjb250cm9sbGVyIGZyb20gJy4vbW9kdWxlcy9jb250cm9sbGVyJztcbmNvbnRyb2xsZXIuaW5pdCgpO1xuIl0sIm5hbWVzIjpbImNvbHMiLCJyb3dzIiwiYXJyYXkiLCJzaGlwc1BsYWNlZCIsImdldENlbGwiLCJjb2wiLCJyb3ciLCJjb2xJbmRleCIsImluZGV4T2YiLCJyb3dJbmRleCIsInNldENlbGwiLCJuZXdTdGF0dXMiLCJuZXdUYWtlbkJ5Iiwic3RhdHVzIiwidGFrZW5CeSIsImkiLCJqIiwiZ2VuZXJhdGVBcnJheSIsImNsZWFyQm9hcmQiLCJ1bmRlZmluZWQiLCJsZW5ndGgiLCJyZW1vdmVTaGlwIiwic2hpcCIsImdhbWVib2FyZCIsImZsYXQiLCJmb3JFYWNoIiwiY2VsbCIsImJvYXJkSWQiLCJuYW1lIiwic3BsaWNlIiwiaHVtYW5HYW1lYm9hcmQiLCJjb21wdXRlckdhbWVib2FyZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiZ2V0QXR0cmlidXRlIiwidG9Mb3dlckNhc2UiLCJyZW1vdmUiLCJhZGQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJwbGFjZVNoaXAiLCJvcmllbnRhdGlvbiIsImlzVmVydGljYWwiLCJpc0hvcml6b250YWwiLCJjZWxscyIsInN0YXJ0Iiwic2hpcENlbGxzIiwic2l6ZSIsImN1cnJlbnRDb2wiLCJjdXJyZW50Um93IiwicHVzaCIsInJlY2VpdmVBdHRhY2siLCJoaXQiLCJyZWNlaXZlQXJvdW5kIiwicmVzZXJ2ZVNwYWNlIiwiZmlsdGVyIiwiYyIsImRpcmVjdGlvbiIsIm5ld0NvbCIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImNoYXJDb2RlQXQiLCJuZXdSb3ciLCJOdW1iZXIiLCJ0b1N0cmluZyIsImhpdEJ1dE5vdFN1bmsiLCJzb21lIiwiaXNTdW5rIiwic2lua1NoaXAiLCJhbGxTdW5rIiwidGFrZW5CeUNlbGxzIiwiZXZlcnkiLCJjYW5CZVBsYWNlZCIsImFyZUVtcHR5IiwiaXRlbSIsInJlbW92ZVJlc2VydmVkU3BhY2UiLCJoaXRDb3VudCIsInJvdGF0ZSIsInRoaXMiLCJwcmV2SGl0IiwibGFzdEhpdCIsInJhbmdlIiwiZ29SaWdodCIsImdvRG93biIsImZpbmlzaGluZ0F0dGFjayIsInNldFByZXZIaXQiLCJzZXRMYXN0SGl0IiwibmV3UHJldkhpdCIsIm5ld0xhc3RIaXQiLCJhdHRhY2siLCJyZXN1bHQiLCJyYW5kb21BdHRhY2siLCJyYW5kb21Db2wiLCJyYW5kb21Sb3ciLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjZWlsIiwiZm9sbG93dXBBdHRhY2siLCJ2YWxpZERpcmVjdGlvbnMiLCJyYW5kb21EaXJlY3Rpb24iLCJnZXRQcmV2SGl0IiwiZ2V0TGFzdEhpdCIsIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJ1aSIsInN0YXR1c0JveCIsInF1ZXJ5U2VsZWN0b3IiLCJib2FyZHMiLCJwVmNCdG4iLCJuZXdHYW1lQnRuIiwiY1ZjQnRuIiwic3RhcnRCdG4iLCJyYW5kb21CdG4iLCJhbGxCdG5zIiwic3BlZWRzIiwiZ2V0RWxlbWVudHNCeU5hbWUiLCJyZW5kZXJDZWxscyIsImJvYXJkIiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJjcmVhdGVDZWxsIiwiYXBwZW5kIiwicmVmcmVzaEJvYXJkIiwiaW5uZXJIVE1MIiwiZ2V0VXNlcklucHV0IiwidGFyZ2V0IiwiaGFuZGxlR2FtZU1vZGUiLCJzZWxlY3RlZEVsZW1lbnQiLCJkZXNlbGVjdGVkRWxlbWVudCIsIndhaXRpbmciLCJidG4iLCJkaXNhYmxlZCIsInRleHRDb250ZW50Iiwic2V0VGltZW91dCIsImdldFNwZWVkVmFsdWUiLCJjYW5CZVN0YXJ0ZWQiLCJzZXRJbml0TWVzc2FnZSIsInJlc3RhcnQiLCJib29sIiwiZG9jdW1lbnRFbGVtZW50IiwidG9nZ2xlIiwiY3JlYXRlU2hpcE92ZXJsYXkiLCJnYW1lYm9hcmROYW1lIiwic2hpcHMiLCJmaXJzdENlbGwiLCJzaGlwRWxlbWVudCIsInNoaXBOYW1lIiwic2hpcFNpemUiLCJzZXRTaGlwU3R5bGUiLCJzdHlsZSIsIndpZHRoIiwiY2VsbFNpemUiLCJoZWlnaHQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiYXBwZW5kQ2hpbGQiLCJzZXRTdGFydE1lc3NhZ2UiLCJkcmFnQW5kRHJvcCIsImZpcnN0R2FtZWJvYXJkIiwic2Vjb25kR2FtZWJvYXJkIiwic2hpcE9iaiIsImdyYWJQb2ludFgiLCJncmFiUG9pbnRZIiwiaGlnaGxpZ2h0ZWRDZWxscyIsInNoaXBOYW1lVG9PYmoiLCJjYXJyaWVyIiwiYmF0dGxlc2hpcCIsImRlc3Ryb3llciIsInN1Ym1hcmluZSIsInBhdHJvbGJvYXQiLCJmaXJzdEJvYXJkRWxlbWVudCIsInNlY29uZEJvYXJkRWxlbWVudCIsImZpcnN0Qm9hcmRDZWxscyIsInNlY29uZEJvYXJkQ2VsbHMiLCJub25TaGlwQ2VsbHMiLCJkcmFnZ2FibGUiLCJoYW5kbGVNb3VzZWRvd24iLCJoYW5kbGVNb3VzZXVwIiwiaGFuZGxlRHJhZ1N0YXJ0IiwiaGFuZGxlRHJhZ0VuZCIsImhhbmRsZVJvdGF0ZSIsImJsb2NrUmlnaHRDbGljayIsImxhc3REcmFnZ2VkIiwidGFyZ2V0U2hpcE5hbWUiLCJ1cGRhdGVkU2hpcHNQbGFjZWRGaXJzdCIsInVwZGF0ZWRTaGlwc1BsYWNlZFRlbXAiLCJodW1hblNoaXBzIiwidmlzaWJpbGl0eSIsIm9mZnNldFgiLCJvZmZzZXRZIiwiY2xvc2VzdCIsImlkIiwiaGFuZGxlRHJhZ092ZXIiLCJpbmRleCIsInByZXZlbnREZWZhdWx0Iiwic3RhcnRDZWxsIiwib2Zmc2V0SGVpZ2h0Iiwib2Zmc2V0V2lkdGgiLCJ0b0hpZ2hsaWdodCIsImNlbGxJbmRleCIsImlzVmFsaWRQbGFjZW1lbnQiLCJnZXRMYXN0U2hpcFNpemVFbGVtZW50cyIsImhhbmRsZURyYWdMZWF2ZSIsImhpZ2hsaWdodGVkQ2VsbCIsImhhbmRsZURyb3AiLCJsYXN0IiwiZGF0YXNldCIsInNsaWNlIiwibWluIiwidGVtcFNoaXAiLCJjdXJyZW50Iiwic2Vjb25kIiwicmVtb3ZlQm9hcmRQb2ludGVyIiwibmV3R2FtZSIsInJhbmRvbWl6ZVNoaXBzUGxhY2VtZW50Iiwic3BlZWRWYWx1ZSIsInNwZWVkIiwiaW5wdXQiLCJjaGVja2VkIiwicmVuZGVyQm9hcmQiLCJoYW5kbGVVc2VySW5wdXQiLCJ1c2VySW5wdXQiLCJvbmNlIiwic2V0Qm9hcmRQb2ludGVyIiwid2hpY2giLCJzZXRUdXJuTWVzc2FnZVB2QyIsImlzUGxheWVyVHVybiIsInNldFR1cm5NZXNzYWdlQ3ZDIiwic2V0R2FtZU92ZXJNZXNzYWdlUHZDIiwid2hvIiwic2V0R2FtZU92ZXJNZXNzYWdlQ3ZDIiwiY29udHJvbGxlciIsImh1bWFuIiwicGxheWVyIiwiY29tcHV0ZXIiLCJpc1N0b3BwZWQiLCJodW1hbkNhcnJpZXIiLCJodW1hbkJhdHRsZXNoaXAiLCJodW1hbkRlc3Ryb3llciIsImh1bWFuU3VibWFyaW5lIiwiaHVtYW5QYXRyb2xib2F0IiwicG9wdWxhdGVTaGlwcyIsImlzR2FtZU92ZXIiLCJjb21wdXRlckFJIiwiYWxsU2hpcHMiLCJyYW5kb21PcmllbnRhdGlvbiIsInJhbmRvbVBsYWNlbWVudCIsInBpY2tHYW1lTW9kZSIsImluaXQiXSwic291cmNlUm9vdCI6IiJ9