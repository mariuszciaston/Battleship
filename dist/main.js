(()=>{"use strict";const e=()=>{const e=["A","B","C","D","E","F","G","H","I","J"],t=["1","2","3","4","5","6","7","8","9","10"],a=[],r=[],s=(r,s)=>{const o=e.indexOf(r),n=t.indexOf(s);return-1===o||-1===n?null:a[n][o]},o=(r,s,o,n)=>{const l=e.indexOf(r),i=t.indexOf(s);return-1===l||-1===i?null:(a[i][l].status=o,n&&(a[i][l].takenBy=n),a[i][l])};return{generateArray:()=>{for(let r=0;r<10;r+=1){a[r]=[];for(let s=0;s<10;s+=1)a[r][s]={col:e[s],row:t[r],status:"empty",takenBy:null}}},clearBoard:()=>{a.flat().forEach((e=>{e.status="empty",e.takenBy=void 0})),r.length=0},getCell:s,setCell:o,removeShip:(e,t)=>{t.array.flat().forEach((t=>{"taken"===t.status&&t.takenBy.name===e.name&&(t.status="empty",t.takenBy=null);const a=r.indexOf(t);null===t.takenBy&&-1!==a&&r.splice(a,1)}))},placeShip:(a,n,l,i)=>{const c="horizontal"===i,d=c?e:t,u=d.indexOf(c?n:l);a.isVertical="horizontal"!==i;let m=[];if(u<0||u+a.size>d.length)return!1;for(let e=0;e<a.size;e+=1){const t=c?d[u+e]:n,r=c?l:d[u+e];if("empty"!==s(t,r).status)return!1;o(t,r,"taken",a),m.push(s(t,r))}return r.push(m[0]),!0},receiveAttack:(e,t)=>{const a=s(e,t);return"taken"===a.status?(a.takenBy.hit(),o(e,t,"hit"),a.status):"empty"===a.status||"reserved"===a.status?(o(e,t,"miss"),a.status):null},receiveAround:(e,t)=>{const a=s(e,t);return"empty"===a.status?(o(e,t,"reserved"),a.status):null},reserveSpace:(e,t,a)=>{const r=e.getCell(t,a);if(r&&r.takenBy){e.array.flat().filter((e=>e.takenBy&&e.takenBy.name===r.takenBy.name)).forEach((t=>{[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0},{col:-1,row:-1},{col:-1,row:1},{col:1,row:-1},{col:1,row:1}].forEach((a=>{const r=String.fromCharCode(t.col.charCodeAt(0)+a.col),s=(Number(t.row)+a.row).toString();e.getCell(r,s)&&e.receiveAround(r,s)}))}))}},reserveSpaceForAll:function(e){e.shipsPlaced.forEach((t=>{e.reserveSpace(e,t.col,t.row)}))},hitButNotSunk:e=>e.array.flat().some((e=>"hit"===e.status&&!1===e.takenBy.isSunk())),canBeSunk:e=>e&&e.takenBy&&e.takenBy.isSunk(),sinkShip:(e,t,a)=>{const r=e.getCell(t,a);e.array.flat().filter((e=>e.takenBy&&e.takenBy.name===r.takenBy.name)).forEach((t=>{[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0},{col:-1,row:-1},{col:-1,row:1},{col:1,row:-1},{col:1,row:1}].forEach((a=>{const r=String.fromCharCode(t.col.charCodeAt(0)+a.col),s=(Number(t.row)+a.row).toString();e.getCell(r,s)&&e.receiveAttack(r,s)}))}))},allSunk:e=>{let t=e.array.flat().filter((e=>e.takenBy));return!!(t.length>0&&t.every((e=>e.takenBy.isSunk())))},array:a,canBePlaced:(a,r,o,n)=>{const l="horizontal"===n,i=l?e:t,c=i.indexOf(l?r:o);if(c<0||c+a>i.length)return!1;const d=[];for(let e=0;e<a;e+=1){const t=l?i[c+e]:r,a=l?o:i[c+e];d.push("empty"===s(t,a).status)}return d.every((e=>!0===e))},shipsPlaced:r,removeReservedSpace:e=>{e.array.flat().forEach((e=>{"reserved"===e.status&&o(e.col,e.row,"empty")}))}}},t=e=>{let t;return"Carrier"===e&&(t=5),"Battleship"===e&&(t=4),"Destroyer"===e&&(t=3),"Submarine"===e&&(t=3),"PatrolBoat"===e&&(t=2),{name:e,size:t,hitCount:0,isVertical:!1,rotate(){this.isVertical=!this.isVertical},hit(){this.hitCount+=1},isSunk(){return this.hitCount===t}}},a=(()=>{const e=e=>{Object.keys(e).forEach((t=>{const a=e[t].play;e[t].play=function(){return e[t].currentTime>0&&(e[t].pause(),e[t].currentTime=0),a.call(this)}}))};return(()=>{const t={miss:new Audio("sounds/gray1wea.wav"),hit:new Audio("sounds/explo.wav"),sunk:new Audio("sounds/explodea.wav"),gameOver:new Audio("sounds/capture.wav"),drop:new Audio("sounds/barr1sel.wav"),rotate:new Audio("sounds/drain.wav"),random:new Audio("sounds/exp1sel.wav"),select:new Audio("sounds/msg.wav"),tick:new Audio("sounds/beep.wav"),grab:new Audio("sounds/buttonRev.wav")};return e(t),t})()})(),r=()=>{const e=["A","B","C","D","E","F","G","H","I","J"];let t=null,r=null,s=1,o=!0,n=!0;const l=(e,t,d,u)=>{if(u.row===d)if(o){s=1;let n=String.fromCharCode(t.charCodeAt(0)+s);for(;e.getCell(n,d)&&"hit"===e.getCell(n,d).status;)s+=1,n=String.fromCharCode(t.charCodeAt(0)+s);e.getCell(n,d)&&"hit"!==e.getCell(n,d).status&&"miss"!==e.getCell(n,d).status?(e.receiveAttack(n,d),"hit"===e.getCell(n,d).status?(i(r),c({col:n,row:d}),a.hit.play()):"miss"===e.getCell(n,d).status&&a.miss.play(),s+=1):(s=1,o=!1,l(e,n,d,u))}else{s=1;let n=String.fromCharCode(t.charCodeAt(0)-s);for(;e.getCell(n,d)&&"hit"===e.getCell(n,d).status;)s+=1,n=String.fromCharCode(t.charCodeAt(0)-s);e.getCell(n,d)&&"hit"!==e.getCell(n,d).status&&"miss"!==e.getCell(n,d).status?(e.receiveAttack(n,d),"hit"===e.getCell(n,d).status?(i(r),c({col:n,row:d}),a.hit.play()):"miss"===e.getCell(n,d).status&&a.miss.play(),s+=1):(s=1,o=!0,l(e,n,d,u))}else if(u.col===t)if(n){s=1;let o=(Number(d)+s).toString();for(;e.getCell(t,o)&&"hit"===e.getCell(t,o).status;)s+=1,o=(Number(d)+s).toString();e.getCell(t,o)&&"hit"!==e.getCell(t,o).status&&"miss"!==e.getCell(t,o).status?(e.receiveAttack(t,o),"hit"===e.getCell(t,o).status?(i(r),c({col:t,row:o}),a.hit.play()):"miss"===e.getCell(t,o).status&&a.miss.play(),s+=1):(s=1,n=!1,l(e,t,o,u))}else{s=1;let o=(Number(d)-s).toString();for(;e.getCell(t,o)&&"hit"===e.getCell(t,o).status;)s+=1,o=(Number(d)-s).toString();e.getCell(t,o)&&"hit"!==e.getCell(t,o).status&&"miss"!==e.getCell(t,o).status?(e.receiveAttack(t,o),"hit"===e.getCell(t,o).status?(i(r),c({col:t,row:o}),a.hit.play()):"miss"===e.getCell(t,o).status&&a.miss.play(),s+=1):(s=1,n=!0,l(e,t,o,u))}},i=e=>{t=e},c=e=>{r=e};return{attack:(e,t,s)=>{if("hit"!==e.getCell(t,s).status&&"miss"!==e.getCell(t,s).status){let o=e.receiveAttack(t,s);return"hit"===o?(i(r),c({col:t,row:s}),a.hit.play()):"miss"===o&&a.miss.play(),o}return"already shot"},randomAttack:t=>{let s,o;do{s=e[Math.floor(Math.random()*e.length)],o=Math.ceil(10*Math.random()).toString()}while("hit"===t.getCell(s,o).status||"miss"===t.getCell(s,o).status);if("hit"!==t.getCell(s,o).status&&"miss"!==t.getCell(s,o).status){const e=t.receiveAttack(s,o);return"hit"===t.getCell(s,o).status?(i(r),c({col:s,row:o}),a.hit.play()):"miss"===t.getCell(s,o).status&&a.miss.play(),{result:e,col:s,row:o}}return{result:"already shot",col:s,row:o}},followupAttack:(e,t,o)=>{const n=[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0}].filter((a=>{const r=String.fromCharCode(t.charCodeAt(0)+a.col),s=(Number(o)+a.row).toString(),n=e.getCell(r,s);return!(!n||"miss"===n.status||"hit"===n.status)}));if(n.length>0){const l=n[Math.floor(Math.random()*n.length)],d=String.fromCharCode(t.charCodeAt(0)+l.col),u=(Number(o)+l.row).toString();e.receiveAttack(d,u),s=1,"hit"===e.getCell(d,u).status?(i(r),c({col:d,row:u}),a.hit.play()):"miss"===e.getCell(d,u).status&&a.miss.play()}},finishingAttack:l,prevHit:t,lastHit:r,getPrevHit:()=>t,getLastHit:()=>r,setPrevHit:i,setLastHit:c}};var s=function(e,t,a,r){return new(a||(a=Promise))((function(s,o){function n(e){try{i(r.next(e))}catch(e){o(e)}}function l(e){try{i(r.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,l)}i((r=r.apply(e,t||[])).next())}))};const o=(e,t,r)=>{const o=document.querySelector("#firstBoard"),n=document.querySelector("#secondBoard"),l=o.querySelectorAll(".cell"),c=n.querySelectorAll(".cell");let u,m,h,f,v=0,p=0,g=[];const y={carrier:r[0],battleship:r[1],destroyer:r[2],submarine:r[3],patrolboat:r[4]};let w=null;const S=document.querySelectorAll(".draggable");function C(e){return Array.from(e).filter((e=>!e.classList.contains("taken")))}const B=[...C(l),...C(c)];function b(e,t){return e.slice(Math.min(e.length-t,0))}function k(a){const r=a.target;let s;const o=r.closest(".board").id;return"firstBoard"===o&&(s=e),"secondBoard"===o&&(s=t),{target:r,gameboard:s}}function L(e,t){return u=t.getAttribute("data-name"),m=Number(t.getAttribute("data-size")),v=e.offsetX,p=e.offsetY,h=y[u],f=h.isVertical?"vertical":"horizontal",{shipName:u,shipObj:h}}function A(){g.forEach((e=>e.classList.remove("highlight")))}function E(e){return"firstBoard"===e||"secondBoard"===e}function P(e){const{gameboard:t}=k(e);t.removeReservedSpace(t),function(e,t){const{target:a}=k(t),r=a.getAttribute("data-name");let s=e.shipsPlaced.filter((e=>r!==e.takenBy.name.toLowerCase()));s.forEach((t=>{e.reserveSpace(e,t.col,t.row)}))}(t,e),d.renew(),i.setInitMessage(),0===e.button&&a.grab.play()}function x(e){return s(this,void 0,void 0,(function*(){yield new Promise((e=>setTimeout(e,0)));const{target:t,gameboard:a}=k(e);t.style.visibility="hidden",L(e,t),a.removeShip(h,a),i.clearShip(h,a)}))}function q(e){return function(t){const{target:a}=k(t),r=a.closest(".board").id;if(E(r)&&(t.preventDefault(),h)){const a=function(e,t,a){const{target:r}=k(a);return e-(t.isVertical?10*Math.floor(p/r.offsetHeight):Math.floor(v/r.offsetWidth))}(e,h,t),s=function(e){return"firstBoard"===e?l:c}(r),o=[];!function(e,t,a,r){for(let s=0;s<m;s++){let o=e.isVertical?t+10*s:t+s;a[o]&&(r.push(a[o]),g.push(a[o]))}}(h,a,s,o),function(e){return e.every((e=>e.classList.contains("empty")))&&(e.every((t=>t.dataset.col===e[0].dataset.col))||e.every((t=>t.dataset.row===e[0].dataset.row)))&&e.length===m&&e.every((e=>e.dataset.col>="A"&&e.dataset.col<="J"))&&e.every((e=>Number(e.dataset.row)>=1&&Number(e.dataset.row)<=10))}(o)&&(!function(e){e.forEach((e=>{e.classList.add("highlight")}))}(o),w||(w=b(g,m)))}}}function M(){A(),g.length=0}function z(e){A();const t=b(g,m),{target:r,gameboard:s}=k(e);E(r.closest(".board").id)&&h&&null!==w&&function(e,t,a,r){e.canBePlaced(t.size,a[0].dataset.col,a[0].dataset.row,r)?(e.placeShip(t,a[0].dataset.col,a[0].dataset.row,r),e.reserveSpace(e,a[0].dataset.col,a[0].dataset.row)):(e.placeShip(t,w[0].dataset.col,w[0].dataset.row,r),e.reserveSpace(e,w[0].dataset.col,w[0].dataset.row))}(s,h,t,f),s.removeReservedSpace(s),s.reserveSpaceForAll(s),d.renew(),i.canBeStarted(),i.setStartMessage(),w=null,a.drop.play()}function O(a){const r=a.target;r.style.visibility="visible",function(a,r){if(0===g.length){const s=a.closest(".board");if(s){let{gameboard:a}=k(r);"firstBoard"===s.id?a=e:"secondBoard"===s.id&&(a=t),a&&w&&a.canBePlaced(h.size,w[0].dataset.col,w[0].dataset.row,f)&&(a.placeShip(h,w[0].dataset.col,w[0].dataset.row,f),a.reserveSpace(a,w[0].dataset.col,w[0].dataset.row),d.renew())}}}(r,a),i.canBeStarted()&&i.fillCells("second"),i.setStartMessage()}function V(e){const{gameboard:t}=k(e);t.reserveSpaceForAll(t),d.renew(),i.setStartMessage()}function G(e){e.preventDefault();const{target:t,gameboard:r}=k(e),{shipName:s,shipObj:o}=L(e,t),n=r.shipsPlaced.filter((e=>e.takenBy.name.toLowerCase()===s));r.removeShip(o,r),r.removeReservedSpace(r),r.reserveSpaceForAll(r),o.rotate(),f=o.isVertical?"vertical":"horizontal",r.canBePlaced(o.size,n[0].col,n[0].row,f)||(o.rotate(),f=o.isVertical?"vertical":"horizontal"),r.placeShip(o,n[0].col,n[0].row,f),r.reserveSpaceForAll(r),d.renew(),i.canBeStarted()&&i.fillCells("second"),a.rotate.play()}function H(e){e.preventDefault()}function N(e){e.forEach(((e,t)=>{e.addEventListener("dragover",q(t)),e.addEventListener("dragleave",M),e.addEventListener("drop",z)}))}N(l),N(c),S.forEach((e=>{e.addEventListener("mousedown",P),e.addEventListener("dragstart",x),e.addEventListener("dragend",O),e.addEventListener("mouseup",V),e.addEventListener("contextmenu",G),B.forEach((e=>e.addEventListener("contextmenu",H)))}))};var n=function(e,t,a,r){return new(a||(a=Promise))((function(s,o){function n(e){try{i(r.next(e))}catch(e){o(e)}}function l(e){try{i(r.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,l)}i((r=r.apply(e,t||[])).next())}))};const l=(()=>{const e=document.querySelector("#messageBox p"),t=document.querySelector("#boards"),r=document.querySelector("#playerVsComputer"),s=document.querySelector("#newGame"),l=document.querySelector("#computerVsComputer"),i=document.querySelector("#start"),c=document.querySelector("#randomPlacement"),u=[r,s,l,i,c],m=document.getElementsByName("speed");let h=1e3;const f=document.querySelector("#mute");let v=!1;const p=(e,t)=>{e.array.forEach((e=>{e.forEach((e=>{const a=(e=>{const t=document.createElement("div");return t.classList.add("cell"),t.classList.add(e.status),t.setAttribute("data-col",e.col),t.setAttribute("data-row",e.row),e.takenBy&&t.setAttribute("data-shipName",e.takenBy.name.toLowerCase()),t})(e);t.append(a)}))}))},g=e=>e===d.humanGameboard?"firstBoard":e===d.computerGameboard?"secondBoard":void 0,y=e=>{const t=document.querySelector(`#${g(e)}`);t.innerHTML="",p(e,t)},w=e=>{if(!e.target.classList.contains("hit")&&!e.target.classList.contains("miss")){return{col:e.target.getAttribute("data-col"),row:e.target.getAttribute("data-row")}}},S=(e,t)=>{t.classList.remove("selected"),e.classList.contains("selected")||(e.classList.add("selected"),e===r&&n(void 0,void 0,void 0,(function*(){P("first"),C(!0),u.forEach((e=>e.disabled=!0)),yield new Promise((e=>setTimeout(e,q()))),u.forEach((e=>e.disabled=!1)),C(!1),k(),L()})),e===l&&n(void 0,void 0,void 0,(function*(){C(!0),u.forEach((e=>e.disabled=!0)),yield new Promise((e=>setTimeout(e,q()))),u.forEach((e=>e.disabled=!1)),C(!1),i.disabled=!0,c.disabled=!0,l.disabled=!0})),d.restart(),E())},C=e=>{document.documentElement.classList.toggle("wait",e)},B=()=>{document.querySelector("#secondBoard").classList.remove("boardOutline")},b=(e,t,a,r)=>{const s=document.querySelector("html"),o=parseFloat(window.getComputedStyle(s,null).getPropertyValue("font-size"));r?(e.style.width=a/o+"rem",e.style.height=t*(a/o)+"rem"):(e.style.width=t*(a/o)+"rem",e.style.height=a/o+"rem")},k=()=>5===d.humanGameboard.shipsPlaced.length&&0===d.computerGameboard.shipsPlaced.length?(P("second"),i.disabled=!1,!0):(i.disabled=!0,!1),L=()=>{const t="Use 'Random Placement' button, then press Start!",a="Drag and drop ships onto the left board or use 'Random Placement' button. Right click to rotate. When ready, press Start!";e.textContent!==t&&e.textContent!==a&&"Restarting..."!==e.textContent&&"You can now begin the game. Press start!"!==e.textContent||(e.textContent=t,window.matchMedia("(min-width: 1024px)").matches&&(e.textContent=a))},A=()=>{k()&&(e.textContent="You can now begin the game. Press start!")},E=()=>{e.textContent="Restarting..."},P=e=>{let t;"first"===e?t=document.querySelector("#firstBoard"):"second"===e&&(t=document.querySelector("#secondBoard"));t.querySelectorAll(".cell").forEach((e=>{e.classList.add("filled")}))},x=e=>n(void 0,void 0,void 0,(function*(){let t;C(!0),"first"===e?t=document.querySelector("#firstBoard"):"second"===e&&(t=document.querySelector("#secondBoard"));const r=t.querySelectorAll(".cell");r.forEach((e=>{e.classList.add("filled")})),yield new Promise((e=>{r.forEach(((t,s)=>{setTimeout((()=>{t.classList.remove("filled"),s===r.length-1&&e(),(s+1)%6==0&&a.tick.play()}),q()/120*s)}))})),C(!1)}));r.addEventListener("click",(()=>{P("first"),S(r,l);document.querySelector("#secondBoard").classList.remove("start"),i.disabled=!0,r.disabled=!0,a.select.play(),x("first")})),l.addEventListener("click",(()=>{P("first"),P("second"),S(l,r);const e=document.querySelector("#secondBoard");e.classList.remove("hide"),e.classList.add("start"),i.disabled=!0,c.disabled=!0,l.disabled=!0,a.select.play(),Promise.all([x("first"),x("second")])})),s.addEventListener("click",(()=>n(void 0,void 0,void 0,(function*(){B(),P("first"),l.classList.contains("selected")&&(P("second"),i.disabled=!0,c.disabled=!0,l.disabled=!0),a.select.play(),yield n(void 0,void 0,void 0,(function*(){E(),C(!0),u.forEach((e=>e.disabled=!0)),yield d.newGame(),u.forEach((e=>e.disabled=!1)),C(!1),k(),r.classList.contains("selected")&&L()}));const e=document.querySelector("#secondBoard");e.classList.remove("hide"),r.classList.contains("selected")&&(e.classList.remove("start"),x("first"),i.disabled=!0,r.disabled=!0),l.classList.contains("selected")&&(e.classList.add("start"),c.disabled=!0,Promise.all([x("first"),x("second")]),i.disabled=!0,c.disabled=!0,l.disabled=!0)})))),i.addEventListener("click",(()=>{d.start();const e=document.querySelector("#secondBoard");e.classList.add("hide"),e.classList.add("start"),i.disabled=!0,c.disabled=!0,x("second")})),c.addEventListener("click",(()=>{d.computerGameboard.clearBoard(),y(d.computerGameboard),d.randomizeShipsPlacement(d.humanGameboard),o(d.humanGameboard,d.computerGameboard,d.humanShips),k(),A(),P("second"),a.random.play()}));const q=()=>h;return m.forEach((e=>{e.addEventListener("click",(e=>{(e=>{let t=e.target;t.checked&&(h=Number(t.value))})(e),a.select.play()}))})),f.addEventListener("click",(()=>{const e=document.querySelector("#speaker");if(v){f.classList.remove("muted"),e.classList.remove("fa-volume-xmark"),e.classList.add("fa-volume-high");for(let e of Object.values(a))e.volume=1,e.muted=!1}else{f.classList.add("muted"),e.classList.remove("fa-volume-high"),e.classList.add("fa-volume-xmark");for(let e of Object.values(a))e.volume=0,e.muted=!0}v=!v,a.select.play()})),window.addEventListener("resize",L),{renderBoard:e=>{const a=document.createElement("div");a.classList.add("board"),a.id=g(e),p(e,a),t.append(a)},clearShip:(e,t)=>{document.querySelectorAll(`#${g(t)} .cell`).forEach((t=>{t.classList.contains("taken")&&t.getAttribute("data-shipName")===e.name.toLowerCase()&&(t.classList.remove("taken"),t.classList.add("empty"),t.removeAttribute("data-shipName"))}))},refreshBoard:y,handleUserInput:()=>n(void 0,void 0,void 0,(function*(){const e=document.querySelectorAll("#secondBoard .cell");let t;do{t=yield new Promise((t=>{e.forEach((e=>{e.classList.contains("hit")||e.classList.contains("miss")||e.addEventListener("click",(e=>{t(w(e))}),{once:!0})}))}))}while(!t);return{col:t.col.toString(),row:t.row.toString()}})),pVcBtn:r,cVcBtn:l,waiting:C,setBoardPointer:e=>{const t=document.querySelector("#secondBoard");"player"===e?t.classList.add("boardOutline"):"computer"===e&&t.classList.remove("boardOutline")},removeBoardPointer:B,createShipOverlay:e=>{e.shipsPlaced.forEach((t=>{const a=(e=>{const t=document.createElement("div"),a=e.takenBy.name.toLowerCase(),r=e.takenBy.size;return t.classList.add("ship",a,"draggable"),t.setAttribute("data-size",`${r}`),t.setAttribute("data-name",`${a}`),t.setAttribute("draggable","true"),t})(t),r=document.querySelector(".board .cell").getBoundingClientRect().width,s=t.takenBy.size,o=t.takenBy.isVertical;document.querySelector(`#${g(e)} .cell[data-col="${t.col}"][data-row="${t.row}"]`).appendChild(a),b(a,s,r,o),window.addEventListener("resize",(()=>((e,t,a)=>{const r=document.querySelector(".board .cell").getBoundingClientRect().width;b(e,t,r,a)})(a,s,o)))}))},canBeStarted:k,setInitMessage:L,setStartMessage:A,setTurnMessagePvC:t=>{e.textContent=t?"Player's turn. Take aim and attack!":"Computer's turn. The shot is coming!"},setTurnMessageCvC:t=>{e.textContent=t?"Violet's turn":"Blue's turn"},setGameOverMessagePvC:t=>{"player"===t?e.textContent="Game over, Player wins!":"computer"===t&&(e.textContent="Game over, Computer wins!")},setGameOverMessageCvC:t=>{"player"===t?e.textContent="Game over, Blue Computer wins!":"computer"===t&&(e.textContent="Game over, Violet Computer wins!")},setRestartMessage:E,getSpeedValue:q,fillCells:P,unFillCells:x}})(),i=l;var c=function(e,t,a,r){return new(a||(a=Promise))((function(s,o){function n(e){try{i(r.next(e))}catch(e){o(e)}}function l(e){try{i(r.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,l)}i((r=r.apply(e,t||[])).next())}))};const d=(()=>{const s=e(),n=e(),l=r(),d=r();let u,m,h,f,v,p=!0,g=[u,m,h,f,v];const y=()=>{u=t("Carrier"),m=t("Battleship"),h=t("Destroyer"),f=t("Submarine"),v=t("PatrolBoat"),g=[u,m,h,f,v],n.placeShip(u,"A","1","horizontal"),n.placeShip(m,"A","3","horizontal"),n.placeShip(h,"A","5","horizontal"),n.placeShip(f,"A","7","horizontal"),n.placeShip(v,"A","9","horizontal"),n.reserveSpaceForAll(n)},w=e=>(i.removeBoardPointer(),i.pVcBtn.classList.contains("selected")&&i.setGameOverMessagePvC(e),i.cVcBtn.classList.contains("selected")&&i.setGameOverMessageCvC(e),a.gameOver.play(),!0),S=()=>n.allSunk(n)?w("player"):!!s.allSunk(s)&&w("computer"),C=e=>{let t;if(e===s?t=d:e===n&&(t=l),e.hitButNotSunk(e)){const r=t.getLastHit(),s=t.getPrevHit(),o=e.getCell(r.col,r.row),n=o.takenBy.hitCount;if(null!==s&&null!==r&&n>=2&&n<=4?t.finishingAttack(e,r.col,r.row,s):1===n&&t.followupAttack(e,r.col,r.row),e.canBeSunk(o)&&(e.sinkShip(e,r.col,r.row),a.sunk.play()),S())return}else{const{col:r,row:s}=t.randomAttack(e),o=e.getCell(r,s);if("hit"===o.status&&(t.setPrevHit(t.getLastHit()),t.setLastHit({col:r,row:s}),e.canBeSunk(o)&&(e.sinkShip(e,r,s),a.sunk.play(),t.setPrevHit(null),t.setLastHit(null),S())))return}},B=(e,t)=>c(void 0,void 0,void 0,(function*(){i.waiting(!0),i.setTurnMessageCvC(e),yield new Promise((e=>setTimeout(e,i.getSpeedValue()))),i.cVcBtn.classList.contains("selected")&&!p&&(C(t),i.refreshBoard(t))})),b=e=>{e.clearBoard(),(e=>{let a;e===s?(u=t("Carrier"),m=t("Battleship"),h=t("Destroyer"),f=t("Submarine"),v=t("PatrolBoat"),a=[u,m,h,f,v]):e===n&&(a=[t("Carrier"),t("Battleship"),t("Destroyer"),t("Submarine"),t("PatrolBoat")]);g.length=0;const r=["A","B","C","D","E","F","G","H","I","J"],o=()=>r[Math.floor(Math.random()*r.length)],l=()=>Math.ceil(10*Math.random()).toString(),i=()=>Math.random()>.5?"horizontal":"vertical";a.forEach((t=>{let a=o(),r=l(),s=i(),n=e.canBePlaced(t.size,a,r,s);for(;!n;)a=o(),r=l(),s=i(),n=e.canBePlaced(t.size,a,r,s);n&&(e.placeShip(t,a,r,s),e.reserveSpace(e,a,r)),g.push(t)}))})(e),i.refreshBoard(e),e===s&&i.createShipOverlay(e)},k=()=>{i.cVcBtn.classList.contains("selected")&&(b(s),b(n),p=!1,c(void 0,void 0,void 0,(function*(){i.removeBoardPointer();let e=!0;for(;!S()&&!p;)yield B(e,e?s:n),e=!e;p=!1,i.waiting(!1)})),i.refreshBoard(s))},L=()=>{p=!0,l.setPrevHit(null),l.setLastHit(null),d.setPrevHit(null),d.setLastHit(null),s.clearBoard(),n.clearBoard(),y(),i.refreshBoard(s),i.refreshBoard(n),i.createShipOverlay(n),o(s,n,g),i.canBeStarted(),k()};return{init:()=>{i.setInitMessage(),s.generateArray(),n.generateArray(),i.renderBoard(s),i.renderBoard(n),y(),i.refreshBoard(n),i.createShipOverlay(n),o(s,n,g),i.canBeStarted(),k(),i.pVcBtn.disabled=!0},renew:()=>{i.refreshBoard(s),i.refreshBoard(n),i.createShipOverlay(s),i.createShipOverlay(n),o(s,n,g)},humanGameboard:s,computerGameboard:n,restart:L,newGame:()=>c(void 0,void 0,void 0,(function*(){p=!0,yield new Promise((e=>setTimeout(e,i.getSpeedValue()))),p=!1,L()})),start:()=>{i.refreshBoard(s),b(n),p=!1,c(void 0,void 0,void 0,(function*(){let e=!0;for(;!(S()||p||(e&&(yield c(void 0,void 0,void 0,(function*(){i.setTurnMessagePvC(!0),i.setBoardPointer("player"),i.waiting(!1);const{col:e,row:t}=yield i.handleUserInput();l.attack(n,e,t);const r=n.getCell(e,t);n.canBeSunk(r)&&(n.sinkShip(n,e,t),a.sunk.play()),i.refreshBoard(n)})),e=!1),S()||p));)e||(yield c(void 0,void 0,void 0,(function*(){i.setTurnMessagePvC(!1),i.setBoardPointer("computer"),i.waiting(!0),yield new Promise((e=>setTimeout(e,i.getSpeedValue()))),i.pVcBtn.classList.contains("selected")&&!p&&(C(s),i.refreshBoard(s))})),e=!0);p=!1,i.waiting(!1)}))},randomizeShipsPlacement:b,humanShips:g}})();d.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUdrUyxrQkFDOUJpQixFQUFNcE4sT0FBT2dKLEVBQW1CaFAsRUFBS0MsR0FDckMsTUFBTWUsRUFBT2dPLEVBQWtCalAsUUFBUUMsRUFBS0MsR0FDeEMrTyxFQUFrQjFMLFVBQVV0QyxLQUM1QmdPLEVBQWtCekwsU0FBU3lMLEVBQW1CaFAsRUFBS0MsR0FDbkQsRUFBTzZFLEtBQUtOLFFBRWhCLEVBQUd5SyxhQUFhRCxFQUNwQixJQWlCWStELEdBQWUsR0FFZmlCLEtBQWdCSixLQUdmYixVQXJCYyxPQUFVLE9BQVEsT0FBUSxHQUFRLFlBQ3pELEVBQUdELG1CQUFrQixHQUNyQixFQUFHUixnQkFBZ0IsWUFDbkIsRUFBRy9DLFNBQVEsU0FDTCxJQUFJckksU0FBU0MsR0FBWW1FLFdBQVduRSxFQUFTLEVBQUd1SSxtQkFDakQsRUFBRzdCLE9BQU9uRSxVQUFVQyxTQUFTLGNBQWVpSyxJQUdqREssRUFBV2xGLEdBQ1gsRUFBR0UsYUFBYUYsR0FDcEIsSUFhWWdFLEdBQWUsR0FHdkJhLEdBQVksRUFDWixFQUFHckUsU0FBUSxFQUNmLEdBbUYwQixFQXNDd0QrQiwwQkFBeUJDLGFBQzlHLEVBclFrQixHQ1puQixFQUFXZ0QsTSIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9nYW1lYm9hcmQudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL3NoaXAudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL3NvdW5kcy50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvcGxheWVyLnRzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9kcmFnQW5kRHJvcC50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvdWkudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL2NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBnYW1lYm9hcmRGYWN0b3J5ID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvbHMgPSBbJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onXTtcbiAgICBjb25zdCByb3dzID0gWycxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsICcxMCddO1xuICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgY29uc3Qgc2hpcHNQbGFjZWQgPSBbXTtcbiAgICBjb25zdCBnZW5lcmF0ZUFycmF5ID0gKCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGFycmF5W2ldID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwOyBqICs9IDEpIHtcbiAgICAgICAgICAgICAgICBhcnJheVtpXVtqXSA9IHsgY29sOiBjb2xzW2pdLCByb3c6IHJvd3NbaV0sIHN0YXR1czogJ2VtcHR5JywgdGFrZW5CeTogbnVsbCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBjbGVhckJvYXJkID0gKCkgPT4ge1xuICAgICAgICBhcnJheS5mbGF0KCkuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgY2VsbC5zdGF0dXMgPSAnZW1wdHknO1xuICAgICAgICAgICAgY2VsbC50YWtlbkJ5ID0gdW5kZWZpbmVkO1xuICAgICAgICB9KTtcbiAgICAgICAgc2hpcHNQbGFjZWQubGVuZ3RoID0gMDtcbiAgICB9O1xuICAgIGNvbnN0IGdldENlbGwgPSAoY29sLCByb3cpID0+IHtcbiAgICAgICAgY29uc3QgY29sSW5kZXggPSBjb2xzLmluZGV4T2YoY29sKTtcbiAgICAgICAgY29uc3Qgcm93SW5kZXggPSByb3dzLmluZGV4T2Yocm93KTtcbiAgICAgICAgaWYgKGNvbEluZGV4ID09PSAtMSB8fCByb3dJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheVtyb3dJbmRleF1bY29sSW5kZXhdO1xuICAgIH07XG4gICAgY29uc3Qgc2V0Q2VsbCA9IChjb2wsIHJvdywgbmV3U3RhdHVzLCBuZXdUYWtlbkJ5KSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbEluZGV4ID0gY29scy5pbmRleE9mKGNvbCk7XG4gICAgICAgIGNvbnN0IHJvd0luZGV4ID0gcm93cy5pbmRleE9mKHJvdyk7XG4gICAgICAgIGlmIChjb2xJbmRleCA9PT0gLTEgfHwgcm93SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBhcnJheVtyb3dJbmRleF1bY29sSW5kZXhdLnN0YXR1cyA9IG5ld1N0YXR1cztcbiAgICAgICAgaWYgKG5ld1Rha2VuQnkpIHtcbiAgICAgICAgICAgIGFycmF5W3Jvd0luZGV4XVtjb2xJbmRleF0udGFrZW5CeSA9IG5ld1Rha2VuQnk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFycmF5W3Jvd0luZGV4XVtjb2xJbmRleF07XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVTaGlwID0gKHNoaXAsIGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBjb25zdCBnYW1lYm9hcmRDZWxscyA9IGdhbWVib2FyZC5hcnJheS5mbGF0KCk7XG4gICAgICAgIGdhbWVib2FyZENlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ3Rha2VuJyAmJiBjZWxsLnRha2VuQnkubmFtZSA9PT0gc2hpcC5uYW1lKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5zdGF0dXMgPSAnZW1wdHknO1xuICAgICAgICAgICAgICAgIGNlbGwudGFrZW5CeSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzaGlwSW5kZXggPSBzaGlwc1BsYWNlZC5pbmRleE9mKGNlbGwpO1xuICAgICAgICAgICAgaWYgKGNlbGwudGFrZW5CeSA9PT0gbnVsbCAmJiBzaGlwSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgc2hpcHNQbGFjZWQuc3BsaWNlKHNoaXBJbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgcGxhY2VTaGlwID0gKHNoaXAsIGNvbCwgcm93LCBvcmllbnRhdGlvbikgPT4ge1xuICAgICAgICBjb25zdCBpc0hvcml6b250YWwgPSBvcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnO1xuICAgICAgICBjb25zdCBjZWxscyA9IGlzSG9yaXpvbnRhbCA/IGNvbHMgOiByb3dzO1xuICAgICAgICBjb25zdCBzdGFydCA9IGNlbGxzLmluZGV4T2YoaXNIb3Jpem9udGFsID8gY29sIDogcm93KTtcbiAgICAgICAgaWYgKG9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICAgIHNoaXAuaXNWZXJ0aWNhbCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2hpcC5pc1ZlcnRpY2FsID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2hpcENlbGxzID0gW107XG4gICAgICAgIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgKyBzaGlwLnNpemUgPiBjZWxscy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAuc2l6ZTsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q29sID0gaXNIb3Jpem9udGFsID8gY2VsbHNbc3RhcnQgKyBpXSA6IGNvbDtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRSb3cgPSBpc0hvcml6b250YWwgPyByb3cgOiBjZWxsc1tzdGFydCArIGldO1xuICAgICAgICAgICAgaWYgKGdldENlbGwoY3VycmVudENvbCwgY3VycmVudFJvdykuc3RhdHVzICE9PSAnZW1wdHknKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0Q2VsbChjdXJyZW50Q29sLCBjdXJyZW50Um93LCAndGFrZW4nLCBzaGlwKTtcbiAgICAgICAgICAgIHNoaXBDZWxscy5wdXNoKGdldENlbGwoY3VycmVudENvbCwgY3VycmVudFJvdykpO1xuICAgICAgICB9XG4gICAgICAgIHNoaXBzUGxhY2VkLnB1c2goc2hpcENlbGxzWzBdKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBjb25zdCBjYW5CZVBsYWNlZCA9IChzaXplLCBjb2wsIHJvdywgb3JpZW50YXRpb24pID0+IHtcbiAgICAgICAgY29uc3QgaXNIb3Jpem9udGFsID0gb3JpZW50YXRpb24gPT09ICdob3Jpem9udGFsJztcbiAgICAgICAgY29uc3QgY2VsbHMgPSBpc0hvcml6b250YWwgPyBjb2xzIDogcm93cztcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBjZWxscy5pbmRleE9mKGlzSG9yaXpvbnRhbCA/IGNvbCA6IHJvdyk7XG4gICAgICAgIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgKyBzaXplID4gY2VsbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXJlRW1wdHkgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb2wgPSBpc0hvcml6b250YWwgPyBjZWxsc1tzdGFydCArIGldIDogY29sO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFJvdyA9IGlzSG9yaXpvbnRhbCA/IHJvdyA6IGNlbGxzW3N0YXJ0ICsgaV07XG4gICAgICAgICAgICBhcmVFbXB0eS5wdXNoKGdldENlbGwoY3VycmVudENvbCwgY3VycmVudFJvdykuc3RhdHVzID09PSAnZW1wdHknKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJlRW1wdHkuZXZlcnkoKGl0ZW0pID0+IGl0ZW0gPT09IHRydWUpO1xuICAgIH07XG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb2wsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gZ2V0Q2VsbChjb2wsIHJvdyk7XG4gICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ3Rha2VuJykge1xuICAgICAgICAgICAgY2VsbC50YWtlbkJ5LmhpdCgpO1xuICAgICAgICAgICAgc2V0Q2VsbChjb2wsIHJvdywgJ2hpdCcpO1xuICAgICAgICAgICAgcmV0dXJuIGNlbGwuc3RhdHVzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ2VtcHR5JyB8fCBjZWxsLnN0YXR1cyA9PT0gJ3Jlc2VydmVkJykge1xuICAgICAgICAgICAgc2V0Q2VsbChjb2wsIHJvdywgJ21pc3MnKTtcbiAgICAgICAgICAgIHJldHVybiBjZWxsLnN0YXR1cztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IHJlY2VpdmVBcm91bmQgPSAoY29sLCByb3cpID0+IHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGdldENlbGwoY29sLCByb3cpO1xuICAgICAgICBpZiAoY2VsbC5zdGF0dXMgPT09ICdlbXB0eScpIHtcbiAgICAgICAgICAgIHNldENlbGwoY29sLCByb3csICdyZXNlcnZlZCcpO1xuICAgICAgICAgICAgcmV0dXJuIGNlbGwuc3RhdHVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgY29uc3QgcmVzZXJ2ZVNwYWNlID0gKGdhbWVib2FyZCwgY29sLCByb3cpID0+IHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KTtcbiAgICAgICAgaWYgKGNlbGwgJiYgY2VsbC50YWtlbkJ5KSB7XG4gICAgICAgICAgICBjb25zdCBnYW1lYm9hcmRDZWxscyA9IGdhbWVib2FyZC5hcnJheS5mbGF0KCk7XG4gICAgICAgICAgICBjb25zdCBzaGlwQ2VsbHMgPSBnYW1lYm9hcmRDZWxscy5maWx0ZXIoKGMpID0+IGMudGFrZW5CeSAmJiBjLnRha2VuQnkubmFtZSA9PT0gY2VsbC50YWtlbkJ5Lm5hbWUpO1xuICAgICAgICAgICAgc2hpcENlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkaXJlY3Rpb25zID0gW1xuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMCwgcm93OiAtMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMCwgcm93OiAxIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAtMSwgcm93OiAwIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAxLCByb3c6IDAgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IC0xLCByb3c6IC0xIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAtMSwgcm93OiAxIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAxLCByb3c6IC0xIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAxLCByb3c6IDEgfSxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbnMuZm9yRWFjaCgoZGlyZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2VsbC5jb2wuY2hhckNvZGVBdCgwKSArIGRpcmVjdGlvbi5jb2wpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdSb3cgPSAoTnVtYmVyKGNlbGwucm93KSArIGRpcmVjdGlvbi5yb3cpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIG5ld1JvdykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZC5yZWNlaXZlQXJvdW5kKG5ld0NvbCwgbmV3Um93KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGZ1bmN0aW9uIHJlc2VydmVTcGFjZUZvckFsbChnYW1lYm9hcmQpIHtcbiAgICAgICAgZ2FtZWJvYXJkLnNoaXBzUGxhY2VkLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgICAgIGdhbWVib2FyZC5yZXNlcnZlU3BhY2UoZ2FtZWJvYXJkLCBzaGlwLmNvbCwgc2hpcC5yb3cpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVtb3ZlUmVzZXJ2ZWRTcGFjZSA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgZ2FtZWJvYXJkQ2VsbHMgPSBnYW1lYm9hcmQuYXJyYXkuZmxhdCgpO1xuICAgICAgICBnYW1lYm9hcmRDZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2VsbC5zdGF0dXMgPT09ICdyZXNlcnZlZCcpIHtcbiAgICAgICAgICAgICAgICBzZXRDZWxsKGNlbGwuY29sLCBjZWxsLnJvdywgJ2VtcHR5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgY2FuQmVTdW5rID0gKGNlbGwpID0+IHtcbiAgICAgICAgcmV0dXJuIGNlbGwgJiYgY2VsbC50YWtlbkJ5ICYmIGNlbGwudGFrZW5CeS5pc1N1bmsoKTtcbiAgICB9O1xuICAgIGNvbnN0IHNpbmtTaGlwID0gKGdhbWVib2FyZCwgY29sLCByb3cpID0+IHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KTtcbiAgICAgICAgY29uc3Qgc2hpcENlbGxzID0gZ2FtZWJvYXJkLmFycmF5LmZsYXQoKS5maWx0ZXIoKGMpID0+IGMudGFrZW5CeSAmJiBjLnRha2VuQnkubmFtZSA9PT0gY2VsbC50YWtlbkJ5Lm5hbWUpO1xuICAgICAgICBzaGlwQ2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICB7IGNvbDogMCwgcm93OiAtMSB9LFxuICAgICAgICAgICAgICAgIHsgY29sOiAwLCByb3c6IDEgfSxcbiAgICAgICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogMCB9LFxuICAgICAgICAgICAgICAgIHsgY29sOiAxLCByb3c6IDAgfSxcbiAgICAgICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogLTEgfSxcbiAgICAgICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogMSB9LFxuICAgICAgICAgICAgICAgIHsgY29sOiAxLCByb3c6IC0xIH0sXG4gICAgICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogMSB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGRpcmVjdGlvbnMuZm9yRWFjaCgoZGlyZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Q29sID0gU3RyaW5nLmZyb21DaGFyQ29kZShjZWxsLmNvbC5jaGFyQ29kZUF0KDApICsgZGlyZWN0aW9uLmNvbCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Um93ID0gKE51bWJlcihjZWxsLnJvdykgKyBkaXJlY3Rpb24ucm93KS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIG5ld1JvdykpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2sobmV3Q29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IGhpdEJ1dE5vdFN1bmsgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGNvbnN0IGdhbWVib2FyZENlbGxzID0gZ2FtZWJvYXJkLmFycmF5LmZsYXQoKTtcbiAgICAgICAgcmV0dXJuIGdhbWVib2FyZENlbGxzLnNvbWUoKGNlbGwpID0+IHtcbiAgICAgICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ2hpdCcgJiYgY2VsbC50YWtlbkJ5LmlzU3VuaygpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IGFsbFN1bmsgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGNvbnN0IGdhbWVib2FyZENlbGxzID0gZ2FtZWJvYXJkLmFycmF5LmZsYXQoKTtcbiAgICAgICAgbGV0IHRha2VuQnlDZWxscyA9IGdhbWVib2FyZENlbGxzLmZpbHRlcigoY2VsbCkgPT4gY2VsbC50YWtlbkJ5KTtcbiAgICAgICAgaWYgKHRha2VuQnlDZWxscy5sZW5ndGggPiAwICYmIHRha2VuQnlDZWxscy5ldmVyeSgoY2VsbCkgPT4gY2VsbC50YWtlbkJ5LmlzU3VuaygpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIGdlbmVyYXRlQXJyYXksXG4gICAgICAgIGNsZWFyQm9hcmQsXG4gICAgICAgIGdldENlbGwsXG4gICAgICAgIHNldENlbGwsXG4gICAgICAgIHJlbW92ZVNoaXAsXG4gICAgICAgIHBsYWNlU2hpcCxcbiAgICAgICAgcmVjZWl2ZUF0dGFjayxcbiAgICAgICAgcmVjZWl2ZUFyb3VuZCxcbiAgICAgICAgcmVzZXJ2ZVNwYWNlLFxuICAgICAgICByZXNlcnZlU3BhY2VGb3JBbGwsXG4gICAgICAgIGhpdEJ1dE5vdFN1bmssXG4gICAgICAgIGNhbkJlU3VuayxcbiAgICAgICAgc2lua1NoaXAsXG4gICAgICAgIGFsbFN1bmssXG4gICAgICAgIGFycmF5LFxuICAgICAgICBjYW5CZVBsYWNlZCxcbiAgICAgICAgc2hpcHNQbGFjZWQsXG4gICAgICAgIHJlbW92ZVJlc2VydmVkU3BhY2UsXG4gICAgfTtcbn07XG5leHBvcnQgZGVmYXVsdCBnYW1lYm9hcmRGYWN0b3J5O1xuIiwiY29uc3Qgc2hpcEZhY3RvcnkgPSAobmFtZSkgPT4ge1xuICAgIGxldCBzaXplO1xuICAgIGlmIChuYW1lID09PSAnQ2FycmllcicpIHtcbiAgICAgICAgc2l6ZSA9IDU7XG4gICAgfVxuICAgIGlmIChuYW1lID09PSAnQmF0dGxlc2hpcCcpIHtcbiAgICAgICAgc2l6ZSA9IDQ7XG4gICAgfVxuICAgIGlmIChuYW1lID09PSAnRGVzdHJveWVyJykge1xuICAgICAgICBzaXplID0gMztcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09ICdTdWJtYXJpbmUnKSB7XG4gICAgICAgIHNpemUgPSAzO1xuICAgIH1cbiAgICBpZiAobmFtZSA9PT0gJ1BhdHJvbEJvYXQnKSB7XG4gICAgICAgIHNpemUgPSAyO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lLFxuICAgICAgICBzaXplLFxuICAgICAgICBoaXRDb3VudDogMCxcbiAgICAgICAgaXNWZXJ0aWNhbDogZmFsc2UsXG4gICAgICAgIHJvdGF0ZSgpIHtcbiAgICAgICAgICAgIHRoaXMuaXNWZXJ0aWNhbCA9ICF0aGlzLmlzVmVydGljYWw7XG4gICAgICAgIH0sXG4gICAgICAgIGhpdCgpIHtcbiAgICAgICAgICAgIHRoaXMuaGl0Q291bnQgKz0gMTtcbiAgICAgICAgfSxcbiAgICAgICAgaXNTdW5rKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGl0Q291bnQgPT09IHNpemU7XG4gICAgICAgIH0sXG4gICAgfTtcbn07XG5leHBvcnQgZGVmYXVsdCBzaGlwRmFjdG9yeTtcbiIsImNvbnN0IHNvdW5kcyA9ICgoKSA9PiB7XG4gICAgY29uc3QgaW5pdCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbWlzcyA9IG5ldyBBdWRpbygnc291bmRzL2dyYXkxd2VhLndhdicpO1xuICAgICAgICBjb25zdCBoaXQgPSBuZXcgQXVkaW8oJ3NvdW5kcy9leHBsby53YXYnKTtcbiAgICAgICAgY29uc3Qgc3VuayA9IG5ldyBBdWRpbygnc291bmRzL2V4cGxvZGVhLndhdicpO1xuICAgICAgICBjb25zdCBnYW1lT3ZlciA9IG5ldyBBdWRpbygnc291bmRzL2NhcHR1cmUud2F2Jyk7XG4gICAgICAgIGNvbnN0IGRyb3AgPSBuZXcgQXVkaW8oJ3NvdW5kcy9iYXJyMXNlbC53YXYnKTtcbiAgICAgICAgY29uc3Qgcm90YXRlID0gbmV3IEF1ZGlvKCdzb3VuZHMvZHJhaW4ud2F2Jyk7XG4gICAgICAgIGNvbnN0IHJhbmRvbSA9IG5ldyBBdWRpbygnc291bmRzL2V4cDFzZWwud2F2Jyk7XG4gICAgICAgIGNvbnN0IHNlbGVjdCA9IG5ldyBBdWRpbygnc291bmRzL21zZy53YXYnKTtcbiAgICAgICAgY29uc3QgdGljayA9IG5ldyBBdWRpbygnc291bmRzL2JlZXAud2F2Jyk7XG4gICAgICAgIGNvbnN0IGdyYWIgPSBuZXcgQXVkaW8oJ3NvdW5kcy9idXR0b25SZXYud2F2Jyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtaXNzLFxuICAgICAgICAgICAgaGl0LFxuICAgICAgICAgICAgc3VuayxcbiAgICAgICAgICAgIGdhbWVPdmVyLFxuICAgICAgICAgICAgZHJvcCxcbiAgICAgICAgICAgIHJvdGF0ZSxcbiAgICAgICAgICAgIHJhbmRvbSxcbiAgICAgICAgICAgIHNlbGVjdCxcbiAgICAgICAgICAgIHRpY2ssXG4gICAgICAgICAgICBncmFiLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgcGxheUF1ZGlvID0gKGF1ZGlvKSA9PiB7XG4gICAgICAgIE9iamVjdC5rZXlzKGF1ZGlvKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBsYXlTb3VuZCA9IGF1ZGlvW2tleV0ucGxheTtcbiAgICAgICAgICAgIGF1ZGlvW2tleV0ucGxheSA9IGZ1bmN0aW9uIHNvdW5kUGxheWVyKCkge1xuICAgICAgICAgICAgICAgIGlmIChhdWRpb1trZXldLmN1cnJlbnRUaW1lID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBhdWRpb1trZXldLnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvW2tleV0uY3VycmVudFRpbWUgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcGxheVNvdW5kLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IGxvYWQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGF1ZGlvID0gaW5pdCgpO1xuICAgICAgICBwbGF5QXVkaW8oYXVkaW8pO1xuICAgICAgICByZXR1cm4gYXVkaW87XG4gICAgfTtcbiAgICByZXR1cm4gbG9hZCgpO1xufSkoKTtcbmV4cG9ydCBkZWZhdWx0IHNvdW5kcztcbiIsImltcG9ydCBzb3VuZHMgZnJvbSAnLi9zb3VuZHMnO1xuY29uc3QgcGxheWVyRmFjdG9yeSA9ICgpID0+IHtcbiAgICBjb25zdCBjb2xzID0gWydBJywgJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAnSScsICdKJ107XG4gICAgbGV0IHByZXZIaXQgPSBudWxsO1xuICAgIGxldCBsYXN0SGl0ID0gbnVsbDtcbiAgICBsZXQgcmFuZ2UgPSAxO1xuICAgIGxldCBnb1JpZ2h0ID0gdHJ1ZTtcbiAgICBsZXQgZ29Eb3duID0gdHJ1ZTtcbiAgICBjb25zdCBhdHRhY2sgPSAoZ2FtZWJvYXJkLCBjb2wsIHJvdykgPT4ge1xuICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpLnN0YXR1cyAhPT0gJ2hpdCcgJiYgZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpLnN0YXR1cyAhPT0gJ21pc3MnKSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soY29sLCByb3cpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICBzZXRQcmV2SGl0KGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IGNvbCwgcm93OiByb3cgfSk7XG4gICAgICAgICAgICAgICAgc291bmRzLmhpdC5wbGF5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChyZXN1bHQgPT09ICdtaXNzJykge1xuICAgICAgICAgICAgICAgIHNvdW5kcy5taXNzLnBsYXkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICdhbHJlYWR5IHNob3QnO1xuICAgIH07XG4gICAgY29uc3QgcmFuZG9tQXR0YWNrID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBsZXQgcmFuZG9tQ29sO1xuICAgICAgICBsZXQgcmFuZG9tUm93O1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICByYW5kb21Db2wgPSBjb2xzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvbHMubGVuZ3RoKV07XG4gICAgICAgICAgICByYW5kb21Sb3cgPSBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIDEwKS50b1N0cmluZygpO1xuICAgICAgICB9IHdoaWxlIChnYW1lYm9hcmQuZ2V0Q2VsbChyYW5kb21Db2wsIHJhbmRvbVJvdykuc3RhdHVzID09PSAnaGl0JyB8fCBnYW1lYm9hcmQuZ2V0Q2VsbChyYW5kb21Db2wsIHJhbmRvbVJvdykuc3RhdHVzID09PSAnbWlzcycpO1xuICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyAhPT0gJ2hpdCcgJiYgZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyAhPT0gJ21pc3MnKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhyYW5kb21Db2wsIHJhbmRvbVJvdyk7XG4gICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICBzZXRQcmV2SGl0KGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IHJhbmRvbUNvbCwgcm93OiByYW5kb21Sb3cgfSk7XG4gICAgICAgICAgICAgICAgc291bmRzLmhpdC5wbGF5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChyYW5kb21Db2wsIHJhbmRvbVJvdykuc3RhdHVzID09PSAnbWlzcycpIHtcbiAgICAgICAgICAgICAgICBzb3VuZHMubWlzcy5wbGF5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyByZXN1bHQsIGNvbDogcmFuZG9tQ29sLCByb3c6IHJhbmRvbVJvdyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHJlc3VsdDogJ2FscmVhZHkgc2hvdCcsIGNvbDogcmFuZG9tQ29sLCByb3c6IHJhbmRvbVJvdyB9O1xuICAgIH07XG4gICAgY29uc3QgZm9sbG93dXBBdHRhY2sgPSAoZ2FtZWJvYXJkLCBjb2wsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBkaXJlY3Rpb25zID0gW1xuICAgICAgICAgICAgeyBjb2w6IDAsIHJvdzogLTEgfSxcbiAgICAgICAgICAgIHsgY29sOiAwLCByb3c6IDEgfSxcbiAgICAgICAgICAgIHsgY29sOiAtMSwgcm93OiAwIH0sXG4gICAgICAgICAgICB7IGNvbDogMSwgcm93OiAwIH0sXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IHZhbGlkRGlyZWN0aW9ucyA9IGRpcmVjdGlvbnMuZmlsdGVyKChkaXJlY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgKyBkaXJlY3Rpb24uY29sKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1JvdyA9IChOdW1iZXIocm93KSArIGRpcmVjdGlvbi5yb3cpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBjb25zdCBjZWxsID0gZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgaWYgKGNlbGwgJiYgY2VsbC5zdGF0dXMgIT09ICdtaXNzJyAmJiBjZWxsLnN0YXR1cyAhPT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh2YWxpZERpcmVjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgcmFuZG9tRGlyZWN0aW9uID0gdmFsaWREaXJlY3Rpb25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHZhbGlkRGlyZWN0aW9ucy5sZW5ndGgpXTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgKyByYW5kb21EaXJlY3Rpb24uY29sKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1JvdyA9IChOdW1iZXIocm93KSArIHJhbmRvbURpcmVjdGlvbi5yb3cpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhuZXdDb2wsIG5ld1Jvdyk7XG4gICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCBuZXdSb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICBzZXRQcmV2SGl0KGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IG5ld0NvbCwgcm93OiBuZXdSb3cgfSk7XG4gICAgICAgICAgICAgICAgc291bmRzLmhpdC5wbGF5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIG5ld1Jvdykuc3RhdHVzID09PSAnbWlzcycpIHtcbiAgICAgICAgICAgICAgICBzb3VuZHMubWlzcy5wbGF5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGZpbmlzaGluZ0F0dGFjayA9IChnYW1lYm9hcmQsIGNvbCwgcm93LCBwcmV2SGl0KSA9PiB7XG4gICAgICAgIGlmIChwcmV2SGl0LnJvdyA9PT0gcm93KSB7XG4gICAgICAgICAgICBpZiAoZ29SaWdodCkge1xuICAgICAgICAgICAgICAgIHJhbmdlID0gMTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Q29sID0gU3RyaW5nLmZyb21DaGFyQ29kZShjb2wuY2hhckNvZGVBdCgwKSArIHJhbmdlKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgKyByYW5nZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykgJiYgZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpLnN0YXR1cyAhPT0gJ2hpdCcgJiYgZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpLnN0YXR1cyAhPT0gJ21pc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKG5ld0NvbCwgcm93KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRQcmV2SGl0KGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGFzdEhpdCh7IGNvbDogbmV3Q29sLCByb3c6IHJvdyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdW5kcy5oaXQucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgPT09ICdtaXNzJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc291bmRzLm1pc3MucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGdvUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZmluaXNoaW5nQXR0YWNrKGdhbWVib2FyZCwgbmV3Q29sLCByb3csIHByZXZIaXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJhbmdlID0gMTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Q29sID0gU3RyaW5nLmZyb21DaGFyQ29kZShjb2wuY2hhckNvZGVBdCgwKSAtIHJhbmdlKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgLSByYW5nZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykgJiYgZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpLnN0YXR1cyAhPT0gJ2hpdCcgJiYgZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpLnN0YXR1cyAhPT0gJ21pc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKG5ld0NvbCwgcm93KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRQcmV2SGl0KGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGFzdEhpdCh7IGNvbDogbmV3Q29sLCByb3c6IHJvdyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdW5kcy5oaXQucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgPT09ICdtaXNzJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc291bmRzLm1pc3MucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGdvUmlnaHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hpbmdBdHRhY2soZ2FtZWJvYXJkLCBuZXdDb2wsIHJvdywgcHJldkhpdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHByZXZIaXQuY29sID09PSBjb2wpIHtcbiAgICAgICAgICAgIGlmIChnb0Rvd24pIHtcbiAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgbGV0IG5ld1JvdyA9IChOdW1iZXIocm93KSArIHJhbmdlKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1JvdykgJiYgZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgbmV3Um93ID0gKE51bWJlcihyb3cpICsgcmFuZ2UpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1JvdykgJiYgZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpLnN0YXR1cyAhPT0gJ2hpdCcgJiYgZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpLnN0YXR1cyAhPT0gJ21pc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKGNvbCwgbmV3Um93KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRQcmV2SGl0KGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGFzdEhpdCh7IGNvbDogY29sLCByb3c6IG5ld1JvdyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdW5kcy5oaXQucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KS5zdGF0dXMgPT09ICdtaXNzJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc291bmRzLm1pc3MucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGdvRG93biA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hpbmdBdHRhY2soZ2FtZWJvYXJkLCBjb2wsIG5ld1JvdywgcHJldkhpdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgICAgIGxldCBuZXdSb3cgPSAoTnVtYmVyKHJvdykgLSByYW5nZSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIG5ld1JvdyA9IChOdW1iZXIocm93KSAtIHJhbmdlKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhjb2wsIG5ld1Jvdyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IGNvbCwgcm93OiBuZXdSb3cgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VuZHMuaGl0LnBsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzID09PSAnbWlzcycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdW5kcy5taXNzLnBsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgICAgICAgICBnb0Rvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hpbmdBdHRhY2soZ2FtZWJvYXJkLCBjb2wsIG5ld1JvdywgcHJldkhpdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBnZXRQcmV2SGl0ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gcHJldkhpdDtcbiAgICB9O1xuICAgIGNvbnN0IGdldExhc3RIaXQgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBsYXN0SGl0O1xuICAgIH07XG4gICAgY29uc3Qgc2V0UHJldkhpdCA9IChuZXdQcmV2SGl0KSA9PiB7XG4gICAgICAgIHByZXZIaXQgPSBuZXdQcmV2SGl0O1xuICAgIH07XG4gICAgY29uc3Qgc2V0TGFzdEhpdCA9IChuZXdMYXN0SGl0KSA9PiB7XG4gICAgICAgIGxhc3RIaXQgPSBuZXdMYXN0SGl0O1xuICAgIH07XG4gICAgcmV0dXJuIHsgYXR0YWNrLCByYW5kb21BdHRhY2ssIGZvbGxvd3VwQXR0YWNrLCBmaW5pc2hpbmdBdHRhY2ssIHByZXZIaXQsIGxhc3RIaXQsIGdldFByZXZIaXQsIGdldExhc3RIaXQsIHNldFByZXZIaXQsIHNldExhc3RIaXQgfTtcbn07XG5leHBvcnQgZGVmYXVsdCBwbGF5ZXJGYWN0b3J5O1xuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgdWkgZnJvbSAnLi91aSc7XG5pbXBvcnQgY29udHJvbGxlciBmcm9tICcuL2NvbnRyb2xsZXInO1xuaW1wb3J0IHNvdW5kcyBmcm9tICcuL3NvdW5kcyc7XG5jb25zdCBkcmFnQW5kRHJvcCA9IChmaXJzdEdhbWVib2FyZCwgc2Vjb25kR2FtZWJvYXJkLCBzaGlwcykgPT4ge1xuICAgIGNvbnN0IGZpcnN0Qm9hcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpcnN0Qm9hcmQnKTtcbiAgICBjb25zdCBzZWNvbmRCb2FyZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICBjb25zdCBmaXJzdEJvYXJkQ2VsbHMgPSBmaXJzdEJvYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpO1xuICAgIGNvbnN0IHNlY29uZEJvYXJkQ2VsbHMgPSBzZWNvbmRCb2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKTtcbiAgICBsZXQgc2hpcE5hbWU7XG4gICAgbGV0IHNoaXBTaXplO1xuICAgIGxldCBncmFiUG9pbnRYID0gMDtcbiAgICBsZXQgZ3JhYlBvaW50WSA9IDA7XG4gICAgbGV0IHNoaXBPYmo7XG4gICAgbGV0IG9yaWVudGF0aW9uO1xuICAgIGxldCBoaWdobGlnaHRlZENlbGxzID0gW107XG4gICAgY29uc3Qgc2hpcE5hbWVUb09iaiA9IHtcbiAgICAgICAgY2Fycmllcjogc2hpcHNbMF0sXG4gICAgICAgIGJhdHRsZXNoaXA6IHNoaXBzWzFdLFxuICAgICAgICBkZXN0cm95ZXI6IHNoaXBzWzJdLFxuICAgICAgICBzdWJtYXJpbmU6IHNoaXBzWzNdLFxuICAgICAgICBwYXRyb2xib2F0OiBzaGlwc1s0XSxcbiAgICB9O1xuICAgIGxldCBsYXN0RHJhZ2dlZCA9IG51bGw7XG4gICAgY29uc3QgZHJhZ2dhYmxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcmFnZ2FibGUnKTtcbiAgICBmdW5jdGlvbiBnZXROb25TaGlwQ2VsbHMoYm9hcmRDZWxscykge1xuICAgICAgICBjb25zdCBib2FyZENlbGxzQXJyYXkgPSBBcnJheS5mcm9tKGJvYXJkQ2VsbHMpO1xuICAgICAgICByZXR1cm4gYm9hcmRDZWxsc0FycmF5LmZpbHRlcigoY2VsbCkgPT4gIWNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YWtlbicpKTtcbiAgICB9XG4gICAgY29uc3Qgbm9uU2hpcENlbGxzID0gWy4uLmdldE5vblNoaXBDZWxscyhmaXJzdEJvYXJkQ2VsbHMpLCAuLi5nZXROb25TaGlwQ2VsbHMoc2Vjb25kQm9hcmRDZWxscyldO1xuICAgIGZ1bmN0aW9uIGlzVmFsaWRQbGFjZW1lbnQodG9IaWdobGlnaHQpIHtcbiAgICAgICAgcmV0dXJuICh0b0hpZ2hsaWdodC5ldmVyeSgoY2VsbCkgPT4gY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2VtcHR5JykpICYmXG4gICAgICAgICAgICAodG9IaWdobGlnaHQuZXZlcnkoKGNlbGwpID0+IGNlbGwuZGF0YXNldC5jb2wgPT09IHRvSGlnaGxpZ2h0WzBdLmRhdGFzZXQuY29sKSB8fFxuICAgICAgICAgICAgICAgIHRvSGlnaGxpZ2h0LmV2ZXJ5KChjZWxsKSA9PiBjZWxsLmRhdGFzZXQucm93ID09PSB0b0hpZ2hsaWdodFswXS5kYXRhc2V0LnJvdykpICYmXG4gICAgICAgICAgICB0b0hpZ2hsaWdodC5sZW5ndGggPT09IHNoaXBTaXplICYmXG4gICAgICAgICAgICB0b0hpZ2hsaWdodC5ldmVyeSgoY2VsbCkgPT4gY2VsbC5kYXRhc2V0LmNvbCA+PSAnQScgJiYgY2VsbC5kYXRhc2V0LmNvbCA8PSAnSicpICYmXG4gICAgICAgICAgICB0b0hpZ2hsaWdodC5ldmVyeSgoY2VsbCkgPT4gTnVtYmVyKGNlbGwuZGF0YXNldC5yb3cpID49IDEgJiYgTnVtYmVyKGNlbGwuZGF0YXNldC5yb3cpIDw9IDEwKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldExhc3RTaGlwU2l6ZUVsZW1lbnRzKGhpZ2hsaWdodGVkQ2VsbHMsIHNoaXBTaXplKSB7XG4gICAgICAgIHJldHVybiBoaWdobGlnaHRlZENlbGxzLnNsaWNlKE1hdGgubWluKGhpZ2hsaWdodGVkQ2VsbHMubGVuZ3RoIC0gc2hpcFNpemUsIDApKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0R2FtZWJvYXJkKGUpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgIGxldCBnYW1lYm9hcmQ7XG4gICAgICAgIGNvbnN0IGJvYXJkSWQgPSB0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQ7XG4gICAgICAgIGlmIChib2FyZElkID09PSAnZmlyc3RCb2FyZCcpIHtcbiAgICAgICAgICAgIGdhbWVib2FyZCA9IGZpcnN0R2FtZWJvYXJkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChib2FyZElkID09PSAnc2Vjb25kQm9hcmQnKSB7XG4gICAgICAgICAgICBnYW1lYm9hcmQgPSBzZWNvbmRHYW1lYm9hcmQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdGFyZ2V0LCBnYW1lYm9hcmQgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVzZXJ2ZVNwYWNlRm9yUmVtYWluaW5nU2hpcHMoZ2FtZWJvYXJkLCBlKSB7XG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBnZXRHYW1lYm9hcmQoZSk7XG4gICAgICAgIGNvbnN0IHRhcmdldFNoaXBOYW1lID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJyk7XG4gICAgICAgIGxldCByZW1haW5pbmdTaGlwcyA9IGdhbWVib2FyZC5zaGlwc1BsYWNlZC5maWx0ZXIoKHNoaXApID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRTaGlwTmFtZSAhPT0gc2hpcC50YWtlbkJ5Lm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlbWFpbmluZ1NoaXBzLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgICAgIGdhbWVib2FyZC5yZXNlcnZlU3BhY2UoZ2FtZWJvYXJkLCBzaGlwLmNvbCwgc2hpcC5yb3cpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0U2hpcEF0dHJpYnV0ZXMoZSwgdGFyZ2V0KSB7XG4gICAgICAgIHNoaXBOYW1lID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJyk7XG4gICAgICAgIHNoaXBTaXplID0gTnVtYmVyKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2l6ZScpKTtcbiAgICAgICAgZ3JhYlBvaW50WCA9IGUub2Zmc2V0WDtcbiAgICAgICAgZ3JhYlBvaW50WSA9IGUub2Zmc2V0WTtcbiAgICAgICAgc2hpcE9iaiA9IHNoaXBOYW1lVG9PYmpbc2hpcE5hbWVdO1xuICAgICAgICBvcmllbnRhdGlvbiA9IHNoaXBPYmouaXNWZXJ0aWNhbCA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCc7XG4gICAgICAgIHJldHVybiB7IHNoaXBOYW1lLCBzaGlwT2JqIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByZXZlbnRPZmZCb2FyZFBsYWNlbWVudCh0YXJnZXQsIGUpIHtcbiAgICAgICAgaWYgKGhpZ2hsaWdodGVkQ2VsbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBib2FyZCA9IHRhcmdldC5jbG9zZXN0KCcuYm9hcmQnKTtcbiAgICAgICAgICAgIGlmIChib2FyZCkge1xuICAgICAgICAgICAgICAgIGxldCB7IGdhbWVib2FyZCB9ID0gZ2V0R2FtZWJvYXJkKGUpO1xuICAgICAgICAgICAgICAgIGlmIChib2FyZC5pZCA9PT0gJ2ZpcnN0Qm9hcmQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZCA9IGZpcnN0R2FtZWJvYXJkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChib2FyZC5pZCA9PT0gJ3NlY29uZEJvYXJkJykge1xuICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQgPSBzZWNvbmRHYW1lYm9hcmQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQgJiYgbGFzdERyYWdnZWQgJiYgZ2FtZWJvYXJkLmNhbkJlUGxhY2VkKHNoaXBPYmouc2l6ZSwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5jb2wsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwT2JqLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnJlc2VydmVTcGFjZShnYW1lYm9hcmQsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQuY29sLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LnJvdyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIucmVuZXcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0U3RhcnRDZWxsKGluZGV4LCBzaGlwT2JqLCBlKSB7XG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBnZXRHYW1lYm9hcmQoZSk7XG4gICAgICAgIHJldHVybiBpbmRleCAtIChzaGlwT2JqLmlzVmVydGljYWwgPyBNYXRoLmZsb29yKGdyYWJQb2ludFkgLyB0YXJnZXQub2Zmc2V0SGVpZ2h0KSAqIDEwIDogTWF0aC5mbG9vcihncmFiUG9pbnRYIC8gdGFyZ2V0Lm9mZnNldFdpZHRoKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEJvYXJkQ2VsbHMoYm9hcmRJZCkge1xuICAgICAgICByZXR1cm4gYm9hcmRJZCA9PT0gJ2ZpcnN0Qm9hcmQnID8gZmlyc3RCb2FyZENlbGxzIDogc2Vjb25kQm9hcmRDZWxscztcbiAgICB9XG4gICAgZnVuY3Rpb24gaGlnaGxpZ2h0Q2VsbHModG9IaWdobGlnaHQpIHtcbiAgICAgICAgdG9IaWdobGlnaHQuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHQnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhpZ2hsaWdodENlbGxzT25Cb2FyZChzaGlwT2JqLCBzdGFydENlbGwsIGJvYXJkQ2VsbHMsIHRvSGlnaGxpZ2h0KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcFNpemU7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNlbGxJbmRleCA9IHNoaXBPYmouaXNWZXJ0aWNhbCA/IHN0YXJ0Q2VsbCArIGkgKiAxMCA6IHN0YXJ0Q2VsbCArIGk7XG4gICAgICAgICAgICBpZiAoYm9hcmRDZWxsc1tjZWxsSW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgdG9IaWdobGlnaHQucHVzaChib2FyZENlbGxzW2NlbGxJbmRleF0pO1xuICAgICAgICAgICAgICAgIGhpZ2hsaWdodGVkQ2VsbHMucHVzaChib2FyZENlbGxzW2NlbGxJbmRleF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbW92ZUhpZ2hsaWdodCgpIHtcbiAgICAgICAgaGlnaGxpZ2h0ZWRDZWxscy5mb3JFYWNoKChoaWdobGlnaHRlZENlbGwpID0+IGhpZ2hsaWdodGVkQ2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWdobGlnaHQnKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzQm9hcmRWYWxpZChib2FyZElkKSB7XG4gICAgICAgIHJldHVybiBib2FyZElkID09PSAnZmlyc3RCb2FyZCcgfHwgYm9hcmRJZCA9PT0gJ3NlY29uZEJvYXJkJztcbiAgICB9XG4gICAgZnVuY3Rpb24gcGxhY2VTaGlwT25Cb2FyZChnYW1lYm9hcmQsIHNoaXBPYmosIGxhc3QsIG9yaWVudGF0aW9uKSB7XG4gICAgICAgIGlmIChnYW1lYm9hcmQuY2FuQmVQbGFjZWQoc2hpcE9iai5zaXplLCBsYXN0WzBdLmRhdGFzZXQuY29sLCBsYXN0WzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbikpIHtcbiAgICAgICAgICAgIGdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcE9iaiwgbGFzdFswXS5kYXRhc2V0LmNvbCwgbGFzdFswXS5kYXRhc2V0LnJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICAgICAgZ2FtZWJvYXJkLnJlc2VydmVTcGFjZShnYW1lYm9hcmQsIGxhc3RbMF0uZGF0YXNldC5jb2wsIGxhc3RbMF0uZGF0YXNldC5yb3cpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZ2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwT2JqLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgIGdhbWVib2FyZC5yZXNlcnZlU3BhY2UoZ2FtZWJvYXJkLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3cpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZU1vdXNlZG93bihlKSB7XG4gICAgICAgIGNvbnN0IHsgZ2FtZWJvYXJkIH0gPSBnZXRHYW1lYm9hcmQoZSk7XG4gICAgICAgIGdhbWVib2FyZC5yZW1vdmVSZXNlcnZlZFNwYWNlKGdhbWVib2FyZCk7XG4gICAgICAgIHJlc2VydmVTcGFjZUZvclJlbWFpbmluZ1NoaXBzKGdhbWVib2FyZCwgZSk7XG4gICAgICAgIGNvbnRyb2xsZXIucmVuZXcoKTtcbiAgICAgICAgdWkuc2V0SW5pdE1lc3NhZ2UoKTtcbiAgICAgICAgaWYgKGUuYnV0dG9uID09PSAwKSB7XG4gICAgICAgICAgICBzb3VuZHMuZ3JhYi5wbGF5KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gaGFuZGxlRHJhZ1N0YXJ0KGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDApKTtcbiAgICAgICAgICAgIGNvbnN0IHsgdGFyZ2V0LCBnYW1lYm9hcmQgfSA9IGdldEdhbWVib2FyZChlKTtcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgICAgICBzZXRTaGlwQXR0cmlidXRlcyhlLCB0YXJnZXQpO1xuICAgICAgICAgICAgZ2FtZWJvYXJkLnJlbW92ZVNoaXAoc2hpcE9iaiwgZ2FtZWJvYXJkKTtcbiAgICAgICAgICAgIHVpLmNsZWFyU2hpcChzaGlwT2JqLCBnYW1lYm9hcmQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFuZGxlRHJhZ092ZXIoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZ2V0R2FtZWJvYXJkKGUpO1xuICAgICAgICAgICAgY29uc3QgYm9hcmRJZCA9IHRhcmdldC5jbG9zZXN0KCcuYm9hcmQnKS5pZDtcbiAgICAgICAgICAgIGlmIChpc0JvYXJkVmFsaWQoYm9hcmRJZCkpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaWYgKHNoaXBPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRDZWxsID0gZ2V0U3RhcnRDZWxsKGluZGV4LCBzaGlwT2JqLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYm9hcmRDZWxscyA9IGdldEJvYXJkQ2VsbHMoYm9hcmRJZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvSGlnaGxpZ2h0ID0gW107XG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodENlbGxzT25Cb2FyZChzaGlwT2JqLCBzdGFydENlbGwsIGJvYXJkQ2VsbHMsIHRvSGlnaGxpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzVmFsaWRQbGFjZW1lbnQodG9IaWdobGlnaHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRDZWxscyh0b0hpZ2hsaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxhc3REcmFnZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdERyYWdnZWQgPSBnZXRMYXN0U2hpcFNpemVFbGVtZW50cyhoaWdobGlnaHRlZENlbGxzLCBzaGlwU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZURyYWdMZWF2ZSgpIHtcbiAgICAgICAgcmVtb3ZlSGlnaGxpZ2h0KCk7XG4gICAgICAgIGhpZ2hsaWdodGVkQ2VsbHMubGVuZ3RoID0gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFuZGxlRHJvcChlKSB7XG4gICAgICAgIHJlbW92ZUhpZ2hsaWdodCgpO1xuICAgICAgICBjb25zdCBsYXN0ID0gZ2V0TGFzdFNoaXBTaXplRWxlbWVudHMoaGlnaGxpZ2h0ZWRDZWxscywgc2hpcFNpemUpO1xuICAgICAgICBjb25zdCB7IHRhcmdldCwgZ2FtZWJvYXJkIH0gPSBnZXRHYW1lYm9hcmQoZSk7XG4gICAgICAgIGNvbnN0IGJvYXJkSWQgPSB0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQ7XG4gICAgICAgIGlmIChpc0JvYXJkVmFsaWQoYm9hcmRJZCkgJiYgc2hpcE9iaiAmJiBsYXN0RHJhZ2dlZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcGxhY2VTaGlwT25Cb2FyZChnYW1lYm9hcmQsIHNoaXBPYmosIGxhc3QsIG9yaWVudGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBnYW1lYm9hcmQucmVtb3ZlUmVzZXJ2ZWRTcGFjZShnYW1lYm9hcmQpO1xuICAgICAgICBnYW1lYm9hcmQucmVzZXJ2ZVNwYWNlRm9yQWxsKGdhbWVib2FyZCk7XG4gICAgICAgIGNvbnRyb2xsZXIucmVuZXcoKTtcbiAgICAgICAgdWkuY2FuQmVTdGFydGVkKCk7XG4gICAgICAgIHVpLnNldFN0YXJ0TWVzc2FnZSgpO1xuICAgICAgICBsYXN0RHJhZ2dlZCA9IG51bGw7XG4gICAgICAgIHNvdW5kcy5kcm9wLnBsYXkoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFuZGxlRHJhZ0VuZChlKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICB0YXJnZXQuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgcHJldmVudE9mZkJvYXJkUGxhY2VtZW50KHRhcmdldCwgZSk7XG4gICAgICAgIGlmICh1aS5jYW5CZVN0YXJ0ZWQoKSkge1xuICAgICAgICAgICAgdWkuZmlsbENlbGxzKCdzZWNvbmQnKTtcbiAgICAgICAgfVxuICAgICAgICB1aS5zZXRTdGFydE1lc3NhZ2UoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFuZGxlTW91c2V1cChlKSB7XG4gICAgICAgIGNvbnN0IHsgZ2FtZWJvYXJkIH0gPSBnZXRHYW1lYm9hcmQoZSk7XG4gICAgICAgIGdhbWVib2FyZC5yZXNlcnZlU3BhY2VGb3JBbGwoZ2FtZWJvYXJkKTtcbiAgICAgICAgY29udHJvbGxlci5yZW5ldygpO1xuICAgICAgICB1aS5zZXRTdGFydE1lc3NhZ2UoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFuZGxlUm90YXRlKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCB7IHRhcmdldCwgZ2FtZWJvYXJkIH0gPSBnZXRHYW1lYm9hcmQoZSk7XG4gICAgICAgIGNvbnN0IHsgc2hpcE5hbWUsIHNoaXBPYmogfSA9IHNldFNoaXBBdHRyaWJ1dGVzKGUsIHRhcmdldCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBnYW1lYm9hcmQuc2hpcHNQbGFjZWQuZmlsdGVyKChzaGlwKSA9PiBzaGlwLnRha2VuQnkubmFtZS50b0xvd2VyQ2FzZSgpID09PSBzaGlwTmFtZSk7XG4gICAgICAgIGdhbWVib2FyZC5yZW1vdmVTaGlwKHNoaXBPYmosIGdhbWVib2FyZCk7XG4gICAgICAgIGdhbWVib2FyZC5yZW1vdmVSZXNlcnZlZFNwYWNlKGdhbWVib2FyZCk7XG4gICAgICAgIGdhbWVib2FyZC5yZXNlcnZlU3BhY2VGb3JBbGwoZ2FtZWJvYXJkKTtcbiAgICAgICAgc2hpcE9iai5yb3RhdGUoKTtcbiAgICAgICAgb3JpZW50YXRpb24gPSBzaGlwT2JqLmlzVmVydGljYWwgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnO1xuICAgICAgICBpZiAoIWdhbWVib2FyZC5jYW5CZVBsYWNlZChzaGlwT2JqLnNpemUsIGN1cnJlbnRbMF0uY29sLCBjdXJyZW50WzBdLnJvdywgb3JpZW50YXRpb24pKSB7XG4gICAgICAgICAgICBzaGlwT2JqLnJvdGF0ZSgpO1xuICAgICAgICAgICAgb3JpZW50YXRpb24gPSBzaGlwT2JqLmlzVmVydGljYWwgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnO1xuICAgICAgICB9XG4gICAgICAgIGdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcE9iaiwgY3VycmVudFswXS5jb2wsIGN1cnJlbnRbMF0ucm93LCBvcmllbnRhdGlvbik7XG4gICAgICAgIGdhbWVib2FyZC5yZXNlcnZlU3BhY2VGb3JBbGwoZ2FtZWJvYXJkKTtcbiAgICAgICAgY29udHJvbGxlci5yZW5ldygpO1xuICAgICAgICBpZiAodWkuY2FuQmVTdGFydGVkKCkpIHtcbiAgICAgICAgICAgIHVpLmZpbGxDZWxscygnc2Vjb25kJyk7XG4gICAgICAgIH1cbiAgICAgICAgc291bmRzLnJvdGF0ZS5wbGF5KCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJsb2NrUmlnaHRDbGljayhlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnNUb0NlbGxzKGNlbGxzKSB7XG4gICAgICAgIGNlbGxzLmZvckVhY2goKGNlbGwsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgaGFuZGxlRHJhZ092ZXIoaW5kZXgpKTtcbiAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgaGFuZGxlRHJhZ0xlYXZlKTtcbiAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGhhbmRsZURyb3ApO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWRkRXZlbnRMaXN0ZW5lcnNUb0NlbGxzKGZpcnN0Qm9hcmRDZWxscyk7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcnNUb0NlbGxzKHNlY29uZEJvYXJkQ2VsbHMpO1xuICAgIGRyYWdnYWJsZXMuZm9yRWFjaCgoZHJhZ2dhYmxlKSA9PiB7XG4gICAgICAgIGRyYWdnYWJsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVNb3VzZWRvd24pO1xuICAgICAgICBkcmFnZ2FibGUuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgaGFuZGxlRHJhZ1N0YXJ0KTtcbiAgICAgICAgZHJhZ2dhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCBoYW5kbGVEcmFnRW5kKTtcbiAgICAgICAgZHJhZ2dhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBoYW5kbGVNb3VzZXVwKTtcbiAgICAgICAgZHJhZ2dhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgaGFuZGxlUm90YXRlKTtcbiAgICAgICAgbm9uU2hpcENlbGxzLmZvckVhY2goKGNlbGwpID0+IGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBibG9ja1JpZ2h0Q2xpY2spKTtcbiAgICB9KTtcbn07XG5leHBvcnQgZGVmYXVsdCBkcmFnQW5kRHJvcDtcbiIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IGRyYWdBbmREcm9wIGZyb20gJy4vZHJhZ0FuZERyb3AnO1xuaW1wb3J0IGNvbnRyb2xsZXIgZnJvbSAnLi9jb250cm9sbGVyJztcbmltcG9ydCBzb3VuZHMgZnJvbSAnLi9zb3VuZHMnO1xuY29uc3QgdWkgPSAoKCkgPT4ge1xuICAgIGNvbnN0IHN0YXR1c0JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQm94IHAnKTtcbiAgICBjb25zdCBib2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9hcmRzJyk7XG4gICAgY29uc3QgcFZjQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsYXllclZzQ29tcHV0ZXInKTtcbiAgICBjb25zdCBuZXdHYW1lQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25ld0dhbWUnKTtcbiAgICBjb25zdCBjVmNCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29tcHV0ZXJWc0NvbXB1dGVyJyk7XG4gICAgY29uc3Qgc3RhcnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3RhcnQnKTtcbiAgICBjb25zdCByYW5kb21CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmFuZG9tUGxhY2VtZW50Jyk7XG4gICAgY29uc3QgYWxsQnRucyA9IFtwVmNCdG4sIG5ld0dhbWVCdG4sIGNWY0J0biwgc3RhcnRCdG4sIHJhbmRvbUJ0bl07XG4gICAgY29uc3Qgc3BlZWRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoJ3NwZWVkJyk7XG4gICAgbGV0IHNwZWVkVmFsdWUgPSAxMDAwO1xuICAgIGNvbnN0IG11dGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbXV0ZScpO1xuICAgIGxldCBpc011dGVkID0gZmFsc2U7XG4gICAgY29uc3QgY3JlYXRlQ2VsbCA9IChjZWxsKSA9PiB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjZWxsJyk7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjZWxsLnN0YXR1cyk7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWNvbCcsIGNlbGwuY29sKTtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcm93JywgY2VsbC5yb3cpO1xuICAgICAgICBpZiAoY2VsbC50YWtlbkJ5KSB7XG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1zaGlwTmFtZScsIGNlbGwudGFrZW5CeS5uYW1lLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH07XG4gICAgY29uc3QgcmVuZGVyQ2VsbHMgPSAoZ2FtZWJvYXJkLCBib2FyZCkgPT4ge1xuICAgICAgICBnYW1lYm9hcmQuYXJyYXkuZm9yRWFjaCgocm93KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgoY29sKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IGNyZWF0ZUNlbGwoY29sKTtcbiAgICAgICAgICAgICAgICBib2FyZC5hcHBlbmQoY2VsbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBnZXRCb2FyZElkID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBpZiAoZ2FtZWJvYXJkID09PSBjb250cm9sbGVyLmh1bWFuR2FtZWJvYXJkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2ZpcnN0Qm9hcmQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGdhbWVib2FyZCA9PT0gY29udHJvbGxlci5jb21wdXRlckdhbWVib2FyZCkge1xuICAgICAgICAgICAgcmV0dXJuICdzZWNvbmRCb2FyZCc7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHJlbmRlckJvYXJkID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBjb25zdCBib2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBib2FyZC5jbGFzc0xpc3QuYWRkKCdib2FyZCcpO1xuICAgICAgICBib2FyZC5pZCA9IGdldEJvYXJkSWQoZ2FtZWJvYXJkKTtcbiAgICAgICAgcmVuZGVyQ2VsbHMoZ2FtZWJvYXJkLCBib2FyZCk7XG4gICAgICAgIGJvYXJkcy5hcHBlbmQoYm9hcmQpO1xuICAgIH07XG4gICAgY29uc3QgY2xlYXJTaGlwID0gKHNoaXAsIGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBjb25zdCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCMke2dldEJvYXJkSWQoZ2FtZWJvYXJkKX0gLmNlbGxgKTtcbiAgICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YWtlbicpICYmIGNlbGwuZ2V0QXR0cmlidXRlKCdkYXRhLXNoaXBOYW1lJykgPT09IHNoaXAubmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCd0YWtlbicpO1xuICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnZW1wdHknKTtcbiAgICAgICAgICAgICAgICBjZWxsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1zaGlwTmFtZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHJlZnJlc2hCb2FyZCA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgYm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtnZXRCb2FyZElkKGdhbWVib2FyZCl9YCk7XG4gICAgICAgIGJvYXJkLmlubmVySFRNTCA9ICcnO1xuICAgICAgICByZW5kZXJDZWxscyhnYW1lYm9hcmQsIGJvYXJkKTtcbiAgICB9O1xuICAgIGNvbnN0IGdldFVzZXJJbnB1dCA9IChlKSA9PiB7XG4gICAgICAgIGlmICghZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaXQnKSAmJiAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtaXNzJykpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1jb2wnKTtcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1yb3cnKTtcbiAgICAgICAgICAgIHJldHVybiB7IGNvbCwgcm93IH07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZVVzZXJJbnB1dCA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBjb25zdCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNzZWNvbmRCb2FyZCAuY2VsbCcpO1xuICAgICAgICBsZXQgdXNlcklucHV0O1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICB1c2VySW5wdXQgPSB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjZWxsLmNsYXNzTGlzdC5jb250YWlucygnaGl0JykgJiYgIWNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdtaXNzJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZ2V0VXNlcklucHV0KGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsgb25jZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gd2hpbGUgKCF1c2VySW5wdXQpO1xuICAgICAgICBjb25zdCBjb2wgPSB1c2VySW5wdXQuY29sLnRvU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IHJvdyA9IHVzZXJJbnB1dC5yb3cudG9TdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIHsgY29sLCByb3cgfTtcbiAgICB9KTtcbiAgICBjb25zdCBoYW5kbGVQdkMgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgZmlsbENlbGxzKCdmaXJzdCcpO1xuICAgICAgICB3YWl0aW5nKHRydWUpO1xuICAgICAgICBhbGxCdG5zLmZvckVhY2goKGJ0bikgPT4gKGJ0bi5kaXNhYmxlZCA9IHRydWUpKTtcbiAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZ2V0U3BlZWRWYWx1ZSgpKSk7XG4gICAgICAgIGFsbEJ0bnMuZm9yRWFjaCgoYnRuKSA9PiAoYnRuLmRpc2FibGVkID0gZmFsc2UpKTtcbiAgICAgICAgd2FpdGluZyhmYWxzZSk7XG4gICAgICAgIGNhbkJlU3RhcnRlZCgpO1xuICAgICAgICBzZXRJbml0TWVzc2FnZSgpO1xuICAgIH0pO1xuICAgIGNvbnN0IGhhbmRsZU5ld0dhbWUgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgc2V0UmVzdGFydE1lc3NhZ2UoKTtcbiAgICAgICAgd2FpdGluZyh0cnVlKTtcbiAgICAgICAgYWxsQnRucy5mb3JFYWNoKChidG4pID0+IChidG4uZGlzYWJsZWQgPSB0cnVlKSk7XG4gICAgICAgIHlpZWxkIGNvbnRyb2xsZXIubmV3R2FtZSgpO1xuICAgICAgICBhbGxCdG5zLmZvckVhY2goKGJ0bikgPT4gKGJ0bi5kaXNhYmxlZCA9IGZhbHNlKSk7XG4gICAgICAgIHdhaXRpbmcoZmFsc2UpO1xuICAgICAgICBjYW5CZVN0YXJ0ZWQoKTtcbiAgICAgICAgaWYgKHBWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgIHNldEluaXRNZXNzYWdlKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBoYW5kbGVDdkMgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgd2FpdGluZyh0cnVlKTtcbiAgICAgICAgYWxsQnRucy5mb3JFYWNoKChidG4pID0+IChidG4uZGlzYWJsZWQgPSB0cnVlKSk7XG4gICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGdldFNwZWVkVmFsdWUoKSkpO1xuICAgICAgICBhbGxCdG5zLmZvckVhY2goKGJ0bikgPT4gKGJ0bi5kaXNhYmxlZCA9IGZhbHNlKSk7XG4gICAgICAgIHdhaXRpbmcoZmFsc2UpO1xuICAgICAgICBzdGFydEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHJhbmRvbUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGNWY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSk7XG4gICAgY29uc3QgaGFuZGxlR2FtZU1vZGUgPSAoc2VsZWN0ZWRFbGVtZW50LCBkZXNlbGVjdGVkRWxlbWVudCkgPT4ge1xuICAgICAgICBkZXNlbGVjdGVkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xuICAgICAgICBpZiAoIXNlbGVjdGVkRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkRWxlbWVudCA9PT0gcFZjQnRuKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlUHZDKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRFbGVtZW50ID09PSBjVmNCdG4pIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVDdkMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRyb2xsZXIucmVzdGFydCgpO1xuICAgICAgICAgICAgc2V0UmVzdGFydE1lc3NhZ2UoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgd2FpdGluZyA9IChib29sKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCd3YWl0JywgYm9vbCk7XG4gICAgfTtcbiAgICBjb25zdCBzZXRCb2FyZFBvaW50ZXIgPSAod2hpY2gpID0+IHtcbiAgICAgICAgY29uc3Qgc2Vjb25kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIGlmICh3aGljaCA9PT0gJ3BsYXllcicpIHtcbiAgICAgICAgICAgIHNlY29uZC5jbGFzc0xpc3QuYWRkKCdib2FyZE91dGxpbmUnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh3aGljaCA9PT0gJ2NvbXB1dGVyJykge1xuICAgICAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5yZW1vdmUoJ2JvYXJkT3V0bGluZScpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVCb2FyZFBvaW50ZXIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlY29uZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWNvbmRCb2FyZCcpO1xuICAgICAgICBzZWNvbmQuY2xhc3NMaXN0LnJlbW92ZSgnYm9hcmRPdXRsaW5lJyk7XG4gICAgfTtcbiAgICBjb25zdCBjcmVhdGVTaGlwRWxlbWVudCA9IChmaXJzdENlbGwpID0+IHtcbiAgICAgICAgY29uc3Qgc2hpcEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29uc3Qgc2hpcE5hbWUgPSBmaXJzdENlbGwudGFrZW5CeS5uYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IHNoaXBTaXplID0gZmlyc3RDZWxsLnRha2VuQnkuc2l6ZTtcbiAgICAgICAgc2hpcEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2hpcCcsIHNoaXBOYW1lLCAnZHJhZ2dhYmxlJyk7XG4gICAgICAgIHNoaXBFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1zaXplJywgYCR7c2hpcFNpemV9YCk7XG4gICAgICAgIHNoaXBFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJywgYCR7c2hpcE5hbWV9YCk7XG4gICAgICAgIHNoaXBFbGVtZW50LnNldEF0dHJpYnV0ZSgnZHJhZ2dhYmxlJywgJ3RydWUnKTtcbiAgICAgICAgcmV0dXJuIHNoaXBFbGVtZW50O1xuICAgIH07XG4gICAgY29uc3Qgc2V0U2hpcFN0eWxlID0gKHNoaXBFbGVtZW50LCBzaGlwU2l6ZSwgY2VsbFNpemUsIGlzVmVydGljYWwpID0+IHtcbiAgICAgICAgY29uc3QgaHRtbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJyk7XG4gICAgICAgIGNvbnN0IHJvb3RGb250U2l6ZSA9IHBhcnNlRmxvYXQod2luZG93LmdldENvbXB1dGVkU3R5bGUoaHRtbEVsZW1lbnQsIG51bGwpLmdldFByb3BlcnR5VmFsdWUoJ2ZvbnQtc2l6ZScpKTtcbiAgICAgICAgaWYgKCFpc1ZlcnRpY2FsKSB7XG4gICAgICAgICAgICBzaGlwRWxlbWVudC5zdHlsZS53aWR0aCA9IHNoaXBTaXplICogKGNlbGxTaXplIC8gcm9vdEZvbnRTaXplKSArICdyZW0nO1xuICAgICAgICAgICAgc2hpcEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gY2VsbFNpemUgLyByb290Rm9udFNpemUgKyAncmVtJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNoaXBFbGVtZW50LnN0eWxlLndpZHRoID0gY2VsbFNpemUgLyByb290Rm9udFNpemUgKyAncmVtJztcbiAgICAgICAgICAgIHNoaXBFbGVtZW50LnN0eWxlLmhlaWdodCA9IHNoaXBTaXplICogKGNlbGxTaXplIC8gcm9vdEZvbnRTaXplKSArICdyZW0nO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCByZXNpemVIYW5kbGVyID0gKHNoaXBFbGVtZW50LCBzaGlwU2l6ZSwgaXNWZXJ0aWNhbCkgPT4ge1xuICAgICAgICBjb25zdCBjZWxsU2l6ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib2FyZCAuY2VsbCcpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgICBzZXRTaGlwU3R5bGUoc2hpcEVsZW1lbnQsIHNoaXBTaXplLCBjZWxsU2l6ZSwgaXNWZXJ0aWNhbCk7XG4gICAgfTtcbiAgICBjb25zdCBjcmVhdGVTaGlwT3ZlcmxheSA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgZ2FtZWJvYXJkLnNoaXBzUGxhY2VkLmZvckVhY2goKGZpcnN0Q2VsbCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2hpcEVsZW1lbnQgPSBjcmVhdGVTaGlwRWxlbWVudChmaXJzdENlbGwpO1xuICAgICAgICAgICAgY29uc3QgY2VsbFNpemUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm9hcmQgLmNlbGwnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBTaXplID0gZmlyc3RDZWxsLnRha2VuQnkuc2l6ZTtcbiAgICAgICAgICAgIGNvbnN0IGlzVmVydGljYWwgPSBmaXJzdENlbGwudGFrZW5CeS5pc1ZlcnRpY2FsO1xuICAgICAgICAgICAgY29uc3QgZmlyc3RDZWxsRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2dldEJvYXJkSWQoZ2FtZWJvYXJkKX0gLmNlbGxbZGF0YS1jb2w9XCIke2ZpcnN0Q2VsbC5jb2x9XCJdW2RhdGEtcm93PVwiJHtmaXJzdENlbGwucm93fVwiXWApO1xuICAgICAgICAgICAgZmlyc3RDZWxsRWxlbWVudC5hcHBlbmRDaGlsZChzaGlwRWxlbWVudCk7XG4gICAgICAgICAgICBzZXRTaGlwU3R5bGUoc2hpcEVsZW1lbnQsIHNoaXBTaXplLCBjZWxsU2l6ZSwgaXNWZXJ0aWNhbCk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4gcmVzaXplSGFuZGxlcihzaGlwRWxlbWVudCwgc2hpcFNpemUsIGlzVmVydGljYWwpKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBjYW5CZVN0YXJ0ZWQgPSAoKSA9PiB7XG4gICAgICAgIGlmIChjb250cm9sbGVyLmh1bWFuR2FtZWJvYXJkLnNoaXBzUGxhY2VkLmxlbmd0aCA9PT0gNSAmJiBjb250cm9sbGVyLmNvbXB1dGVyR2FtZWJvYXJkLnNoaXBzUGxhY2VkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZmlsbENlbGxzKCdzZWNvbmQnKTtcbiAgICAgICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0SW5pdE1lc3NhZ2UgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0YXR1c1RleHRNb2JpbGUgPSBcIlVzZSAnUmFuZG9tIFBsYWNlbWVudCcgYnV0dG9uLCB0aGVuIHByZXNzIFN0YXJ0IVwiO1xuICAgICAgICBjb25zdCBzdGF0dXNUZXh0RGVza3RvcCA9IFwiRHJhZyBhbmQgZHJvcCBzaGlwcyBvbnRvIHRoZSBsZWZ0IGJvYXJkIG9yIHVzZSAnUmFuZG9tIFBsYWNlbWVudCcgYnV0dG9uLiBSaWdodCBjbGljayB0byByb3RhdGUuIFdoZW4gcmVhZHksIHByZXNzIFN0YXJ0IVwiO1xuICAgICAgICBpZiAoc3RhdHVzQm94LnRleHRDb250ZW50ID09PSBzdGF0dXNUZXh0TW9iaWxlIHx8XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPT09IHN0YXR1c1RleHREZXNrdG9wIHx8XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPT09ICdSZXN0YXJ0aW5nLi4uJyB8fFxuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID09PSAnWW91IGNhbiBub3cgYmVnaW4gdGhlIGdhbWUuIFByZXNzIHN0YXJ0IScpIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9IHN0YXR1c1RleHRNb2JpbGU7XG4gICAgICAgICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDEwMjRweCknKS5tYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gc3RhdHVzVGV4dERlc2t0b3A7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldFN0YXJ0TWVzc2FnZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKGNhbkJlU3RhcnRlZCgpKSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSAnWW91IGNhbiBub3cgYmVnaW4gdGhlIGdhbWUuIFByZXNzIHN0YXJ0ISc7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldFR1cm5NZXNzYWdlUHZDID0gKGlzUGxheWVyVHVybikgPT4ge1xuICAgICAgICBpZiAoaXNQbGF5ZXJUdXJuKSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSBcIlBsYXllcidzIHR1cm4uIFRha2UgYWltIGFuZCBhdHRhY2shXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSBcIkNvbXB1dGVyJ3MgdHVybi4gVGhlIHNob3QgaXMgY29taW5nIVwiO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRUdXJuTWVzc2FnZUN2QyA9IChpc1BsYXllclR1cm4pID0+IHtcbiAgICAgICAgaWYgKGlzUGxheWVyVHVybikge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gXCJWaW9sZXQncyB0dXJuXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSBcIkJsdWUncyB0dXJuXCI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldEdhbWVPdmVyTWVzc2FnZVB2QyA9ICh3aG8pID0+IHtcbiAgICAgICAgaWYgKHdobyA9PT0gJ3BsYXllcicpIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9ICdHYW1lIG92ZXIsIFBsYXllciB3aW5zISc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAod2hvID09PSAnY29tcHV0ZXInKSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSAnR2FtZSBvdmVyLCBDb21wdXRlciB3aW5zISc7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldEdhbWVPdmVyTWVzc2FnZUN2QyA9ICh3aG8pID0+IHtcbiAgICAgICAgaWYgKHdobyA9PT0gJ3BsYXllcicpIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9ICdHYW1lIG92ZXIsIEJsdWUgQ29tcHV0ZXIgd2lucyEnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHdobyA9PT0gJ2NvbXB1dGVyJykge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gJ0dhbWUgb3ZlciwgVmlvbGV0IENvbXB1dGVyIHdpbnMhJztcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0UmVzdGFydE1lc3NhZ2UgPSAoKSA9PiB7XG4gICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9ICdSZXN0YXJ0aW5nLi4uJztcbiAgICB9O1xuICAgIGNvbnN0IGZpbGxDZWxscyA9IChpbnB1dCkgPT4ge1xuICAgICAgICBsZXQgYm9hcmQ7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ2ZpcnN0Jykge1xuICAgICAgICAgICAgYm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZmlyc3RCb2FyZCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlucHV0ID09PSAnc2Vjb25kJykge1xuICAgICAgICAgICAgYm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjZWxscyA9IGJvYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJyk7XG4gICAgICAgIGNlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnZmlsbGVkJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgdW5GaWxsQ2VsbHMgPSAoaW5wdXQpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICB3YWl0aW5nKHRydWUpO1xuICAgICAgICBsZXQgYm9hcmQ7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ2ZpcnN0Jykge1xuICAgICAgICAgICAgYm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZmlyc3RCb2FyZCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlucHV0ID09PSAnc2Vjb25kJykge1xuICAgICAgICAgICAgYm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjZWxscyA9IGJvYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJyk7XG4gICAgICAgIGNlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnZmlsbGVkJyk7XG4gICAgICAgIH0pO1xuICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdmaWxsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSBjZWxscy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKChpbmRleCArIDEpICUgNiA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc291bmRzLnRpY2sucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgKGdldFNwZWVkVmFsdWUoKSAvIDEyMCkgKiBpbmRleCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHdhaXRpbmcoZmFsc2UpO1xuICAgIH0pO1xuICAgIGNvbnN0IHRvZ2dsZU11dGUgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNwZWFrZXJJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NwZWFrZXInKTtcbiAgICAgICAgaWYgKCFpc011dGVkKSB7XG4gICAgICAgICAgICBtdXRlQnRuLmNsYXNzTGlzdC5hZGQoJ211dGVkJyk7XG4gICAgICAgICAgICBzcGVha2VySWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdmYS12b2x1bWUtaGlnaCcpO1xuICAgICAgICAgICAgc3BlYWtlckljb24uY2xhc3NMaXN0LmFkZCgnZmEtdm9sdW1lLXhtYXJrJyk7XG4gICAgICAgICAgICBmb3IgKGxldCBzb3VuZCBvZiBPYmplY3QudmFsdWVzKHNvdW5kcykpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC52b2x1bWUgPSAwO1xuICAgICAgICAgICAgICAgIHNvdW5kLm11dGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG11dGVCdG4uY2xhc3NMaXN0LnJlbW92ZSgnbXV0ZWQnKTtcbiAgICAgICAgICAgIHNwZWFrZXJJY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLXZvbHVtZS14bWFyaycpO1xuICAgICAgICAgICAgc3BlYWtlckljb24uY2xhc3NMaXN0LmFkZCgnZmEtdm9sdW1lLWhpZ2gnKTtcbiAgICAgICAgICAgIGZvciAobGV0IHNvdW5kIG9mIE9iamVjdC52YWx1ZXMoc291bmRzKSkge1xuICAgICAgICAgICAgICAgIHNvdW5kLnZvbHVtZSA9IDE7XG4gICAgICAgICAgICAgICAgc291bmQubXV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpc011dGVkID0gIWlzTXV0ZWQ7XG4gICAgICAgIHNvdW5kcy5zZWxlY3QucGxheSgpO1xuICAgIH07XG4gICAgcFZjQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBmaWxsQ2VsbHMoJ2ZpcnN0Jyk7XG4gICAgICAgIGhhbmRsZUdhbWVNb2RlKHBWY0J0biwgY1ZjQnRuKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIHNlY29uZC5jbGFzc0xpc3QucmVtb3ZlKCdzdGFydCcpO1xuICAgICAgICBzdGFydEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHBWY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHNvdW5kcy5zZWxlY3QucGxheSgpO1xuICAgICAgICB1bkZpbGxDZWxscygnZmlyc3QnKTtcbiAgICB9KTtcbiAgICBjVmNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGZpbGxDZWxscygnZmlyc3QnKTtcbiAgICAgICAgZmlsbENlbGxzKCdzZWNvbmQnKTtcbiAgICAgICAgaGFuZGxlR2FtZU1vZGUoY1ZjQnRuLCBwVmNCdG4pO1xuICAgICAgICBjb25zdCBzZWNvbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5hZGQoJ3N0YXJ0Jyk7XG4gICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgcmFuZG9tQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgY1ZjQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgc291bmRzLnNlbGVjdC5wbGF5KCk7XG4gICAgICAgIFByb21pc2UuYWxsKFt1bkZpbGxDZWxscygnZmlyc3QnKSwgdW5GaWxsQ2VsbHMoJ3NlY29uZCcpXSk7XG4gICAgfSk7XG4gICAgbmV3R2FtZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICByZW1vdmVCb2FyZFBvaW50ZXIoKTtcbiAgICAgICAgZmlsbENlbGxzKCdmaXJzdCcpO1xuICAgICAgICBpZiAoY1ZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgZmlsbENlbGxzKCdzZWNvbmQnKTtcbiAgICAgICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJhbmRvbUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICBjVmNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHNvdW5kcy5zZWxlY3QucGxheSgpO1xuICAgICAgICB5aWVsZCBoYW5kbGVOZXdHYW1lKCk7XG4gICAgICAgIGNvbnN0IHNlY29uZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWNvbmRCb2FyZCcpO1xuICAgICAgICBzZWNvbmQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xuICAgICAgICBpZiAocFZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5yZW1vdmUoJ3N0YXJ0Jyk7XG4gICAgICAgICAgICB1bkZpbGxDZWxscygnZmlyc3QnKTtcbiAgICAgICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHBWY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgIHNlY29uZC5jbGFzc0xpc3QuYWRkKCdzdGFydCcpO1xuICAgICAgICAgICAgcmFuZG9tQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIFByb21pc2UuYWxsKFt1bkZpbGxDZWxscygnZmlyc3QnKSwgdW5GaWxsQ2VsbHMoJ3NlY29uZCcpXSk7XG4gICAgICAgICAgICBzdGFydEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICByYW5kb21CdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgY1ZjQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0pKTtcbiAgICBzdGFydEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY29udHJvbGxlci5zdGFydCgpO1xuICAgICAgICBjb25zdCBzZWNvbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5hZGQoJ3N0YXJ0Jyk7XG4gICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgcmFuZG9tQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgdW5GaWxsQ2VsbHMoJ3NlY29uZCcpO1xuICAgIH0pO1xuICAgIHJhbmRvbUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY29udHJvbGxlci5jb21wdXRlckdhbWVib2FyZC5jbGVhckJvYXJkKCk7XG4gICAgICAgIHJlZnJlc2hCb2FyZChjb250cm9sbGVyLmNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgY29udHJvbGxlci5yYW5kb21pemVTaGlwc1BsYWNlbWVudChjb250cm9sbGVyLmh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgZHJhZ0FuZERyb3AoY29udHJvbGxlci5odW1hbkdhbWVib2FyZCwgY29udHJvbGxlci5jb21wdXRlckdhbWVib2FyZCwgY29udHJvbGxlci5odW1hblNoaXBzKTtcbiAgICAgICAgY2FuQmVTdGFydGVkKCk7XG4gICAgICAgIHNldFN0YXJ0TWVzc2FnZSgpO1xuICAgICAgICBmaWxsQ2VsbHMoJ3NlY29uZCcpO1xuICAgICAgICBzb3VuZHMucmFuZG9tLnBsYXkoKTtcbiAgICB9KTtcbiAgICBjb25zdCBzZXRTcGVlZFZhbHVlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCBpbnB1dCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgaWYgKGlucHV0LmNoZWNrZWQpIHtcbiAgICAgICAgICAgIHNwZWVkVmFsdWUgPSBOdW1iZXIoaW5wdXQudmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBnZXRTcGVlZFZhbHVlID0gKCkgPT4gc3BlZWRWYWx1ZTtcbiAgICBzcGVlZHMuZm9yRWFjaCgoc3BlZWRCdG4pID0+IHtcbiAgICAgICAgc3BlZWRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgc2V0U3BlZWRWYWx1ZShlKTtcbiAgICAgICAgICAgIHNvdW5kcy5zZWxlY3QucGxheSgpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBtdXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlTXV0ZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHNldEluaXRNZXNzYWdlKTtcbiAgICByZXR1cm4ge1xuICAgICAgICByZW5kZXJCb2FyZCxcbiAgICAgICAgY2xlYXJTaGlwLFxuICAgICAgICByZWZyZXNoQm9hcmQsXG4gICAgICAgIGhhbmRsZVVzZXJJbnB1dCxcbiAgICAgICAgcFZjQnRuLFxuICAgICAgICBjVmNCdG4sXG4gICAgICAgIHdhaXRpbmcsXG4gICAgICAgIHNldEJvYXJkUG9pbnRlcixcbiAgICAgICAgcmVtb3ZlQm9hcmRQb2ludGVyLFxuICAgICAgICBjcmVhdGVTaGlwT3ZlcmxheSxcbiAgICAgICAgY2FuQmVTdGFydGVkLFxuICAgICAgICBzZXRJbml0TWVzc2FnZSxcbiAgICAgICAgc2V0U3RhcnRNZXNzYWdlLFxuICAgICAgICBzZXRUdXJuTWVzc2FnZVB2QyxcbiAgICAgICAgc2V0VHVybk1lc3NhZ2VDdkMsXG4gICAgICAgIHNldEdhbWVPdmVyTWVzc2FnZVB2QyxcbiAgICAgICAgc2V0R2FtZU92ZXJNZXNzYWdlQ3ZDLFxuICAgICAgICBzZXRSZXN0YXJ0TWVzc2FnZSxcbiAgICAgICAgZ2V0U3BlZWRWYWx1ZSxcbiAgICAgICAgZmlsbENlbGxzLFxuICAgICAgICB1bkZpbGxDZWxscyxcbiAgICB9O1xufSkoKTtcbmV4cG9ydCBkZWZhdWx0IHVpO1xuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgZ2FtZWJvYXJkRmFjdG9yeSBmcm9tICcuL2dhbWVib2FyZCc7XG5pbXBvcnQgc2hpcEZhY3RvcnkgZnJvbSAnLi9zaGlwJztcbmltcG9ydCBwbGF5ZXJGYWN0b3J5IGZyb20gJy4vcGxheWVyJztcbmltcG9ydCB1aSBmcm9tICcuL3VpJztcbmltcG9ydCBkcmFnQW5kRHJvcCBmcm9tICcuL2RyYWdBbmREcm9wJztcbmltcG9ydCBzb3VuZHMgZnJvbSAnLi9zb3VuZHMnO1xuY29uc3QgY29udHJvbGxlciA9ICgoKSA9PiB7XG4gICAgY29uc3QgaHVtYW5HYW1lYm9hcmQgPSBnYW1lYm9hcmRGYWN0b3J5KCk7XG4gICAgY29uc3QgY29tcHV0ZXJHYW1lYm9hcmQgPSBnYW1lYm9hcmRGYWN0b3J5KCk7XG4gICAgY29uc3QgaHVtYW4gPSBwbGF5ZXJGYWN0b3J5KCk7XG4gICAgY29uc3QgY29tcHV0ZXIgPSBwbGF5ZXJGYWN0b3J5KCk7XG4gICAgbGV0IGlzU3RvcHBlZCA9IHRydWU7XG4gICAgbGV0IGh1bWFuQ2FycmllcjtcbiAgICBsZXQgaHVtYW5CYXR0bGVzaGlwO1xuICAgIGxldCBodW1hbkRlc3Ryb3llcjtcbiAgICBsZXQgaHVtYW5TdWJtYXJpbmU7XG4gICAgbGV0IGh1bWFuUGF0cm9sYm9hdDtcbiAgICBsZXQgaHVtYW5TaGlwcyA9IFtodW1hbkNhcnJpZXIsIGh1bWFuQmF0dGxlc2hpcCwgaHVtYW5EZXN0cm95ZXIsIGh1bWFuU3VibWFyaW5lLCBodW1hblBhdHJvbGJvYXRdO1xuICAgIGNvbnN0IHBvcHVsYXRlU2hpcHMgPSAoKSA9PiB7XG4gICAgICAgIGh1bWFuQ2FycmllciA9IHNoaXBGYWN0b3J5KCdDYXJyaWVyJyk7XG4gICAgICAgIGh1bWFuQmF0dGxlc2hpcCA9IHNoaXBGYWN0b3J5KCdCYXR0bGVzaGlwJyk7XG4gICAgICAgIGh1bWFuRGVzdHJveWVyID0gc2hpcEZhY3RvcnkoJ0Rlc3Ryb3llcicpO1xuICAgICAgICBodW1hblN1Ym1hcmluZSA9IHNoaXBGYWN0b3J5KCdTdWJtYXJpbmUnKTtcbiAgICAgICAgaHVtYW5QYXRyb2xib2F0ID0gc2hpcEZhY3RvcnkoJ1BhdHJvbEJvYXQnKTtcbiAgICAgICAgaHVtYW5TaGlwcyA9IFtodW1hbkNhcnJpZXIsIGh1bWFuQmF0dGxlc2hpcCwgaHVtYW5EZXN0cm95ZXIsIGh1bWFuU3VibWFyaW5lLCBodW1hblBhdHJvbGJvYXRdO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5wbGFjZVNoaXAoaHVtYW5DYXJyaWVyLCAnQScsICcxJywgJ2hvcml6b250YWwnKTtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucGxhY2VTaGlwKGh1bWFuQmF0dGxlc2hpcCwgJ0EnLCAnMycsICdob3Jpem9udGFsJyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnBsYWNlU2hpcChodW1hbkRlc3Ryb3llciwgJ0EnLCAnNScsICdob3Jpem9udGFsJyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnBsYWNlU2hpcChodW1hblN1Ym1hcmluZSwgJ0EnLCAnNycsICdob3Jpem9udGFsJyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnBsYWNlU2hpcChodW1hblBhdHJvbGJvYXQsICdBJywgJzknLCAnaG9yaXpvbnRhbCcpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5yZXNlcnZlU3BhY2VGb3JBbGwoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgIH07XG4gICAgY29uc3QgcmVuZXcgPSAoKSA9PiB7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChodW1hbkdhbWVib2FyZCk7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIHVpLmNyZWF0ZVNoaXBPdmVybGF5KGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgdWkuY3JlYXRlU2hpcE92ZXJsYXkoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICBkcmFnQW5kRHJvcChodW1hbkdhbWVib2FyZCwgY29tcHV0ZXJHYW1lYm9hcmQsIGh1bWFuU2hpcHMpO1xuICAgIH07XG4gICAgY29uc3QgaGFuZGxlR2FtZU92ZXIgPSAod2lubmVyKSA9PiB7XG4gICAgICAgIHVpLnJlbW92ZUJvYXJkUG9pbnRlcigpO1xuICAgICAgICBpZiAodWkucFZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgdWkuc2V0R2FtZU92ZXJNZXNzYWdlUHZDKHdpbm5lcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVpLmNWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgIHVpLnNldEdhbWVPdmVyTWVzc2FnZUN2Qyh3aW5uZXIpO1xuICAgICAgICB9XG4gICAgICAgIHNvdW5kcy5nYW1lT3Zlci5wbGF5KCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgY29uc3QgaXNHYW1lT3ZlciA9ICgpID0+IHtcbiAgICAgICAgaWYgKGNvbXB1dGVyR2FtZWJvYXJkLmFsbFN1bmsoY29tcHV0ZXJHYW1lYm9hcmQpKSB7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlR2FtZU92ZXIoJ3BsYXllcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodW1hbkdhbWVib2FyZC5hbGxTdW5rKGh1bWFuR2FtZWJvYXJkKSkge1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUdhbWVPdmVyKCdjb21wdXRlcicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIGNvbnN0IGNvbXB1dGVyQUkgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGxldCBwbGF5ZXI7XG4gICAgICAgIGlmIChnYW1lYm9hcmQgPT09IGh1bWFuR2FtZWJvYXJkKSB7XG4gICAgICAgICAgICBwbGF5ZXIgPSBjb21wdXRlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChnYW1lYm9hcmQgPT09IGNvbXB1dGVyR2FtZWJvYXJkKSB7XG4gICAgICAgICAgICBwbGF5ZXIgPSBodW1hbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2FtZWJvYXJkLmhpdEJ1dE5vdFN1bmsoZ2FtZWJvYXJkKSkge1xuICAgICAgICAgICAgY29uc3QgbGFzdEhpdCA9IHBsYXllci5nZXRMYXN0SGl0KCk7XG4gICAgICAgICAgICBjb25zdCBwcmV2SGl0ID0gcGxheWVyLmdldFByZXZIaXQoKTtcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBnYW1lYm9hcmQuZ2V0Q2VsbChsYXN0SGl0LmNvbCwgbGFzdEhpdC5yb3cpO1xuICAgICAgICAgICAgY29uc3QgaGl0Q291bnQgPSBjZWxsLnRha2VuQnkuaGl0Q291bnQ7XG4gICAgICAgICAgICBpZiAocHJldkhpdCAhPT0gbnVsbCAmJiBsYXN0SGl0ICE9PSBudWxsICYmIGhpdENvdW50ID49IDIgJiYgaGl0Q291bnQgPD0gNCkge1xuICAgICAgICAgICAgICAgIHBsYXllci5maW5pc2hpbmdBdHRhY2soZ2FtZWJvYXJkLCBsYXN0SGl0LmNvbCwgbGFzdEhpdC5yb3csIHByZXZIaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGl0Q291bnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuZm9sbG93dXBBdHRhY2soZ2FtZWJvYXJkLCBsYXN0SGl0LmNvbCwgbGFzdEhpdC5yb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5jYW5CZVN1bmsoY2VsbCkpIHtcbiAgICAgICAgICAgICAgICBnYW1lYm9hcmQuc2lua1NoaXAoZ2FtZWJvYXJkLCBsYXN0SGl0LmNvbCwgbGFzdEhpdC5yb3cpO1xuICAgICAgICAgICAgICAgIHNvdW5kcy5zdW5rLnBsYXkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0dhbWVPdmVyKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB7IGNvbCwgcm93IH0gPSBwbGF5ZXIucmFuZG9tQXR0YWNrKGdhbWVib2FyZCk7XG4gICAgICAgICAgICBjb25zdCBjZWxsID0gZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpO1xuICAgICAgICAgICAgaWYgKGNlbGwuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgIHBsYXllci5zZXRQcmV2SGl0KHBsYXllci5nZXRMYXN0SGl0KCkpO1xuICAgICAgICAgICAgICAgIHBsYXllci5zZXRMYXN0SGl0KHsgY29sLCByb3cgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5jYW5CZVN1bmsoY2VsbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnNpbmtTaGlwKGdhbWVib2FyZCwgY29sLCByb3cpO1xuICAgICAgICAgICAgICAgICAgICBzb3VuZHMuc3Vuay5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5zZXRQcmV2SGl0KG51bGwpO1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuc2V0TGFzdEhpdChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzR2FtZU92ZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBwbGF5ZXJUdXJuID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHVpLnNldFR1cm5NZXNzYWdlUHZDKHRydWUpO1xuICAgICAgICB1aS5zZXRCb2FyZFBvaW50ZXIoJ3BsYXllcicpO1xuICAgICAgICB1aS53YWl0aW5nKGZhbHNlKTtcbiAgICAgICAgY29uc3QgeyBjb2wsIHJvdyB9ID0geWllbGQgdWkuaGFuZGxlVXNlcklucHV0KCk7XG4gICAgICAgIGh1bWFuLmF0dGFjayhjb21wdXRlckdhbWVib2FyZCwgY29sLCByb3cpO1xuICAgICAgICBjb25zdCBjZWxsID0gY29tcHV0ZXJHYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIHJvdyk7XG4gICAgICAgIGlmIChjb21wdXRlckdhbWVib2FyZC5jYW5CZVN1bmsoY2VsbCkpIHtcbiAgICAgICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnNpbmtTaGlwKGNvbXB1dGVyR2FtZWJvYXJkLCBjb2wsIHJvdyk7XG4gICAgICAgICAgICBzb3VuZHMuc3Vuay5wbGF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgdWkucmVmcmVzaEJvYXJkKGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICB9KTtcbiAgICBjb25zdCBjb21wdXRlclR1cm4gPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgdWkuc2V0VHVybk1lc3NhZ2VQdkMoZmFsc2UpO1xuICAgICAgICB1aS5zZXRCb2FyZFBvaW50ZXIoJ2NvbXB1dGVyJyk7XG4gICAgICAgIHVpLndhaXRpbmcodHJ1ZSk7XG4gICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIHVpLmdldFNwZWVkVmFsdWUoKSkpO1xuICAgICAgICBpZiAoIXVpLnBWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykgfHwgaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29tcHV0ZXJBSShodW1hbkdhbWVib2FyZCk7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChodW1hbkdhbWVib2FyZCk7XG4gICAgfSk7XG4gICAgY29uc3QgcGxheWVyVnNDb21wdXRlck1vZGUgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgbGV0IGlzUGxheWVyVHVybiA9IHRydWU7XG4gICAgICAgIHdoaWxlICghaXNHYW1lT3ZlcigpICYmICFpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIGlmIChpc1BsYXllclR1cm4pIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBwbGF5ZXJUdXJuKCk7XG4gICAgICAgICAgICAgICAgaXNQbGF5ZXJUdXJuID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNHYW1lT3ZlcigpIHx8IGlzU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc1BsYXllclR1cm4pIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBjb21wdXRlclR1cm4oKTtcbiAgICAgICAgICAgICAgICBpc1BsYXllclR1cm4gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICB1aS53YWl0aW5nKGZhbHNlKTtcbiAgICB9KTtcbiAgICBjb25zdCBjcHVUdXJuID0gKGlzUGxheWVyVHVybiwgZ2FtZWJvYXJkKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgdWkud2FpdGluZyh0cnVlKTtcbiAgICAgICAgdWkuc2V0VHVybk1lc3NhZ2VDdkMoaXNQbGF5ZXJUdXJuKTtcbiAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdWkuZ2V0U3BlZWRWYWx1ZSgpKSk7XG4gICAgICAgIGlmICghdWkuY1ZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSB8fCBpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb21wdXRlckFJKGdhbWVib2FyZCk7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChnYW1lYm9hcmQpO1xuICAgIH0pO1xuICAgIGNvbnN0IGNvbXB1dGVyVnNDb21wdXRlck1vZGUgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgdWkucmVtb3ZlQm9hcmRQb2ludGVyKCk7XG4gICAgICAgIGxldCBpc1BsYXllclR1cm4gPSB0cnVlO1xuICAgICAgICB3aGlsZSAoIWlzR2FtZU92ZXIoKSAmJiAhaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB5aWVsZCBjcHVUdXJuKGlzUGxheWVyVHVybiwgaXNQbGF5ZXJUdXJuID8gaHVtYW5HYW1lYm9hcmQgOiBjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgICAgICBpc1BsYXllclR1cm4gPSAhaXNQbGF5ZXJUdXJuO1xuICAgICAgICB9XG4gICAgICAgIGlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICB1aS53YWl0aW5nKGZhbHNlKTtcbiAgICB9KTtcbiAgICBjb25zdCByYW5kb21QbGFjZW1lbnQgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGxldCBhbGxTaGlwcztcbiAgICAgICAgaWYgKGdhbWVib2FyZCA9PT0gaHVtYW5HYW1lYm9hcmQpIHtcbiAgICAgICAgICAgIGh1bWFuQ2FycmllciA9IHNoaXBGYWN0b3J5KCdDYXJyaWVyJyk7XG4gICAgICAgICAgICBodW1hbkJhdHRsZXNoaXAgPSBzaGlwRmFjdG9yeSgnQmF0dGxlc2hpcCcpO1xuICAgICAgICAgICAgaHVtYW5EZXN0cm95ZXIgPSBzaGlwRmFjdG9yeSgnRGVzdHJveWVyJyk7XG4gICAgICAgICAgICBodW1hblN1Ym1hcmluZSA9IHNoaXBGYWN0b3J5KCdTdWJtYXJpbmUnKTtcbiAgICAgICAgICAgIGh1bWFuUGF0cm9sYm9hdCA9IHNoaXBGYWN0b3J5KCdQYXRyb2xCb2F0Jyk7XG4gICAgICAgICAgICBhbGxTaGlwcyA9IFtodW1hbkNhcnJpZXIsIGh1bWFuQmF0dGxlc2hpcCwgaHVtYW5EZXN0cm95ZXIsIGh1bWFuU3VibWFyaW5lLCBodW1hblBhdHJvbGJvYXRdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGdhbWVib2FyZCA9PT0gY29tcHV0ZXJHYW1lYm9hcmQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVyQ2FycmllciA9IHNoaXBGYWN0b3J5KCdDYXJyaWVyJyk7XG4gICAgICAgICAgICBjb25zdCBjb21wdXRlckJhdHRsZXNoaXAgPSBzaGlwRmFjdG9yeSgnQmF0dGxlc2hpcCcpO1xuICAgICAgICAgICAgY29uc3QgY29tcHV0ZXJEZXN0cm95ZXIgPSBzaGlwRmFjdG9yeSgnRGVzdHJveWVyJyk7XG4gICAgICAgICAgICBjb25zdCBjb21wdXRlclN1Ym1hcmluZSA9IHNoaXBGYWN0b3J5KCdTdWJtYXJpbmUnKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVyUGF0cm9sYm9hdCA9IHNoaXBGYWN0b3J5KCdQYXRyb2xCb2F0Jyk7XG4gICAgICAgICAgICBhbGxTaGlwcyA9IFtjb21wdXRlckNhcnJpZXIsIGNvbXB1dGVyQmF0dGxlc2hpcCwgY29tcHV0ZXJEZXN0cm95ZXIsIGNvbXB1dGVyU3VibWFyaW5lLCBjb21wdXRlclBhdHJvbGJvYXRdO1xuICAgICAgICB9XG4gICAgICAgIGh1bWFuU2hpcHMubGVuZ3RoID0gMDtcbiAgICAgICAgY29uc3QgY29scyA9IFsnQScsICdCJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdIJywgJ0knLCAnSiddO1xuICAgICAgICBjb25zdCByYW5kb21Db2wgPSAoKSA9PiBjb2xzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvbHMubGVuZ3RoKV07XG4gICAgICAgIGNvbnN0IHJhbmRvbVJvdyA9ICgpID0+IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogMTApLnRvU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IHJhbmRvbU9yaWVudGF0aW9uID0gKCkgPT4gKE1hdGgucmFuZG9tKCkgPiAwLjUgPyAnaG9yaXpvbnRhbCcgOiAndmVydGljYWwnKTtcbiAgICAgICAgYWxsU2hpcHMuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgICAgICAgbGV0IGNvbCA9IHJhbmRvbUNvbCgpO1xuICAgICAgICAgICAgbGV0IHJvdyA9IHJhbmRvbVJvdygpO1xuICAgICAgICAgICAgbGV0IG9yaWVudGF0aW9uID0gcmFuZG9tT3JpZW50YXRpb24oKTtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBnYW1lYm9hcmQuY2FuQmVQbGFjZWQoc2hpcC5zaXplLCBjb2wsIHJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICAgICAgd2hpbGUgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBjb2wgPSByYW5kb21Db2woKTtcbiAgICAgICAgICAgICAgICByb3cgPSByYW5kb21Sb3coKTtcbiAgICAgICAgICAgICAgICBvcmllbnRhdGlvbiA9IHJhbmRvbU9yaWVudGF0aW9uKCk7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZ2FtZWJvYXJkLmNhbkJlUGxhY2VkKHNoaXAuc2l6ZSwgY29sLCByb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBnYW1lYm9hcmQucGxhY2VTaGlwKHNoaXAsIGNvbCwgcm93LCBvcmllbnRhdGlvbik7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnJlc2VydmVTcGFjZShnYW1lYm9hcmQsIGNvbCwgcm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGh1bWFuU2hpcHMucHVzaChzaGlwKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCByYW5kb21pemVTaGlwc1BsYWNlbWVudCA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgZ2FtZWJvYXJkLmNsZWFyQm9hcmQoKTtcbiAgICAgICAgcmFuZG9tUGxhY2VtZW50KGdhbWVib2FyZCk7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChnYW1lYm9hcmQpO1xuICAgICAgICBpZiAoZ2FtZWJvYXJkID09PSBodW1hbkdhbWVib2FyZCkge1xuICAgICAgICAgICAgdWkuY3JlYXRlU2hpcE92ZXJsYXkoZ2FtZWJvYXJkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcGlja0dhbWVNb2RlID0gKCkgPT4ge1xuICAgICAgICBpZiAodWkuY1ZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgcmFuZG9taXplU2hpcHNQbGFjZW1lbnQoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICAgICAgcmFuZG9taXplU2hpcHNQbGFjZW1lbnQoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICAgICAgaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgICAgICBjb21wdXRlclZzQ29tcHV0ZXJNb2RlKCk7XG4gICAgICAgICAgICB1aS5yZWZyZXNoQm9hcmQoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzdGFydCA9ICgpID0+IHtcbiAgICAgICAgdWkucmVmcmVzaEJvYXJkKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgcmFuZG9taXplU2hpcHNQbGFjZW1lbnQoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICBpc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgcGxheWVyVnNDb21wdXRlck1vZGUoKTtcbiAgICB9O1xuICAgIGNvbnN0IHJlc3RhcnQgPSAoKSA9PiB7XG4gICAgICAgIGlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIGh1bWFuLnNldFByZXZIaXQobnVsbCk7XG4gICAgICAgIGh1bWFuLnNldExhc3RIaXQobnVsbCk7XG4gICAgICAgIGNvbXB1dGVyLnNldFByZXZIaXQobnVsbCk7XG4gICAgICAgIGNvbXB1dGVyLnNldExhc3RIaXQobnVsbCk7XG4gICAgICAgIGh1bWFuR2FtZWJvYXJkLmNsZWFyQm9hcmQoKTtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQuY2xlYXJCb2FyZCgpO1xuICAgICAgICBwb3B1bGF0ZVNoaXBzKCk7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChodW1hbkdhbWVib2FyZCk7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIHVpLmNyZWF0ZVNoaXBPdmVybGF5KGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgZHJhZ0FuZERyb3AoaHVtYW5HYW1lYm9hcmQsIGNvbXB1dGVyR2FtZWJvYXJkLCBodW1hblNoaXBzKTtcbiAgICAgICAgdWkuY2FuQmVTdGFydGVkKCk7XG4gICAgICAgIHBpY2tHYW1lTW9kZSgpO1xuICAgIH07XG4gICAgY29uc3QgbmV3R2FtZSA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBpc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCB1aS5nZXRTcGVlZFZhbHVlKCkpKTtcbiAgICAgICAgaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHJlc3RhcnQoKTtcbiAgICB9KTtcbiAgICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgICAgICB1aS5zZXRJbml0TWVzc2FnZSgpO1xuICAgICAgICBodW1hbkdhbWVib2FyZC5nZW5lcmF0ZUFycmF5KCk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLmdlbmVyYXRlQXJyYXkoKTtcbiAgICAgICAgdWkucmVuZGVyQm9hcmQoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICB1aS5yZW5kZXJCb2FyZChjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIHBvcHVsYXRlU2hpcHMoKTtcbiAgICAgICAgdWkucmVmcmVzaEJvYXJkKGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgdWkuY3JlYXRlU2hpcE92ZXJsYXkoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICBkcmFnQW5kRHJvcChodW1hbkdhbWVib2FyZCwgY29tcHV0ZXJHYW1lYm9hcmQsIGh1bWFuU2hpcHMpO1xuICAgICAgICB1aS5jYW5CZVN0YXJ0ZWQoKTtcbiAgICAgICAgcGlja0dhbWVNb2RlKCk7XG4gICAgICAgIHVpLnBWY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfTtcbiAgICByZXR1cm4geyBpbml0LCByZW5ldywgaHVtYW5HYW1lYm9hcmQsIGNvbXB1dGVyR2FtZWJvYXJkLCByZXN0YXJ0LCBuZXdHYW1lLCBzdGFydCwgcmFuZG9taXplU2hpcHNQbGFjZW1lbnQsIGh1bWFuU2hpcHMgfTtcbn0pKCk7XG5leHBvcnQgZGVmYXVsdCBjb250cm9sbGVyO1xuIiwiaW1wb3J0ICdub3JtYWxpemUuY3NzJztcbmltcG9ydCAnLi9zdHlsZS9zdHlsZS5jc3MnO1xuaW1wb3J0IGNvbnRyb2xsZXIgZnJvbSAnLi9tb2R1bGVzL2NvbnRyb2xsZXInO1xuY29udHJvbGxlci5pbml0KCk7XG4iXSwibmFtZXMiOlsiY29scyIsInJvd3MiLCJhcnJheSIsInNoaXBzUGxhY2VkIiwiZ2V0Q2VsbCIsImNvbCIsInJvdyIsImNvbEluZGV4IiwiaW5kZXhPZiIsInJvd0luZGV4Iiwic2V0Q2VsbCIsIm5ld1N0YXR1cyIsIm5ld1Rha2VuQnkiLCJzdGF0dXMiLCJ0YWtlbkJ5IiwiZ2VuZXJhdGVBcnJheSIsImkiLCJqIiwiY2xlYXJCb2FyZCIsImZsYXQiLCJmb3JFYWNoIiwiY2VsbCIsInVuZGVmaW5lZCIsImxlbmd0aCIsInJlbW92ZVNoaXAiLCJzaGlwIiwiZ2FtZWJvYXJkIiwibmFtZSIsInNoaXBJbmRleCIsInNwbGljZSIsInBsYWNlU2hpcCIsIm9yaWVudGF0aW9uIiwiaXNIb3Jpem9udGFsIiwiY2VsbHMiLCJzdGFydCIsImlzVmVydGljYWwiLCJzaGlwQ2VsbHMiLCJzaXplIiwiY3VycmVudENvbCIsImN1cnJlbnRSb3ciLCJwdXNoIiwicmVjZWl2ZUF0dGFjayIsImhpdCIsInJlY2VpdmVBcm91bmQiLCJyZXNlcnZlU3BhY2UiLCJmaWx0ZXIiLCJjIiwiZGlyZWN0aW9uIiwibmV3Q29sIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiY2hhckNvZGVBdCIsIm5ld1JvdyIsIk51bWJlciIsInRvU3RyaW5nIiwicmVzZXJ2ZVNwYWNlRm9yQWxsIiwiaGl0QnV0Tm90U3VuayIsInNvbWUiLCJpc1N1bmsiLCJjYW5CZVN1bmsiLCJzaW5rU2hpcCIsImFsbFN1bmsiLCJ0YWtlbkJ5Q2VsbHMiLCJldmVyeSIsImNhbkJlUGxhY2VkIiwiYXJlRW1wdHkiLCJpdGVtIiwicmVtb3ZlUmVzZXJ2ZWRTcGFjZSIsImhpdENvdW50Iiwicm90YXRlIiwidGhpcyIsInBsYXlBdWRpbyIsImF1ZGlvIiwiT2JqZWN0Iiwia2V5cyIsImtleSIsInBsYXlTb3VuZCIsInBsYXkiLCJjdXJyZW50VGltZSIsInBhdXNlIiwiY2FsbCIsIm1pc3MiLCJBdWRpbyIsInN1bmsiLCJnYW1lT3ZlciIsImRyb3AiLCJyYW5kb20iLCJzZWxlY3QiLCJ0aWNrIiwiZ3JhYiIsImxvYWQiLCJwcmV2SGl0IiwibGFzdEhpdCIsInJhbmdlIiwiZ29SaWdodCIsImdvRG93biIsImZpbmlzaGluZ0F0dGFjayIsInNldFByZXZIaXQiLCJzZXRMYXN0SGl0IiwibmV3UHJldkhpdCIsIm5ld0xhc3RIaXQiLCJhdHRhY2siLCJyZXN1bHQiLCJyYW5kb21BdHRhY2siLCJyYW5kb21Db2wiLCJyYW5kb21Sb3ciLCJNYXRoIiwiZmxvb3IiLCJjZWlsIiwiZm9sbG93dXBBdHRhY2siLCJ2YWxpZERpcmVjdGlvbnMiLCJyYW5kb21EaXJlY3Rpb24iLCJnZXRQcmV2SGl0IiwiZ2V0TGFzdEhpdCIsIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJmaXJzdEdhbWVib2FyZCIsInNlY29uZEdhbWVib2FyZCIsInNoaXBzIiwiZmlyc3RCb2FyZEVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzZWNvbmRCb2FyZEVsZW1lbnQiLCJmaXJzdEJvYXJkQ2VsbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2Vjb25kQm9hcmRDZWxscyIsInNoaXBOYW1lIiwic2hpcFNpemUiLCJzaGlwT2JqIiwiZ3JhYlBvaW50WCIsImdyYWJQb2ludFkiLCJoaWdobGlnaHRlZENlbGxzIiwic2hpcE5hbWVUb09iaiIsImNhcnJpZXIiLCJiYXR0bGVzaGlwIiwiZGVzdHJveWVyIiwic3VibWFyaW5lIiwicGF0cm9sYm9hdCIsImxhc3REcmFnZ2VkIiwiZHJhZ2dhYmxlcyIsImdldE5vblNoaXBDZWxscyIsImJvYXJkQ2VsbHMiLCJBcnJheSIsImZyb20iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsIm5vblNoaXBDZWxscyIsImdldExhc3RTaGlwU2l6ZUVsZW1lbnRzIiwic2xpY2UiLCJtaW4iLCJnZXRHYW1lYm9hcmQiLCJ0YXJnZXQiLCJib2FyZElkIiwiY2xvc2VzdCIsImlkIiwic2V0U2hpcEF0dHJpYnV0ZXMiLCJnZXRBdHRyaWJ1dGUiLCJvZmZzZXRYIiwib2Zmc2V0WSIsInJlbW92ZUhpZ2hsaWdodCIsImhpZ2hsaWdodGVkQ2VsbCIsInJlbW92ZSIsImlzQm9hcmRWYWxpZCIsImhhbmRsZU1vdXNlZG93biIsInRhcmdldFNoaXBOYW1lIiwicmVtYWluaW5nU2hpcHMiLCJ0b0xvd2VyQ2FzZSIsInJlc2VydmVTcGFjZUZvclJlbWFpbmluZ1NoaXBzIiwicmVuZXciLCJzZXRJbml0TWVzc2FnZSIsImJ1dHRvbiIsImhhbmRsZURyYWdTdGFydCIsInNldFRpbWVvdXQiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJjbGVhclNoaXAiLCJoYW5kbGVEcmFnT3ZlciIsImluZGV4IiwicHJldmVudERlZmF1bHQiLCJzdGFydENlbGwiLCJvZmZzZXRIZWlnaHQiLCJvZmZzZXRXaWR0aCIsImdldFN0YXJ0Q2VsbCIsImdldEJvYXJkQ2VsbHMiLCJ0b0hpZ2hsaWdodCIsImNlbGxJbmRleCIsImhpZ2hsaWdodENlbGxzT25Cb2FyZCIsImRhdGFzZXQiLCJpc1ZhbGlkUGxhY2VtZW50IiwiYWRkIiwiaGlnaGxpZ2h0Q2VsbHMiLCJoYW5kbGVEcmFnTGVhdmUiLCJoYW5kbGVEcm9wIiwibGFzdCIsInBsYWNlU2hpcE9uQm9hcmQiLCJjYW5CZVN0YXJ0ZWQiLCJzZXRTdGFydE1lc3NhZ2UiLCJoYW5kbGVEcmFnRW5kIiwiYm9hcmQiLCJwcmV2ZW50T2ZmQm9hcmRQbGFjZW1lbnQiLCJmaWxsQ2VsbHMiLCJoYW5kbGVNb3VzZXVwIiwiaGFuZGxlUm90YXRlIiwiY3VycmVudCIsImJsb2NrUmlnaHRDbGljayIsImFkZEV2ZW50TGlzdGVuZXJzVG9DZWxscyIsImFkZEV2ZW50TGlzdGVuZXIiLCJkcmFnZ2FibGUiLCJ1aSIsInN0YXR1c0JveCIsImJvYXJkcyIsInBWY0J0biIsIm5ld0dhbWVCdG4iLCJjVmNCdG4iLCJzdGFydEJ0biIsInJhbmRvbUJ0biIsImFsbEJ0bnMiLCJzcGVlZHMiLCJnZXRFbGVtZW50c0J5TmFtZSIsInNwZWVkVmFsdWUiLCJtdXRlQnRuIiwiaXNNdXRlZCIsInJlbmRlckNlbGxzIiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJjcmVhdGVDZWxsIiwiYXBwZW5kIiwiZ2V0Qm9hcmRJZCIsImh1bWFuR2FtZWJvYXJkIiwiY29tcHV0ZXJHYW1lYm9hcmQiLCJyZWZyZXNoQm9hcmQiLCJpbm5lckhUTUwiLCJnZXRVc2VySW5wdXQiLCJoYW5kbGVHYW1lTW9kZSIsInNlbGVjdGVkRWxlbWVudCIsImRlc2VsZWN0ZWRFbGVtZW50Iiwid2FpdGluZyIsImJ0biIsImRpc2FibGVkIiwiZ2V0U3BlZWRWYWx1ZSIsInJlc3RhcnQiLCJzZXRSZXN0YXJ0TWVzc2FnZSIsImJvb2wiLCJkb2N1bWVudEVsZW1lbnQiLCJ0b2dnbGUiLCJyZW1vdmVCb2FyZFBvaW50ZXIiLCJzZXRTaGlwU3R5bGUiLCJzaGlwRWxlbWVudCIsImNlbGxTaXplIiwiaHRtbEVsZW1lbnQiLCJyb290Rm9udFNpemUiLCJwYXJzZUZsb2F0Iiwid2luZG93IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImdldFByb3BlcnR5VmFsdWUiLCJ3aWR0aCIsImhlaWdodCIsInN0YXR1c1RleHRNb2JpbGUiLCJzdGF0dXNUZXh0RGVza3RvcCIsInRleHRDb250ZW50IiwibWF0Y2hNZWRpYSIsIm1hdGNoZXMiLCJpbnB1dCIsInVuRmlsbENlbGxzIiwic2Vjb25kIiwiYWxsIiwibmV3R2FtZSIsInJhbmRvbWl6ZVNoaXBzUGxhY2VtZW50IiwiaHVtYW5TaGlwcyIsInNwZWVkQnRuIiwiZXZlbnQiLCJjaGVja2VkIiwic2V0U3BlZWRWYWx1ZSIsInNwZWFrZXJJY29uIiwic291bmQiLCJ2YWx1ZXMiLCJ2b2x1bWUiLCJtdXRlZCIsInJlbmRlckJvYXJkIiwicmVtb3ZlQXR0cmlidXRlIiwiaGFuZGxlVXNlcklucHV0IiwidXNlcklucHV0Iiwib25jZSIsInNldEJvYXJkUG9pbnRlciIsIndoaWNoIiwiY3JlYXRlU2hpcE92ZXJsYXkiLCJmaXJzdENlbGwiLCJjcmVhdGVTaGlwRWxlbWVudCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImFwcGVuZENoaWxkIiwicmVzaXplSGFuZGxlciIsInNldFR1cm5NZXNzYWdlUHZDIiwiaXNQbGF5ZXJUdXJuIiwic2V0VHVybk1lc3NhZ2VDdkMiLCJzZXRHYW1lT3Zlck1lc3NhZ2VQdkMiLCJ3aG8iLCJzZXRHYW1lT3Zlck1lc3NhZ2VDdkMiLCJodW1hbiIsInBsYXllciIsImNvbXB1dGVyIiwiaHVtYW5DYXJyaWVyIiwiaHVtYW5CYXR0bGVzaGlwIiwiaHVtYW5EZXN0cm95ZXIiLCJodW1hblN1Ym1hcmluZSIsImh1bWFuUGF0cm9sYm9hdCIsImlzU3RvcHBlZCIsInBvcHVsYXRlU2hpcHMiLCJoYW5kbGVHYW1lT3ZlciIsIndpbm5lciIsImlzR2FtZU92ZXIiLCJjb21wdXRlckFJIiwiY3B1VHVybiIsImFsbFNoaXBzIiwicmFuZG9tT3JpZW50YXRpb24iLCJyYW5kb21QbGFjZW1lbnQiLCJwaWNrR2FtZU1vZGUiLCJpbml0Il0sInNvdXJjZVJvb3QiOiIifQ==