(()=>{"use strict";const e=()=>{const e=["A","B","C","D","E","F","G","H","I","J"],t=["1","2","3","4","5","6","7","8","9","10"],a=[],r=[],s=(r,s)=>{const o=e.indexOf(r),n=t.indexOf(s);return-1===o||-1===n?null:a[n][o]},o=(r,s,o,n)=>{const l=e.indexOf(r),i=t.indexOf(s);return-1===l||-1===i?null:(a[i][l].status=o,n&&(a[i][l].takenBy=n),a[i][l])};return{generateArray:()=>{for(let r=0;r<10;r+=1){a[r]=[];for(let s=0;s<10;s+=1)a[r][s]={col:e[s],row:t[r],status:"empty",takenBy:null}}},clearBoard:()=>{a.flat().forEach((e=>{e.status="empty",e.takenBy=void 0})),r.length=0},getCell:s,setCell:o,removeShip:(e,t)=>{t.array.flat().forEach((t=>{"taken"===t.status&&t.takenBy.name===e.name&&(t.status="empty",t.takenBy=null);const a=r.indexOf(t);null===t.takenBy&&-1!==a&&r.splice(a,1)}))},placeShip:(a,n,l,i)=>{const c="horizontal"===i,d=c?e:t,u=d.indexOf(c?n:l);a.isVertical="horizontal"!==i;let m=[];if(u<0||u+a.size>d.length)return!1;for(let e=0;e<a.size;e+=1){const t=c?d[u+e]:n,r=c?l:d[u+e];if("empty"!==s(t,r).status)return!1;o(t,r,"taken",a),m.push(s(t,r))}return r.push(m[0]),!0},receiveAttack:(e,t)=>{const a=s(e,t);return"taken"===a.status?(a.takenBy.hit(),o(e,t,"hit"),a.status):"empty"===a.status||"reserved"===a.status?(o(e,t,"miss"),a.status):null},receiveAround:(e,t)=>{const a=s(e,t);return"empty"===a.status?(o(e,t,"reserved"),a.status):null},reserveSpace:(e,t,a)=>{const r=e.getCell(t,a);if(r&&r.takenBy){e.array.flat().filter((e=>e.takenBy&&e.takenBy.name===r.takenBy.name)).forEach((t=>{[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0},{col:-1,row:-1},{col:-1,row:1},{col:1,row:-1},{col:1,row:1}].forEach((a=>{const r=String.fromCharCode(t.col.charCodeAt(0)+a.col),s=(Number(t.row)+a.row).toString();e.getCell(r,s)&&e.receiveAround(r,s)}))}))}},reserveSpaceForAll:function(e){e.shipsPlaced.forEach((t=>{e.reserveSpace(e,t.col,t.row)}))},hitButNotSunk:e=>e.array.flat().some((e=>"hit"===e.status&&!1===e.takenBy.isSunk())),canBeSunk:e=>e&&e.takenBy&&e.takenBy.isSunk(),sinkShip:(e,t,a)=>{const r=e.getCell(t,a);e.array.flat().filter((e=>e.takenBy&&e.takenBy.name===r.takenBy.name)).forEach((t=>{[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0},{col:-1,row:-1},{col:-1,row:1},{col:1,row:-1},{col:1,row:1}].forEach((a=>{const r=String.fromCharCode(t.col.charCodeAt(0)+a.col),s=(Number(t.row)+a.row).toString();e.getCell(r,s)&&e.receiveAttack(r,s)}))}))},allSunk:e=>{let t=e.array.flat().filter((e=>e.takenBy));return!!(t.length>0&&t.every((e=>e.takenBy.isSunk())))},array:a,canBePlaced:(a,r,o,n)=>{const l="horizontal"===n,i=l?e:t,c=i.indexOf(l?r:o);if(c<0||c+a>i.length)return!1;const d=[];for(let e=0;e<a;e+=1){const t=l?i[c+e]:r,a=l?o:i[c+e];d.push("empty"===s(t,a).status)}return d.every((e=>!0===e))},shipsPlaced:r,removeReservedSpace:e=>{e.array.flat().forEach((e=>{"reserved"===e.status&&o(e.col,e.row,"empty")}))}}},t=e=>{let t;return"Carrier"===e&&(t=5),"Battleship"===e&&(t=4),"Destroyer"===e&&(t=3),"Submarine"===e&&(t=3),"PatrolBoat"===e&&(t=2),{name:e,size:t,hitCount:0,isVertical:!1,rotate(){this.isVertical=!this.isVertical},hit(){this.hitCount+=1},isSunk(){return this.hitCount===t}}},a=(()=>{const e=e=>{Object.keys(e).forEach((t=>{const a=e[t].play;e[t].play=function(){return e[t].currentTime>0&&(e[t].pause(),e[t].currentTime=0),a.call(this)}}))};return(()=>{const t={miss:new Audio("sounds/gray1wea.wav"),hit:new Audio("sounds/explo.wav"),sunk:new Audio("sounds/explodea.wav"),gameOver:new Audio("sounds/capture.wav"),drop:new Audio("sounds/barr1sel.wav"),rotate:new Audio("sounds/drain.wav"),random:new Audio("sounds/exp1sel.wav"),select:new Audio("sounds/msg.wav"),tick:new Audio("sounds/beep.wav"),grab:new Audio("sounds/buttonRev.wav")};return e(t),t})()})(),r=()=>{const e=["A","B","C","D","E","F","G","H","I","J"];let t=null,r=null,s=1,o=!0,n=!0;const l=(e,t,d,u)=>{if(u.row===d)if(o){s=1;let n=String.fromCharCode(t.charCodeAt(0)+s);for(;e.getCell(n,d)&&"hit"===e.getCell(n,d).status;)s+=1,n=String.fromCharCode(t.charCodeAt(0)+s);e.getCell(n,d)&&"hit"!==e.getCell(n,d).status&&"miss"!==e.getCell(n,d).status?(e.receiveAttack(n,d),"hit"===e.getCell(n,d).status?(i(r),c({col:n,row:d}),a.hit.play()):"miss"===e.getCell(n,d).status&&a.miss.play(),s+=1):(s=1,o=!1,l(e,n,d,u))}else{s=1;let n=String.fromCharCode(t.charCodeAt(0)-s);for(;e.getCell(n,d)&&"hit"===e.getCell(n,d).status;)s+=1,n=String.fromCharCode(t.charCodeAt(0)-s);e.getCell(n,d)&&"hit"!==e.getCell(n,d).status&&"miss"!==e.getCell(n,d).status?(e.receiveAttack(n,d),"hit"===e.getCell(n,d).status?(i(r),c({col:n,row:d}),a.hit.play()):"miss"===e.getCell(n,d).status&&a.miss.play(),s+=1):(s=1,o=!0,l(e,n,d,u))}else if(u.col===t)if(n){s=1;let o=(Number(d)+s).toString();for(;e.getCell(t,o)&&"hit"===e.getCell(t,o).status;)s+=1,o=(Number(d)+s).toString();e.getCell(t,o)&&"hit"!==e.getCell(t,o).status&&"miss"!==e.getCell(t,o).status?(e.receiveAttack(t,o),"hit"===e.getCell(t,o).status?(i(r),c({col:t,row:o}),a.hit.play()):"miss"===e.getCell(t,o).status&&a.miss.play(),s+=1):(s=1,n=!1,l(e,t,o,u))}else{s=1;let o=(Number(d)-s).toString();for(;e.getCell(t,o)&&"hit"===e.getCell(t,o).status;)s+=1,o=(Number(d)-s).toString();e.getCell(t,o)&&"hit"!==e.getCell(t,o).status&&"miss"!==e.getCell(t,o).status?(e.receiveAttack(t,o),"hit"===e.getCell(t,o).status?(i(r),c({col:t,row:o}),a.hit.play()):"miss"===e.getCell(t,o).status&&a.miss.play(),s+=1):(s=1,n=!0,l(e,t,o,u))}},i=e=>{t=e},c=e=>{r=e};return{attack:(e,t,s)=>{if("hit"!==e.getCell(t,s).status&&"miss"!==e.getCell(t,s).status){let o=e.receiveAttack(t,s);return"hit"===o?(i(r),c({col:t,row:s}),a.hit.play()):"miss"===o&&a.miss.play(),o}return"already shot"},randomAttack:t=>{let s,o;do{s=e[Math.floor(Math.random()*e.length)],o=Math.ceil(10*Math.random()).toString()}while("hit"===t.getCell(s,o).status||"miss"===t.getCell(s,o).status);if("hit"!==t.getCell(s,o).status&&"miss"!==t.getCell(s,o).status){const e=t.receiveAttack(s,o);return"hit"===t.getCell(s,o).status?(i(r),c({col:s,row:o}),a.hit.play()):"miss"===t.getCell(s,o).status&&a.miss.play(),{result:e,col:s,row:o}}return{result:"already shot",col:s,row:o}},followupAttack:(e,t,o)=>{const n=[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0}].filter((a=>{const r=String.fromCharCode(t.charCodeAt(0)+a.col),s=(Number(o)+a.row).toString(),n=e.getCell(r,s);return!(!n||"miss"===n.status||"hit"===n.status)}));if(n.length>0){const l=n[Math.floor(Math.random()*n.length)],d=String.fromCharCode(t.charCodeAt(0)+l.col),u=(Number(o)+l.row).toString();e.receiveAttack(d,u),s=1,"hit"===e.getCell(d,u).status?(i(r),c({col:d,row:u}),a.hit.play()):"miss"===e.getCell(d,u).status&&a.miss.play()}},finishingAttack:l,prevHit:t,lastHit:r,getPrevHit:()=>t,getLastHit:()=>r,setPrevHit:i,setLastHit:c}};var s=function(e,t,a,r){return new(a||(a=Promise))((function(s,o){function n(e){try{i(r.next(e))}catch(e){o(e)}}function l(e){try{i(r.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,l)}i((r=r.apply(e,t||[])).next())}))};const o=(e,t,r)=>{const o=document.querySelector("#firstBoard"),n=document.querySelector("#secondBoard"),l=o.querySelectorAll(".cell"),c=n.querySelectorAll(".cell");let u,m,h,f,v=0,p=0,g=[];const y={carrier:r[0],battleship:r[1],destroyer:r[2],submarine:r[3],patrolboat:r[4]};let w=null;const S=document.querySelectorAll(".draggable");function C(e){return Array.from(e).filter((e=>!e.classList.contains("taken")))}const B=[...C(l),...C(c)];function b(e,t){return e.slice(Math.min(e.length-t,0))}function k(a){const r=a.target;let s;const o=r.closest(".board").id;return"firstBoard"===o&&(s=e),"secondBoard"===o&&(s=t),{target:r,gameboard:s}}function L(e,t){return u=t.getAttribute("data-name"),m=Number(t.getAttribute("data-size")),v=e.offsetX,p=e.offsetY,h=y[u],f=h.isVertical?"vertical":"horizontal",{shipName:u,shipObj:h}}function A(){g.forEach((e=>e.classList.remove("highlight")))}function E(e){return"firstBoard"===e||"secondBoard"===e}function P(e){const{gameboard:t}=k(e);t.removeReservedSpace(t),function(e,t){const{target:a}=k(t),r=a.getAttribute("data-name");let s=e.shipsPlaced.filter((e=>r!==e.takenBy.name.toLowerCase()));s.forEach((t=>{e.reserveSpace(e,t.col,t.row)}))}(t,e),d.renew(),i.setInitMessage(),0===e.button&&a.grab.play()}function x(e){return s(this,void 0,void 0,(function*(){yield new Promise((e=>setTimeout(e,0)));const{target:t,gameboard:a}=k(e);t.style.visibility="hidden",L(e,t),a.removeShip(h,a),i.clearShip(h,a)}))}function q(e){return function(t){const{target:a}=k(t),r=a.closest(".board").id;if(E(r)&&(t.preventDefault(),h)){const a=function(e,t,a){const{target:r}=k(a);return e-(t.isVertical?10*Math.floor(p/r.offsetHeight):Math.floor(v/r.offsetWidth))}(e,h,t),s=function(e){return"firstBoard"===e?l:c}(r),o=[];!function(e,t,a,r){for(let s=0;s<m;s++){let o=e.isVertical?t+10*s:t+s;a[o]&&(r.push(a[o]),g.push(a[o]))}}(h,a,s,o),function(e){return e.every((e=>e.classList.contains("empty")))&&(e.every((t=>t.dataset.col===e[0].dataset.col))||e.every((t=>t.dataset.row===e[0].dataset.row)))&&e.length===m&&e.every((e=>e.dataset.col>="A"&&e.dataset.col<="J"))&&e.every((e=>Number(e.dataset.row)>=1&&Number(e.dataset.row)<=10))}(o)&&(!function(e){e.forEach((e=>{e.classList.add("highlight")}))}(o),w||(w=b(g,m)))}}}function M(){A(),g.length=0}function z(e){A();const t=b(g,m),{target:r,gameboard:s}=k(e);E(r.closest(".board").id)&&h&&null!==w&&function(e,t,a,r){e.canBePlaced(t.size,a[0].dataset.col,a[0].dataset.row,r)?(e.placeShip(t,a[0].dataset.col,a[0].dataset.row,r),e.reserveSpace(e,a[0].dataset.col,a[0].dataset.row)):(e.placeShip(t,w[0].dataset.col,w[0].dataset.row,r),e.reserveSpace(e,w[0].dataset.col,w[0].dataset.row))}(s,h,t,f),s.removeReservedSpace(s),s.reserveSpaceForAll(s),d.renew(),i.canBeStarted(),i.setStartMessage(),w=null,a.drop.play()}function O(a){const r=a.target;r.style.visibility="visible",function(a,r){if(0===g.length){const s=a.closest(".board");if(s){let{gameboard:a}=k(r);"firstBoard"===s.id?a=e:"secondBoard"===s.id&&(a=t),a&&w&&a.canBePlaced(h.size,w[0].dataset.col,w[0].dataset.row,f)&&(a.placeShip(h,w[0].dataset.col,w[0].dataset.row,f),a.reserveSpace(a,w[0].dataset.col,w[0].dataset.row),d.renew())}}}(r,a),i.canBeStarted()&&i.fillCells("second"),i.setStartMessage()}function V(e){const{gameboard:t}=k(e);t.reserveSpaceForAll(t),d.renew(),i.setStartMessage()}function G(e){e.preventDefault();const{target:t,gameboard:r}=k(e),{shipName:s,shipObj:o}=L(e,t),n=r.shipsPlaced.filter((e=>e.takenBy.name.toLowerCase()===s));r.removeShip(o,r),r.removeReservedSpace(r),r.reserveSpaceForAll(r),o.rotate(),f=o.isVertical?"vertical":"horizontal",r.canBePlaced(o.size,n[0].col,n[0].row,f)||(o.rotate(),f=o.isVertical?"vertical":"horizontal"),r.placeShip(o,n[0].col,n[0].row,f),r.reserveSpaceForAll(r),d.renew(),i.canBeStarted()&&i.fillCells("second"),a.rotate.play()}function H(e){e.preventDefault()}function N(e){e.forEach(((e,t)=>{e.addEventListener("dragover",q(t)),e.addEventListener("dragleave",M),e.addEventListener("drop",z)}))}N(l),N(c),S.forEach((e=>{e.addEventListener("mousedown",P),e.addEventListener("dragstart",x),e.addEventListener("dragend",O),e.addEventListener("mouseup",V),e.addEventListener("contextmenu",G),B.forEach((e=>e.addEventListener("contextmenu",H)))}))};var n=function(e,t,a,r){return new(a||(a=Promise))((function(s,o){function n(e){try{i(r.next(e))}catch(e){o(e)}}function l(e){try{i(r.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,l)}i((r=r.apply(e,t||[])).next())}))};const l=(()=>{const e=document.querySelector("#messageBox p"),t=document.querySelector("#boards"),r=document.querySelector("#playerVsComputer"),s=document.querySelector("#newGame"),l=document.querySelector("#computerVsComputer"),i=document.querySelector("#start"),c=document.querySelector("#randomPlacement"),u=[r,s,l,i,c],m=document.getElementsByName("speed");let h=1e3;const f=document.querySelector("#mute");let v=!1;const p=(e,t)=>{e.array.forEach((e=>{e.forEach((e=>{const a=(e=>{const t=document.createElement("div");return t.classList.add("cell"),t.classList.add(e.status),t.setAttribute("data-col",e.col),t.setAttribute("data-row",e.row),e.takenBy&&t.setAttribute("data-shipName",e.takenBy.name.toLowerCase()),t})(e);t.append(a)}))}))},g=e=>e===d.humanGameboard?"firstBoard":e===d.computerGameboard?"secondBoard":void 0,y=e=>{const t=document.querySelector(`#${g(e)}`);t.innerHTML="",p(e,t)},w=e=>{if(!e.target.classList.contains("hit")&&!e.target.classList.contains("miss")){return{col:e.target.getAttribute("data-col"),row:e.target.getAttribute("data-row")}}},S=(e,t)=>{t.classList.remove("selected"),e.classList.contains("selected")||(e.classList.add("selected"),e===r&&n(void 0,void 0,void 0,(function*(){P("first"),C(!0),u.forEach((e=>e.disabled=!0)),yield new Promise((e=>setTimeout(e,q()))),u.forEach((e=>e.disabled=!1)),C(!1),k(),L()})),e===l&&n(void 0,void 0,void 0,(function*(){C(!0),u.forEach((e=>e.disabled=!0)),yield new Promise((e=>setTimeout(e,q()))),u.forEach((e=>e.disabled=!1)),C(!1),i.disabled=!0,c.disabled=!0,l.disabled=!0})),d.restart(),E())},C=e=>{document.documentElement.classList.toggle("wait",e)},B=()=>{document.querySelector("#secondBoard").classList.remove("boardOutline")},b=(e,t,a,r)=>{const s=document.querySelector("html"),o=parseFloat(window.getComputedStyle(s,null).getPropertyValue("font-size"));r?(e.style.width=a/o+"rem",e.style.height=t*(a/o)+"rem"):(e.style.width=t*(a/o)+"rem",e.style.height=a/o+"rem")},k=()=>5===d.humanGameboard.shipsPlaced.length&&0===d.computerGameboard.shipsPlaced.length?(P("second"),i.disabled=!1,!0):(i.disabled=!0,!1),L=()=>{const t="Use 'Random Placement' button, then press Start!",a="Drag and drop ships onto the left board or use 'Random Placement' button. Right click to rotate. When ready, press Start!";e.textContent!==t&&e.textContent!==a&&"Restarting..."!==e.textContent&&"You can now begin the game. Press start!"!==e.textContent||(e.textContent=t,window.matchMedia("(min-width: 1024px)").matches&&(e.textContent=a))},A=()=>{k()&&(e.textContent="You can now begin the game. Press start!")},E=()=>{e.textContent="Restarting..."},P=e=>{let t;"first"===e?t=document.querySelector("#firstBoard"):"second"===e&&(t=document.querySelector("#secondBoard"));t.querySelectorAll(".cell").forEach((e=>{e.classList.add("filled")}))},x=e=>n(void 0,void 0,void 0,(function*(){let t;C(!0),"first"===e?t=document.querySelector("#firstBoard"):"second"===e&&(t=document.querySelector("#secondBoard"));const r=t.querySelectorAll(".cell");r.forEach((e=>{e.classList.add("filled")})),yield new Promise((e=>{r.forEach(((t,s)=>{setTimeout((()=>{t.classList.remove("filled"),s===r.length-1&&e(),(s+1)%6==0&&a.tick.play()}),q()/120*s)}))})),C(!1)}));r.addEventListener("click",(()=>{P("first"),S(r,l);document.querySelector("#secondBoard").classList.remove("start"),i.disabled=!0,r.disabled=!0,a.select.play(),x("first")})),l.addEventListener("click",(()=>{P("first"),P("second"),S(l,r);const e=document.querySelector("#secondBoard");e.classList.remove("hide"),e.classList.add("start"),i.disabled=!0,c.disabled=!0,l.disabled=!0,a.select.play(),Promise.all([x("first"),x("second")])})),s.addEventListener("click",(()=>n(void 0,void 0,void 0,(function*(){B(),P("first"),l.classList.contains("selected")&&(P("second"),i.disabled=!0,c.disabled=!0,l.disabled=!0),a.select.play(),yield n(void 0,void 0,void 0,(function*(){E(),C(!0),u.forEach((e=>e.disabled=!0)),yield d.newGame(),u.forEach((e=>e.disabled=!1)),C(!1),k(),r.classList.contains("selected")&&L()}));const e=document.querySelector("#secondBoard");e.classList.remove("hide"),r.classList.contains("selected")&&(e.classList.remove("start"),x("first"),i.disabled=!0,r.disabled=!0),l.classList.contains("selected")&&(e.classList.add("start"),c.disabled=!0,Promise.all([x("first"),x("second")]),i.disabled=!0,c.disabled=!0,l.disabled=!0)})))),i.addEventListener("click",(()=>{d.start();const e=document.querySelector("#secondBoard");e.classList.add("hide"),e.classList.add("start"),i.disabled=!0,c.disabled=!0,x("second")})),c.addEventListener("click",(()=>{d.computerGameboard.clearBoard(),y(d.computerGameboard),d.randomizeShipsPlacement(d.humanGameboard),o(d.humanGameboard,d.computerGameboard,d.humanShips),k(),A(),P("second"),a.random.play()}));const q=()=>h;return m.forEach((e=>{e.addEventListener("click",(e=>{(e=>{let t=e.target;t.checked&&(h=Number(t.value))})(e),a.select.play()}))})),f.addEventListener("click",(()=>{const e=document.querySelector("#speaker");if(v){f.classList.remove("muted"),e.classList.remove("fa-volume-xmark"),e.classList.add("fa-volume-high");for(let e of Object.values(a))e.volume=1}else{f.classList.add("muted"),e.classList.remove("fa-volume-high"),e.classList.add("fa-volume-xmark");for(let e of Object.values(a))e.volume=0}v=!v,a.select.play()})),window.addEventListener("resize",L),{renderBoard:e=>{const a=document.createElement("div");a.classList.add("board"),a.id=g(e),p(e,a),t.append(a)},clearShip:(e,t)=>{document.querySelectorAll(`#${g(t)} .cell`).forEach((t=>{t.classList.contains("taken")&&t.getAttribute("data-shipName")===e.name.toLowerCase()&&(t.classList.remove("taken"),t.classList.add("empty"),t.removeAttribute("data-shipName"))}))},refreshBoard:y,handleUserInput:()=>n(void 0,void 0,void 0,(function*(){const e=document.querySelectorAll("#secondBoard .cell");let t;do{t=yield new Promise((t=>{e.forEach((e=>{e.classList.contains("hit")||e.classList.contains("miss")||e.addEventListener("click",(e=>{t(w(e))}),{once:!0})}))}))}while(!t);return{col:t.col.toString(),row:t.row.toString()}})),pVcBtn:r,cVcBtn:l,waiting:C,setBoardPointer:e=>{const t=document.querySelector("#secondBoard");"player"===e?t.classList.add("boardOutline"):"computer"===e&&t.classList.remove("boardOutline")},removeBoardPointer:B,createShipOverlay:e=>{e.shipsPlaced.forEach((t=>{const a=(e=>{const t=document.createElement("div"),a=e.takenBy.name.toLowerCase(),r=e.takenBy.size;return t.classList.add("ship",a,"draggable"),t.setAttribute("data-size",`${r}`),t.setAttribute("data-name",`${a}`),t.setAttribute("draggable","true"),t})(t),r=document.querySelector(".board .cell").getBoundingClientRect().width,s=t.takenBy.size,o=t.takenBy.isVertical;document.querySelector(`#${g(e)} .cell[data-col="${t.col}"][data-row="${t.row}"]`).appendChild(a),b(a,s,r,o),window.addEventListener("resize",(()=>((e,t,a)=>{const r=document.querySelector(".board .cell").getBoundingClientRect().width;b(e,t,r,a)})(a,s,o)))}))},canBeStarted:k,setInitMessage:L,setStartMessage:A,setTurnMessagePvC:t=>{e.textContent=t?"Player's turn. Take aim and attack!":"Computer's turn. The shot is coming!"},setTurnMessageCvC:t=>{e.textContent=t?"Violet's turn":"Blue's turn"},setGameOverMessagePvC:t=>{"player"===t?e.textContent="Game over, Player wins!":"computer"===t&&(e.textContent="Game over, Computer wins!")},setGameOverMessageCvC:t=>{"player"===t?e.textContent="Game over, Blue Computer wins!":"computer"===t&&(e.textContent="Game over, Violet Computer wins!")},setRestartMessage:E,getSpeedValue:q,fillCells:P,unFillCells:x}})(),i=l;var c=function(e,t,a,r){return new(a||(a=Promise))((function(s,o){function n(e){try{i(r.next(e))}catch(e){o(e)}}function l(e){try{i(r.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,l)}i((r=r.apply(e,t||[])).next())}))};const d=(()=>{const s=e(),n=e(),l=r(),d=r();let u,m,h,f,v,p=!0,g=[u,m,h,f,v];const y=()=>{u=t("Carrier"),m=t("Battleship"),h=t("Destroyer"),f=t("Submarine"),v=t("PatrolBoat"),g=[u,m,h,f,v],n.placeShip(u,"A","1","horizontal"),n.placeShip(m,"A","3","horizontal"),n.placeShip(h,"A","5","horizontal"),n.placeShip(f,"A","7","horizontal"),n.placeShip(v,"A","9","horizontal"),n.reserveSpaceForAll(n)},w=e=>(i.removeBoardPointer(),i.pVcBtn.classList.contains("selected")&&i.setGameOverMessagePvC(e),i.cVcBtn.classList.contains("selected")&&i.setGameOverMessageCvC(e),a.gameOver.play(),!0),S=()=>n.allSunk(n)?w("player"):!!s.allSunk(s)&&w("computer"),C=e=>{let t;if(e===s?t=d:e===n&&(t=l),e.hitButNotSunk(e)){const r=t.getLastHit(),s=t.getPrevHit(),o=e.getCell(r.col,r.row),n=o.takenBy.hitCount;if(null!==s&&null!==r&&n>=2&&n<=4?t.finishingAttack(e,r.col,r.row,s):1===n&&t.followupAttack(e,r.col,r.row),e.canBeSunk(o)&&(e.sinkShip(e,r.col,r.row),a.sunk.play()),S())return}else{const{col:r,row:s}=t.randomAttack(e),o=e.getCell(r,s);if("hit"===o.status&&(t.setPrevHit(t.getLastHit()),t.setLastHit({col:r,row:s}),e.canBeSunk(o)&&(e.sinkShip(e,r,s),a.sunk.play(),t.setPrevHit(null),t.setLastHit(null),S())))return}},B=(e,t)=>c(void 0,void 0,void 0,(function*(){i.waiting(!0),i.setTurnMessageCvC(e),yield new Promise((e=>setTimeout(e,i.getSpeedValue()))),i.cVcBtn.classList.contains("selected")&&!p&&(C(t),i.refreshBoard(t))})),b=e=>{e.clearBoard(),(e=>{let a;e===s?(u=t("Carrier"),m=t("Battleship"),h=t("Destroyer"),f=t("Submarine"),v=t("PatrolBoat"),a=[u,m,h,f,v]):e===n&&(a=[t("Carrier"),t("Battleship"),t("Destroyer"),t("Submarine"),t("PatrolBoat")]);g.length=0;const r=["A","B","C","D","E","F","G","H","I","J"],o=()=>r[Math.floor(Math.random()*r.length)],l=()=>Math.ceil(10*Math.random()).toString(),i=()=>Math.random()>.5?"horizontal":"vertical";a.forEach((t=>{let a=o(),r=l(),s=i(),n=e.canBePlaced(t.size,a,r,s);for(;!n;)a=o(),r=l(),s=i(),n=e.canBePlaced(t.size,a,r,s);n&&(e.placeShip(t,a,r,s),e.reserveSpace(e,a,r)),g.push(t)}))})(e),i.refreshBoard(e),e===s&&i.createShipOverlay(e)},k=()=>{i.cVcBtn.classList.contains("selected")&&(b(s),b(n),p=!1,c(void 0,void 0,void 0,(function*(){i.removeBoardPointer();let e=!0;for(;!S()&&!p;)yield B(e,e?s:n),e=!e;p=!1,i.waiting(!1)})),i.refreshBoard(s))},L=()=>{p=!0,l.setPrevHit(null),l.setLastHit(null),d.setPrevHit(null),d.setLastHit(null),s.clearBoard(),n.clearBoard(),y(),i.refreshBoard(s),i.refreshBoard(n),i.createShipOverlay(n),o(s,n,g),i.canBeStarted(),k()};return{init:()=>{i.setInitMessage(),s.generateArray(),n.generateArray(),i.renderBoard(s),i.renderBoard(n),y(),i.refreshBoard(n),i.createShipOverlay(n),o(s,n,g),i.canBeStarted(),k(),i.pVcBtn.disabled=!0},renew:()=>{i.refreshBoard(s),i.refreshBoard(n),i.createShipOverlay(s),i.createShipOverlay(n),o(s,n,g)},humanGameboard:s,computerGameboard:n,restart:L,newGame:()=>c(void 0,void 0,void 0,(function*(){p=!0,yield new Promise((e=>setTimeout(e,i.getSpeedValue()))),p=!1,L()})),start:()=>{i.refreshBoard(s),b(n),p=!1,c(void 0,void 0,void 0,(function*(){let e=!0;for(;!(S()||p||(e&&(yield c(void 0,void 0,void 0,(function*(){i.setTurnMessagePvC(!0),i.setBoardPointer("player"),i.waiting(!1);const{col:e,row:t}=yield i.handleUserInput();l.attack(n,e,t);const r=n.getCell(e,t);n.canBeSunk(r)&&(n.sinkShip(n,e,t),a.sunk.play()),i.refreshBoard(n)})),e=!1),S()||p));)e||(yield c(void 0,void 0,void 0,(function*(){i.setTurnMessagePvC(!1),i.setBoardPointer("computer"),i.waiting(!0),yield new Promise((e=>setTimeout(e,i.getSpeedValue()))),i.pVcBtn.classList.contains("selected")&&!p&&(C(s),i.refreshBoard(s))})),e=!0);p=!1,i.waiting(!1)}))},randomizeShipsPlacement:b,humanShips:g}})();d.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QmhQLEVBQUtDLEdBQ3JDLE1BQU1lLEVBQU9nTyxFQUFrQmpQLFFBQVFDLEVBQUtDLEdBQ3hDK08sRUFBa0IxTCxVQUFVdEMsS0FDNUJnTyxFQUFrQnpMLFNBQVN5TCxFQUFtQmhQLEVBQUtDLEdBQ25ELEVBQU82RSxLQUFLTixRQUVoQixFQUFHeUssYUFBYUQsRUFDcEIsSUFpQlk4RCxHQUFlLEdBRWZpQixLQUFnQkosS0FHZmIsVUFyQmMsT0FBVSxPQUFRLE9BQVEsR0FBUSxZQUN6RCxFQUFHRCxtQkFBa0IsR0FDckIsRUFBR1IsZ0JBQWdCLFlBQ25CLEVBQUc5QyxTQUFRLFNBQ0wsSUFBSXJJLFNBQVNDLEdBQVltRSxXQUFXbkUsRUFBUyxFQUFHdUksbUJBQ2pELEVBQUc3QixPQUFPbkUsVUFBVUMsU0FBUyxjQUFlZ0ssSUFHakRLLEVBQVdqRixHQUNYLEVBQUdFLGFBQWFGLEdBQ3BCLElBYVkrRCxHQUFlLEdBR3ZCYSxHQUFZLEVBQ1osRUFBR3BFLFNBQVEsRUFDZixHQW1GMEIsRUFzQ3dEK0IsMEJBQXlCQyxhQUM5RyxFQXJRa0IsR0NabkIsRUFBVytDLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvZ2FtZWJvYXJkLnRzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9zaGlwLnRzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9zb3VuZHMudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL3BsYXllci50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvZHJhZ0FuZERyb3AudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL3VpLnRzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9jb250cm9sbGVyLnRzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZ2FtZWJvYXJkRmFjdG9yeSA9ICgpID0+IHtcbiAgICBjb25zdCBjb2xzID0gWydBJywgJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAnSScsICdKJ107XG4gICAgY29uc3Qgcm93cyA9IFsnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLCAnMTAnXTtcbiAgICBjb25zdCBhcnJheSA9IFtdO1xuICAgIGNvbnN0IHNoaXBzUGxhY2VkID0gW107XG4gICAgY29uc3QgZ2VuZXJhdGVBcnJheSA9ICgpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSArPSAxKSB7XG4gICAgICAgICAgICBhcnJheVtpXSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaiArPSAxKSB7XG4gICAgICAgICAgICAgICAgYXJyYXlbaV1bal0gPSB7IGNvbDogY29sc1tqXSwgcm93OiByb3dzW2ldLCBzdGF0dXM6ICdlbXB0eScsIHRha2VuQnk6IG51bGwgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgY2xlYXJCb2FyZCA9ICgpID0+IHtcbiAgICAgICAgYXJyYXkuZmxhdCgpLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgIGNlbGwuc3RhdHVzID0gJ2VtcHR5JztcbiAgICAgICAgICAgIGNlbGwudGFrZW5CeSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgICAgIHNoaXBzUGxhY2VkLmxlbmd0aCA9IDA7XG4gICAgfTtcbiAgICBjb25zdCBnZXRDZWxsID0gKGNvbCwgcm93KSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbEluZGV4ID0gY29scy5pbmRleE9mKGNvbCk7XG4gICAgICAgIGNvbnN0IHJvd0luZGV4ID0gcm93cy5pbmRleE9mKHJvdyk7XG4gICAgICAgIGlmIChjb2xJbmRleCA9PT0gLTEgfHwgcm93SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyYXlbcm93SW5kZXhdW2NvbEluZGV4XTtcbiAgICB9O1xuICAgIGNvbnN0IHNldENlbGwgPSAoY29sLCByb3csIG5ld1N0YXR1cywgbmV3VGFrZW5CeSkgPT4ge1xuICAgICAgICBjb25zdCBjb2xJbmRleCA9IGNvbHMuaW5kZXhPZihjb2wpO1xuICAgICAgICBjb25zdCByb3dJbmRleCA9IHJvd3MuaW5kZXhPZihyb3cpO1xuICAgICAgICBpZiAoY29sSW5kZXggPT09IC0xIHx8IHJvd0luZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgYXJyYXlbcm93SW5kZXhdW2NvbEluZGV4XS5zdGF0dXMgPSBuZXdTdGF0dXM7XG4gICAgICAgIGlmIChuZXdUYWtlbkJ5KSB7XG4gICAgICAgICAgICBhcnJheVtyb3dJbmRleF1bY29sSW5kZXhdLnRha2VuQnkgPSBuZXdUYWtlbkJ5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheVtyb3dJbmRleF1bY29sSW5kZXhdO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlU2hpcCA9IChzaGlwLCBnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgZ2FtZWJvYXJkQ2VsbHMgPSBnYW1lYm9hcmQuYXJyYXkuZmxhdCgpO1xuICAgICAgICBnYW1lYm9hcmRDZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2VsbC5zdGF0dXMgPT09ICd0YWtlbicgJiYgY2VsbC50YWtlbkJ5Lm5hbWUgPT09IHNoaXAubmFtZSkge1xuICAgICAgICAgICAgICAgIGNlbGwuc3RhdHVzID0gJ2VtcHR5JztcbiAgICAgICAgICAgICAgICBjZWxsLnRha2VuQnkgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2hpcEluZGV4ID0gc2hpcHNQbGFjZWQuaW5kZXhPZihjZWxsKTtcbiAgICAgICAgICAgIGlmIChjZWxsLnRha2VuQnkgPT09IG51bGwgJiYgc2hpcEluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHNoaXBzUGxhY2VkLnNwbGljZShzaGlwSW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHBsYWNlU2hpcCA9IChzaGlwLCBjb2wsIHJvdywgb3JpZW50YXRpb24pID0+IHtcbiAgICAgICAgY29uc3QgaXNIb3Jpem9udGFsID0gb3JpZW50YXRpb24gPT09ICdob3Jpem9udGFsJztcbiAgICAgICAgY29uc3QgY2VsbHMgPSBpc0hvcml6b250YWwgPyBjb2xzIDogcm93cztcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBjZWxscy5pbmRleE9mKGlzSG9yaXpvbnRhbCA/IGNvbCA6IHJvdyk7XG4gICAgICAgIGlmIChvcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgICBzaGlwLmlzVmVydGljYWwgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNoaXAuaXNWZXJ0aWNhbCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNoaXBDZWxscyA9IFtdO1xuICAgICAgICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ICsgc2hpcC5zaXplID4gY2VsbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwLnNpemU7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudENvbCA9IGlzSG9yaXpvbnRhbCA/IGNlbGxzW3N0YXJ0ICsgaV0gOiBjb2w7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Um93ID0gaXNIb3Jpem9udGFsID8gcm93IDogY2VsbHNbc3RhcnQgKyBpXTtcbiAgICAgICAgICAgIGlmIChnZXRDZWxsKGN1cnJlbnRDb2wsIGN1cnJlbnRSb3cpLnN0YXR1cyAhPT0gJ2VtcHR5Jykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldENlbGwoY3VycmVudENvbCwgY3VycmVudFJvdywgJ3Rha2VuJywgc2hpcCk7XG4gICAgICAgICAgICBzaGlwQ2VsbHMucHVzaChnZXRDZWxsKGN1cnJlbnRDb2wsIGN1cnJlbnRSb3cpKTtcbiAgICAgICAgfVxuICAgICAgICBzaGlwc1BsYWNlZC5wdXNoKHNoaXBDZWxsc1swXSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgY29uc3QgY2FuQmVQbGFjZWQgPSAoc2l6ZSwgY29sLCByb3csIG9yaWVudGF0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzSG9yaXpvbnRhbCA9IG9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCc7XG4gICAgICAgIGNvbnN0IGNlbGxzID0gaXNIb3Jpem9udGFsID8gY29scyA6IHJvd3M7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gY2VsbHMuaW5kZXhPZihpc0hvcml6b250YWwgPyBjb2wgOiByb3cpO1xuICAgICAgICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ICsgc2l6ZSA+IGNlbGxzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFyZUVtcHR5ID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q29sID0gaXNIb3Jpem9udGFsID8gY2VsbHNbc3RhcnQgKyBpXSA6IGNvbDtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRSb3cgPSBpc0hvcml6b250YWwgPyByb3cgOiBjZWxsc1tzdGFydCArIGldO1xuICAgICAgICAgICAgYXJlRW1wdHkucHVzaChnZXRDZWxsKGN1cnJlbnRDb2wsIGN1cnJlbnRSb3cpLnN0YXR1cyA9PT0gJ2VtcHR5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFyZUVtcHR5LmV2ZXJ5KChpdGVtKSA9PiBpdGVtID09PSB0cnVlKTtcbiAgICB9O1xuICAgIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoY29sLCByb3cpID0+IHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGdldENlbGwoY29sLCByb3cpO1xuICAgICAgICBpZiAoY2VsbC5zdGF0dXMgPT09ICd0YWtlbicpIHtcbiAgICAgICAgICAgIGNlbGwudGFrZW5CeS5oaXQoKTtcbiAgICAgICAgICAgIHNldENlbGwoY29sLCByb3csICdoaXQnKTtcbiAgICAgICAgICAgIHJldHVybiBjZWxsLnN0YXR1cztcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2VsbC5zdGF0dXMgPT09ICdlbXB0eScgfHwgY2VsbC5zdGF0dXMgPT09ICdyZXNlcnZlZCcpIHtcbiAgICAgICAgICAgIHNldENlbGwoY29sLCByb3csICdtaXNzJyk7XG4gICAgICAgICAgICByZXR1cm4gY2VsbC5zdGF0dXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBjb25zdCByZWNlaXZlQXJvdW5kID0gKGNvbCwgcm93KSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBnZXRDZWxsKGNvbCwgcm93KTtcbiAgICAgICAgaWYgKGNlbGwuc3RhdHVzID09PSAnZW1wdHknKSB7XG4gICAgICAgICAgICBzZXRDZWxsKGNvbCwgcm93LCAncmVzZXJ2ZWQnKTtcbiAgICAgICAgICAgIHJldHVybiBjZWxsLnN0YXR1cztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IHJlc2VydmVTcGFjZSA9IChnYW1lYm9hcmQsIGNvbCwgcm93KSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIHJvdyk7XG4gICAgICAgIGlmIChjZWxsICYmIGNlbGwudGFrZW5CeSkge1xuICAgICAgICAgICAgY29uc3QgZ2FtZWJvYXJkQ2VsbHMgPSBnYW1lYm9hcmQuYXJyYXkuZmxhdCgpO1xuICAgICAgICAgICAgY29uc3Qgc2hpcENlbGxzID0gZ2FtZWJvYXJkQ2VsbHMuZmlsdGVyKChjKSA9PiBjLnRha2VuQnkgJiYgYy50YWtlbkJ5Lm5hbWUgPT09IGNlbGwudGFrZW5CeS5uYW1lKTtcbiAgICAgICAgICAgIHNoaXBDZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDAsIHJvdzogLTEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDAsIHJvdzogMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogMCB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMSwgcm93OiAwIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAtMSwgcm93OiAtMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMSwgcm93OiAtMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMSwgcm93OiAxIH0sXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb25zLmZvckVhY2goKGRpcmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNlbGwuY29sLmNoYXJDb2RlQXQoMCkgKyBkaXJlY3Rpb24uY29sKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Um93ID0gKE51bWJlcihjZWxsLnJvdykgKyBkaXJlY3Rpb24ucm93KS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCBuZXdSb3cpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUFyb3VuZChuZXdDb2wsIG5ld1Jvdyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBmdW5jdGlvbiByZXNlcnZlU3BhY2VGb3JBbGwoZ2FtZWJvYXJkKSB7XG4gICAgICAgIGdhbWVib2FyZC5zaGlwc1BsYWNlZC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBnYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGdhbWVib2FyZCwgc2hpcC5jb2wsIHNoaXAucm93KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlbW92ZVJlc2VydmVkU3BhY2UgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGNvbnN0IGdhbWVib2FyZENlbGxzID0gZ2FtZWJvYXJkLmFycmF5LmZsYXQoKTtcbiAgICAgICAgZ2FtZWJvYXJkQ2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNlbGwuc3RhdHVzID09PSAncmVzZXJ2ZWQnKSB7XG4gICAgICAgICAgICAgICAgc2V0Q2VsbChjZWxsLmNvbCwgY2VsbC5yb3csICdlbXB0eScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IGNhbkJlU3VuayA9IChjZWxsKSA9PiB7XG4gICAgICAgIHJldHVybiBjZWxsICYmIGNlbGwudGFrZW5CeSAmJiBjZWxsLnRha2VuQnkuaXNTdW5rKCk7XG4gICAgfTtcbiAgICBjb25zdCBzaW5rU2hpcCA9IChnYW1lYm9hcmQsIGNvbCwgcm93KSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIHJvdyk7XG4gICAgICAgIGNvbnN0IHNoaXBDZWxscyA9IGdhbWVib2FyZC5hcnJheS5mbGF0KCkuZmlsdGVyKChjKSA9PiBjLnRha2VuQnkgJiYgYy50YWtlbkJ5Lm5hbWUgPT09IGNlbGwudGFrZW5CeS5uYW1lKTtcbiAgICAgICAgc2hpcENlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgeyBjb2w6IDAsIHJvdzogLTEgfSxcbiAgICAgICAgICAgICAgICB7IGNvbDogMCwgcm93OiAxIH0sXG4gICAgICAgICAgICAgICAgeyBjb2w6IC0xLCByb3c6IDAgfSxcbiAgICAgICAgICAgICAgICB7IGNvbDogMSwgcm93OiAwIH0sXG4gICAgICAgICAgICAgICAgeyBjb2w6IC0xLCByb3c6IC0xIH0sXG4gICAgICAgICAgICAgICAgeyBjb2w6IC0xLCByb3c6IDEgfSxcbiAgICAgICAgICAgICAgICB7IGNvbDogMSwgcm93OiAtMSB9LFxuICAgICAgICAgICAgICAgIHsgY29sOiAxLCByb3c6IDEgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBkaXJlY3Rpb25zLmZvckVhY2goKGRpcmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2VsbC5jb2wuY2hhckNvZGVBdCgwKSArIGRpcmVjdGlvbi5jb2wpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1JvdyA9IChOdW1iZXIoY2VsbC5yb3cpICsgZGlyZWN0aW9uLnJvdykudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCBuZXdSb3cpKSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKG5ld0NvbCwgbmV3Um93KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBoaXRCdXROb3RTdW5rID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBjb25zdCBnYW1lYm9hcmRDZWxscyA9IGdhbWVib2FyZC5hcnJheS5mbGF0KCk7XG4gICAgICAgIHJldHVybiBnYW1lYm9hcmRDZWxscy5zb21lKChjZWxsKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2VsbC5zdGF0dXMgPT09ICdoaXQnICYmIGNlbGwudGFrZW5CeS5pc1N1bmsoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBhbGxTdW5rID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBjb25zdCBnYW1lYm9hcmRDZWxscyA9IGdhbWVib2FyZC5hcnJheS5mbGF0KCk7XG4gICAgICAgIGxldCB0YWtlbkJ5Q2VsbHMgPSBnYW1lYm9hcmRDZWxscy5maWx0ZXIoKGNlbGwpID0+IGNlbGwudGFrZW5CeSk7XG4gICAgICAgIGlmICh0YWtlbkJ5Q2VsbHMubGVuZ3RoID4gMCAmJiB0YWtlbkJ5Q2VsbHMuZXZlcnkoKGNlbGwpID0+IGNlbGwudGFrZW5CeS5pc1N1bmsoKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZW5lcmF0ZUFycmF5LFxuICAgICAgICBjbGVhckJvYXJkLFxuICAgICAgICBnZXRDZWxsLFxuICAgICAgICBzZXRDZWxsLFxuICAgICAgICByZW1vdmVTaGlwLFxuICAgICAgICBwbGFjZVNoaXAsXG4gICAgICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgICAgIHJlY2VpdmVBcm91bmQsXG4gICAgICAgIHJlc2VydmVTcGFjZSxcbiAgICAgICAgcmVzZXJ2ZVNwYWNlRm9yQWxsLFxuICAgICAgICBoaXRCdXROb3RTdW5rLFxuICAgICAgICBjYW5CZVN1bmssXG4gICAgICAgIHNpbmtTaGlwLFxuICAgICAgICBhbGxTdW5rLFxuICAgICAgICBhcnJheSxcbiAgICAgICAgY2FuQmVQbGFjZWQsXG4gICAgICAgIHNoaXBzUGxhY2VkLFxuICAgICAgICByZW1vdmVSZXNlcnZlZFNwYWNlLFxuICAgIH07XG59O1xuZXhwb3J0IGRlZmF1bHQgZ2FtZWJvYXJkRmFjdG9yeTtcbiIsImNvbnN0IHNoaXBGYWN0b3J5ID0gKG5hbWUpID0+IHtcbiAgICBsZXQgc2l6ZTtcbiAgICBpZiAobmFtZSA9PT0gJ0NhcnJpZXInKSB7XG4gICAgICAgIHNpemUgPSA1O1xuICAgIH1cbiAgICBpZiAobmFtZSA9PT0gJ0JhdHRsZXNoaXAnKSB7XG4gICAgICAgIHNpemUgPSA0O1xuICAgIH1cbiAgICBpZiAobmFtZSA9PT0gJ0Rlc3Ryb3llcicpIHtcbiAgICAgICAgc2l6ZSA9IDM7XG4gICAgfVxuICAgIGlmIChuYW1lID09PSAnU3VibWFyaW5lJykge1xuICAgICAgICBzaXplID0gMztcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09ICdQYXRyb2xCb2F0Jykge1xuICAgICAgICBzaXplID0gMjtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgc2l6ZSxcbiAgICAgICAgaGl0Q291bnQ6IDAsXG4gICAgICAgIGlzVmVydGljYWw6IGZhbHNlLFxuICAgICAgICByb3RhdGUoKSB7XG4gICAgICAgICAgICB0aGlzLmlzVmVydGljYWwgPSAhdGhpcy5pc1ZlcnRpY2FsO1xuICAgICAgICB9LFxuICAgICAgICBoaXQoKSB7XG4gICAgICAgICAgICB0aGlzLmhpdENvdW50ICs9IDE7XG4gICAgICAgIH0sXG4gICAgICAgIGlzU3VuaygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhpdENvdW50ID09PSBzaXplO1xuICAgICAgICB9LFxuICAgIH07XG59O1xuZXhwb3J0IGRlZmF1bHQgc2hpcEZhY3Rvcnk7XG4iLCJjb25zdCBzb3VuZHMgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1pc3MgPSBuZXcgQXVkaW8oJ3NvdW5kcy9ncmF5MXdlYS53YXYnKTtcbiAgICAgICAgY29uc3QgaGl0ID0gbmV3IEF1ZGlvKCdzb3VuZHMvZXhwbG8ud2F2Jyk7XG4gICAgICAgIGNvbnN0IHN1bmsgPSBuZXcgQXVkaW8oJ3NvdW5kcy9leHBsb2RlYS53YXYnKTtcbiAgICAgICAgY29uc3QgZ2FtZU92ZXIgPSBuZXcgQXVkaW8oJ3NvdW5kcy9jYXB0dXJlLndhdicpO1xuICAgICAgICBjb25zdCBkcm9wID0gbmV3IEF1ZGlvKCdzb3VuZHMvYmFycjFzZWwud2F2Jyk7XG4gICAgICAgIGNvbnN0IHJvdGF0ZSA9IG5ldyBBdWRpbygnc291bmRzL2RyYWluLndhdicpO1xuICAgICAgICBjb25zdCByYW5kb20gPSBuZXcgQXVkaW8oJ3NvdW5kcy9leHAxc2VsLndhdicpO1xuICAgICAgICBjb25zdCBzZWxlY3QgPSBuZXcgQXVkaW8oJ3NvdW5kcy9tc2cud2F2Jyk7XG4gICAgICAgIGNvbnN0IHRpY2sgPSBuZXcgQXVkaW8oJ3NvdW5kcy9iZWVwLndhdicpO1xuICAgICAgICBjb25zdCBncmFiID0gbmV3IEF1ZGlvKCdzb3VuZHMvYnV0dG9uUmV2LndhdicpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWlzcyxcbiAgICAgICAgICAgIGhpdCxcbiAgICAgICAgICAgIHN1bmssXG4gICAgICAgICAgICBnYW1lT3ZlcixcbiAgICAgICAgICAgIGRyb3AsXG4gICAgICAgICAgICByb3RhdGUsXG4gICAgICAgICAgICByYW5kb20sXG4gICAgICAgICAgICBzZWxlY3QsXG4gICAgICAgICAgICB0aWNrLFxuICAgICAgICAgICAgZ3JhYixcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHBsYXlBdWRpbyA9IChhdWRpbykgPT4ge1xuICAgICAgICBPYmplY3Qua2V5cyhhdWRpbykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwbGF5U291bmQgPSBhdWRpb1trZXldLnBsYXk7XG4gICAgICAgICAgICBhdWRpb1trZXldLnBsYXkgPSBmdW5jdGlvbiBzb3VuZFBsYXllcigpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXVkaW9ba2V5XS5jdXJyZW50VGltZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9ba2V5XS5wYXVzZSgpO1xuICAgICAgICAgICAgICAgICAgICBhdWRpb1trZXldLmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsYXlTb3VuZC5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBsb2FkID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBhdWRpbyA9IGluaXQoKTtcbiAgICAgICAgcGxheUF1ZGlvKGF1ZGlvKTtcbiAgICAgICAgcmV0dXJuIGF1ZGlvO1xuICAgIH07XG4gICAgcmV0dXJuIGxvYWQoKTtcbn0pKCk7XG5leHBvcnQgZGVmYXVsdCBzb3VuZHM7XG4iLCJpbXBvcnQgc291bmRzIGZyb20gJy4vc291bmRzJztcbmNvbnN0IHBsYXllckZhY3RvcnkgPSAoKSA9PiB7XG4gICAgY29uc3QgY29scyA9IFsnQScsICdCJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdIJywgJ0knLCAnSiddO1xuICAgIGxldCBwcmV2SGl0ID0gbnVsbDtcbiAgICBsZXQgbGFzdEhpdCA9IG51bGw7XG4gICAgbGV0IHJhbmdlID0gMTtcbiAgICBsZXQgZ29SaWdodCA9IHRydWU7XG4gICAgbGV0IGdvRG93biA9IHRydWU7XG4gICAgY29uc3QgYXR0YWNrID0gKGdhbWVib2FyZCwgY29sLCByb3cpID0+IHtcbiAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKGNvbCwgcm93KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICBzZXRMYXN0SGl0KHsgY29sOiBjb2wsIHJvdzogcm93IH0pO1xuICAgICAgICAgICAgICAgIHNvdW5kcy5oaXQucGxheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocmVzdWx0ID09PSAnbWlzcycpIHtcbiAgICAgICAgICAgICAgICBzb3VuZHMubWlzcy5wbGF5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnYWxyZWFkeSBzaG90JztcbiAgICB9O1xuICAgIGNvbnN0IHJhbmRvbUF0dGFjayA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgbGV0IHJhbmRvbUNvbDtcbiAgICAgICAgbGV0IHJhbmRvbVJvdztcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgcmFuZG9tQ29sID0gY29sc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb2xzLmxlbmd0aCldO1xuICAgICAgICAgICAgcmFuZG9tUm93ID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAxMCkudG9TdHJpbmcoKTtcbiAgICAgICAgfSB3aGlsZSAoZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyA9PT0gJ2hpdCcgfHwgZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyA9PT0gJ21pc3MnKTtcbiAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKHJhbmRvbUNvbCwgcmFuZG9tUm93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKHJhbmRvbUNvbCwgcmFuZG9tUm93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2socmFuZG9tQ29sLCByYW5kb21Sb3cpO1xuICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKHJhbmRvbUNvbCwgcmFuZG9tUm93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICBzZXRMYXN0SGl0KHsgY29sOiByYW5kb21Db2wsIHJvdzogcmFuZG9tUm93IH0pO1xuICAgICAgICAgICAgICAgIHNvdW5kcy5oaXQucGxheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyA9PT0gJ21pc3MnKSB7XG4gICAgICAgICAgICAgICAgc291bmRzLm1pc3MucGxheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgcmVzdWx0LCBjb2w6IHJhbmRvbUNvbCwgcm93OiByYW5kb21Sb3cgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyByZXN1bHQ6ICdhbHJlYWR5IHNob3QnLCBjb2w6IHJhbmRvbUNvbCwgcm93OiByYW5kb21Sb3cgfTtcbiAgICB9O1xuICAgIGNvbnN0IGZvbGxvd3VwQXR0YWNrID0gKGdhbWVib2FyZCwgY29sLCByb3cpID0+IHtcbiAgICAgICAgY29uc3QgZGlyZWN0aW9ucyA9IFtcbiAgICAgICAgICAgIHsgY29sOiAwLCByb3c6IC0xIH0sXG4gICAgICAgICAgICB7IGNvbDogMCwgcm93OiAxIH0sXG4gICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogMCB9LFxuICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogMCB9LFxuICAgICAgICBdO1xuICAgICAgICBjb25zdCB2YWxpZERpcmVjdGlvbnMgPSBkaXJlY3Rpb25zLmZpbHRlcigoZGlyZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApICsgZGlyZWN0aW9uLmNvbCk7XG4gICAgICAgICAgICBjb25zdCBuZXdSb3cgPSAoTnVtYmVyKHJvdykgKyBkaXJlY3Rpb24ucm93KS50b1N0cmluZygpO1xuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgbmV3Um93KTtcbiAgICAgICAgICAgIGlmIChjZWxsICYmIGNlbGwuc3RhdHVzICE9PSAnbWlzcycgJiYgY2VsbC5zdGF0dXMgIT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodmFsaWREaXJlY3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJhbmRvbURpcmVjdGlvbiA9IHZhbGlkRGlyZWN0aW9uc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB2YWxpZERpcmVjdGlvbnMubGVuZ3RoKV07XG4gICAgICAgICAgICBjb25zdCBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApICsgcmFuZG9tRGlyZWN0aW9uLmNvbCk7XG4gICAgICAgICAgICBjb25zdCBuZXdSb3cgPSAoTnVtYmVyKHJvdykgKyByYW5kb21EaXJlY3Rpb24ucm93KS50b1N0cmluZygpO1xuICAgICAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2sobmV3Q29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgbmV3Um93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICBzZXRMYXN0SGl0KHsgY29sOiBuZXdDb2wsIHJvdzogbmV3Um93IH0pO1xuICAgICAgICAgICAgICAgIHNvdW5kcy5oaXQucGxheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCBuZXdSb3cpLnN0YXR1cyA9PT0gJ21pc3MnKSB7XG4gICAgICAgICAgICAgICAgc291bmRzLm1pc3MucGxheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBmaW5pc2hpbmdBdHRhY2sgPSAoZ2FtZWJvYXJkLCBjb2wsIHJvdywgcHJldkhpdCkgPT4ge1xuICAgICAgICBpZiAocHJldkhpdC5yb3cgPT09IHJvdykge1xuICAgICAgICAgICAgaWYgKGdvUmlnaHQpIHtcbiAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgbGV0IG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgKyByYW5nZSk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgICAgICBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApICsgcmFuZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhuZXdDb2wsIHJvdyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IG5ld0NvbCwgcm93OiByb3cgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VuZHMuaGl0LnBsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzID09PSAnbWlzcycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdW5kcy5taXNzLnBsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgICAgICAgICBnb1JpZ2h0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGZpbmlzaGluZ0F0dGFjayhnYW1lYm9hcmQsIG5ld0NvbCwgcm93LCBwcmV2SGl0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgbGV0IG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgLSByYW5nZSk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgICAgICBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApIC0gcmFuZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhuZXdDb2wsIHJvdyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IG5ld0NvbCwgcm93OiByb3cgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VuZHMuaGl0LnBsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzID09PSAnbWlzcycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdW5kcy5taXNzLnBsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgICAgICAgICBnb1JpZ2h0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZmluaXNoaW5nQXR0YWNrKGdhbWVib2FyZCwgbmV3Q29sLCByb3csIHByZXZIaXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwcmV2SGl0LmNvbCA9PT0gY29sKSB7XG4gICAgICAgICAgICBpZiAoZ29Eb3duKSB7XG4gICAgICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgICAgIGxldCBuZXdSb3cgPSAoTnVtYmVyKHJvdykgKyByYW5nZSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIG5ld1JvdyA9IChOdW1iZXIocm93KSArIHJhbmdlKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhjb2wsIG5ld1Jvdyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IGNvbCwgcm93OiBuZXdSb3cgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VuZHMuaGl0LnBsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzID09PSAnbWlzcycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdW5kcy5taXNzLnBsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgICAgICAgICBnb0Rvd24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZmluaXNoaW5nQXR0YWNrKGdhbWVib2FyZCwgY29sLCBuZXdSb3csIHByZXZIaXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJhbmdlID0gMTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Um93ID0gKE51bWJlcihyb3cpIC0gcmFuZ2UpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgICAgICBuZXdSb3cgPSAoTnVtYmVyKHJvdykgLSByYW5nZSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzICE9PSAnaGl0JyAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzICE9PSAnbWlzcycpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soY29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFByZXZIaXQobGFzdEhpdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMYXN0SGl0KHsgY29sOiBjb2wsIHJvdzogbmV3Um93IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc291bmRzLmhpdC5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpLnN0YXR1cyA9PT0gJ21pc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VuZHMubWlzcy5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgZ29Eb3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZmluaXNoaW5nQXR0YWNrKGdhbWVib2FyZCwgY29sLCBuZXdSb3csIHByZXZIaXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgZ2V0UHJldkhpdCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHByZXZIaXQ7XG4gICAgfTtcbiAgICBjb25zdCBnZXRMYXN0SGl0ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gbGFzdEhpdDtcbiAgICB9O1xuICAgIGNvbnN0IHNldFByZXZIaXQgPSAobmV3UHJldkhpdCkgPT4ge1xuICAgICAgICBwcmV2SGl0ID0gbmV3UHJldkhpdDtcbiAgICB9O1xuICAgIGNvbnN0IHNldExhc3RIaXQgPSAobmV3TGFzdEhpdCkgPT4ge1xuICAgICAgICBsYXN0SGl0ID0gbmV3TGFzdEhpdDtcbiAgICB9O1xuICAgIHJldHVybiB7IGF0dGFjaywgcmFuZG9tQXR0YWNrLCBmb2xsb3d1cEF0dGFjaywgZmluaXNoaW5nQXR0YWNrLCBwcmV2SGl0LCBsYXN0SGl0LCBnZXRQcmV2SGl0LCBnZXRMYXN0SGl0LCBzZXRQcmV2SGl0LCBzZXRMYXN0SGl0IH07XG59O1xuZXhwb3J0IGRlZmF1bHQgcGxheWVyRmFjdG9yeTtcbiIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHVpIGZyb20gJy4vdWknO1xuaW1wb3J0IGNvbnRyb2xsZXIgZnJvbSAnLi9jb250cm9sbGVyJztcbmltcG9ydCBzb3VuZHMgZnJvbSAnLi9zb3VuZHMnO1xuY29uc3QgZHJhZ0FuZERyb3AgPSAoZmlyc3RHYW1lYm9hcmQsIHNlY29uZEdhbWVib2FyZCwgc2hpcHMpID0+IHtcbiAgICBjb25zdCBmaXJzdEJvYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmaXJzdEJvYXJkJyk7XG4gICAgY29uc3Qgc2Vjb25kQm9hcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgY29uc3QgZmlyc3RCb2FyZENlbGxzID0gZmlyc3RCb2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKTtcbiAgICBjb25zdCBzZWNvbmRCb2FyZENlbGxzID0gc2Vjb25kQm9hcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJyk7XG4gICAgbGV0IHNoaXBOYW1lO1xuICAgIGxldCBzaGlwU2l6ZTtcbiAgICBsZXQgZ3JhYlBvaW50WCA9IDA7XG4gICAgbGV0IGdyYWJQb2ludFkgPSAwO1xuICAgIGxldCBzaGlwT2JqO1xuICAgIGxldCBvcmllbnRhdGlvbjtcbiAgICBsZXQgaGlnaGxpZ2h0ZWRDZWxscyA9IFtdO1xuICAgIGNvbnN0IHNoaXBOYW1lVG9PYmogPSB7XG4gICAgICAgIGNhcnJpZXI6IHNoaXBzWzBdLFxuICAgICAgICBiYXR0bGVzaGlwOiBzaGlwc1sxXSxcbiAgICAgICAgZGVzdHJveWVyOiBzaGlwc1syXSxcbiAgICAgICAgc3VibWFyaW5lOiBzaGlwc1szXSxcbiAgICAgICAgcGF0cm9sYm9hdDogc2hpcHNbNF0sXG4gICAgfTtcbiAgICBsZXQgbGFzdERyYWdnZWQgPSBudWxsO1xuICAgIGNvbnN0IGRyYWdnYWJsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZHJhZ2dhYmxlJyk7XG4gICAgZnVuY3Rpb24gZ2V0Tm9uU2hpcENlbGxzKGJvYXJkQ2VsbHMpIHtcbiAgICAgICAgY29uc3QgYm9hcmRDZWxsc0FycmF5ID0gQXJyYXkuZnJvbShib2FyZENlbGxzKTtcbiAgICAgICAgcmV0dXJuIGJvYXJkQ2VsbHNBcnJheS5maWx0ZXIoKGNlbGwpID0+ICFjZWxsLmNsYXNzTGlzdC5jb250YWlucygndGFrZW4nKSk7XG4gICAgfVxuICAgIGNvbnN0IG5vblNoaXBDZWxscyA9IFsuLi5nZXROb25TaGlwQ2VsbHMoZmlyc3RCb2FyZENlbGxzKSwgLi4uZ2V0Tm9uU2hpcENlbGxzKHNlY29uZEJvYXJkQ2VsbHMpXTtcbiAgICBmdW5jdGlvbiBpc1ZhbGlkUGxhY2VtZW50KHRvSGlnaGxpZ2h0KSB7XG4gICAgICAgIHJldHVybiAodG9IaWdobGlnaHQuZXZlcnkoKGNlbGwpID0+IGNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlbXB0eScpKSAmJlxuICAgICAgICAgICAgKHRvSGlnaGxpZ2h0LmV2ZXJ5KChjZWxsKSA9PiBjZWxsLmRhdGFzZXQuY29sID09PSB0b0hpZ2hsaWdodFswXS5kYXRhc2V0LmNvbCkgfHxcbiAgICAgICAgICAgICAgICB0b0hpZ2hsaWdodC5ldmVyeSgoY2VsbCkgPT4gY2VsbC5kYXRhc2V0LnJvdyA9PT0gdG9IaWdobGlnaHRbMF0uZGF0YXNldC5yb3cpKSAmJlxuICAgICAgICAgICAgdG9IaWdobGlnaHQubGVuZ3RoID09PSBzaGlwU2l6ZSAmJlxuICAgICAgICAgICAgdG9IaWdobGlnaHQuZXZlcnkoKGNlbGwpID0+IGNlbGwuZGF0YXNldC5jb2wgPj0gJ0EnICYmIGNlbGwuZGF0YXNldC5jb2wgPD0gJ0onKSAmJlxuICAgICAgICAgICAgdG9IaWdobGlnaHQuZXZlcnkoKGNlbGwpID0+IE51bWJlcihjZWxsLmRhdGFzZXQucm93KSA+PSAxICYmIE51bWJlcihjZWxsLmRhdGFzZXQucm93KSA8PSAxMCkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRMYXN0U2hpcFNpemVFbGVtZW50cyhoaWdobGlnaHRlZENlbGxzLCBzaGlwU2l6ZSkge1xuICAgICAgICByZXR1cm4gaGlnaGxpZ2h0ZWRDZWxscy5zbGljZShNYXRoLm1pbihoaWdobGlnaHRlZENlbGxzLmxlbmd0aCAtIHNoaXBTaXplLCAwKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEdhbWVib2FyZChlKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICBsZXQgZ2FtZWJvYXJkO1xuICAgICAgICBjb25zdCBib2FyZElkID0gdGFyZ2V0LmNsb3Nlc3QoJy5ib2FyZCcpLmlkO1xuICAgICAgICBpZiAoYm9hcmRJZCA9PT0gJ2ZpcnN0Qm9hcmQnKSB7XG4gICAgICAgICAgICBnYW1lYm9hcmQgPSBmaXJzdEdhbWVib2FyZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYm9hcmRJZCA9PT0gJ3NlY29uZEJvYXJkJykge1xuICAgICAgICAgICAgZ2FtZWJvYXJkID0gc2Vjb25kR2FtZWJvYXJkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHRhcmdldCwgZ2FtZWJvYXJkIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlc2VydmVTcGFjZUZvclJlbWFpbmluZ1NoaXBzKGdhbWVib2FyZCwgZSkge1xuICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZ2V0R2FtZWJvYXJkKGUpO1xuICAgICAgICBjb25zdCB0YXJnZXRTaGlwTmFtZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScpO1xuICAgICAgICBsZXQgcmVtYWluaW5nU2hpcHMgPSBnYW1lYm9hcmQuc2hpcHNQbGFjZWQuZmlsdGVyKChzaGlwKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0U2hpcE5hbWUgIT09IHNoaXAudGFrZW5CeS5uYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZW1haW5pbmdTaGlwcy5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBnYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGdhbWVib2FyZCwgc2hpcC5jb2wsIHNoaXAucm93KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldFNoaXBBdHRyaWJ1dGVzKGUsIHRhcmdldCkge1xuICAgICAgICBzaGlwTmFtZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScpO1xuICAgICAgICBzaGlwU2l6ZSA9IE51bWJlcih0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNpemUnKSk7XG4gICAgICAgIGdyYWJQb2ludFggPSBlLm9mZnNldFg7XG4gICAgICAgIGdyYWJQb2ludFkgPSBlLm9mZnNldFk7XG4gICAgICAgIHNoaXBPYmogPSBzaGlwTmFtZVRvT2JqW3NoaXBOYW1lXTtcbiAgICAgICAgb3JpZW50YXRpb24gPSBzaGlwT2JqLmlzVmVydGljYWwgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnO1xuICAgICAgICByZXR1cm4geyBzaGlwTmFtZSwgc2hpcE9iaiB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBwcmV2ZW50T2ZmQm9hcmRQbGFjZW1lbnQodGFyZ2V0LCBlKSB7XG4gICAgICAgIGlmIChoaWdobGlnaHRlZENlbGxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc3QgYm9hcmQgPSB0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJyk7XG4gICAgICAgICAgICBpZiAoYm9hcmQpIHtcbiAgICAgICAgICAgICAgICBsZXQgeyBnYW1lYm9hcmQgfSA9IGdldEdhbWVib2FyZChlKTtcbiAgICAgICAgICAgICAgICBpZiAoYm9hcmQuaWQgPT09ICdmaXJzdEJvYXJkJykge1xuICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQgPSBmaXJzdEdhbWVib2FyZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYm9hcmQuaWQgPT09ICdzZWNvbmRCb2FyZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkID0gc2Vjb25kR2FtZWJvYXJkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkICYmIGxhc3REcmFnZ2VkICYmIGdhbWVib2FyZC5jYW5CZVBsYWNlZChzaGlwT2JqLnNpemUsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQuY29sLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LnJvdywgb3JpZW50YXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcE9iaiwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5jb2wsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZC5yZXNlcnZlU3BhY2UoZ2FtZWJvYXJkLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3cpO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLnJlbmV3KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFN0YXJ0Q2VsbChpbmRleCwgc2hpcE9iaiwgZSkge1xuICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZ2V0R2FtZWJvYXJkKGUpO1xuICAgICAgICByZXR1cm4gaW5kZXggLSAoc2hpcE9iai5pc1ZlcnRpY2FsID8gTWF0aC5mbG9vcihncmFiUG9pbnRZIC8gdGFyZ2V0Lm9mZnNldEhlaWdodCkgKiAxMCA6IE1hdGguZmxvb3IoZ3JhYlBvaW50WCAvIHRhcmdldC5vZmZzZXRXaWR0aCkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRCb2FyZENlbGxzKGJvYXJkSWQpIHtcbiAgICAgICAgcmV0dXJuIGJvYXJkSWQgPT09ICdmaXJzdEJvYXJkJyA/IGZpcnN0Qm9hcmRDZWxscyA6IHNlY29uZEJvYXJkQ2VsbHM7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhpZ2hsaWdodENlbGxzKHRvSGlnaGxpZ2h0KSB7XG4gICAgICAgIHRvSGlnaGxpZ2h0LmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnaGlnaGxpZ2h0Jyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoaWdobGlnaHRDZWxsc09uQm9hcmQoc2hpcE9iaiwgc3RhcnRDZWxsLCBib2FyZENlbGxzLCB0b0hpZ2hsaWdodCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBTaXplOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBjZWxsSW5kZXggPSBzaGlwT2JqLmlzVmVydGljYWwgPyBzdGFydENlbGwgKyBpICogMTAgOiBzdGFydENlbGwgKyBpO1xuICAgICAgICAgICAgaWYgKGJvYXJkQ2VsbHNbY2VsbEluZGV4XSkge1xuICAgICAgICAgICAgICAgIHRvSGlnaGxpZ2h0LnB1c2goYm9hcmRDZWxsc1tjZWxsSW5kZXhdKTtcbiAgICAgICAgICAgICAgICBoaWdobGlnaHRlZENlbGxzLnB1c2goYm9hcmRDZWxsc1tjZWxsSW5kZXhdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiByZW1vdmVIaWdobGlnaHQoKSB7XG4gICAgICAgIGhpZ2hsaWdodGVkQ2VsbHMuZm9yRWFjaCgoaGlnaGxpZ2h0ZWRDZWxsKSA9PiBoaWdobGlnaHRlZENlbGwuY2xhc3NMaXN0LnJlbW92ZSgnaGlnaGxpZ2h0JykpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc0JvYXJkVmFsaWQoYm9hcmRJZCkge1xuICAgICAgICByZXR1cm4gYm9hcmRJZCA9PT0gJ2ZpcnN0Qm9hcmQnIHx8IGJvYXJkSWQgPT09ICdzZWNvbmRCb2FyZCc7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBsYWNlU2hpcE9uQm9hcmQoZ2FtZWJvYXJkLCBzaGlwT2JqLCBsYXN0LCBvcmllbnRhdGlvbikge1xuICAgICAgICBpZiAoZ2FtZWJvYXJkLmNhbkJlUGxhY2VkKHNoaXBPYmouc2l6ZSwgbGFzdFswXS5kYXRhc2V0LmNvbCwgbGFzdFswXS5kYXRhc2V0LnJvdywgb3JpZW50YXRpb24pKSB7XG4gICAgICAgICAgICBnYW1lYm9hcmQucGxhY2VTaGlwKHNoaXBPYmosIGxhc3RbMF0uZGF0YXNldC5jb2wsIGxhc3RbMF0uZGF0YXNldC5yb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgIGdhbWVib2FyZC5yZXNlcnZlU3BhY2UoZ2FtZWJvYXJkLCBsYXN0WzBdLmRhdGFzZXQuY29sLCBsYXN0WzBdLmRhdGFzZXQucm93KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcE9iaiwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5jb2wsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbik7XG4gICAgICAgICAgICBnYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGdhbWVib2FyZCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5jb2wsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQucm93KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBoYW5kbGVNb3VzZWRvd24oZSkge1xuICAgICAgICBjb25zdCB7IGdhbWVib2FyZCB9ID0gZ2V0R2FtZWJvYXJkKGUpO1xuICAgICAgICBnYW1lYm9hcmQucmVtb3ZlUmVzZXJ2ZWRTcGFjZShnYW1lYm9hcmQpO1xuICAgICAgICByZXNlcnZlU3BhY2VGb3JSZW1haW5pbmdTaGlwcyhnYW1lYm9hcmQsIGUpO1xuICAgICAgICBjb250cm9sbGVyLnJlbmV3KCk7XG4gICAgICAgIHVpLnNldEluaXRNZXNzYWdlKCk7XG4gICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gMCkge1xuICAgICAgICAgICAgc291bmRzLmdyYWIucGxheSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZURyYWdTdGFydChlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7XG4gICAgICAgICAgICBjb25zdCB7IHRhcmdldCwgZ2FtZWJvYXJkIH0gPSBnZXRHYW1lYm9hcmQoZSk7XG4gICAgICAgICAgICB0YXJnZXQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgc2V0U2hpcEF0dHJpYnV0ZXMoZSwgdGFyZ2V0KTtcbiAgICAgICAgICAgIGdhbWVib2FyZC5yZW1vdmVTaGlwKHNoaXBPYmosIGdhbWVib2FyZCk7XG4gICAgICAgICAgICB1aS5jbGVhclNoaXAoc2hpcE9iaiwgZ2FtZWJvYXJkKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZURyYWdPdmVyKGluZGV4KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IGdldEdhbWVib2FyZChlKTtcbiAgICAgICAgICAgIGNvbnN0IGJvYXJkSWQgPSB0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQ7XG4gICAgICAgICAgICBpZiAoaXNCb2FyZFZhbGlkKGJvYXJkSWQpKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGlmIChzaGlwT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0Q2VsbCA9IGdldFN0YXJ0Q2VsbChpbmRleCwgc2hpcE9iaiwgZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvYXJkQ2VsbHMgPSBnZXRCb2FyZENlbGxzKGJvYXJkSWQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b0hpZ2hsaWdodCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRDZWxsc09uQm9hcmQoc2hpcE9iaiwgc3RhcnRDZWxsLCBib2FyZENlbGxzLCB0b0hpZ2hsaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1ZhbGlkUGxhY2VtZW50KHRvSGlnaGxpZ2h0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0Q2VsbHModG9IaWdobGlnaHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsYXN0RHJhZ2dlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3REcmFnZ2VkID0gZ2V0TGFzdFNoaXBTaXplRWxlbWVudHMoaGlnaGxpZ2h0ZWRDZWxscywgc2hpcFNpemUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBoYW5kbGVEcmFnTGVhdmUoKSB7XG4gICAgICAgIHJlbW92ZUhpZ2hsaWdodCgpO1xuICAgICAgICBoaWdobGlnaHRlZENlbGxzLmxlbmd0aCA9IDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZURyb3AoZSkge1xuICAgICAgICByZW1vdmVIaWdobGlnaHQoKTtcbiAgICAgICAgY29uc3QgbGFzdCA9IGdldExhc3RTaGlwU2l6ZUVsZW1lbnRzKGhpZ2hsaWdodGVkQ2VsbHMsIHNoaXBTaXplKTtcbiAgICAgICAgY29uc3QgeyB0YXJnZXQsIGdhbWVib2FyZCB9ID0gZ2V0R2FtZWJvYXJkKGUpO1xuICAgICAgICBjb25zdCBib2FyZElkID0gdGFyZ2V0LmNsb3Nlc3QoJy5ib2FyZCcpLmlkO1xuICAgICAgICBpZiAoaXNCb2FyZFZhbGlkKGJvYXJkSWQpICYmIHNoaXBPYmogJiYgbGFzdERyYWdnZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHBsYWNlU2hpcE9uQm9hcmQoZ2FtZWJvYXJkLCBzaGlwT2JqLCBsYXN0LCBvcmllbnRhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZ2FtZWJvYXJkLnJlbW92ZVJlc2VydmVkU3BhY2UoZ2FtZWJvYXJkKTtcbiAgICAgICAgZ2FtZWJvYXJkLnJlc2VydmVTcGFjZUZvckFsbChnYW1lYm9hcmQpO1xuICAgICAgICBjb250cm9sbGVyLnJlbmV3KCk7XG4gICAgICAgIHVpLmNhbkJlU3RhcnRlZCgpO1xuICAgICAgICB1aS5zZXRTdGFydE1lc3NhZ2UoKTtcbiAgICAgICAgbGFzdERyYWdnZWQgPSBudWxsO1xuICAgICAgICBzb3VuZHMuZHJvcC5wbGF5KCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZURyYWdFbmQoZSkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgIHByZXZlbnRPZmZCb2FyZFBsYWNlbWVudCh0YXJnZXQsIGUpO1xuICAgICAgICBpZiAodWkuY2FuQmVTdGFydGVkKCkpIHtcbiAgICAgICAgICAgIHVpLmZpbGxDZWxscygnc2Vjb25kJyk7XG4gICAgICAgIH1cbiAgICAgICAgdWkuc2V0U3RhcnRNZXNzYWdlKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZU1vdXNldXAoZSkge1xuICAgICAgICBjb25zdCB7IGdhbWVib2FyZCB9ID0gZ2V0R2FtZWJvYXJkKGUpO1xuICAgICAgICBnYW1lYm9hcmQucmVzZXJ2ZVNwYWNlRm9yQWxsKGdhbWVib2FyZCk7XG4gICAgICAgIGNvbnRyb2xsZXIucmVuZXcoKTtcbiAgICAgICAgdWkuc2V0U3RhcnRNZXNzYWdlKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZVJvdGF0ZShlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgeyB0YXJnZXQsIGdhbWVib2FyZCB9ID0gZ2V0R2FtZWJvYXJkKGUpO1xuICAgICAgICBjb25zdCB7IHNoaXBOYW1lLCBzaGlwT2JqIH0gPSBzZXRTaGlwQXR0cmlidXRlcyhlLCB0YXJnZXQpO1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gZ2FtZWJvYXJkLnNoaXBzUGxhY2VkLmZpbHRlcigoc2hpcCkgPT4gc2hpcC50YWtlbkJ5Lm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gc2hpcE5hbWUpO1xuICAgICAgICBnYW1lYm9hcmQucmVtb3ZlU2hpcChzaGlwT2JqLCBnYW1lYm9hcmQpO1xuICAgICAgICBnYW1lYm9hcmQucmVtb3ZlUmVzZXJ2ZWRTcGFjZShnYW1lYm9hcmQpO1xuICAgICAgICBnYW1lYm9hcmQucmVzZXJ2ZVNwYWNlRm9yQWxsKGdhbWVib2FyZCk7XG4gICAgICAgIHNoaXBPYmoucm90YXRlKCk7XG4gICAgICAgIG9yaWVudGF0aW9uID0gc2hpcE9iai5pc1ZlcnRpY2FsID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJztcbiAgICAgICAgaWYgKCFnYW1lYm9hcmQuY2FuQmVQbGFjZWQoc2hpcE9iai5zaXplLCBjdXJyZW50WzBdLmNvbCwgY3VycmVudFswXS5yb3csIG9yaWVudGF0aW9uKSkge1xuICAgICAgICAgICAgc2hpcE9iai5yb3RhdGUoKTtcbiAgICAgICAgICAgIG9yaWVudGF0aW9uID0gc2hpcE9iai5pc1ZlcnRpY2FsID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJztcbiAgICAgICAgfVxuICAgICAgICBnYW1lYm9hcmQucGxhY2VTaGlwKHNoaXBPYmosIGN1cnJlbnRbMF0uY29sLCBjdXJyZW50WzBdLnJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICBnYW1lYm9hcmQucmVzZXJ2ZVNwYWNlRm9yQWxsKGdhbWVib2FyZCk7XG4gICAgICAgIGNvbnRyb2xsZXIucmVuZXcoKTtcbiAgICAgICAgaWYgKHVpLmNhbkJlU3RhcnRlZCgpKSB7XG4gICAgICAgICAgICB1aS5maWxsQ2VsbHMoJ3NlY29uZCcpO1xuICAgICAgICB9XG4gICAgICAgIHNvdW5kcy5yb3RhdGUucGxheSgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBibG9ja1JpZ2h0Q2xpY2soZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXJzVG9DZWxscyhjZWxscykge1xuICAgICAgICBjZWxscy5mb3JFYWNoKChjZWxsLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGhhbmRsZURyYWdPdmVyKGluZGV4KSk7XG4gICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGhhbmRsZURyYWdMZWF2ZSk7XG4gICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBoYW5kbGVEcm9wKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFkZEV2ZW50TGlzdGVuZXJzVG9DZWxscyhmaXJzdEJvYXJkQ2VsbHMpO1xuICAgIGFkZEV2ZW50TGlzdGVuZXJzVG9DZWxscyhzZWNvbmRCb2FyZENlbGxzKTtcbiAgICBkcmFnZ2FibGVzLmZvckVhY2goKGRyYWdnYWJsZSkgPT4ge1xuICAgICAgICBkcmFnZ2FibGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlTW91c2Vkb3duKTtcbiAgICAgICAgZHJhZ2dhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIGhhbmRsZURyYWdTdGFydCk7XG4gICAgICAgIGRyYWdnYWJsZS5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgaGFuZGxlRHJhZ0VuZCk7XG4gICAgICAgIGRyYWdnYWJsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaGFuZGxlTW91c2V1cCk7XG4gICAgICAgIGRyYWdnYWJsZS5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIGhhbmRsZVJvdGF0ZSk7XG4gICAgICAgIG5vblNoaXBDZWxscy5mb3JFYWNoKChjZWxsKSA9PiBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgYmxvY2tSaWdodENsaWNrKSk7XG4gICAgfSk7XG59O1xuZXhwb3J0IGRlZmF1bHQgZHJhZ0FuZERyb3A7XG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCBkcmFnQW5kRHJvcCBmcm9tICcuL2RyYWdBbmREcm9wJztcbmltcG9ydCBjb250cm9sbGVyIGZyb20gJy4vY29udHJvbGxlcic7XG5pbXBvcnQgc291bmRzIGZyb20gJy4vc291bmRzJztcbmNvbnN0IHVpID0gKCgpID0+IHtcbiAgICBjb25zdCBzdGF0dXNCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUJveCBwJyk7XG4gICAgY29uc3QgYm9hcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JvYXJkcycpO1xuICAgIGNvbnN0IHBWY0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwbGF5ZXJWc0NvbXB1dGVyJyk7XG4gICAgY29uc3QgbmV3R2FtZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdHYW1lJyk7XG4gICAgY29uc3QgY1ZjQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbXB1dGVyVnNDb21wdXRlcicpO1xuICAgIGNvbnN0IHN0YXJ0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N0YXJ0Jyk7XG4gICAgY29uc3QgcmFuZG9tQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3JhbmRvbVBsYWNlbWVudCcpO1xuICAgIGNvbnN0IGFsbEJ0bnMgPSBbcFZjQnRuLCBuZXdHYW1lQnRuLCBjVmNCdG4sIHN0YXJ0QnRuLCByYW5kb21CdG5dO1xuICAgIGNvbnN0IHNwZWVkcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCdzcGVlZCcpO1xuICAgIGxldCBzcGVlZFZhbHVlID0gMTAwMDtcbiAgICBjb25zdCBtdXRlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI211dGUnKTtcbiAgICBsZXQgaXNNdXRlZCA9IGZhbHNlO1xuICAgIGNvbnN0IGNyZWF0ZUNlbGwgPSAoY2VsbCkgPT4ge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2VsbCcpO1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2VsbC5zdGF0dXMpO1xuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1jb2wnLCBjZWxsLmNvbCk7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXJvdycsIGNlbGwucm93KTtcbiAgICAgICAgaWYgKGNlbGwudGFrZW5CeSkge1xuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2hpcE5hbWUnLCBjZWxsLnRha2VuQnkubmFtZS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9O1xuICAgIGNvbnN0IHJlbmRlckNlbGxzID0gKGdhbWVib2FyZCwgYm9hcmQpID0+IHtcbiAgICAgICAgZ2FtZWJvYXJkLmFycmF5LmZvckVhY2goKHJvdykgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKGNvbCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBjcmVhdGVDZWxsKGNvbCk7XG4gICAgICAgICAgICAgICAgYm9hcmQuYXBwZW5kKGNlbGwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgZ2V0Qm9hcmRJZCA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgaWYgKGdhbWVib2FyZCA9PT0gY29udHJvbGxlci5odW1hbkdhbWVib2FyZCkge1xuICAgICAgICAgICAgcmV0dXJuICdmaXJzdEJvYXJkJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChnYW1lYm9hcmQgPT09IGNvbnRyb2xsZXIuY29tcHV0ZXJHYW1lYm9hcmQpIHtcbiAgICAgICAgICAgIHJldHVybiAnc2Vjb25kQm9hcmQnO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCByZW5kZXJCb2FyZCA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgYm9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgYm9hcmQuY2xhc3NMaXN0LmFkZCgnYm9hcmQnKTtcbiAgICAgICAgYm9hcmQuaWQgPSBnZXRCb2FyZElkKGdhbWVib2FyZCk7XG4gICAgICAgIHJlbmRlckNlbGxzKGdhbWVib2FyZCwgYm9hcmQpO1xuICAgICAgICBib2FyZHMuYXBwZW5kKGJvYXJkKTtcbiAgICB9O1xuICAgIGNvbnN0IGNsZWFyU2hpcCA9IChzaGlwLCBnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAjJHtnZXRCb2FyZElkKGdhbWVib2FyZCl9IC5jZWxsYCk7XG4gICAgICAgIGNlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgIGlmIChjZWxsLmNsYXNzTGlzdC5jb250YWlucygndGFrZW4nKSAmJiBjZWxsLmdldEF0dHJpYnV0ZSgnZGF0YS1zaGlwTmFtZScpID09PSBzaGlwLm5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgndGFrZW4nKTtcbiAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2VtcHR5Jyk7XG4gICAgICAgICAgICAgICAgY2VsbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtc2hpcE5hbWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCByZWZyZXNoQm9hcmQgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7Z2V0Qm9hcmRJZChnYW1lYm9hcmQpfWApO1xuICAgICAgICBib2FyZC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgcmVuZGVyQ2VsbHMoZ2FtZWJvYXJkLCBib2FyZCk7XG4gICAgfTtcbiAgICBjb25zdCBnZXRVc2VySW5wdXQgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaGl0JykgJiYgIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbWlzcycpKSB7XG4gICAgICAgICAgICBjb25zdCBjb2wgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29sJyk7XG4gICAgICAgICAgICBjb25zdCByb3cgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcm93Jyk7XG4gICAgICAgICAgICByZXR1cm4geyBjb2wsIHJvdyB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVVc2VySW5wdXQgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjc2Vjb25kQm9hcmQgLmNlbGwnKTtcbiAgICAgICAgbGV0IHVzZXJJbnB1dDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgdXNlcklucHV0ID0geWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgICBjZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpdCcpICYmICFjZWxsLmNsYXNzTGlzdC5jb250YWlucygnbWlzcycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGdldFVzZXJJbnB1dChlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IHdoaWxlICghdXNlcklucHV0KTtcbiAgICAgICAgY29uc3QgY29sID0gdXNlcklucHV0LmNvbC50b1N0cmluZygpO1xuICAgICAgICBjb25zdCByb3cgPSB1c2VySW5wdXQucm93LnRvU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiB7IGNvbCwgcm93IH07XG4gICAgfSk7XG4gICAgY29uc3QgaGFuZGxlUHZDID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGZpbGxDZWxscygnZmlyc3QnKTtcbiAgICAgICAgd2FpdGluZyh0cnVlKTtcbiAgICAgICAgYWxsQnRucy5mb3JFYWNoKChidG4pID0+IChidG4uZGlzYWJsZWQgPSB0cnVlKSk7XG4gICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGdldFNwZWVkVmFsdWUoKSkpO1xuICAgICAgICBhbGxCdG5zLmZvckVhY2goKGJ0bikgPT4gKGJ0bi5kaXNhYmxlZCA9IGZhbHNlKSk7XG4gICAgICAgIHdhaXRpbmcoZmFsc2UpO1xuICAgICAgICBjYW5CZVN0YXJ0ZWQoKTtcbiAgICAgICAgc2V0SW5pdE1lc3NhZ2UoKTtcbiAgICB9KTtcbiAgICBjb25zdCBoYW5kbGVOZXdHYW1lID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHNldFJlc3RhcnRNZXNzYWdlKCk7XG4gICAgICAgIHdhaXRpbmcodHJ1ZSk7XG4gICAgICAgIGFsbEJ0bnMuZm9yRWFjaCgoYnRuKSA9PiAoYnRuLmRpc2FibGVkID0gdHJ1ZSkpO1xuICAgICAgICB5aWVsZCBjb250cm9sbGVyLm5ld0dhbWUoKTtcbiAgICAgICAgYWxsQnRucy5mb3JFYWNoKChidG4pID0+IChidG4uZGlzYWJsZWQgPSBmYWxzZSkpO1xuICAgICAgICB3YWl0aW5nKGZhbHNlKTtcbiAgICAgICAgY2FuQmVTdGFydGVkKCk7XG4gICAgICAgIGlmIChwVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBzZXRJbml0TWVzc2FnZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgaGFuZGxlQ3ZDID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHdhaXRpbmcodHJ1ZSk7XG4gICAgICAgIGFsbEJ0bnMuZm9yRWFjaCgoYnRuKSA9PiAoYnRuLmRpc2FibGVkID0gdHJ1ZSkpO1xuICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBnZXRTcGVlZFZhbHVlKCkpKTtcbiAgICAgICAgYWxsQnRucy5mb3JFYWNoKChidG4pID0+IChidG4uZGlzYWJsZWQgPSBmYWxzZSkpO1xuICAgICAgICB3YWl0aW5nKGZhbHNlKTtcbiAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICByYW5kb21CdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBjVmNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0pO1xuICAgIGNvbnN0IGhhbmRsZUdhbWVNb2RlID0gKHNlbGVjdGVkRWxlbWVudCwgZGVzZWxlY3RlZEVsZW1lbnQpID0+IHtcbiAgICAgICAgZGVzZWxlY3RlZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgaWYgKCFzZWxlY3RlZEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZEVsZW1lbnQgPT09IHBWY0J0bikge1xuICAgICAgICAgICAgICAgIGhhbmRsZVB2QygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkRWxlbWVudCA9PT0gY1ZjQnRuKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlQ3ZDKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250cm9sbGVyLnJlc3RhcnQoKTtcbiAgICAgICAgICAgIHNldFJlc3RhcnRNZXNzYWdlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHdhaXRpbmcgPSAoYm9vbCkgPT4ge1xuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnd2FpdCcsIGJvb2wpO1xuICAgIH07XG4gICAgY29uc3Qgc2V0Qm9hcmRQb2ludGVyID0gKHdoaWNoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlY29uZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWNvbmRCb2FyZCcpO1xuICAgICAgICBpZiAod2hpY2ggPT09ICdwbGF5ZXInKSB7XG4gICAgICAgICAgICBzZWNvbmQuY2xhc3NMaXN0LmFkZCgnYm9hcmRPdXRsaW5lJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAod2hpY2ggPT09ICdjb21wdXRlcicpIHtcbiAgICAgICAgICAgIHNlY29uZC5jbGFzc0xpc3QucmVtb3ZlKCdib2FyZE91dGxpbmUnKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlQm9hcmRQb2ludGVyID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBzZWNvbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5yZW1vdmUoJ2JvYXJkT3V0bGluZScpO1xuICAgIH07XG4gICAgY29uc3QgY3JlYXRlU2hpcEVsZW1lbnQgPSAoZmlyc3RDZWxsKSA9PiB7XG4gICAgICAgIGNvbnN0IHNoaXBFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNvbnN0IHNoaXBOYW1lID0gZmlyc3RDZWxsLnRha2VuQnkubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBzaGlwU2l6ZSA9IGZpcnN0Q2VsbC50YWtlbkJ5LnNpemU7XG4gICAgICAgIHNoaXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3NoaXAnLCBzaGlwTmFtZSwgJ2RyYWdnYWJsZScpO1xuICAgICAgICBzaGlwRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2l6ZScsIGAke3NoaXBTaXplfWApO1xuICAgICAgICBzaGlwRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScsIGAke3NoaXBOYW1lfWApO1xuICAgICAgICBzaGlwRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RyYWdnYWJsZScsICd0cnVlJyk7XG4gICAgICAgIHJldHVybiBzaGlwRWxlbWVudDtcbiAgICB9O1xuICAgIGNvbnN0IHNldFNoaXBTdHlsZSA9IChzaGlwRWxlbWVudCwgc2hpcFNpemUsIGNlbGxTaXplLCBpc1ZlcnRpY2FsKSA9PiB7XG4gICAgICAgIGNvbnN0IGh0bWxFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpO1xuICAgICAgICBjb25zdCByb290Rm9udFNpemUgPSBwYXJzZUZsb2F0KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGh0bWxFbGVtZW50LCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCdmb250LXNpemUnKSk7XG4gICAgICAgIGlmICghaXNWZXJ0aWNhbCkge1xuICAgICAgICAgICAgc2hpcEVsZW1lbnQuc3R5bGUud2lkdGggPSBzaGlwU2l6ZSAqIChjZWxsU2l6ZSAvIHJvb3RGb250U2l6ZSkgKyAncmVtJztcbiAgICAgICAgICAgIHNoaXBFbGVtZW50LnN0eWxlLmhlaWdodCA9IGNlbGxTaXplIC8gcm9vdEZvbnRTaXplICsgJ3JlbSc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzaGlwRWxlbWVudC5zdHlsZS53aWR0aCA9IGNlbGxTaXplIC8gcm9vdEZvbnRTaXplICsgJ3JlbSc7XG4gICAgICAgICAgICBzaGlwRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBzaGlwU2l6ZSAqIChjZWxsU2l6ZSAvIHJvb3RGb250U2l6ZSkgKyAncmVtJztcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcmVzaXplSGFuZGxlciA9IChzaGlwRWxlbWVudCwgc2hpcFNpemUsIGlzVmVydGljYWwpID0+IHtcbiAgICAgICAgY29uc3QgY2VsbFNpemUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm9hcmQgLmNlbGwnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgc2V0U2hpcFN0eWxlKHNoaXBFbGVtZW50LCBzaGlwU2l6ZSwgY2VsbFNpemUsIGlzVmVydGljYWwpO1xuICAgIH07XG4gICAgY29uc3QgY3JlYXRlU2hpcE92ZXJsYXkgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGdhbWVib2FyZC5zaGlwc1BsYWNlZC5mb3JFYWNoKChmaXJzdENlbGwpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBFbGVtZW50ID0gY3JlYXRlU2hpcEVsZW1lbnQoZmlyc3RDZWxsKTtcbiAgICAgICAgICAgIGNvbnN0IGNlbGxTaXplID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvYXJkIC5jZWxsJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgICAgICBjb25zdCBzaGlwU2l6ZSA9IGZpcnN0Q2VsbC50YWtlbkJ5LnNpemU7XG4gICAgICAgICAgICBjb25zdCBpc1ZlcnRpY2FsID0gZmlyc3RDZWxsLnRha2VuQnkuaXNWZXJ0aWNhbDtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0Q2VsbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtnZXRCb2FyZElkKGdhbWVib2FyZCl9IC5jZWxsW2RhdGEtY29sPVwiJHtmaXJzdENlbGwuY29sfVwiXVtkYXRhLXJvdz1cIiR7Zmlyc3RDZWxsLnJvd31cIl1gKTtcbiAgICAgICAgICAgIGZpcnN0Q2VsbEVsZW1lbnQuYXBwZW5kQ2hpbGQoc2hpcEVsZW1lbnQpO1xuICAgICAgICAgICAgc2V0U2hpcFN0eWxlKHNoaXBFbGVtZW50LCBzaGlwU2l6ZSwgY2VsbFNpemUsIGlzVmVydGljYWwpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHJlc2l6ZUhhbmRsZXIoc2hpcEVsZW1lbnQsIHNoaXBTaXplLCBpc1ZlcnRpY2FsKSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgY2FuQmVTdGFydGVkID0gKCkgPT4ge1xuICAgICAgICBpZiAoY29udHJvbGxlci5odW1hbkdhbWVib2FyZC5zaGlwc1BsYWNlZC5sZW5ndGggPT09IDUgJiYgY29udHJvbGxlci5jb21wdXRlckdhbWVib2FyZC5zaGlwc1BsYWNlZC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGZpbGxDZWxscygnc2Vjb25kJyk7XG4gICAgICAgICAgICBzdGFydEJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdGFydEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldEluaXRNZXNzYWdlID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBzdGF0dXNUZXh0TW9iaWxlID0gXCJVc2UgJ1JhbmRvbSBQbGFjZW1lbnQnIGJ1dHRvbiwgdGhlbiBwcmVzcyBTdGFydCFcIjtcbiAgICAgICAgY29uc3Qgc3RhdHVzVGV4dERlc2t0b3AgPSBcIkRyYWcgYW5kIGRyb3Agc2hpcHMgb250byB0aGUgbGVmdCBib2FyZCBvciB1c2UgJ1JhbmRvbSBQbGFjZW1lbnQnIGJ1dHRvbi4gUmlnaHQgY2xpY2sgdG8gcm90YXRlLiBXaGVuIHJlYWR5LCBwcmVzcyBTdGFydCFcIjtcbiAgICAgICAgaWYgKHN0YXR1c0JveC50ZXh0Q29udGVudCA9PT0gc3RhdHVzVGV4dE1vYmlsZSB8fFxuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID09PSBzdGF0dXNUZXh0RGVza3RvcCB8fFxuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID09PSAnUmVzdGFydGluZy4uLicgfHxcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9PT0gJ1lvdSBjYW4gbm93IGJlZ2luIHRoZSBnYW1lLiBQcmVzcyBzdGFydCEnKSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSBzdGF0dXNUZXh0TW9iaWxlO1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiAxMDI0cHgpJykubWF0Y2hlcykge1xuICAgICAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9IHN0YXR1c1RleHREZXNrdG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRTdGFydE1lc3NhZ2UgPSAoKSA9PiB7XG4gICAgICAgIGlmIChjYW5CZVN0YXJ0ZWQoKSkge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gJ1lvdSBjYW4gbm93IGJlZ2luIHRoZSBnYW1lLiBQcmVzcyBzdGFydCEnO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRUdXJuTWVzc2FnZVB2QyA9IChpc1BsYXllclR1cm4pID0+IHtcbiAgICAgICAgaWYgKGlzUGxheWVyVHVybikge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gXCJQbGF5ZXIncyB0dXJuLiBUYWtlIGFpbSBhbmQgYXR0YWNrIVwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gXCJDb21wdXRlcidzIHR1cm4uIFRoZSBzaG90IGlzIGNvbWluZyFcIjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0VHVybk1lc3NhZ2VDdkMgPSAoaXNQbGF5ZXJUdXJuKSA9PiB7XG4gICAgICAgIGlmIChpc1BsYXllclR1cm4pIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9IFwiVmlvbGV0J3MgdHVyblwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gXCJCbHVlJ3MgdHVyblwiO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRHYW1lT3Zlck1lc3NhZ2VQdkMgPSAod2hvKSA9PiB7XG4gICAgICAgIGlmICh3aG8gPT09ICdwbGF5ZXInKSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSAnR2FtZSBvdmVyLCBQbGF5ZXIgd2lucyEnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHdobyA9PT0gJ2NvbXB1dGVyJykge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gJ0dhbWUgb3ZlciwgQ29tcHV0ZXIgd2lucyEnO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRHYW1lT3Zlck1lc3NhZ2VDdkMgPSAod2hvKSA9PiB7XG4gICAgICAgIGlmICh3aG8gPT09ICdwbGF5ZXInKSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSAnR2FtZSBvdmVyLCBCbHVlIENvbXB1dGVyIHdpbnMhJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh3aG8gPT09ICdjb21wdXRlcicpIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9ICdHYW1lIG92ZXIsIFZpb2xldCBDb21wdXRlciB3aW5zISc7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldFJlc3RhcnRNZXNzYWdlID0gKCkgPT4ge1xuICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSAnUmVzdGFydGluZy4uLic7XG4gICAgfTtcbiAgICBjb25zdCBmaWxsQ2VsbHMgPSAoaW5wdXQpID0+IHtcbiAgICAgICAgbGV0IGJvYXJkO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdmaXJzdCcpIHtcbiAgICAgICAgICAgIGJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpcnN0Qm9hcmQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbnB1dCA9PT0gJ3NlY29uZCcpIHtcbiAgICAgICAgICAgIGJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2VsbHMgPSBib2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpO1xuICAgICAgICBjZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2ZpbGxlZCcpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHVuRmlsbENlbGxzID0gKGlucHV0KSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgd2FpdGluZyh0cnVlKTtcbiAgICAgICAgbGV0IGJvYXJkO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdmaXJzdCcpIHtcbiAgICAgICAgICAgIGJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpcnN0Qm9hcmQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbnB1dCA9PT0gJ3NlY29uZCcpIHtcbiAgICAgICAgICAgIGJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2VsbHMgPSBib2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpO1xuICAgICAgICBjZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2ZpbGxlZCcpO1xuICAgICAgICB9KTtcbiAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGNlbGxzLmZvckVhY2goKGNlbGwsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnZmlsbGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gY2VsbHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICgoaW5kZXggKyAxKSAlIDYgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdW5kcy50aWNrLnBsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIChnZXRTcGVlZFZhbHVlKCkgLyAxMjApICogaW5kZXgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB3YWl0aW5nKGZhbHNlKTtcbiAgICB9KTtcbiAgICBjb25zdCB0b2dnbGVNdXRlID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBzcGVha2VySWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzcGVha2VyJyk7XG4gICAgICAgIGlmICghaXNNdXRlZCkge1xuICAgICAgICAgICAgbXV0ZUJ0bi5jbGFzc0xpc3QuYWRkKCdtdXRlZCcpO1xuICAgICAgICAgICAgc3BlYWtlckljb24uY2xhc3NMaXN0LnJlbW92ZSgnZmEtdm9sdW1lLWhpZ2gnKTtcbiAgICAgICAgICAgIHNwZWFrZXJJY29uLmNsYXNzTGlzdC5hZGQoJ2ZhLXZvbHVtZS14bWFyaycpO1xuICAgICAgICAgICAgZm9yIChsZXQgc291bmQgb2YgT2JqZWN0LnZhbHVlcyhzb3VuZHMpKSB7XG4gICAgICAgICAgICAgICAgc291bmQudm9sdW1lID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG11dGVCdG4uY2xhc3NMaXN0LnJlbW92ZSgnbXV0ZWQnKTtcbiAgICAgICAgICAgIHNwZWFrZXJJY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLXZvbHVtZS14bWFyaycpO1xuICAgICAgICAgICAgc3BlYWtlckljb24uY2xhc3NMaXN0LmFkZCgnZmEtdm9sdW1lLWhpZ2gnKTtcbiAgICAgICAgICAgIGZvciAobGV0IHNvdW5kIG9mIE9iamVjdC52YWx1ZXMoc291bmRzKSkge1xuICAgICAgICAgICAgICAgIHNvdW5kLnZvbHVtZSA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaXNNdXRlZCA9ICFpc011dGVkO1xuICAgICAgICBzb3VuZHMuc2VsZWN0LnBsYXkoKTtcbiAgICB9O1xuICAgIHBWY0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgZmlsbENlbGxzKCdmaXJzdCcpO1xuICAgICAgICBoYW5kbGVHYW1lTW9kZShwVmNCdG4sIGNWY0J0bik7XG4gICAgICAgIGNvbnN0IHNlY29uZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWNvbmRCb2FyZCcpO1xuICAgICAgICBzZWNvbmQuY2xhc3NMaXN0LnJlbW92ZSgnc3RhcnQnKTtcbiAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBwVmNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBzb3VuZHMuc2VsZWN0LnBsYXkoKTtcbiAgICAgICAgdW5GaWxsQ2VsbHMoJ2ZpcnN0Jyk7XG4gICAgfSk7XG4gICAgY1ZjQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBmaWxsQ2VsbHMoJ2ZpcnN0Jyk7XG4gICAgICAgIGZpbGxDZWxscygnc2Vjb25kJyk7XG4gICAgICAgIGhhbmRsZUdhbWVNb2RlKGNWY0J0biwgcFZjQnRuKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIHNlY29uZC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XG4gICAgICAgIHNlY29uZC5jbGFzc0xpc3QuYWRkKCdzdGFydCcpO1xuICAgICAgICBzdGFydEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHJhbmRvbUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGNWY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHNvdW5kcy5zZWxlY3QucGxheSgpO1xuICAgICAgICBQcm9taXNlLmFsbChbdW5GaWxsQ2VsbHMoJ2ZpcnN0JyksIHVuRmlsbENlbGxzKCdzZWNvbmQnKV0pO1xuICAgIH0pO1xuICAgIG5ld0dhbWVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgcmVtb3ZlQm9hcmRQb2ludGVyKCk7XG4gICAgICAgIGZpbGxDZWxscygnZmlyc3QnKTtcbiAgICAgICAgaWYgKGNWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgIGZpbGxDZWxscygnc2Vjb25kJyk7XG4gICAgICAgICAgICBzdGFydEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICByYW5kb21CdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgY1ZjQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBzb3VuZHMuc2VsZWN0LnBsYXkoKTtcbiAgICAgICAgeWllbGQgaGFuZGxlTmV3R2FtZSgpO1xuICAgICAgICBjb25zdCBzZWNvbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcbiAgICAgICAgaWYgKHBWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgIHNlY29uZC5jbGFzc0xpc3QucmVtb3ZlKCdzdGFydCcpO1xuICAgICAgICAgICAgdW5GaWxsQ2VsbHMoJ2ZpcnN0Jyk7XG4gICAgICAgICAgICBzdGFydEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICBwVmNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBzZWNvbmQuY2xhc3NMaXN0LmFkZCgnc3RhcnQnKTtcbiAgICAgICAgICAgIHJhbmRvbUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICBQcm9taXNlLmFsbChbdW5GaWxsQ2VsbHMoJ2ZpcnN0JyksIHVuRmlsbENlbGxzKCdzZWNvbmQnKV0pO1xuICAgICAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmFuZG9tQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNWY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KSk7XG4gICAgc3RhcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNvbnRyb2xsZXIuc3RhcnQoKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIHNlY29uZC5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XG4gICAgICAgIHNlY29uZC5jbGFzc0xpc3QuYWRkKCdzdGFydCcpO1xuICAgICAgICBzdGFydEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHJhbmRvbUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHVuRmlsbENlbGxzKCdzZWNvbmQnKTtcbiAgICB9KTtcbiAgICByYW5kb21CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNvbnRyb2xsZXIuY29tcHV0ZXJHYW1lYm9hcmQuY2xlYXJCb2FyZCgpO1xuICAgICAgICByZWZyZXNoQm9hcmQoY29udHJvbGxlci5jb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIGNvbnRyb2xsZXIucmFuZG9taXplU2hpcHNQbGFjZW1lbnQoY29udHJvbGxlci5odW1hbkdhbWVib2FyZCk7XG4gICAgICAgIGRyYWdBbmREcm9wKGNvbnRyb2xsZXIuaHVtYW5HYW1lYm9hcmQsIGNvbnRyb2xsZXIuY29tcHV0ZXJHYW1lYm9hcmQsIGNvbnRyb2xsZXIuaHVtYW5TaGlwcyk7XG4gICAgICAgIGNhbkJlU3RhcnRlZCgpO1xuICAgICAgICBzZXRTdGFydE1lc3NhZ2UoKTtcbiAgICAgICAgZmlsbENlbGxzKCdzZWNvbmQnKTtcbiAgICAgICAgc291bmRzLnJhbmRvbS5wbGF5KCk7XG4gICAgfSk7XG4gICAgY29uc3Qgc2V0U3BlZWRWYWx1ZSA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgaW5wdXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIGlmIChpbnB1dC5jaGVja2VkKSB7XG4gICAgICAgICAgICBzcGVlZFZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgZ2V0U3BlZWRWYWx1ZSA9ICgpID0+IHNwZWVkVmFsdWU7XG4gICAgc3BlZWRzLmZvckVhY2goKHNwZWVkQnRuKSA9PiB7XG4gICAgICAgIHNwZWVkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIHNldFNwZWVkVmFsdWUoZSk7XG4gICAgICAgICAgICBzb3VuZHMuc2VsZWN0LnBsYXkoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgbXV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZU11dGUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBzZXRJbml0TWVzc2FnZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVuZGVyQm9hcmQsXG4gICAgICAgIGNsZWFyU2hpcCxcbiAgICAgICAgcmVmcmVzaEJvYXJkLFxuICAgICAgICBoYW5kbGVVc2VySW5wdXQsXG4gICAgICAgIHBWY0J0bixcbiAgICAgICAgY1ZjQnRuLFxuICAgICAgICB3YWl0aW5nLFxuICAgICAgICBzZXRCb2FyZFBvaW50ZXIsXG4gICAgICAgIHJlbW92ZUJvYXJkUG9pbnRlcixcbiAgICAgICAgY3JlYXRlU2hpcE92ZXJsYXksXG4gICAgICAgIGNhbkJlU3RhcnRlZCxcbiAgICAgICAgc2V0SW5pdE1lc3NhZ2UsXG4gICAgICAgIHNldFN0YXJ0TWVzc2FnZSxcbiAgICAgICAgc2V0VHVybk1lc3NhZ2VQdkMsXG4gICAgICAgIHNldFR1cm5NZXNzYWdlQ3ZDLFxuICAgICAgICBzZXRHYW1lT3Zlck1lc3NhZ2VQdkMsXG4gICAgICAgIHNldEdhbWVPdmVyTWVzc2FnZUN2QyxcbiAgICAgICAgc2V0UmVzdGFydE1lc3NhZ2UsXG4gICAgICAgIGdldFNwZWVkVmFsdWUsXG4gICAgICAgIGZpbGxDZWxscyxcbiAgICAgICAgdW5GaWxsQ2VsbHMsXG4gICAgfTtcbn0pKCk7XG5leHBvcnQgZGVmYXVsdCB1aTtcbiIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IGdhbWVib2FyZEZhY3RvcnkgZnJvbSAnLi9nYW1lYm9hcmQnO1xuaW1wb3J0IHNoaXBGYWN0b3J5IGZyb20gJy4vc2hpcCc7XG5pbXBvcnQgcGxheWVyRmFjdG9yeSBmcm9tICcuL3BsYXllcic7XG5pbXBvcnQgdWkgZnJvbSAnLi91aSc7XG5pbXBvcnQgZHJhZ0FuZERyb3AgZnJvbSAnLi9kcmFnQW5kRHJvcCc7XG5pbXBvcnQgc291bmRzIGZyb20gJy4vc291bmRzJztcbmNvbnN0IGNvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGh1bWFuR2FtZWJvYXJkID0gZ2FtZWJvYXJkRmFjdG9yeSgpO1xuICAgIGNvbnN0IGNvbXB1dGVyR2FtZWJvYXJkID0gZ2FtZWJvYXJkRmFjdG9yeSgpO1xuICAgIGNvbnN0IGh1bWFuID0gcGxheWVyRmFjdG9yeSgpO1xuICAgIGNvbnN0IGNvbXB1dGVyID0gcGxheWVyRmFjdG9yeSgpO1xuICAgIGxldCBpc1N0b3BwZWQgPSB0cnVlO1xuICAgIGxldCBodW1hbkNhcnJpZXI7XG4gICAgbGV0IGh1bWFuQmF0dGxlc2hpcDtcbiAgICBsZXQgaHVtYW5EZXN0cm95ZXI7XG4gICAgbGV0IGh1bWFuU3VibWFyaW5lO1xuICAgIGxldCBodW1hblBhdHJvbGJvYXQ7XG4gICAgbGV0IGh1bWFuU2hpcHMgPSBbaHVtYW5DYXJyaWVyLCBodW1hbkJhdHRsZXNoaXAsIGh1bWFuRGVzdHJveWVyLCBodW1hblN1Ym1hcmluZSwgaHVtYW5QYXRyb2xib2F0XTtcbiAgICBjb25zdCBwb3B1bGF0ZVNoaXBzID0gKCkgPT4ge1xuICAgICAgICBodW1hbkNhcnJpZXIgPSBzaGlwRmFjdG9yeSgnQ2FycmllcicpO1xuICAgICAgICBodW1hbkJhdHRsZXNoaXAgPSBzaGlwRmFjdG9yeSgnQmF0dGxlc2hpcCcpO1xuICAgICAgICBodW1hbkRlc3Ryb3llciA9IHNoaXBGYWN0b3J5KCdEZXN0cm95ZXInKTtcbiAgICAgICAgaHVtYW5TdWJtYXJpbmUgPSBzaGlwRmFjdG9yeSgnU3VibWFyaW5lJyk7XG4gICAgICAgIGh1bWFuUGF0cm9sYm9hdCA9IHNoaXBGYWN0b3J5KCdQYXRyb2xCb2F0Jyk7XG4gICAgICAgIGh1bWFuU2hpcHMgPSBbaHVtYW5DYXJyaWVyLCBodW1hbkJhdHRsZXNoaXAsIGh1bWFuRGVzdHJveWVyLCBodW1hblN1Ym1hcmluZSwgaHVtYW5QYXRyb2xib2F0XTtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucGxhY2VTaGlwKGh1bWFuQ2FycmllciwgJ0EnLCAnMScsICdob3Jpem9udGFsJyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnBsYWNlU2hpcChodW1hbkJhdHRsZXNoaXAsICdBJywgJzMnLCAnaG9yaXpvbnRhbCcpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5wbGFjZVNoaXAoaHVtYW5EZXN0cm95ZXIsICdBJywgJzUnLCAnaG9yaXpvbnRhbCcpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5wbGFjZVNoaXAoaHVtYW5TdWJtYXJpbmUsICdBJywgJzcnLCAnaG9yaXpvbnRhbCcpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5wbGFjZVNoaXAoaHVtYW5QYXRyb2xib2F0LCAnQScsICc5JywgJ2hvcml6b250YWwnKTtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlRm9yQWxsKGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbmV3ID0gKCkgPT4ge1xuICAgICAgICB1aS5yZWZyZXNoQm9hcmQoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICB1aS5yZWZyZXNoQm9hcmQoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICB1aS5jcmVhdGVTaGlwT3ZlcmxheShodW1hbkdhbWVib2FyZCk7XG4gICAgICAgIHVpLmNyZWF0ZVNoaXBPdmVybGF5KGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgZHJhZ0FuZERyb3AoaHVtYW5HYW1lYm9hcmQsIGNvbXB1dGVyR2FtZWJvYXJkLCBodW1hblNoaXBzKTtcbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZUdhbWVPdmVyID0gKHdpbm5lcikgPT4ge1xuICAgICAgICB1aS5yZW1vdmVCb2FyZFBvaW50ZXIoKTtcbiAgICAgICAgaWYgKHVpLnBWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgIHVpLnNldEdhbWVPdmVyTWVzc2FnZVB2Qyh3aW5uZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1aS5jVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICB1aS5zZXRHYW1lT3Zlck1lc3NhZ2VDdkMod2lubmVyKTtcbiAgICAgICAgfVxuICAgICAgICBzb3VuZHMuZ2FtZU92ZXIucGxheSgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIGNvbnN0IGlzR2FtZU92ZXIgPSAoKSA9PiB7XG4gICAgICAgIGlmIChjb21wdXRlckdhbWVib2FyZC5hbGxTdW5rKGNvbXB1dGVyR2FtZWJvYXJkKSkge1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUdhbWVPdmVyKCdwbGF5ZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHVtYW5HYW1lYm9hcmQuYWxsU3VuayhodW1hbkdhbWVib2FyZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVHYW1lT3ZlcignY29tcHV0ZXInKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBjb25zdCBjb21wdXRlckFJID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBsZXQgcGxheWVyO1xuICAgICAgICBpZiAoZ2FtZWJvYXJkID09PSBodW1hbkdhbWVib2FyZCkge1xuICAgICAgICAgICAgcGxheWVyID0gY29tcHV0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZ2FtZWJvYXJkID09PSBjb21wdXRlckdhbWVib2FyZCkge1xuICAgICAgICAgICAgcGxheWVyID0gaHVtYW47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdhbWVib2FyZC5oaXRCdXROb3RTdW5rKGdhbWVib2FyZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGxhc3RIaXQgPSBwbGF5ZXIuZ2V0TGFzdEhpdCgpO1xuICAgICAgICAgICAgY29uc3QgcHJldkhpdCA9IHBsYXllci5nZXRQcmV2SGl0KCk7XG4gICAgICAgICAgICBjb25zdCBjZWxsID0gZ2FtZWJvYXJkLmdldENlbGwobGFzdEhpdC5jb2wsIGxhc3RIaXQucm93KTtcbiAgICAgICAgICAgIGNvbnN0IGhpdENvdW50ID0gY2VsbC50YWtlbkJ5LmhpdENvdW50O1xuICAgICAgICAgICAgaWYgKHByZXZIaXQgIT09IG51bGwgJiYgbGFzdEhpdCAhPT0gbnVsbCAmJiBoaXRDb3VudCA+PSAyICYmIGhpdENvdW50IDw9IDQpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuZmluaXNoaW5nQXR0YWNrKGdhbWVib2FyZCwgbGFzdEhpdC5jb2wsIGxhc3RIaXQucm93LCBwcmV2SGl0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhpdENvdW50ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLmZvbGxvd3VwQXR0YWNrKGdhbWVib2FyZCwgbGFzdEhpdC5jb2wsIGxhc3RIaXQucm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuY2FuQmVTdW5rKGNlbGwpKSB7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnNpbmtTaGlwKGdhbWVib2FyZCwgbGFzdEhpdC5jb2wsIGxhc3RIaXQucm93KTtcbiAgICAgICAgICAgICAgICBzb3VuZHMuc3Vuay5wbGF5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNHYW1lT3ZlcigpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgeyBjb2wsIHJvdyB9ID0gcGxheWVyLnJhbmRvbUF0dGFjayhnYW1lYm9hcmQpO1xuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KTtcbiAgICAgICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc2V0UHJldkhpdChwbGF5ZXIuZ2V0TGFzdEhpdCgpKTtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc2V0TGFzdEhpdCh7IGNvbCwgcm93IH0pO1xuICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuY2FuQmVTdW5rKGNlbGwpKSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZC5zaW5rU2hpcChnYW1lYm9hcmQsIGNvbCwgcm93KTtcbiAgICAgICAgICAgICAgICAgICAgc291bmRzLnN1bmsucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuc2V0UHJldkhpdChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnNldExhc3RIaXQobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0dhbWVPdmVyKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcGxheWVyVHVybiA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICB1aS5zZXRUdXJuTWVzc2FnZVB2Qyh0cnVlKTtcbiAgICAgICAgdWkuc2V0Qm9hcmRQb2ludGVyKCdwbGF5ZXInKTtcbiAgICAgICAgdWkud2FpdGluZyhmYWxzZSk7XG4gICAgICAgIGNvbnN0IHsgY29sLCByb3cgfSA9IHlpZWxkIHVpLmhhbmRsZVVzZXJJbnB1dCgpO1xuICAgICAgICBodW1hbi5hdHRhY2soY29tcHV0ZXJHYW1lYm9hcmQsIGNvbCwgcm93KTtcbiAgICAgICAgY29uc3QgY2VsbCA9IGNvbXB1dGVyR2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpO1xuICAgICAgICBpZiAoY29tcHV0ZXJHYW1lYm9hcmQuY2FuQmVTdW5rKGNlbGwpKSB7XG4gICAgICAgICAgICBjb21wdXRlckdhbWVib2FyZC5zaW5rU2hpcChjb21wdXRlckdhbWVib2FyZCwgY29sLCByb3cpO1xuICAgICAgICAgICAgc291bmRzLnN1bmsucGxheSgpO1xuICAgICAgICB9XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChjb21wdXRlckdhbWVib2FyZCk7XG4gICAgfSk7XG4gICAgY29uc3QgY29tcHV0ZXJUdXJuID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHVpLnNldFR1cm5NZXNzYWdlUHZDKGZhbHNlKTtcbiAgICAgICAgdWkuc2V0Qm9hcmRQb2ludGVyKCdjb21wdXRlcicpO1xuICAgICAgICB1aS53YWl0aW5nKHRydWUpO1xuICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCB1aS5nZXRTcGVlZFZhbHVlKCkpKTtcbiAgICAgICAgaWYgKCF1aS5wVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpIHx8IGlzU3RvcHBlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbXB1dGVyQUkoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICB1aS5yZWZyZXNoQm9hcmQoaHVtYW5HYW1lYm9hcmQpO1xuICAgIH0pO1xuICAgIGNvbnN0IHBsYXllclZzQ29tcHV0ZXJNb2RlID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGxldCBpc1BsYXllclR1cm4gPSB0cnVlO1xuICAgICAgICB3aGlsZSAoIWlzR2FtZU92ZXIoKSAmJiAhaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICBpZiAoaXNQbGF5ZXJUdXJuKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgcGxheWVyVHVybigpO1xuICAgICAgICAgICAgICAgIGlzUGxheWVyVHVybiA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzR2FtZU92ZXIoKSB8fCBpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNQbGF5ZXJUdXJuKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgY29tcHV0ZXJUdXJuKCk7XG4gICAgICAgICAgICAgICAgaXNQbGF5ZXJUdXJuID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgdWkud2FpdGluZyhmYWxzZSk7XG4gICAgfSk7XG4gICAgY29uc3QgY3B1VHVybiA9IChpc1BsYXllclR1cm4sIGdhbWVib2FyZCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHVpLndhaXRpbmcodHJ1ZSk7XG4gICAgICAgIHVpLnNldFR1cm5NZXNzYWdlQ3ZDKGlzUGxheWVyVHVybik7XG4gICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIHVpLmdldFNwZWVkVmFsdWUoKSkpO1xuICAgICAgICBpZiAoIXVpLmNWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykgfHwgaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29tcHV0ZXJBSShnYW1lYm9hcmQpO1xuICAgICAgICB1aS5yZWZyZXNoQm9hcmQoZ2FtZWJvYXJkKTtcbiAgICB9KTtcbiAgICBjb25zdCBjb21wdXRlclZzQ29tcHV0ZXJNb2RlID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHVpLnJlbW92ZUJvYXJkUG9pbnRlcigpO1xuICAgICAgICBsZXQgaXNQbGF5ZXJUdXJuID0gdHJ1ZTtcbiAgICAgICAgd2hpbGUgKCFpc0dhbWVPdmVyKCkgJiYgIWlzU3RvcHBlZCkge1xuICAgICAgICAgICAgeWllbGQgY3B1VHVybihpc1BsYXllclR1cm4sIGlzUGxheWVyVHVybiA/IGh1bWFuR2FtZWJvYXJkIDogY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICAgICAgaXNQbGF5ZXJUdXJuID0gIWlzUGxheWVyVHVybjtcbiAgICAgICAgfVxuICAgICAgICBpc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgdWkud2FpdGluZyhmYWxzZSk7XG4gICAgfSk7XG4gICAgY29uc3QgcmFuZG9tUGxhY2VtZW50ID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBsZXQgYWxsU2hpcHM7XG4gICAgICAgIGlmIChnYW1lYm9hcmQgPT09IGh1bWFuR2FtZWJvYXJkKSB7XG4gICAgICAgICAgICBodW1hbkNhcnJpZXIgPSBzaGlwRmFjdG9yeSgnQ2FycmllcicpO1xuICAgICAgICAgICAgaHVtYW5CYXR0bGVzaGlwID0gc2hpcEZhY3RvcnkoJ0JhdHRsZXNoaXAnKTtcbiAgICAgICAgICAgIGh1bWFuRGVzdHJveWVyID0gc2hpcEZhY3RvcnkoJ0Rlc3Ryb3llcicpO1xuICAgICAgICAgICAgaHVtYW5TdWJtYXJpbmUgPSBzaGlwRmFjdG9yeSgnU3VibWFyaW5lJyk7XG4gICAgICAgICAgICBodW1hblBhdHJvbGJvYXQgPSBzaGlwRmFjdG9yeSgnUGF0cm9sQm9hdCcpO1xuICAgICAgICAgICAgYWxsU2hpcHMgPSBbaHVtYW5DYXJyaWVyLCBodW1hbkJhdHRsZXNoaXAsIGh1bWFuRGVzdHJveWVyLCBodW1hblN1Ym1hcmluZSwgaHVtYW5QYXRyb2xib2F0XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChnYW1lYm9hcmQgPT09IGNvbXB1dGVyR2FtZWJvYXJkKSB7XG4gICAgICAgICAgICBjb25zdCBjb21wdXRlckNhcnJpZXIgPSBzaGlwRmFjdG9yeSgnQ2FycmllcicpO1xuICAgICAgICAgICAgY29uc3QgY29tcHV0ZXJCYXR0bGVzaGlwID0gc2hpcEZhY3RvcnkoJ0JhdHRsZXNoaXAnKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVyRGVzdHJveWVyID0gc2hpcEZhY3RvcnkoJ0Rlc3Ryb3llcicpO1xuICAgICAgICAgICAgY29uc3QgY29tcHV0ZXJTdWJtYXJpbmUgPSBzaGlwRmFjdG9yeSgnU3VibWFyaW5lJyk7XG4gICAgICAgICAgICBjb25zdCBjb21wdXRlclBhdHJvbGJvYXQgPSBzaGlwRmFjdG9yeSgnUGF0cm9sQm9hdCcpO1xuICAgICAgICAgICAgYWxsU2hpcHMgPSBbY29tcHV0ZXJDYXJyaWVyLCBjb21wdXRlckJhdHRsZXNoaXAsIGNvbXB1dGVyRGVzdHJveWVyLCBjb21wdXRlclN1Ym1hcmluZSwgY29tcHV0ZXJQYXRyb2xib2F0XTtcbiAgICAgICAgfVxuICAgICAgICBodW1hblNoaXBzLmxlbmd0aCA9IDA7XG4gICAgICAgIGNvbnN0IGNvbHMgPSBbJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onXTtcbiAgICAgICAgY29uc3QgcmFuZG9tQ29sID0gKCkgPT4gY29sc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb2xzLmxlbmd0aCldO1xuICAgICAgICBjb25zdCByYW5kb21Sb3cgPSAoKSA9PiBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIDEwKS50b1N0cmluZygpO1xuICAgICAgICBjb25zdCByYW5kb21PcmllbnRhdGlvbiA9ICgpID0+IChNYXRoLnJhbmRvbSgpID4gMC41ID8gJ2hvcml6b250YWwnIDogJ3ZlcnRpY2FsJyk7XG4gICAgICAgIGFsbFNoaXBzLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgICAgIGxldCBjb2wgPSByYW5kb21Db2woKTtcbiAgICAgICAgICAgIGxldCByb3cgPSByYW5kb21Sb3coKTtcbiAgICAgICAgICAgIGxldCBvcmllbnRhdGlvbiA9IHJhbmRvbU9yaWVudGF0aW9uKCk7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gZ2FtZWJvYXJkLmNhbkJlUGxhY2VkKHNoaXAuc2l6ZSwgY29sLCByb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgIHdoaWxlICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgY29sID0gcmFuZG9tQ29sKCk7XG4gICAgICAgICAgICAgICAgcm93ID0gcmFuZG9tUm93KCk7XG4gICAgICAgICAgICAgICAgb3JpZW50YXRpb24gPSByYW5kb21PcmllbnRhdGlvbigpO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGdhbWVib2FyZC5jYW5CZVBsYWNlZChzaGlwLnNpemUsIGNvbCwgcm93LCBvcmllbnRhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwLCBjb2wsIHJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICAgICAgICAgIGdhbWVib2FyZC5yZXNlcnZlU3BhY2UoZ2FtZWJvYXJkLCBjb2wsIHJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBodW1hblNoaXBzLnB1c2goc2hpcCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgcmFuZG9taXplU2hpcHNQbGFjZW1lbnQgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGdhbWVib2FyZC5jbGVhckJvYXJkKCk7XG4gICAgICAgIHJhbmRvbVBsYWNlbWVudChnYW1lYm9hcmQpO1xuICAgICAgICB1aS5yZWZyZXNoQm9hcmQoZ2FtZWJvYXJkKTtcbiAgICAgICAgaWYgKGdhbWVib2FyZCA9PT0gaHVtYW5HYW1lYm9hcmQpIHtcbiAgICAgICAgICAgIHVpLmNyZWF0ZVNoaXBPdmVybGF5KGdhbWVib2FyZCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHBpY2tHYW1lTW9kZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKHVpLmNWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgIHJhbmRvbWl6ZVNoaXBzUGxhY2VtZW50KGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgICAgIHJhbmRvbWl6ZVNoaXBzUGxhY2VtZW50KGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgICAgIGlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgY29tcHV0ZXJWc0NvbXB1dGVyTW9kZSgpO1xuICAgICAgICAgICAgdWkucmVmcmVzaEJvYXJkKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc3RhcnQgPSAoKSA9PiB7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChodW1hbkdhbWVib2FyZCk7XG4gICAgICAgIHJhbmRvbWl6ZVNoaXBzUGxhY2VtZW50KGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHBsYXllclZzQ29tcHV0ZXJNb2RlKCk7XG4gICAgfTtcbiAgICBjb25zdCByZXN0YXJ0ID0gKCkgPT4ge1xuICAgICAgICBpc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICBodW1hbi5zZXRQcmV2SGl0KG51bGwpO1xuICAgICAgICBodW1hbi5zZXRMYXN0SGl0KG51bGwpO1xuICAgICAgICBjb21wdXRlci5zZXRQcmV2SGl0KG51bGwpO1xuICAgICAgICBjb21wdXRlci5zZXRMYXN0SGl0KG51bGwpO1xuICAgICAgICBodW1hbkdhbWVib2FyZC5jbGVhckJvYXJkKCk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLmNsZWFyQm9hcmQoKTtcbiAgICAgICAgcG9wdWxhdGVTaGlwcygpO1xuICAgICAgICB1aS5yZWZyZXNoQm9hcmQoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICB1aS5yZWZyZXNoQm9hcmQoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICB1aS5jcmVhdGVTaGlwT3ZlcmxheShjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIGRyYWdBbmREcm9wKGh1bWFuR2FtZWJvYXJkLCBjb21wdXRlckdhbWVib2FyZCwgaHVtYW5TaGlwcyk7XG4gICAgICAgIHVpLmNhbkJlU3RhcnRlZCgpO1xuICAgICAgICBwaWNrR2FtZU1vZGUoKTtcbiAgICB9O1xuICAgIGNvbnN0IG5ld0dhbWUgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdWkuZ2V0U3BlZWRWYWx1ZSgpKSk7XG4gICAgICAgIGlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICByZXN0YXJ0KCk7XG4gICAgfSk7XG4gICAgY29uc3QgaW5pdCA9ICgpID0+IHtcbiAgICAgICAgdWkuc2V0SW5pdE1lc3NhZ2UoKTtcbiAgICAgICAgaHVtYW5HYW1lYm9hcmQuZ2VuZXJhdGVBcnJheSgpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5nZW5lcmF0ZUFycmF5KCk7XG4gICAgICAgIHVpLnJlbmRlckJvYXJkKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgdWkucmVuZGVyQm9hcmQoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICBwb3B1bGF0ZVNoaXBzKCk7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIHVpLmNyZWF0ZVNoaXBPdmVybGF5KGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgZHJhZ0FuZERyb3AoaHVtYW5HYW1lYm9hcmQsIGNvbXB1dGVyR2FtZWJvYXJkLCBodW1hblNoaXBzKTtcbiAgICAgICAgdWkuY2FuQmVTdGFydGVkKCk7XG4gICAgICAgIHBpY2tHYW1lTW9kZSgpO1xuICAgICAgICB1aS5wVmNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH07XG4gICAgcmV0dXJuIHsgaW5pdCwgcmVuZXcsIGh1bWFuR2FtZWJvYXJkLCBjb21wdXRlckdhbWVib2FyZCwgcmVzdGFydCwgbmV3R2FtZSwgc3RhcnQsIHJhbmRvbWl6ZVNoaXBzUGxhY2VtZW50LCBodW1hblNoaXBzIH07XG59KSgpO1xuZXhwb3J0IGRlZmF1bHQgY29udHJvbGxlcjtcbiIsImltcG9ydCAnbm9ybWFsaXplLmNzcyc7XG5pbXBvcnQgJy4vc3R5bGUvc3R5bGUuY3NzJztcbmltcG9ydCBjb250cm9sbGVyIGZyb20gJy4vbW9kdWxlcy9jb250cm9sbGVyJztcbmNvbnRyb2xsZXIuaW5pdCgpO1xuIl0sIm5hbWVzIjpbImNvbHMiLCJyb3dzIiwiYXJyYXkiLCJzaGlwc1BsYWNlZCIsImdldENlbGwiLCJjb2wiLCJyb3ciLCJjb2xJbmRleCIsImluZGV4T2YiLCJyb3dJbmRleCIsInNldENlbGwiLCJuZXdTdGF0dXMiLCJuZXdUYWtlbkJ5Iiwic3RhdHVzIiwidGFrZW5CeSIsImdlbmVyYXRlQXJyYXkiLCJpIiwiaiIsImNsZWFyQm9hcmQiLCJmbGF0IiwiZm9yRWFjaCIsImNlbGwiLCJ1bmRlZmluZWQiLCJsZW5ndGgiLCJyZW1vdmVTaGlwIiwic2hpcCIsImdhbWVib2FyZCIsIm5hbWUiLCJzaGlwSW5kZXgiLCJzcGxpY2UiLCJwbGFjZVNoaXAiLCJvcmllbnRhdGlvbiIsImlzSG9yaXpvbnRhbCIsImNlbGxzIiwic3RhcnQiLCJpc1ZlcnRpY2FsIiwic2hpcENlbGxzIiwic2l6ZSIsImN1cnJlbnRDb2wiLCJjdXJyZW50Um93IiwicHVzaCIsInJlY2VpdmVBdHRhY2siLCJoaXQiLCJyZWNlaXZlQXJvdW5kIiwicmVzZXJ2ZVNwYWNlIiwiZmlsdGVyIiwiYyIsImRpcmVjdGlvbiIsIm5ld0NvbCIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImNoYXJDb2RlQXQiLCJuZXdSb3ciLCJOdW1iZXIiLCJ0b1N0cmluZyIsInJlc2VydmVTcGFjZUZvckFsbCIsImhpdEJ1dE5vdFN1bmsiLCJzb21lIiwiaXNTdW5rIiwiY2FuQmVTdW5rIiwic2lua1NoaXAiLCJhbGxTdW5rIiwidGFrZW5CeUNlbGxzIiwiZXZlcnkiLCJjYW5CZVBsYWNlZCIsImFyZUVtcHR5IiwiaXRlbSIsInJlbW92ZVJlc2VydmVkU3BhY2UiLCJoaXRDb3VudCIsInJvdGF0ZSIsInRoaXMiLCJwbGF5QXVkaW8iLCJhdWRpbyIsIk9iamVjdCIsImtleXMiLCJrZXkiLCJwbGF5U291bmQiLCJwbGF5IiwiY3VycmVudFRpbWUiLCJwYXVzZSIsImNhbGwiLCJtaXNzIiwiQXVkaW8iLCJzdW5rIiwiZ2FtZU92ZXIiLCJkcm9wIiwicmFuZG9tIiwic2VsZWN0IiwidGljayIsImdyYWIiLCJsb2FkIiwicHJldkhpdCIsImxhc3RIaXQiLCJyYW5nZSIsImdvUmlnaHQiLCJnb0Rvd24iLCJmaW5pc2hpbmdBdHRhY2siLCJzZXRQcmV2SGl0Iiwic2V0TGFzdEhpdCIsIm5ld1ByZXZIaXQiLCJuZXdMYXN0SGl0IiwiYXR0YWNrIiwicmVzdWx0IiwicmFuZG9tQXR0YWNrIiwicmFuZG9tQ29sIiwicmFuZG9tUm93IiwiTWF0aCIsImZsb29yIiwiY2VpbCIsImZvbGxvd3VwQXR0YWNrIiwidmFsaWREaXJlY3Rpb25zIiwicmFuZG9tRGlyZWN0aW9uIiwiZ2V0UHJldkhpdCIsImdldExhc3RIaXQiLCJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInZhbHVlIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJkb25lIiwidGhlbiIsImFwcGx5IiwiZmlyc3RHYW1lYm9hcmQiLCJzZWNvbmRHYW1lYm9hcmQiLCJzaGlwcyIsImZpcnN0Qm9hcmRFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2Vjb25kQm9hcmRFbGVtZW50IiwiZmlyc3RCb2FyZENlbGxzIiwicXVlcnlTZWxlY3RvckFsbCIsInNlY29uZEJvYXJkQ2VsbHMiLCJzaGlwTmFtZSIsInNoaXBTaXplIiwic2hpcE9iaiIsImdyYWJQb2ludFgiLCJncmFiUG9pbnRZIiwiaGlnaGxpZ2h0ZWRDZWxscyIsInNoaXBOYW1lVG9PYmoiLCJjYXJyaWVyIiwiYmF0dGxlc2hpcCIsImRlc3Ryb3llciIsInN1Ym1hcmluZSIsInBhdHJvbGJvYXQiLCJsYXN0RHJhZ2dlZCIsImRyYWdnYWJsZXMiLCJnZXROb25TaGlwQ2VsbHMiLCJib2FyZENlbGxzIiwiQXJyYXkiLCJmcm9tIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJub25TaGlwQ2VsbHMiLCJnZXRMYXN0U2hpcFNpemVFbGVtZW50cyIsInNsaWNlIiwibWluIiwiZ2V0R2FtZWJvYXJkIiwidGFyZ2V0IiwiYm9hcmRJZCIsImNsb3Nlc3QiLCJpZCIsInNldFNoaXBBdHRyaWJ1dGVzIiwiZ2V0QXR0cmlidXRlIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJyZW1vdmVIaWdobGlnaHQiLCJoaWdobGlnaHRlZENlbGwiLCJyZW1vdmUiLCJpc0JvYXJkVmFsaWQiLCJoYW5kbGVNb3VzZWRvd24iLCJ0YXJnZXRTaGlwTmFtZSIsInJlbWFpbmluZ1NoaXBzIiwidG9Mb3dlckNhc2UiLCJyZXNlcnZlU3BhY2VGb3JSZW1haW5pbmdTaGlwcyIsInJlbmV3Iiwic2V0SW5pdE1lc3NhZ2UiLCJidXR0b24iLCJoYW5kbGVEcmFnU3RhcnQiLCJzZXRUaW1lb3V0Iiwic3R5bGUiLCJ2aXNpYmlsaXR5IiwiY2xlYXJTaGlwIiwiaGFuZGxlRHJhZ092ZXIiLCJpbmRleCIsInByZXZlbnREZWZhdWx0Iiwic3RhcnRDZWxsIiwib2Zmc2V0SGVpZ2h0Iiwib2Zmc2V0V2lkdGgiLCJnZXRTdGFydENlbGwiLCJnZXRCb2FyZENlbGxzIiwidG9IaWdobGlnaHQiLCJjZWxsSW5kZXgiLCJoaWdobGlnaHRDZWxsc09uQm9hcmQiLCJkYXRhc2V0IiwiaXNWYWxpZFBsYWNlbWVudCIsImFkZCIsImhpZ2hsaWdodENlbGxzIiwiaGFuZGxlRHJhZ0xlYXZlIiwiaGFuZGxlRHJvcCIsImxhc3QiLCJwbGFjZVNoaXBPbkJvYXJkIiwiY2FuQmVTdGFydGVkIiwic2V0U3RhcnRNZXNzYWdlIiwiaGFuZGxlRHJhZ0VuZCIsImJvYXJkIiwicHJldmVudE9mZkJvYXJkUGxhY2VtZW50IiwiZmlsbENlbGxzIiwiaGFuZGxlTW91c2V1cCIsImhhbmRsZVJvdGF0ZSIsImN1cnJlbnQiLCJibG9ja1JpZ2h0Q2xpY2siLCJhZGRFdmVudExpc3RlbmVyc1RvQ2VsbHMiLCJhZGRFdmVudExpc3RlbmVyIiwiZHJhZ2dhYmxlIiwidWkiLCJzdGF0dXNCb3giLCJib2FyZHMiLCJwVmNCdG4iLCJuZXdHYW1lQnRuIiwiY1ZjQnRuIiwic3RhcnRCdG4iLCJyYW5kb21CdG4iLCJhbGxCdG5zIiwic3BlZWRzIiwiZ2V0RWxlbWVudHNCeU5hbWUiLCJzcGVlZFZhbHVlIiwibXV0ZUJ0biIsImlzTXV0ZWQiLCJyZW5kZXJDZWxscyIsImVsZW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiY3JlYXRlQ2VsbCIsImFwcGVuZCIsImdldEJvYXJkSWQiLCJodW1hbkdhbWVib2FyZCIsImNvbXB1dGVyR2FtZWJvYXJkIiwicmVmcmVzaEJvYXJkIiwiaW5uZXJIVE1MIiwiZ2V0VXNlcklucHV0IiwiaGFuZGxlR2FtZU1vZGUiLCJzZWxlY3RlZEVsZW1lbnQiLCJkZXNlbGVjdGVkRWxlbWVudCIsIndhaXRpbmciLCJidG4iLCJkaXNhYmxlZCIsImdldFNwZWVkVmFsdWUiLCJyZXN0YXJ0Iiwic2V0UmVzdGFydE1lc3NhZ2UiLCJib29sIiwiZG9jdW1lbnRFbGVtZW50IiwidG9nZ2xlIiwicmVtb3ZlQm9hcmRQb2ludGVyIiwic2V0U2hpcFN0eWxlIiwic2hpcEVsZW1lbnQiLCJjZWxsU2l6ZSIsImh0bWxFbGVtZW50Iiwicm9vdEZvbnRTaXplIiwicGFyc2VGbG9hdCIsIndpbmRvdyIsImdldENvbXB1dGVkU3R5bGUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwid2lkdGgiLCJoZWlnaHQiLCJzdGF0dXNUZXh0TW9iaWxlIiwic3RhdHVzVGV4dERlc2t0b3AiLCJ0ZXh0Q29udGVudCIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiaW5wdXQiLCJ1bkZpbGxDZWxscyIsInNlY29uZCIsImFsbCIsIm5ld0dhbWUiLCJyYW5kb21pemVTaGlwc1BsYWNlbWVudCIsImh1bWFuU2hpcHMiLCJzcGVlZEJ0biIsImV2ZW50IiwiY2hlY2tlZCIsInNldFNwZWVkVmFsdWUiLCJzcGVha2VySWNvbiIsInNvdW5kIiwidmFsdWVzIiwidm9sdW1lIiwicmVuZGVyQm9hcmQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJoYW5kbGVVc2VySW5wdXQiLCJ1c2VySW5wdXQiLCJvbmNlIiwic2V0Qm9hcmRQb2ludGVyIiwid2hpY2giLCJjcmVhdGVTaGlwT3ZlcmxheSIsImZpcnN0Q2VsbCIsImNyZWF0ZVNoaXBFbGVtZW50IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiYXBwZW5kQ2hpbGQiLCJyZXNpemVIYW5kbGVyIiwic2V0VHVybk1lc3NhZ2VQdkMiLCJpc1BsYXllclR1cm4iLCJzZXRUdXJuTWVzc2FnZUN2QyIsInNldEdhbWVPdmVyTWVzc2FnZVB2QyIsIndobyIsInNldEdhbWVPdmVyTWVzc2FnZUN2QyIsImh1bWFuIiwicGxheWVyIiwiY29tcHV0ZXIiLCJodW1hbkNhcnJpZXIiLCJodW1hbkJhdHRsZXNoaXAiLCJodW1hbkRlc3Ryb3llciIsImh1bWFuU3VibWFyaW5lIiwiaHVtYW5QYXRyb2xib2F0IiwiaXNTdG9wcGVkIiwicG9wdWxhdGVTaGlwcyIsImhhbmRsZUdhbWVPdmVyIiwid2lubmVyIiwiaXNHYW1lT3ZlciIsImNvbXB1dGVyQUkiLCJjcHVUdXJuIiwiYWxsU2hpcHMiLCJyYW5kb21PcmllbnRhdGlvbiIsInJhbmRvbVBsYWNlbWVudCIsInBpY2tHYW1lTW9kZSIsImluaXQiXSwic291cmNlUm9vdCI6IiJ9