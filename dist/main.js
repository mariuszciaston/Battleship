(()=>{"use strict";const t=()=>{const t=["A","B","C","D","E","F","G","H","I","J"],e=["1","2","3","4","5","6","7","8","9","10"],o=[],r=(r,l)=>{const s=t.indexOf(r),a=e.indexOf(l);return-1===s||-1===a?null:o[a][s]},l=(r,l,s,a)=>{const n=t.indexOf(r),i=e.indexOf(l);return-1===n||-1===i?null:(o[i][n].status=s,a&&(o[i][n].takenBy=a),o[i][n])};return(()=>{for(let r=0;r<10;r+=1){o[r]=[];for(let l=0;l<10;l+=1)o[r][l]={col:t[l],row:e[r],status:"empty",takenBy:void 0}}})(),{clearBoard:()=>{for(let t=0;t<10;t+=1)for(let e=0;e<10;e+=1)o[t][e].status="empty",o[t][e].takenBy=void 0},getCell:r,setCell:l,placeShip:(o,s,a,n)=>{const i="horizontal"===n,c=i?t:e,u=c.indexOf(i?s:a);if(u<0||u+o.size>c.length)return!1;for(let t=0;t<o.size;t+=1){const e=i?c[u+t]:s,n=i?a:c[u+t];if("empty"!==r(e,n).status)return!1;l(e,n,"taken",o)}return!0},receiveAttack:(t,e)=>{const o=r(t,e);return"taken"===o.status?(o.takenBy.hit(),l(t,e,"hit"),o.status):"empty"===o.status?(l(t,e,"miss"),o.status):null},sinkShip:(t,e,o)=>{const r=t.getCell(e,o);if(r&&r.takenBy&&r.takenBy.isSunk()){t.array.flat().filter((t=>t.takenBy&&t.takenBy.name===r.takenBy.name)).forEach((e=>{[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0},{col:-1,row:-1},{col:-1,row:1},{col:1,row:-1},{col:1,row:1}].forEach((o=>{const r=String.fromCharCode(e.col.charCodeAt(0)+o.col),l=(Number(e.row)+o.row).toString();t.getCell(r,l)&&t.receiveAttack(r,l)}))}))}},allSunk:()=>{for(let t=0;t<10;t+=1)for(let e=0;e<10;e+=1)if("taken"===o[t][e].status&&!o[t][e].takenBy.isSunk())return!1;return!0},array:o}},e=t=>{let e;return"Carrier"===t&&(e=5),"Battleship"===t&&(e=4),"Destroyer"===t&&(e=3),"Submarine"===t&&(e=3),"Patrol Boat"===t&&(e=2),{name:t,size:e,hitCount:0,isVertical:!1,rotate(){this.isVertical=!this.isVertical},hit(){this.hitCount+=1},isSunk(){return this.hitCount===e}}},o=()=>{const t=["A","B","C","D","E","F","G","H","I","J"];let e=null,o=null;let r=1,l=!0;const s=(t,e,a,n)=>{if(console.log("start finishingAttack prevHit",n),console.log("start finishingAttack lastHit",{col:e,row:a}),n.row===a)if(l){r=1,console.log("goRight");let i=String.fromCharCode(e.charCodeAt(0)+r);for(;t.getCell(i,a)&&"hit"===t.getCell(i,a).status;)r+=1,i=String.fromCharCode(e.charCodeAt(0)+r);if(t.getCell(i,a)&&"hit"!==t.getCell(i,a).status&&"miss"!==t.getCell(i,a).status){t.receiveAttack(i,a);const e=t.getCell(i,a);"hit"===e.status&&(n=o,o={col:e.col,row:e.row}),console.log("prevHit",n),console.log("lastHit",o),console.log("range",r),console.log("---------------"),r+=1}t.getCell(i,a)&&"miss"!==t.getCell(i,a).status||(r=1,l=!1),t.getCell(i,a)||s(t,i,a,n)}else{r=1,console.log("goLeft");let i=String.fromCharCode(e.charCodeAt(0)-r);for(;t.getCell(i,a)&&"hit"===t.getCell(i,a).status;)r+=1,i=String.fromCharCode(e.charCodeAt(0)-r);if(t.getCell(i,a)&&"hit"!==t.getCell(i,a).status&&"miss"!==t.getCell(i,a).status){t.receiveAttack(i,a);const e=t.getCell(i,a);"hit"===e.status&&(n=o,o={col:e.col,row:e.row}),console.log("prevHit",n),console.log("lastHit",o),console.log("range",r),console.log("---------------"),r+=1}t.getCell(i,a)&&"miss"!==t.getCell(i,a).status||(r=1,l=!0),t.getCell(i,a)||s(t,i,a,n)}};return{attack:(t,e,o)=>"hit"!==t.getCell(e,o).status&&"miss"!==t.getCell(e,o).status?t.receiveAttack(e,o):"already shot",randomAttack:l=>{let s,a;do{s=t[Math.floor(Math.random()*t.length)],a=Math.ceil(10*Math.random()).toString()}while("hit"===l.getCell(s,a).status||"miss"===l.getCell(s,a).status);if("hit"!==l.getCell(s,a).status&&"miss"!==l.getCell(s,a).status){const t=l.receiveAttack(s,a),n=l.getCell(s,a);return"hit"===n.status&&(e=o,o={col:n.col,row:n.row},console.log("---------------"),console.log("randomAttack prevHit",e),console.log("randomAttack lastHit",o),console.log("randomAttack range",r)),{result:t,col:s,row:a}}return{result:"already shot",col:s,row:a}},followupAttack:(t,l,s)=>{const a=[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0}].filter((e=>{const o=String.fromCharCode(l.charCodeAt(0)+e.col),r=(Number(s)+e.row).toString(),a=t.getCell(o,r);return!(!a||"miss"===a.status||"hit"===a.status)}));if(a.length>0){const n=a[Math.floor(Math.random()*a.length)],i=String.fromCharCode(l.charCodeAt(0)+n.col),c=(Number(s)+n.row).toString();t.receiveAttack(i,c),r=1;const u=t.getCell(i,c);"hit"===u.status&&(e=o,o={col:u.col,row:u.row},console.log("---------------"),console.log("followupAttack prevHit",e),console.log("followupAttack lastHit",o),console.log("followupAttack range",r))}else console.log("Nie ma dostępnych kierunków do ataku")},finishingAttack:s,prevHit:e,lastHit:o,getPrevHit:()=>e,getLastHit:()=>o,setPrevHit:t=>{e=t},setLastHit:t=>{o=t}}};var r=function(t,e,o,r){return new(o||(o=Promise))((function(l,s){function a(t){try{i(r.next(t))}catch(t){s(t)}}function n(t){try{i(r.throw(t))}catch(t){s(t)}}function i(t){var e;t.done?l(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(a,n)}i((r=r.apply(t,e||[])).next())}))};const l=(()=>{const t=document.querySelector("#wrapper"),e=document.createElement("div");e.id="boards",t.prepend(e);const o=document.querySelector("#playerVsComputer"),l=document.querySelector("#computerVsComputer"),s=document.querySelector("#newGame"),a=(t,e)=>{t.array.forEach((t=>{t.forEach((t=>{const o=(t=>{const e=document.createElement("div");return e.classList.add("cell"),e.classList.add(t.status),e.setAttribute("data-col",t.col),e.setAttribute("data-row",t.row),e})(t);e.append(o)}))}))},i=t=>{if(!t.target.classList.contains("hit")&&!t.target.classList.contains("miss")){return{col:t.target.getAttribute("data-col"),row:t.target.getAttribute("data-row")}}};const c=(t,e)=>{e.classList.remove("selected"),t.classList.contains("selected")||(t.classList.add("selected"),n.restart())};return o.addEventListener("click",(()=>c(o,l))),l.addEventListener("click",(()=>c(l,o))),s.addEventListener("click",(()=>r(void 0,void 0,void 0,(function*(){s.disabled=!0,s.textContent="Restarting",yield n.newGame(),s.textContent="New Game",s.disabled=!1})))),{renderBoard:t=>{const o=document.createElement("div");o.classList.add("board"),t===n.humanGameboard?o.id="firstBoard":t===n.computerGameboard&&(o.id="secondBoard"),a(t,o),e.append(o)},refreshBoard:t=>{const e=t===n.humanGameboard?"firstBoard":"secondBoard",o=document.querySelector(`#${e}`);o.innerHTML="",a(t,o)},handleUserInput:function(){return r(this,void 0,void 0,(function*(){const t=document.querySelectorAll("#secondBoard .cell");let e;do{e=yield new Promise((e=>{t.forEach((t=>{t.classList.contains("hit")||t.classList.contains("miss")||t.addEventListener("click",(t=>{e(i(t))}),{once:!0})}))}))}while(!e);return{col:e.col.toString(),row:e.row.toString()}}))},pVcBtn:o,cVcBtn:l}})(),s=l;var a=function(t,e,o,r){return new(o||(o=Promise))((function(l,s){function a(t){try{i(r.next(t))}catch(t){s(t)}}function n(t){try{i(r.throw(t))}catch(t){s(t)}}function i(t){var e;t.done?l(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(a,n)}i((r=r.apply(t,e||[])).next())}))};const n=(()=>{const r=t(),l=t(),n=o(),i=o();let c=!1;const u=e("Carrier"),d=e("Battleship"),g=e("Destroyer"),h=e("Submarine"),f=e("Patrol Boat"),m=e("Carrier"),p=e("Battleship"),C=e("Destroyer"),w=e("Submarine"),k=e("Patrol Boat"),v=()=>{r.placeShip(u,"A","1","horizontal"),r.placeShip(d,"A","3","horizontal"),r.placeShip(g,"A","5","horizontal"),r.placeShip(h,"A","7","horizontal"),r.placeShip(f,"A","9","horizontal"),l.placeShip(m,"A","1","vertical"),l.placeShip(p,"C","1","vertical"),l.placeShip(C,"E","1","vertical"),l.placeShip(w,"G","1","vertical"),l.placeShip(k,"I","1","vertical")},H=()=>l.allSunk()?(console.log("All computer ships are sunk. Human player won!"),!0):!!r.allSunk()&&(console.log("All human ships are sunk. Computer player won!"),!0),y=t=>{if(console.log("start computerAI",i.getPrevHit()),(t=>t.array.flat().some((t=>"hit"===t.status&&!1===t.takenBy.isSunk())))(t))null!==i.getPrevHit()&&null!==i.getLastHit()&&t.getCell(i.getLastHit().col,i.getLastHit().row).takenBy.hitCount>=2&&t.getCell(i.getLastHit().col,i.getLastHit().row).takenBy.hitCount<=4?(console.log("FINISH: >= 2 trafienia w statek",i.getPrevHit()),i.finishingAttack(t,i.getLastHit().col,i.getLastHit().row,i.getPrevHit()),t.sinkShip(t,i.getLastHit().col,i.getLastHit().row)):1===t.getCell(i.getLastHit().col,i.getLastHit().row).takenBy.hitCount&&(i.followupAttack(t,i.getLastHit().col,i.getLastHit().row),t.sinkShip(t,i.getLastHit().col,i.getLastHit().row));else{const{col:e,row:o}=i.randomAttack(t);"hit"===t.getCell(e,o).status?(console.log("Cell hit, assigning new values to prevHit and lastHit"),i.setPrevHit(i.getLastHit()),i.setLastHit({col:e,row:o}),console.log("New value of prevHit:",i.getPrevHit())):console.log("Cell not hit, prevHit remains:",i.getPrevHit()),"hit"===t.getCell(e,o).status&&t.getCell(e,o).takenBy.isSunk()&&(t.sinkShip(t,e,o),i.setPrevHit(null),i.setLastHit(null),H()&&console.log("koniec"))}},S=()=>(console.log("start pickGameMode",i.getPrevHit()),s.pVcBtn.classList.contains("selected")?a(void 0,void 0,void 0,(function*(){console.log("start playerVsComputerMode",i.getPrevHit());let t=!0;for(;!H()&&!c;){if(t){const{col:e,row:o}=yield s.handleUserInput();n.attack(l,e,o),l.sinkShip(l,e,o),s.refreshBoard(l),t=!1}if(!t){if(yield new Promise((t=>setTimeout(t,100))),!s.pVcBtn.classList.contains("selected")||c)break;console.log("before computerAI",i.getPrevHit()),y(r),s.refreshBoard(r),t=!0}}c=!1})):s.cVcBtn.classList.contains("selected")?a(void 0,void 0,void 0,(function*(){let t=!0;for(;!H()&&!c;){if(t){if(yield new Promise((t=>setTimeout(t,500))),!s.cVcBtn.classList.contains("selected")||c)break;const{col:e,row:o}=i.randomAttack(r);r.sinkShip(r,e,o),s.refreshBoard(r),t=!1}if(!t){if(yield new Promise((t=>setTimeout(t,500))),!s.cVcBtn.classList.contains("selected")||c)break;const{col:e,row:o}=n.randomAttack(l);l.sinkShip(l,e,o),s.refreshBoard(l),t=!0}}c=!1})):void 0),B=()=>{i.setPrevHit(null),i.setLastHit(null),r.clearBoard(),l.clearBoard(),v(),s.refreshBoard(r),s.refreshBoard(l),S()};return{start:()=>{v(),s.renderBoard(r),s.renderBoard(l),console.log("before pickGameMode",i.getPrevHit()),S()},humanGameboard:r,computerGameboard:l,newGame:()=>a(void 0,void 0,void 0,(function*(){c=!0,yield new Promise((t=>setTimeout(t,1e3))),c=!1,B()})),restart:B}})();n.start()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WmxCLEdBQ0osSUFDNERBLFVBQy9ELEVBeEtrQixHQ1ZuQixFQUFXakcsTyIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9nYW1lYm9hcmQudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL3NoaXAudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL3BsYXllci50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvdWkudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL2NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBnYW1lYm9hcmRGYWN0b3J5ID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvbHMgPSBbJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onXTtcbiAgICBjb25zdCByb3dzID0gWycxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsICcxMCddO1xuICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgY29uc3QgZ2VuZXJhdGVBcnJheSA9ICgpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSArPSAxKSB7XG4gICAgICAgICAgICBhcnJheVtpXSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaiArPSAxKSB7XG4gICAgICAgICAgICAgICAgYXJyYXlbaV1bal0gPSB7IGNvbDogY29sc1tqXSwgcm93OiByb3dzW2ldLCBzdGF0dXM6ICdlbXB0eScsIHRha2VuQnk6IHVuZGVmaW5lZCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBjbGVhckJvYXJkID0gKCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGogKz0gMSkge1xuICAgICAgICAgICAgICAgIGFycmF5W2ldW2pdLnN0YXR1cyA9ICdlbXB0eSc7XG4gICAgICAgICAgICAgICAgYXJyYXlbaV1bal0udGFrZW5CeSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgZ2V0Q2VsbCA9IChjb2wsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBjb2xJbmRleCA9IGNvbHMuaW5kZXhPZihjb2wpO1xuICAgICAgICBjb25zdCByb3dJbmRleCA9IHJvd3MuaW5kZXhPZihyb3cpO1xuICAgICAgICBpZiAoY29sSW5kZXggPT09IC0xIHx8IHJvd0luZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFycmF5W3Jvd0luZGV4XVtjb2xJbmRleF07XG4gICAgfTtcbiAgICBjb25zdCBzZXRDZWxsID0gKGNvbCwgcm93LCBuZXdTdGF0dXMsIG5ld1Rha2VuQnkpID0+IHtcbiAgICAgICAgY29uc3QgY29sSW5kZXggPSBjb2xzLmluZGV4T2YoY29sKTtcbiAgICAgICAgY29uc3Qgcm93SW5kZXggPSByb3dzLmluZGV4T2Yocm93KTtcbiAgICAgICAgaWYgKGNvbEluZGV4ID09PSAtMSB8fCByb3dJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGFycmF5W3Jvd0luZGV4XVtjb2xJbmRleF0uc3RhdHVzID0gbmV3U3RhdHVzO1xuICAgICAgICBpZiAobmV3VGFrZW5CeSkge1xuICAgICAgICAgICAgYXJyYXlbcm93SW5kZXhdW2NvbEluZGV4XS50YWtlbkJ5ID0gbmV3VGFrZW5CeTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyYXlbcm93SW5kZXhdW2NvbEluZGV4XTtcbiAgICB9O1xuICAgIGNvbnN0IHBsYWNlU2hpcCA9IChzaGlwLCBjb2wsIHJvdywgb3JpZW50YXRpb24pID0+IHtcbiAgICAgICAgY29uc3QgaXNIb3Jpem9udGFsID0gb3JpZW50YXRpb24gPT09ICdob3Jpem9udGFsJztcbiAgICAgICAgY29uc3QgY2VsbHMgPSBpc0hvcml6b250YWwgPyBjb2xzIDogcm93cztcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBjZWxscy5pbmRleE9mKGlzSG9yaXpvbnRhbCA/IGNvbCA6IHJvdyk7XG4gICAgICAgIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgKyBzaGlwLnNpemUgPiBjZWxscy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAuc2l6ZTsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q29sID0gaXNIb3Jpem9udGFsID8gY2VsbHNbc3RhcnQgKyBpXSA6IGNvbDtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRSb3cgPSBpc0hvcml6b250YWwgPyByb3cgOiBjZWxsc1tzdGFydCArIGldO1xuICAgICAgICAgICAgaWYgKGdldENlbGwoY3VycmVudENvbCwgY3VycmVudFJvdykuc3RhdHVzICE9PSAnZW1wdHknKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0Q2VsbChjdXJyZW50Q29sLCBjdXJyZW50Um93LCAndGFrZW4nLCBzaGlwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoY29sLCByb3cpID0+IHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGdldENlbGwoY29sLCByb3cpO1xuICAgICAgICBpZiAoY2VsbC5zdGF0dXMgPT09ICd0YWtlbicpIHtcbiAgICAgICAgICAgIGNlbGwudGFrZW5CeS5oaXQoKTtcbiAgICAgICAgICAgIHNldENlbGwoY29sLCByb3csICdoaXQnKTtcbiAgICAgICAgICAgIHJldHVybiBjZWxsLnN0YXR1cztcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2VsbC5zdGF0dXMgPT09ICdlbXB0eScpIHtcbiAgICAgICAgICAgIHNldENlbGwoY29sLCByb3csICdtaXNzJyk7XG4gICAgICAgICAgICByZXR1cm4gY2VsbC5zdGF0dXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBjb25zdCBzaW5rU2hpcCA9IChnYW1lYm9hcmQsIGNvbCwgcm93KSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIHJvdyk7XG4gICAgICAgIGlmIChjZWxsICYmIGNlbGwudGFrZW5CeSAmJiBjZWxsLnRha2VuQnkuaXNTdW5rKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBDZWxscyA9IGdhbWVib2FyZC5hcnJheS5mbGF0KCkuZmlsdGVyKChjKSA9PiBjLnRha2VuQnkgJiYgYy50YWtlbkJ5Lm5hbWUgPT09IGNlbGwudGFrZW5CeS5uYW1lKTtcbiAgICAgICAgICAgIHNoaXBDZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDAsIHJvdzogLTEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDAsIHJvdzogMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogMCB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMSwgcm93OiAwIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAtMSwgcm93OiAtMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMSwgcm93OiAtMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMSwgcm93OiAxIH0sXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb25zLmZvckVhY2goKGRpcmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNlbGwuY29sLmNoYXJDb2RlQXQoMCkgKyBkaXJlY3Rpb24uY29sKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Um93ID0gKE51bWJlcihjZWxsLnJvdykgKyBkaXJlY3Rpb24ucm93KS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCBuZXdSb3cpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhuZXdDb2wsIG5ld1Jvdyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBhbGxTdW5rID0gKCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGogKz0gMSkge1xuICAgICAgICAgICAgICAgIGlmIChhcnJheVtpXVtqXS5zdGF0dXMgPT09ICd0YWtlbicgJiYgIWFycmF5W2ldW2pdLnRha2VuQnkuaXNTdW5rKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIGdlbmVyYXRlQXJyYXkoKTtcbiAgICByZXR1cm4geyBjbGVhckJvYXJkLCBnZXRDZWxsLCBzZXRDZWxsLCBwbGFjZVNoaXAsIHJlY2VpdmVBdHRhY2ssIHNpbmtTaGlwLCBhbGxTdW5rLCBhcnJheSB9O1xufTtcbmV4cG9ydCBkZWZhdWx0IGdhbWVib2FyZEZhY3Rvcnk7XG4iLCJjb25zdCBzaGlwRmFjdG9yeSA9IChuYW1lKSA9PiB7XG4gICAgbGV0IHNpemU7XG4gICAgaWYgKG5hbWUgPT09ICdDYXJyaWVyJykge1xuICAgICAgICBzaXplID0gNTtcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09ICdCYXR0bGVzaGlwJykge1xuICAgICAgICBzaXplID0gNDtcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09ICdEZXN0cm95ZXInKSB7XG4gICAgICAgIHNpemUgPSAzO1xuICAgIH1cbiAgICBpZiAobmFtZSA9PT0gJ1N1Ym1hcmluZScpIHtcbiAgICAgICAgc2l6ZSA9IDM7XG4gICAgfVxuICAgIGlmIChuYW1lID09PSAnUGF0cm9sIEJvYXQnKSB7XG4gICAgICAgIHNpemUgPSAyO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lLFxuICAgICAgICBzaXplLFxuICAgICAgICBoaXRDb3VudDogMCxcbiAgICAgICAgaXNWZXJ0aWNhbDogZmFsc2UsXG4gICAgICAgIHJvdGF0ZSgpIHtcbiAgICAgICAgICAgIHRoaXMuaXNWZXJ0aWNhbCA9ICF0aGlzLmlzVmVydGljYWw7XG4gICAgICAgIH0sXG4gICAgICAgIGhpdCgpIHtcbiAgICAgICAgICAgIHRoaXMuaGl0Q291bnQgKz0gMTtcbiAgICAgICAgfSxcbiAgICAgICAgaXNTdW5rKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGl0Q291bnQgPT09IHNpemU7XG4gICAgICAgIH0sXG4gICAgfTtcbn07XG5leHBvcnQgZGVmYXVsdCBzaGlwRmFjdG9yeTtcbiIsImNvbnN0IHBsYXllckZhY3RvcnkgPSAoKSA9PiB7XG4gICAgY29uc3QgY29scyA9IFsnQScsICdCJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdIJywgJ0knLCAnSiddO1xuICAgIGxldCBwcmV2SGl0ID0gbnVsbDtcbiAgICBsZXQgbGFzdEhpdCA9IG51bGw7XG4gICAgY29uc3QgYXR0YWNrID0gKGdhbWVib2FyZCwgY29sLCByb3cpID0+IHtcbiAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgcmV0dXJuIGdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKGNvbCwgcm93KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ2FscmVhZHkgc2hvdCc7XG4gICAgfTtcbiAgICBjb25zdCByYW5kb21BdHRhY2sgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGxldCByYW5kb21Db2w7XG4gICAgICAgIGxldCByYW5kb21Sb3c7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIHJhbmRvbUNvbCA9IGNvbHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY29scy5sZW5ndGgpXTtcbiAgICAgICAgICAgIHJhbmRvbVJvdyA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogMTApLnRvU3RyaW5nKCk7XG4gICAgICAgIH0gd2hpbGUgKGdhbWVib2FyZC5nZXRDZWxsKHJhbmRvbUNvbCwgcmFuZG9tUm93KS5zdGF0dXMgPT09ICdoaXQnIHx8IGdhbWVib2FyZC5nZXRDZWxsKHJhbmRvbUNvbCwgcmFuZG9tUm93KS5zdGF0dXMgPT09ICdtaXNzJyk7XG4gICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChyYW5kb21Db2wsIHJhbmRvbVJvdykuc3RhdHVzICE9PSAnaGl0JyAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChyYW5kb21Db2wsIHJhbmRvbVJvdykuc3RhdHVzICE9PSAnbWlzcycpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKHJhbmRvbUNvbCwgcmFuZG9tUm93KTtcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBnYW1lYm9hcmQuZ2V0Q2VsbChyYW5kb21Db2wsIHJhbmRvbVJvdyk7XG4gICAgICAgICAgICBpZiAoY2VsbC5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgcHJldkhpdCA9IGxhc3RIaXQ7XG4gICAgICAgICAgICAgICAgbGFzdEhpdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29sOiBjZWxsLmNvbCxcbiAgICAgICAgICAgICAgICAgICAgcm93OiBjZWxsLnJvdyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLS0nKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmFuZG9tQXR0YWNrIHByZXZIaXQnLCBwcmV2SGl0KTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmFuZG9tQXR0YWNrIGxhc3RIaXQnLCBsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmFuZG9tQXR0YWNrIHJhbmdlJywgcmFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgcmVzdWx0LCBjb2w6IHJhbmRvbUNvbCwgcm93OiByYW5kb21Sb3cgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyByZXN1bHQ6ICdhbHJlYWR5IHNob3QnLCBjb2w6IHJhbmRvbUNvbCwgcm93OiByYW5kb21Sb3cgfTtcbiAgICB9O1xuICAgIGNvbnN0IGZvbGxvd3VwQXR0YWNrID0gKGdhbWVib2FyZCwgY29sLCByb3cpID0+IHtcbiAgICAgICAgY29uc3QgZGlyZWN0aW9ucyA9IFtcbiAgICAgICAgICAgIHsgY29sOiAwLCByb3c6IC0xIH0sXG4gICAgICAgICAgICB7IGNvbDogMCwgcm93OiAxIH0sXG4gICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogMCB9LFxuICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogMCB9LFxuICAgICAgICBdO1xuICAgICAgICBjb25zdCB2YWxpZERpcmVjdGlvbnMgPSBkaXJlY3Rpb25zLmZpbHRlcigoZGlyZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApICsgZGlyZWN0aW9uLmNvbCk7XG4gICAgICAgICAgICBjb25zdCBuZXdSb3cgPSAoTnVtYmVyKHJvdykgKyBkaXJlY3Rpb24ucm93KS50b1N0cmluZygpO1xuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgbmV3Um93KTtcbiAgICAgICAgICAgIGlmIChjZWxsICYmIGNlbGwuc3RhdHVzICE9PSAnbWlzcycgJiYgY2VsbC5zdGF0dXMgIT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodmFsaWREaXJlY3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJhbmRvbURpcmVjdGlvbiA9IHZhbGlkRGlyZWN0aW9uc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB2YWxpZERpcmVjdGlvbnMubGVuZ3RoKV07XG4gICAgICAgICAgICBjb25zdCBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApICsgcmFuZG9tRGlyZWN0aW9uLmNvbCk7XG4gICAgICAgICAgICBjb25zdCBuZXdSb3cgPSAoTnVtYmVyKHJvdykgKyByYW5kb21EaXJlY3Rpb24ucm93KS50b1N0cmluZygpO1xuICAgICAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2sobmV3Q29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgbmV3Um93KTtcbiAgICAgICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICBwcmV2SGl0ID0gbGFzdEhpdDtcbiAgICAgICAgICAgICAgICBsYXN0SGl0ID0ge1xuICAgICAgICAgICAgICAgICAgICBjb2w6IGNlbGwuY29sLFxuICAgICAgICAgICAgICAgICAgICByb3c6IGNlbGwucm93LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLScpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmb2xsb3d1cEF0dGFjayBwcmV2SGl0JywgcHJldkhpdCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZvbGxvd3VwQXR0YWNrIGxhc3RIaXQnLCBsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZm9sbG93dXBBdHRhY2sgcmFuZ2UnLCByYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTmllIG1hIGRvc3TEmXBueWNoIGtpZXJ1bmvDs3cgZG8gYXRha3UnKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgbGV0IHJhbmdlID0gMTtcbiAgICBsZXQgZ29SaWdodCA9IHRydWU7XG4gICAgY29uc3QgZmluaXNoaW5nQXR0YWNrID0gKGdhbWVib2FyZCwgY29sLCByb3csIHByZXZIaXQpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ3N0YXJ0IGZpbmlzaGluZ0F0dGFjayBwcmV2SGl0JywgcHJldkhpdCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzdGFydCBmaW5pc2hpbmdBdHRhY2sgbGFzdEhpdCcsIHsgY29sLCByb3cgfSk7XG4gICAgICAgIGlmIChwcmV2SGl0LnJvdyA9PT0gcm93KSB7XG4gICAgICAgICAgICAvLyBob3Jpem9udGFsIHNoaXAgY2FzZVxuICAgICAgICAgICAgaWYgKGdvUmlnaHQpIHtcbiAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2dvUmlnaHQnKTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Q29sID0gU3RyaW5nLmZyb21DaGFyQ29kZShjb2wuY2hhckNvZGVBdCgwKSArIHJhbmdlKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgKyByYW5nZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykgJiYgZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpLnN0YXR1cyAhPT0gJ2hpdCcgJiYgZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpLnN0YXR1cyAhPT0gJ21pc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKG5ld0NvbCwgcm93KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldkhpdCA9IGxhc3RIaXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0SGl0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbDogY2VsbC5jb2wsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93OiBjZWxsLnJvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3ByZXZIaXQnLCBwcmV2SGl0KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xhc3RIaXQnLCBsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JhbmdlJywgcmFuZ2UpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnLS0tLS0tLS0tLS0tLS0tJyk7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpIHx8IGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgPT09ICdtaXNzJykge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGdvUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykpIHtcbiAgICAgICAgICAgICAgICAgICAgZmluaXNoaW5nQXR0YWNrKGdhbWVib2FyZCwgbmV3Q29sLCByb3csIHByZXZIaXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJhbmdlID0gMTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZ29MZWZ0Jyk7XG4gICAgICAgICAgICAgICAgbGV0IG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgLSByYW5nZSk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgICAgICBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApIC0gcmFuZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhuZXdDb2wsIHJvdyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZIaXQgPSBsYXN0SGl0O1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEhpdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2w6IGNlbGwuY29sLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdzogY2VsbC5yb3csXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwcmV2SGl0JywgcHJldkhpdCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsYXN0SGl0JywgbGFzdEhpdCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyYW5nZScsIHJhbmdlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLScpO1xuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KSB8fCBnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzID09PSAnbWlzcycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgICAgICAgICBnb1JpZ2h0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykpIHtcbiAgICAgICAgICAgICAgICAgICAgZmluaXNoaW5nQXR0YWNrKGdhbWVib2FyZCwgbmV3Q29sLCByb3csIHByZXZIaXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHZlcnRpY2FsIHNoaXAgY2FzZVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBnZXRQcmV2SGl0ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gcHJldkhpdDtcbiAgICB9O1xuICAgIGNvbnN0IGdldExhc3RIaXQgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBsYXN0SGl0O1xuICAgIH07XG4gICAgY29uc3Qgc2V0UHJldkhpdCA9IChuZXdQcmV2SGl0KSA9PiB7XG4gICAgICAgIHByZXZIaXQgPSBuZXdQcmV2SGl0O1xuICAgIH07XG4gICAgY29uc3Qgc2V0TGFzdEhpdCA9IChuZXdMYXN0SGl0KSA9PiB7XG4gICAgICAgIGxhc3RIaXQgPSBuZXdMYXN0SGl0O1xuICAgIH07XG4gICAgcmV0dXJuIHsgYXR0YWNrLCByYW5kb21BdHRhY2ssIGZvbGxvd3VwQXR0YWNrLCBmaW5pc2hpbmdBdHRhY2ssIHByZXZIaXQsIGxhc3RIaXQsIGdldFByZXZIaXQsIGdldExhc3RIaXQsIHNldFByZXZIaXQsIHNldExhc3RIaXQgfTtcbn07XG5leHBvcnQgZGVmYXVsdCBwbGF5ZXJGYWN0b3J5O1xuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgY29udHJvbGxlciBmcm9tICcuL2NvbnRyb2xsZXInO1xuY29uc3QgdWkgPSAoKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjd3JhcHBlcicpO1xuICAgIGNvbnN0IGJvYXJkcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGJvYXJkcy5pZCA9ICdib2FyZHMnO1xuICAgIHdyYXBwZXIucHJlcGVuZChib2FyZHMpO1xuICAgIGNvbnN0IHBWY0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwbGF5ZXJWc0NvbXB1dGVyJyk7XG4gICAgY29uc3QgY1ZjQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbXB1dGVyVnNDb21wdXRlcicpO1xuICAgIGNvbnN0IG5ld0dhbWVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmV3R2FtZScpO1xuICAgIGNvbnN0IGNyZWF0ZUNlbGwgPSAoY29sKSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdjZWxsJyk7XG4gICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZChjb2wuc3RhdHVzKTtcbiAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29sJywgY29sLmNvbCk7XG4gICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdkYXRhLXJvdycsIGNvbC5yb3cpO1xuICAgICAgICByZXR1cm4gY2VsbDtcbiAgICB9O1xuICAgIGNvbnN0IHJlbmRlckNlbGxzID0gKGdhbWVib2FyZCwgYm9hcmQpID0+IHtcbiAgICAgICAgZ2FtZWJvYXJkLmFycmF5LmZvckVhY2goKHJvdykgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKGNvbCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBjcmVhdGVDZWxsKGNvbCk7XG4gICAgICAgICAgICAgICAgYm9hcmQuYXBwZW5kKGNlbGwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgcmVuZGVyQm9hcmQgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGJvYXJkLmNsYXNzTGlzdC5hZGQoJ2JvYXJkJyk7XG4gICAgICAgIGlmIChnYW1lYm9hcmQgPT09IGNvbnRyb2xsZXIuaHVtYW5HYW1lYm9hcmQpIHtcbiAgICAgICAgICAgIGJvYXJkLmlkID0gJ2ZpcnN0Qm9hcmQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGdhbWVib2FyZCA9PT0gY29udHJvbGxlci5jb21wdXRlckdhbWVib2FyZCkge1xuICAgICAgICAgICAgYm9hcmQuaWQgPSAnc2Vjb25kQm9hcmQnO1xuICAgICAgICB9XG4gICAgICAgIHJlbmRlckNlbGxzKGdhbWVib2FyZCwgYm9hcmQpO1xuICAgICAgICBib2FyZHMuYXBwZW5kKGJvYXJkKTtcbiAgICB9O1xuICAgIGNvbnN0IHJlZnJlc2hCb2FyZCA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgYm9hcmRJZCA9IGdhbWVib2FyZCA9PT0gY29udHJvbGxlci5odW1hbkdhbWVib2FyZCA/ICdmaXJzdEJvYXJkJyA6ICdzZWNvbmRCb2FyZCc7XG4gICAgICAgIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7Ym9hcmRJZH1gKTtcbiAgICAgICAgYm9hcmQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIHJlbmRlckNlbGxzKGdhbWVib2FyZCwgYm9hcmQpO1xuICAgIH07XG4gICAgY29uc3QgZ2V0VXNlcklucHV0ID0gKGUpID0+IHtcbiAgICAgICAgaWYgKCFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpdCcpICYmICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21pc3MnKSkge1xuICAgICAgICAgICAgY29uc3QgY29sID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbCcpO1xuICAgICAgICAgICAgY29uc3Qgcm93ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXJvdycpO1xuICAgICAgICAgICAgcmV0dXJuIHsgY29sLCByb3cgfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgZnVuY3Rpb24gaGFuZGxlVXNlcklucHV0KCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjc2Vjb25kQm9hcmQgLmNlbGwnKTtcbiAgICAgICAgICAgIGxldCB1c2VySW5wdXQ7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgdXNlcklucHV0ID0geWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjZWxsLmNsYXNzTGlzdC5jb250YWlucygnaGl0JykgJiYgIWNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdtaXNzJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShnZXRVc2VySW5wdXQoZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsgb25jZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IHdoaWxlICghdXNlcklucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGNvbCA9IHVzZXJJbnB1dC5jb2wudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHVzZXJJbnB1dC5yb3cudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHJldHVybiB7IGNvbCwgcm93IH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBoYW5kbGVOZXdHYW1lID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIG5ld0dhbWVCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBuZXdHYW1lQnRuLnRleHRDb250ZW50ID0gJ1Jlc3RhcnRpbmcnO1xuICAgICAgICB5aWVsZCBjb250cm9sbGVyLm5ld0dhbWUoKTtcbiAgICAgICAgbmV3R2FtZUJ0bi50ZXh0Q29udGVudCA9ICdOZXcgR2FtZSc7XG4gICAgICAgIG5ld0dhbWVCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9KTtcbiAgICBjb25zdCBoYW5kbGVHYW1lTW9kZSA9IChzZWxlY3RlZEVsZW1lbnQsIGRlc2VsZWN0ZWRFbGVtZW50KSA9PiB7XG4gICAgICAgIGRlc2VsZWN0ZWRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XG4gICAgICAgIGlmICghc2VsZWN0ZWRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICBjb250cm9sbGVyLnJlc3RhcnQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcFZjQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gaGFuZGxlR2FtZU1vZGUocFZjQnRuLCBjVmNCdG4pKTtcbiAgICBjVmNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBoYW5kbGVHYW1lTW9kZShjVmNCdG4sIHBWY0J0bikpO1xuICAgIG5ld0dhbWVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVOZXdHYW1lKTtcbiAgICByZXR1cm4geyByZW5kZXJCb2FyZCwgcmVmcmVzaEJvYXJkLCBoYW5kbGVVc2VySW5wdXQsIHBWY0J0biwgY1ZjQnRuIH07XG59KSgpO1xuZXhwb3J0IGRlZmF1bHQgdWk7XG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCBnYW1lYm9hcmRGYWN0b3J5IGZyb20gJy4vZ2FtZWJvYXJkJztcbmltcG9ydCBzaGlwRmFjdG9yeSBmcm9tICcuL3NoaXAnO1xuaW1wb3J0IHBsYXllckZhY3RvcnkgZnJvbSAnLi9wbGF5ZXInO1xuaW1wb3J0IHVpIGZyb20gJy4vdWknO1xuY29uc3QgY29udHJvbGxlciA9ICgoKSA9PiB7XG4gICAgY29uc3QgaHVtYW5HYW1lYm9hcmQgPSBnYW1lYm9hcmRGYWN0b3J5KCk7XG4gICAgY29uc3QgY29tcHV0ZXJHYW1lYm9hcmQgPSBnYW1lYm9hcmRGYWN0b3J5KCk7XG4gICAgY29uc3QgaHVtYW4gPSBwbGF5ZXJGYWN0b3J5KCk7XG4gICAgY29uc3QgY29tcHV0ZXIgPSBwbGF5ZXJGYWN0b3J5KCk7XG4gICAgbGV0IGlzU3RvcHBlZCA9IGZhbHNlO1xuICAgIGNvbnN0IGh1bWFuQ2FycmllciA9IHNoaXBGYWN0b3J5KCdDYXJyaWVyJyk7XG4gICAgY29uc3QgaHVtYW5CYXR0bGVzaGlwID0gc2hpcEZhY3RvcnkoJ0JhdHRsZXNoaXAnKTtcbiAgICBjb25zdCBodW1hbkRlc3Ryb3llciA9IHNoaXBGYWN0b3J5KCdEZXN0cm95ZXInKTtcbiAgICBjb25zdCBodW1hblN1Ym1hcmluZSA9IHNoaXBGYWN0b3J5KCdTdWJtYXJpbmUnKTtcbiAgICBjb25zdCBodW1hblBhdHJvbGJvYXQgPSBzaGlwRmFjdG9yeSgnUGF0cm9sIEJvYXQnKTtcbiAgICBjb25zdCBjb21wdXRlckNhcnJpZXIgPSBzaGlwRmFjdG9yeSgnQ2FycmllcicpO1xuICAgIGNvbnN0IGNvbXB1dGVyQmF0dGxlc2hpcCA9IHNoaXBGYWN0b3J5KCdCYXR0bGVzaGlwJyk7XG4gICAgY29uc3QgY29tcHV0ZXJEZXN0cm95ZXIgPSBzaGlwRmFjdG9yeSgnRGVzdHJveWVyJyk7XG4gICAgY29uc3QgY29tcHV0ZXJTdWJtYXJpbmUgPSBzaGlwRmFjdG9yeSgnU3VibWFyaW5lJyk7XG4gICAgY29uc3QgY29tcHV0ZXJQYXRyb2xib2F0ID0gc2hpcEZhY3RvcnkoJ1BhdHJvbCBCb2F0Jyk7XG4gICAgY29uc3QgcG9wdWxhdGVHYW1lYm9hcmQgPSAoKSA9PiB7XG4gICAgICAgIGh1bWFuR2FtZWJvYXJkLnBsYWNlU2hpcChodW1hbkNhcnJpZXIsICdBJywgJzEnLCAnaG9yaXpvbnRhbCcpO1xuICAgICAgICBodW1hbkdhbWVib2FyZC5wbGFjZVNoaXAoaHVtYW5CYXR0bGVzaGlwLCAnQScsICczJywgJ2hvcml6b250YWwnKTtcbiAgICAgICAgaHVtYW5HYW1lYm9hcmQucGxhY2VTaGlwKGh1bWFuRGVzdHJveWVyLCAnQScsICc1JywgJ2hvcml6b250YWwnKTtcbiAgICAgICAgaHVtYW5HYW1lYm9hcmQucGxhY2VTaGlwKGh1bWFuU3VibWFyaW5lLCAnQScsICc3JywgJ2hvcml6b250YWwnKTtcbiAgICAgICAgaHVtYW5HYW1lYm9hcmQucGxhY2VTaGlwKGh1bWFuUGF0cm9sYm9hdCwgJ0EnLCAnOScsICdob3Jpem9udGFsJyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnBsYWNlU2hpcChjb21wdXRlckNhcnJpZXIsICdBJywgJzEnLCAndmVydGljYWwnKTtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucGxhY2VTaGlwKGNvbXB1dGVyQmF0dGxlc2hpcCwgJ0MnLCAnMScsICd2ZXJ0aWNhbCcpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5wbGFjZVNoaXAoY29tcHV0ZXJEZXN0cm95ZXIsICdFJywgJzEnLCAndmVydGljYWwnKTtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucGxhY2VTaGlwKGNvbXB1dGVyU3VibWFyaW5lLCAnRycsICcxJywgJ3ZlcnRpY2FsJyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnBsYWNlU2hpcChjb21wdXRlclBhdHJvbGJvYXQsICdJJywgJzEnLCAndmVydGljYWwnKTtcbiAgICB9O1xuICAgIGNvbnN0IGlzR2FtZU92ZXIgPSAoKSA9PiB7XG4gICAgICAgIGlmIChjb21wdXRlckdhbWVib2FyZC5hbGxTdW5rKCkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBbGwgY29tcHV0ZXIgc2hpcHMgYXJlIHN1bmsuIEh1bWFuIHBsYXllciB3b24hJyk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHVtYW5HYW1lYm9hcmQuYWxsU3VuaygpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQWxsIGh1bWFuIHNoaXBzIGFyZSBzdW5rLiBDb21wdXRlciBwbGF5ZXIgd29uIScpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgY29uc3QgaGl0QnV0Tm90U3VuayA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgZ2FtZWJvYXJkQ2VsbHMgPSBnYW1lYm9hcmQuYXJyYXkuZmxhdCgpO1xuICAgICAgICByZXR1cm4gZ2FtZWJvYXJkQ2VsbHMuc29tZSgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNlbGwuc3RhdHVzID09PSAnaGl0JyAmJiBjZWxsLnRha2VuQnkuaXNTdW5rKCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgY29tcHV0ZXJBSSA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ3N0YXJ0IGNvbXB1dGVyQUknLCBjb21wdXRlci5nZXRQcmV2SGl0KCkpO1xuICAgICAgICBpZiAoaGl0QnV0Tm90U3VuayhnYW1lYm9hcmQpKSB7XG4gICAgICAgICAgICBpZiAoY29tcHV0ZXIuZ2V0UHJldkhpdCgpICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgY29tcHV0ZXIuZ2V0TGFzdEhpdCgpICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLmdldENlbGwoY29tcHV0ZXIuZ2V0TGFzdEhpdCgpLmNvbCwgY29tcHV0ZXIuZ2V0TGFzdEhpdCgpLnJvdykudGFrZW5CeS5oaXRDb3VudCA+PSAyICYmXG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLmdldENlbGwoY29tcHV0ZXIuZ2V0TGFzdEhpdCgpLmNvbCwgY29tcHV0ZXIuZ2V0TGFzdEhpdCgpLnJvdykudGFrZW5CeS5oaXRDb3VudCA8PSA0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZJTklTSDogPj0gMiB0cmFmaWVuaWEgdyBzdGF0ZWsnLCBjb21wdXRlci5nZXRQcmV2SGl0KCkpO1xuICAgICAgICAgICAgICAgIGNvbXB1dGVyLmZpbmlzaGluZ0F0dGFjayhnYW1lYm9hcmQsIGNvbXB1dGVyLmdldExhc3RIaXQoKS5jb2wsIGNvbXB1dGVyLmdldExhc3RIaXQoKS5yb3csIGNvbXB1dGVyLmdldFByZXZIaXQoKSk7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnNpbmtTaGlwKGdhbWVib2FyZCwgY29tcHV0ZXIuZ2V0TGFzdEhpdCgpLmNvbCwgY29tcHV0ZXIuZ2V0TGFzdEhpdCgpLnJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChjb21wdXRlci5nZXRMYXN0SGl0KCkuY29sLCBjb21wdXRlci5nZXRMYXN0SGl0KCkucm93KS50YWtlbkJ5LmhpdENvdW50ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgY29tcHV0ZXIuZm9sbG93dXBBdHRhY2soZ2FtZWJvYXJkLCBjb21wdXRlci5nZXRMYXN0SGl0KCkuY29sLCBjb21wdXRlci5nZXRMYXN0SGl0KCkucm93KTtcbiAgICAgICAgICAgICAgICBnYW1lYm9hcmQuc2lua1NoaXAoZ2FtZWJvYXJkLCBjb21wdXRlci5nZXRMYXN0SGl0KCkuY29sLCBjb21wdXRlci5nZXRMYXN0SGl0KCkucm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHsgY29sLCByb3cgfSA9IGNvbXB1dGVyLnJhbmRvbUF0dGFjayhnYW1lYm9hcmQpO1xuICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NlbGwgaGl0LCBhc3NpZ25pbmcgbmV3IHZhbHVlcyB0byBwcmV2SGl0IGFuZCBsYXN0SGl0Jyk7XG4gICAgICAgICAgICAgICAgY29tcHV0ZXIuc2V0UHJldkhpdChjb21wdXRlci5nZXRMYXN0SGl0KCkpO1xuICAgICAgICAgICAgICAgIGNvbXB1dGVyLnNldExhc3RIaXQoeyBjb2wsIHJvdyB9KTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTmV3IHZhbHVlIG9mIHByZXZIaXQ6JywgY29tcHV0ZXIuZ2V0UHJldkhpdCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDZWxsIG5vdCBoaXQsIHByZXZIaXQgcmVtYWluczonLCBjb21wdXRlci5nZXRQcmV2SGl0KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KS5zdGF0dXMgPT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KS50YWtlbkJ5LmlzU3VuaygpKSB7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnNpbmtTaGlwKGdhbWVib2FyZCwgY29sLCByb3cpO1xuICAgICAgICAgICAgICAgIGNvbXB1dGVyLnNldFByZXZIaXQobnVsbCk7XG4gICAgICAgICAgICAgICAgY29tcHV0ZXIuc2V0TGFzdEhpdChudWxsKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNHYW1lT3ZlcigpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdrb25pZWMnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHBsYXllclZzQ29tcHV0ZXJNb2RlID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzdGFydCBwbGF5ZXJWc0NvbXB1dGVyTW9kZScsIGNvbXB1dGVyLmdldFByZXZIaXQoKSk7XG4gICAgICAgIGxldCBpc1BsYXllclR1cm4gPSB0cnVlO1xuICAgICAgICB3aGlsZSAoIWlzR2FtZU92ZXIoKSAmJiAhaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICBpZiAoaXNQbGF5ZXJUdXJuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBjb2wsIHJvdyB9ID0geWllbGQgdWkuaGFuZGxlVXNlcklucHV0KCk7XG4gICAgICAgICAgICAgICAgaHVtYW4uYXR0YWNrKGNvbXB1dGVyR2FtZWJvYXJkLCBjb2wsIHJvdyk7XG4gICAgICAgICAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQuc2lua1NoaXAoY29tcHV0ZXJHYW1lYm9hcmQsIGNvbCwgcm93KTtcbiAgICAgICAgICAgICAgICB1aS5yZWZyZXNoQm9hcmQoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgIGlzUGxheWVyVHVybiA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc1BsYXllclR1cm4pIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcbiAgICAgICAgICAgICAgICBpZiAoIXVpLnBWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykgfHwgaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYmVmb3JlIGNvbXB1dGVyQUknLCBjb21wdXRlci5nZXRQcmV2SGl0KCkpO1xuICAgICAgICAgICAgICAgIGNvbXB1dGVyQUkoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgIHVpLnJlZnJlc2hCb2FyZChodW1hbkdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgaXNQbGF5ZXJUdXJuID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpc1N0b3BwZWQgPSBmYWxzZTtcbiAgICB9KTtcbiAgICBjb25zdCBjb21wdXRlclZzQ29tcHV0ZXJNb2RlID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGxldCBpc1BsYXllclR1cm4gPSB0cnVlO1xuICAgICAgICB3aGlsZSAoIWlzR2FtZU92ZXIoKSAmJiAhaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICBpZiAoaXNQbGF5ZXJUdXJuKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwKSk7XG4gICAgICAgICAgICAgICAgaWYgKCF1aS5jVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpIHx8IGlzU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgeyBjb2w6IHJhbmRvbUNvbDIsIHJvdzogcmFuZG9tUm93MiB9ID0gY29tcHV0ZXIucmFuZG9tQXR0YWNrKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgICAgICAgICBodW1hbkdhbWVib2FyZC5zaW5rU2hpcChodW1hbkdhbWVib2FyZCwgcmFuZG9tQ29sMiwgcmFuZG9tUm93Mik7XG4gICAgICAgICAgICAgICAgdWkucmVmcmVzaEJvYXJkKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgICAgICAgICBpc1BsYXllclR1cm4gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNQbGF5ZXJUdXJuKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwKSk7XG4gICAgICAgICAgICAgICAgaWYgKCF1aS5jVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpIHx8IGlzU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgeyBjb2w6IHJhbmRvbUNvbDEsIHJvdzogcmFuZG9tUm93MSB9ID0gaHVtYW4ucmFuZG9tQXR0YWNrKGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgICAgICAgICBjb21wdXRlckdhbWVib2FyZC5zaW5rU2hpcChjb21wdXRlckdhbWVib2FyZCwgcmFuZG9tQ29sMSwgcmFuZG9tUm93MSk7XG4gICAgICAgICAgICAgICAgdWkucmVmcmVzaEJvYXJkKGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgICAgICAgICBpc1BsYXllclR1cm4gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlzU3RvcHBlZCA9IGZhbHNlO1xuICAgIH0pO1xuICAgIGNvbnN0IHBpY2tHYW1lTW9kZSA9ICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ3N0YXJ0IHBpY2tHYW1lTW9kZScsIGNvbXB1dGVyLmdldFByZXZIaXQoKSk7XG4gICAgICAgIGlmICh1aS5wVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICByZXR1cm4gcGxheWVyVnNDb21wdXRlck1vZGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh1aS5jVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICByZXR1cm4gY29tcHV0ZXJWc0NvbXB1dGVyTW9kZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzdGFydCA9ICgpID0+IHtcbiAgICAgICAgcG9wdWxhdGVHYW1lYm9hcmQoKTtcbiAgICAgICAgdWkucmVuZGVyQm9hcmQoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICB1aS5yZW5kZXJCb2FyZChjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdiZWZvcmUgcGlja0dhbWVNb2RlJywgY29tcHV0ZXIuZ2V0UHJldkhpdCgpKTtcbiAgICAgICAgcGlja0dhbWVNb2RlKCk7XG4gICAgfTtcbiAgICBjb25zdCByZXN0YXJ0ID0gKCkgPT4ge1xuICAgICAgICBjb21wdXRlci5zZXRQcmV2SGl0KG51bGwpO1xuICAgICAgICBjb21wdXRlci5zZXRMYXN0SGl0KG51bGwpO1xuICAgICAgICBodW1hbkdhbWVib2FyZC5jbGVhckJvYXJkKCk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLmNsZWFyQm9hcmQoKTtcbiAgICAgICAgcG9wdWxhdGVHYW1lYm9hcmQoKTtcbiAgICAgICAgdWkucmVmcmVzaEJvYXJkKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgdWkucmVmcmVzaEJvYXJkKGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgcGlja0dhbWVNb2RlKCk7XG4gICAgfTtcbiAgICBjb25zdCBuZXdHYW1lID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKTtcbiAgICAgICAgaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHJlc3RhcnQoKTtcbiAgICB9KTtcbiAgICByZXR1cm4geyBzdGFydCwgaHVtYW5HYW1lYm9hcmQsIGNvbXB1dGVyR2FtZWJvYXJkLCBuZXdHYW1lLCByZXN0YXJ0IH07XG59KSgpO1xuZXhwb3J0IGRlZmF1bHQgY29udHJvbGxlcjtcbiIsImltcG9ydCAnbm9ybWFsaXplLmNzcyc7XG5pbXBvcnQgJy4vc3R5bGUvc3R5bGUuY3NzJztcbmltcG9ydCBjb250cm9sbGVyIGZyb20gJy4vbW9kdWxlcy9jb250cm9sbGVyJztcbmNvbnRyb2xsZXIuc3RhcnQoKTtcbiJdLCJuYW1lcyI6WyJjb2xzIiwicm93cyIsImFycmF5IiwiZ2V0Q2VsbCIsImNvbCIsInJvdyIsImNvbEluZGV4IiwiaW5kZXhPZiIsInJvd0luZGV4Iiwic2V0Q2VsbCIsIm5ld1N0YXR1cyIsIm5ld1Rha2VuQnkiLCJzdGF0dXMiLCJ0YWtlbkJ5IiwiaSIsImoiLCJ1bmRlZmluZWQiLCJnZW5lcmF0ZUFycmF5IiwiY2xlYXJCb2FyZCIsInBsYWNlU2hpcCIsInNoaXAiLCJvcmllbnRhdGlvbiIsImlzSG9yaXpvbnRhbCIsImNlbGxzIiwic3RhcnQiLCJzaXplIiwibGVuZ3RoIiwiY3VycmVudENvbCIsImN1cnJlbnRSb3ciLCJyZWNlaXZlQXR0YWNrIiwiY2VsbCIsImhpdCIsInNpbmtTaGlwIiwiZ2FtZWJvYXJkIiwiaXNTdW5rIiwiZmxhdCIsImZpbHRlciIsImMiLCJuYW1lIiwiZm9yRWFjaCIsImRpcmVjdGlvbiIsIm5ld0NvbCIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImNoYXJDb2RlQXQiLCJuZXdSb3ciLCJOdW1iZXIiLCJ0b1N0cmluZyIsImFsbFN1bmsiLCJoaXRDb3VudCIsImlzVmVydGljYWwiLCJyb3RhdGUiLCJ0aGlzIiwicHJldkhpdCIsImxhc3RIaXQiLCJyYW5nZSIsImdvUmlnaHQiLCJmaW5pc2hpbmdBdHRhY2siLCJjb25zb2xlIiwibG9nIiwiYXR0YWNrIiwicmFuZG9tQXR0YWNrIiwicmFuZG9tQ29sIiwicmFuZG9tUm93IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY2VpbCIsInJlc3VsdCIsImZvbGxvd3VwQXR0YWNrIiwidmFsaWREaXJlY3Rpb25zIiwicmFuZG9tRGlyZWN0aW9uIiwiZ2V0UHJldkhpdCIsImdldExhc3RIaXQiLCJzZXRQcmV2SGl0IiwibmV3UHJldkhpdCIsInNldExhc3RIaXQiLCJuZXdMYXN0SGl0IiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJ2YWx1ZSIsInN0ZXAiLCJuZXh0IiwiZSIsInJlamVjdGVkIiwiZG9uZSIsInRoZW4iLCJhcHBseSIsInVpIiwid3JhcHBlciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImJvYXJkcyIsImNyZWF0ZUVsZW1lbnQiLCJpZCIsInByZXBlbmQiLCJwVmNCdG4iLCJjVmNCdG4iLCJuZXdHYW1lQnRuIiwicmVuZGVyQ2VsbHMiLCJib2FyZCIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsImNyZWF0ZUNlbGwiLCJhcHBlbmQiLCJnZXRVc2VySW5wdXQiLCJ0YXJnZXQiLCJjb250YWlucyIsImdldEF0dHJpYnV0ZSIsImhhbmRsZUdhbWVNb2RlIiwic2VsZWN0ZWRFbGVtZW50IiwiZGVzZWxlY3RlZEVsZW1lbnQiLCJyZW1vdmUiLCJyZXN0YXJ0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImRpc2FibGVkIiwidGV4dENvbnRlbnQiLCJuZXdHYW1lIiwicmVuZGVyQm9hcmQiLCJodW1hbkdhbWVib2FyZCIsImNvbXB1dGVyR2FtZWJvYXJkIiwicmVmcmVzaEJvYXJkIiwiYm9hcmRJZCIsImlubmVySFRNTCIsImhhbmRsZVVzZXJJbnB1dCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ1c2VySW5wdXQiLCJvbmNlIiwiaHVtYW4iLCJwbGF5ZXIiLCJjb21wdXRlciIsImlzU3RvcHBlZCIsImh1bWFuQ2FycmllciIsImh1bWFuQmF0dGxlc2hpcCIsImh1bWFuRGVzdHJveWVyIiwiaHVtYW5TdWJtYXJpbmUiLCJodW1hblBhdHJvbGJvYXQiLCJjb21wdXRlckNhcnJpZXIiLCJjb21wdXRlckJhdHRsZXNoaXAiLCJjb21wdXRlckRlc3Ryb3llciIsImNvbXB1dGVyU3VibWFyaW5lIiwiY29tcHV0ZXJQYXRyb2xib2F0IiwicG9wdWxhdGVHYW1lYm9hcmQiLCJpc0dhbWVPdmVyIiwiY29tcHV0ZXJBSSIsInNvbWUiLCJoaXRCdXROb3RTdW5rIiwicGlja0dhbWVNb2RlIiwiaXNQbGF5ZXJUdXJuIiwic2V0VGltZW91dCIsInJhbmRvbUNvbDIiLCJyYW5kb21Sb3cyIiwicmFuZG9tQ29sMSIsInJhbmRvbVJvdzEiXSwic291cmNlUm9vdCI6IiJ9