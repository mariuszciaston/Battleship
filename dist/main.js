(()=>{"use strict";const t=()=>{const t=["A","B","C","D","E","F","G","H","I","J"],e=["1","2","3","4","5","6","7","8","9","10"],r=[],n=(n,a)=>{const o=t.indexOf(n),i=e.indexOf(a);return-1===o||-1===i?null:r[i][o]},a=(n,a,o,i)=>{const s=t.indexOf(n),l=e.indexOf(a);return-1===s||-1===l?null:(r[l][s].status=o,i&&(r[l][s].takenBy=i),r[l][s])};return(()=>{for(let n=0;n<10;n+=1){r[n]=[];for(let a=0;a<10;a+=1)r[n][a]={col:t[a],row:e[n],status:"empty",takenBy:void 0}}})(),{getCell:n,placeShip:(r,o,i,s)=>{const l="horizontal"===s,c=l?t:e,u=c.indexOf(l?o:i);if(u<0||u+r.size>c.length)return!1;for(let t=0;t<r.size;t+=1){const e=l?c[u+t]:o,s=l?i:c[u+t];if("empty"!==n(e,s).status)return!1;a(e,s,"taken",r)}return!0},receiveAttack:(t,e)=>{const r=n(t,e);return"taken"===r.status?(r.takenBy.hit(),a(t,e,"hit"),r.status):"empty"===r.status?(a(t,e,"miss"),r.status):null},allSunk:()=>{for(let t=0;t<10;t+=1)for(let e=0;e<10;e+=1)if("taken"===r[t][e].status&&!r[t][e].takenBy.isSunk())return!1;return!0},array:r}},e=t=>{let e,r=0;"Carrier"===t&&(e=5),"Battleship"===t&&(e=4),"Destroyer"===t&&(e=3),"Submarine"===t&&(e=3),"Patrol Boat"===t&&(e=2);return{name:t,size:e,hit:()=>{r+=1},isSunk:()=>r===e}},r=()=>({attack:(t,e,r)=>"hit"!==t.getCell(e,r).status&&"miss"!==t.getCell(e,r).status?t.receiveAttack(e,r):"already shot",randomAttack:t=>{const e=["A","B","C","D","E","F","G","H","I","J"];let r,n;do{r=e[Math.floor(Math.random()*e.length)],n=Math.ceil(10*Math.random()).toString()}while("hit"===t.getCell(r,n).status||"miss"===t.getCell(r,n).status);return"hit"!==t.getCell(r,n).status&&"miss"!==t.getCell(r,n).status?t.receiveAttack(r,n):"already shot"}});var n=function(t,e,r,n){return new(r||(r=Promise))((function(a,o){function i(t){try{l(n.next(t))}catch(t){o(t)}}function s(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,s)}l((n=n.apply(t,e||[])).next())}))};const a=(()=>{const t=document.createElement("div");t.id="wrapper",document.body.append(t);const e=(t,e)=>{t.array.forEach((t=>{t.forEach((t=>{const r=(t=>{const e=document.createElement("div");return e.classList.add("cell"),e.classList.add(t.status),e.setAttribute("data-col",t.col),e.setAttribute("data-row",t.row),e})(t);e.append(r)}))}))},r=t=>{if(!t.target.classList.contains("hit")&&!t.target.classList.contains("miss")){return{col:t.target.getAttribute("data-col"),row:t.target.getAttribute("data-row")}}};return{renderBoard:r=>{const n=document.createElement("div");n.classList.add("board"),r===s?n.id="firstBoard":r===l&&(n.id="secondBoard"),e(r,n),t.append(n)},refreshBoard:t=>{const r=t===s?"firstBoard":"secondBoard",n=document.querySelector(`#${r}`);n.innerHTML="",e(t,n)},handleUserInput:function(){return n(this,void 0,void 0,(function*(){const t=document.querySelector("#secondBoard");let e;do{e=yield new Promise((e=>{t.addEventListener("click",(t=>{e(r(t))}),{once:!0})}))}while(!e);return{col:e.col.toString(),row:e.row.toString()}}))}}})(),o=a;var i=function(t,e,r,n){return new(r||(r=Promise))((function(a,o){function i(t){try{l(n.next(t))}catch(t){o(t)}}function s(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,s)}l((n=n.apply(t,e||[])).next())}))};const s=t(),l=t(),c=r(),u=r();(()=>{i(void 0,void 0,void 0,(function*(){for((()=>{const t=e("Carrier"),r=e("Battleship"),n=e("Destroyer"),a=e("Submarine"),o=e("Patrol Boat"),i=e("Carrier"),c=e("Battleship"),u=e("Destroyer"),d=e("Submarine"),h=e("Patrol Boat");s.placeShip(t,"A","1","horizontal"),s.placeShip(r,"A","3","horizontal"),s.placeShip(n,"A","5","horizontal"),s.placeShip(a,"A","7","horizontal"),s.placeShip(o,"A","9","horizontal"),l.placeShip(i,"A","1","vertical"),l.placeShip(c,"C","1","vertical"),l.placeShip(u,"E","1","vertical"),l.placeShip(d,"G","1","vertical"),l.placeShip(h,"I","1","vertical")})(),o.renderBoard(s),o.renderBoard(l);!1==(l.allSunk()?(console.log("All computer ships are sunk. Human player won!"),!0):!!s.allSunk()&&(console.log("All human ships are sunk. Computer player won!"),!0));){const{col:t,row:e}=yield o.handleUserInput();c.attack(l,t,e),o.refreshBoard(l),console.log(t,e),yield new Promise((t=>setTimeout(t,1e3))),u.randomAttack(s),o.refreshBoard(s)}console.log("Game Over")}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQUEsTUEyRUEsRUEzRXlCLEtBQ3JCLE1BQU1BLEVBQU8sQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUNyREMsRUFBTyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLE1BQ3JEQyxFQUFRLEdBU1JDLEVBQVUsQ0FBQ0MsRUFBS0MsS0FDbEIsTUFBTUMsRUFBV04sRUFBS08sUUFBUUgsR0FDeEJJLEVBQVdQLEVBQUtNLFFBQVFGLEdBQzlCLE9BQWtCLElBQWRDLElBQWlDLElBQWRFLEVBQ1osS0FFSk4sRUFBTU0sR0FBVUYsRUFBUyxFQUU5QkcsRUFBVSxDQUFDTCxFQUFLQyxFQUFLSyxFQUFXQyxLQUNsQyxNQUFNTCxFQUFXTixFQUFLTyxRQUFRSCxHQUN4QkksRUFBV1AsRUFBS00sUUFBUUYsR0FDOUIsT0FBa0IsSUFBZEMsSUFBaUMsSUFBZEUsRUFDWixNQUVYTixFQUFNTSxHQUFVRixHQUFVTSxPQUFTRixFQUMvQkMsSUFDQVQsRUFBTU0sR0FBVUYsR0FBVU8sUUFBVUYsR0FFakNULEVBQU1NLEdBQVVGLEdBQVMsRUEyQ3BDLE1BckVzQixNQUNsQixJQUFLLElBQUlRLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxHQUFLLEVBQUcsQ0FDNUJaLEVBQU1ZLEdBQUssR0FDWCxJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxHQUFLLEVBQ3pCYixFQUFNWSxHQUFHQyxHQUFLLENBQUVYLElBQUtKLEVBQUtlLEdBQUlWLElBQUtKLEVBQUthLEdBQUlGLE9BQVEsUUFBU0MsYUFBU0csRUFFOUUsR0E4REpDLEdBQ08sQ0FBRWQsVUFBU2UsVUF6Q0EsQ0FBQ0MsRUFBTWYsRUFBS0MsRUFBS2UsS0FDL0IsTUFBTUMsRUFBK0IsZUFBaEJELEVBQ2ZFLEVBQVFELEVBQWVyQixFQUFPQyxFQUM5QnNCLEVBQVFELEVBQU1mLFFBQVFjLEVBQWVqQixFQUFNQyxHQUNqRCxHQUFJa0IsRUFBUSxHQUFLQSxFQUFRSixFQUFLSyxLQUFPRixFQUFNRyxPQUN2QyxPQUFPLEVBRVgsSUFBSyxJQUFJWCxFQUFJLEVBQUdBLEVBQUlLLEVBQUtLLEtBQU1WLEdBQUssRUFBRyxDQUNuQyxNQUFNWSxFQUFhTCxFQUFlQyxFQUFNQyxFQUFRVCxHQUFLVixFQUMvQ3VCLEVBQWFOLEVBQWVoQixFQUFNaUIsRUFBTUMsRUFBUVQsR0FDdEQsR0FBK0MsVUFBM0NYLEVBQVF1QixFQUFZQyxHQUFZZixPQUNoQyxPQUFPLEVBRVhILEVBQVFpQixFQUFZQyxFQUFZLFFBQVNSLEVBQzdDLENBQ0EsT0FBTyxDQUFJLEVBMEJjUyxjQXhCUCxDQUFDeEIsRUFBS0MsS0FDeEIsTUFBTXdCLEVBQU8xQixFQUFRQyxFQUFLQyxHQUMxQixNQUFvQixVQUFoQndCLEVBQUtqQixRQUNMaUIsRUFBS2hCLFFBQVFpQixNQUNickIsRUFBUUwsRUFBS0MsRUFBSyxPQUNYd0IsRUFBS2pCLFFBRUksVUFBaEJpQixFQUFLakIsUUFDTEgsRUFBUUwsRUFBS0MsRUFBSyxRQUNYd0IsRUFBS2pCLFFBRVQsSUFBSSxFQWE2Qm1CLFFBWDVCLEtBQ1osSUFBSyxJQUFJakIsRUFBSSxFQUFHQSxFQUFJLEdBQUlBLEdBQUssRUFDekIsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUksR0FBSUEsR0FBSyxFQUN6QixHQUEyQixVQUF2QmIsRUFBTVksR0FBR0MsR0FBR0gsU0FBdUJWLEVBQU1ZLEdBQUdDLEdBQUdGLFFBQVFtQixTQUN2RCxPQUFPLEVBSW5CLE9BQU8sQ0FBSSxFQUdzQzlCLFFBQU8sRUM1Q2hFLEVBN0JxQitCLElBQ2pCLElBQ0lULEVBREFVLEVBQWEsRUFFSixZQUFURCxJQUNBVCxFQUFPLEdBRUUsZUFBVFMsSUFDQVQsRUFBTyxHQUVFLGNBQVRTLElBQ0FULEVBQU8sR0FFRSxjQUFUUyxJQUNBVCxFQUFPLEdBRUUsZ0JBQVRTLElBQ0FULEVBQU8sR0FXWCxNQUFPLENBQUVTLE9BQU1ULE9BQU1NLElBVFQsS0FDUkksR0FBYyxDQUFDLEVBUU9GLE9BTlgsSUFDUEUsSUFBZVYsRUFLVyxFQ0x0QyxFQXRCc0IsS0FvQlgsQ0FBRVcsT0FuQk0sQ0FBQ0MsRUFBV2hDLEVBQUtDLElBQ2UsUUFBdkMrQixFQUFVakMsUUFBUUMsRUFBS0MsR0FBS08sUUFBMkQsU0FBdkN3QixFQUFVakMsUUFBUUMsRUFBS0MsR0FBS08sT0FDckV3QixFQUFVUixjQUFjeEIsRUFBS0MsR0FFakMsZUFlTWdDLGFBYktELElBQ2xCLE1BQU1wQyxFQUFPLENBQUMsSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssS0FDM0QsSUFBSXNDLEVBQ0FDLEVBQ0osR0FDSUQsRUFBWXRDLEVBQUt3QyxLQUFLQyxNQUFNRCxLQUFLRSxTQUFXMUMsRUFBS3lCLFNBQ2pEYyxFQUFZQyxLQUFLRyxLQUFxQixHQUFoQkgsS0FBS0UsVUFBZUUsaUJBQ2MsUUFBbkRSLEVBQVVqQyxRQUFRbUMsRUFBV0MsR0FBVzNCLFFBQXVFLFNBQW5Ed0IsRUFBVWpDLFFBQVFtQyxFQUFXQyxHQUFXM0IsUUFDN0csTUFBdUQsUUFBbkR3QixFQUFVakMsUUFBUW1DLEVBQVdDLEdBQVczQixRQUF1RSxTQUFuRHdCLEVBQVVqQyxRQUFRbUMsRUFBV0MsR0FBVzNCLE9BQzdGd0IsRUFBVVIsY0FBY1UsRUFBV0MsR0FFdkMsY0FBYyxJQ2xCN0IsSUFBSU0sRUFBd0MsU0FBVUMsRUFBU0MsRUFBWUMsRUFBR0MsR0FFMUUsT0FBTyxJQUFLRCxJQUFNQSxFQUFJRSxXQUFVLFNBQVVDLEVBQVNDLEdBQy9DLFNBQVNDLEVBQVVDLEdBQVMsSUFBTUMsRUFBS04sRUFBVU8sS0FBS0YsR0FBUyxDQUFFLE1BQU9HLEdBQUtMLEVBQU9LLEVBQUksQ0FBRSxDQUMxRixTQUFTQyxFQUFTSixHQUFTLElBQU1DLEVBQUtOLEVBQWlCLE1BQUVLLEdBQVMsQ0FBRSxNQUFPRyxHQUFLTCxFQUFPSyxFQUFJLENBQUUsQ0FDN0YsU0FBU0YsRUFBS0ksR0FKbEIsSUFBZUwsRUFJYUssRUFBT0MsS0FBT1QsRUFBUVEsRUFBT0wsUUFKMUNBLEVBSXlESyxFQUFPTCxNQUpoREEsYUFBaUJOLEVBQUlNLEVBQVEsSUFBSU4sR0FBRSxTQUFVRyxHQUFXQSxFQUFRRyxFQUFRLEtBSWpCTyxLQUFLUixFQUFXSyxFQUFXLENBQzdHSCxHQUFNTixFQUFZQSxFQUFVYSxNQUFNaEIsRUFBU0MsR0FBYyxLQUFLUyxPQUNsRSxHQUNKLEVBRUEsTUFBTU8sRUFBSyxNQUNQLE1BQU1DLEVBQVVDLFNBQVNDLGNBQWMsT0FDdkNGLEVBQVFHLEdBQUssVUFDYkYsU0FBU0csS0FBS0MsT0FBT0wsR0FDckIsTUFRTU0sRUFBYyxDQUFDbEMsRUFBV21DLEtBQzVCbkMsRUFBVWxDLE1BQU1zRSxTQUFTbkUsSUFDckJBLEVBQUltRSxTQUFTcEUsSUFDVCxNQUFNeUIsRUFYQyxDQUFDekIsSUFDaEIsTUFBTXlCLEVBQU9vQyxTQUFTQyxjQUFjLE9BS3BDLE9BSkFyQyxFQUFLNEMsVUFBVUMsSUFBSSxRQUNuQjdDLEVBQUs0QyxVQUFVQyxJQUFJdEUsRUFBSVEsUUFDdkJpQixFQUFLOEMsYUFBYSxXQUFZdkUsRUFBSUEsS0FDbEN5QixFQUFLOEMsYUFBYSxXQUFZdkUsRUFBSUMsS0FDM0J3QixDQUFJLEVBS1UrQyxDQUFXeEUsR0FDeEJtRSxFQUFNRixPQUFPeEMsRUFBSyxHQUNwQixHQUNKLEVBb0JBZ0QsRUFBZ0JwQixJQUNsQixJQUFLQSxFQUFFcUIsT0FBT0wsVUFBVU0sU0FBUyxTQUFXdEIsRUFBRXFCLE9BQU9MLFVBQVVNLFNBQVMsUUFBUyxDQUc3RSxNQUFPLENBQUUzRSxJQUZHcUQsRUFBRXFCLE9BQU9FLGFBQWEsWUFFcEIzRSxJQURGb0QsRUFBRXFCLE9BQU9FLGFBQWEsWUFFdEMsR0FrQkosTUFBTyxDQUFFQyxZQXpDWTdDLElBQ2pCLE1BQU1tQyxFQUFRTixTQUFTQyxjQUFjLE9BQ3JDSyxFQUFNRSxVQUFVQyxJQUFJLFNBQ2hCdEMsSUFBYzhDLEVBQ2RYLEVBQU1KLEdBQUssYUFFTi9CLElBQWMrQyxJQUNuQlosRUFBTUosR0FBSyxlQUVmRyxFQUFZbEMsRUFBV21DLEdBQ3ZCUCxFQUFRSyxPQUFPRSxFQUFNLEVBK0JIYSxhQTdCQWhELElBQ2xCLE1BQU1pRCxFQUFVakQsSUFBYzhDLEVBQWlCLGFBQWUsY0FDeERYLEVBQVFOLFNBQVNxQixjQUFjLElBQUlELEtBQ3pDZCxFQUFNZ0IsVUFBWSxHQUNsQmpCLEVBQVlsQyxFQUFXbUMsRUFBTSxFQXlCR2lCLGdCQWhCcEMsV0FDSSxPQUFPM0MsRUFBVTRDLFVBQU0sT0FBUSxHQUFRLFlBQ25DLE1BQU1DLEVBQWN6QixTQUFTcUIsY0FBYyxnQkFDM0MsSUFBSUssRUFDSixHQUNJQSxRQUFrQixJQUFJekMsU0FBU0MsSUFDM0J1QyxFQUFZRSxpQkFBaUIsU0FBVW5DLElBQ25DTixFQUFRMEIsRUFBYXBCLEdBQUcsR0FDekIsQ0FBRW9DLE1BQU0sR0FBTyxXQUVoQkYsR0FHVixNQUFPLENBQUV2RixJQUZHdUYsRUFBVXZGLElBQUl3QyxXQUVadkMsSUFERnNGLEVBQVV0RixJQUFJdUMsV0FFOUIsR0FDSixFQUVILEVBOURVLEdBK0RYLElDekVBLElBQUksRUFBd0MsU0FBVUUsRUFBU0MsRUFBWUMsRUFBR0MsR0FFMUUsT0FBTyxJQUFLRCxJQUFNQSxFQUFJRSxXQUFVLFNBQVVDLEVBQVNDLEdBQy9DLFNBQVNDLEVBQVVDLEdBQVMsSUFBTUMsRUFBS04sRUFBVU8sS0FBS0YsR0FBUyxDQUFFLE1BQU9HLEdBQUtMLEVBQU9LLEVBQUksQ0FBRSxDQUMxRixTQUFTQyxFQUFTSixHQUFTLElBQU1DLEVBQUtOLEVBQWlCLE1BQUVLLEdBQVMsQ0FBRSxNQUFPRyxHQUFLTCxFQUFPSyxFQUFJLENBQUUsQ0FDN0YsU0FBU0YsRUFBS0ksR0FKbEIsSUFBZUwsRUFJYUssRUFBT0MsS0FBT1QsRUFBUVEsRUFBT0wsUUFKMUNBLEVBSXlESyxFQUFPTCxNQUpoREEsYUFBaUJOLEVBQUlNLEVBQVEsSUFBSU4sR0FBRSxTQUFVRyxHQUFXQSxFQUFRRyxFQUFRLEtBSWpCTyxLQUFLUixFQUFXSyxFQUFXLENBQzdHSCxHQUFNTixFQUFZQSxFQUFVYSxNQUFNaEIsRUFBU0MsR0FBYyxLQUFLUyxPQUNsRSxHQUNKLEVBS0EsTUFBTTBCLEVBQWlCOUMsSUFDakIrQyxFQUFvQi9DLElBQ3BCMEQsRUFBUUMsSUFDUkMsRUFBV0QsSUFrQ0gsTUFBTSxPQUFVLE9BQVEsT0FBUSxHQUFRLFlBSWxELElBckNzQixNQUN0QixNQUFNRSxFQUFlOUUsRUFBWSxXQUMzQitFLEVBQWtCL0UsRUFBWSxjQUM5QmdGLEVBQWlCaEYsRUFBWSxhQUM3QmlGLEVBQWlCakYsRUFBWSxhQUM3QmtGLEVBQWtCbEYsRUFBWSxlQUM5Qm1GLEVBQWtCbkYsRUFBWSxXQUM5Qm9GLEVBQXFCcEYsRUFBWSxjQUNqQ3FGLEVBQW9CckYsRUFBWSxhQUNoQ3NGLEVBQW9CdEYsRUFBWSxhQUNoQ3VGLEVBQXFCdkYsRUFBWSxlQUN2QytELEVBQWVoRSxVQUFVK0UsRUFBYyxJQUFLLElBQUssY0FDakRmLEVBQWVoRSxVQUFVZ0YsRUFBaUIsSUFBSyxJQUFLLGNBQ3BEaEIsRUFBZWhFLFVBQVVpRixFQUFnQixJQUFLLElBQUssY0FDbkRqQixFQUFlaEUsVUFBVWtGLEVBQWdCLElBQUssSUFBSyxjQUNuRGxCLEVBQWVoRSxVQUFVbUYsRUFBaUIsSUFBSyxJQUFLLGNBQ3BEbEIsRUFBa0JqRSxVQUFVb0YsRUFBaUIsSUFBSyxJQUFLLFlBQ3ZEbkIsRUFBa0JqRSxVQUFVcUYsRUFBb0IsSUFBSyxJQUFLLFlBQzFEcEIsRUFBa0JqRSxVQUFVc0YsRUFBbUIsSUFBSyxJQUFLLFlBQ3pEckIsRUFBa0JqRSxVQUFVdUYsRUFBbUIsSUFBSyxJQUFLLFlBQ3pEdEIsRUFBa0JqRSxVQUFVd0YsRUFBb0IsSUFBSyxJQUFLLFdBQVcsRUFjckVDLEdBQ0EsRUFBRzFCLFlBQVlDLEdBQ2YsRUFBR0QsWUFBWUUsSUFDUyxJQWRwQkEsRUFBa0JwRCxXQUNsQjZFLFFBQVFDLElBQUksbURBQ0wsS0FFUDNCLEVBQWVuRCxZQUNmNkUsUUFBUUMsSUFBSSxtREFDTCxLQVFvQixDQUMzQixNQUFNLElBQUV6RyxFQUFHLElBQUVDLFNBQWMsRUFBR21GLGtCQUM5Qk0sRUFBTTNELE9BQU9nRCxFQUFtQi9FLEVBQUtDLEdBQ3JDLEVBQUcrRSxhQUFhRCxHQUNoQnlCLFFBQVFDLElBQUl6RyxFQUFLQyxTQUNYLElBQUk2QyxTQUFTQyxHQUFZMkQsV0FBVzNELEVBQVMsT0FDbkQ2QyxFQUFTM0QsYUFBYTZDLEdBQ3RCLEVBQUdFLGFBQWFGLEVBQ3BCLENBQ0EwQixRQUFRQyxJQUFJLFlBQ2hCLEdBQUUsRUM3REYsRSIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9nYW1lYm9hcmQudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL3NoaXAudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL3BsYXllci50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvdWkudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL2NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBnYW1lYm9hcmRGYWN0b3J5ID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvbHMgPSBbJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onXTtcbiAgICBjb25zdCByb3dzID0gWycxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsICcxMCddO1xuICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgY29uc3QgZ2VuZXJhdGVBcnJheSA9ICgpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSArPSAxKSB7XG4gICAgICAgICAgICBhcnJheVtpXSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaiArPSAxKSB7XG4gICAgICAgICAgICAgICAgYXJyYXlbaV1bal0gPSB7IGNvbDogY29sc1tqXSwgcm93OiByb3dzW2ldLCBzdGF0dXM6ICdlbXB0eScsIHRha2VuQnk6IHVuZGVmaW5lZCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBnZXRDZWxsID0gKGNvbCwgcm93KSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbEluZGV4ID0gY29scy5pbmRleE9mKGNvbCk7XG4gICAgICAgIGNvbnN0IHJvd0luZGV4ID0gcm93cy5pbmRleE9mKHJvdyk7XG4gICAgICAgIGlmIChjb2xJbmRleCA9PT0gLTEgfHwgcm93SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyYXlbcm93SW5kZXhdW2NvbEluZGV4XTtcbiAgICB9O1xuICAgIGNvbnN0IHNldENlbGwgPSAoY29sLCByb3csIG5ld1N0YXR1cywgbmV3VGFrZW5CeSkgPT4ge1xuICAgICAgICBjb25zdCBjb2xJbmRleCA9IGNvbHMuaW5kZXhPZihjb2wpO1xuICAgICAgICBjb25zdCByb3dJbmRleCA9IHJvd3MuaW5kZXhPZihyb3cpO1xuICAgICAgICBpZiAoY29sSW5kZXggPT09IC0xIHx8IHJvd0luZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgYXJyYXlbcm93SW5kZXhdW2NvbEluZGV4XS5zdGF0dXMgPSBuZXdTdGF0dXM7XG4gICAgICAgIGlmIChuZXdUYWtlbkJ5KSB7XG4gICAgICAgICAgICBhcnJheVtyb3dJbmRleF1bY29sSW5kZXhdLnRha2VuQnkgPSBuZXdUYWtlbkJ5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheVtyb3dJbmRleF1bY29sSW5kZXhdO1xuICAgIH07XG4gICAgY29uc3QgcGxhY2VTaGlwID0gKHNoaXAsIGNvbCwgcm93LCBvcmllbnRhdGlvbikgPT4ge1xuICAgICAgICBjb25zdCBpc0hvcml6b250YWwgPSBvcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnO1xuICAgICAgICBjb25zdCBjZWxscyA9IGlzSG9yaXpvbnRhbCA/IGNvbHMgOiByb3dzO1xuICAgICAgICBjb25zdCBzdGFydCA9IGNlbGxzLmluZGV4T2YoaXNIb3Jpem9udGFsID8gY29sIDogcm93KTtcbiAgICAgICAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCArIHNoaXAuc2l6ZSA+IGNlbGxzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5zaXplOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb2wgPSBpc0hvcml6b250YWwgPyBjZWxsc1tzdGFydCArIGldIDogY29sO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFJvdyA9IGlzSG9yaXpvbnRhbCA/IHJvdyA6IGNlbGxzW3N0YXJ0ICsgaV07XG4gICAgICAgICAgICBpZiAoZ2V0Q2VsbChjdXJyZW50Q29sLCBjdXJyZW50Um93KS5zdGF0dXMgIT09ICdlbXB0eScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRDZWxsKGN1cnJlbnRDb2wsIGN1cnJlbnRSb3csICd0YWtlbicsIHNoaXApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb2wsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gZ2V0Q2VsbChjb2wsIHJvdyk7XG4gICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ3Rha2VuJykge1xuICAgICAgICAgICAgY2VsbC50YWtlbkJ5LmhpdCgpO1xuICAgICAgICAgICAgc2V0Q2VsbChjb2wsIHJvdywgJ2hpdCcpO1xuICAgICAgICAgICAgcmV0dXJuIGNlbGwuc3RhdHVzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ2VtcHR5Jykge1xuICAgICAgICAgICAgc2V0Q2VsbChjb2wsIHJvdywgJ21pc3MnKTtcbiAgICAgICAgICAgIHJldHVybiBjZWxsLnN0YXR1cztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IGFsbFN1bmsgPSAoKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkgKz0gMSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaiArPSAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFycmF5W2ldW2pdLnN0YXR1cyA9PT0gJ3Rha2VuJyAmJiAhYXJyYXlbaV1bal0udGFrZW5CeS5pc1N1bmsoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgZ2VuZXJhdGVBcnJheSgpO1xuICAgIHJldHVybiB7IGdldENlbGwsIHBsYWNlU2hpcCwgcmVjZWl2ZUF0dGFjaywgYWxsU3VuaywgYXJyYXkgfTtcbn07XG5leHBvcnQgZGVmYXVsdCBnYW1lYm9hcmRGYWN0b3J5O1xuIiwiY29uc3Qgc2hpcEZhY3RvcnkgPSAobmFtZSkgPT4ge1xuICAgIGxldCBoaXRDb3VudGVyID0gMDtcbiAgICBsZXQgc2l6ZTtcbiAgICBpZiAobmFtZSA9PT0gJ0NhcnJpZXInKSB7XG4gICAgICAgIHNpemUgPSA1O1xuICAgIH1cbiAgICBpZiAobmFtZSA9PT0gJ0JhdHRsZXNoaXAnKSB7XG4gICAgICAgIHNpemUgPSA0O1xuICAgIH1cbiAgICBpZiAobmFtZSA9PT0gJ0Rlc3Ryb3llcicpIHtcbiAgICAgICAgc2l6ZSA9IDM7XG4gICAgfVxuICAgIGlmIChuYW1lID09PSAnU3VibWFyaW5lJykge1xuICAgICAgICBzaXplID0gMztcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09ICdQYXRyb2wgQm9hdCcpIHtcbiAgICAgICAgc2l6ZSA9IDI7XG4gICAgfVxuICAgIGNvbnN0IGhpdCA9ICgpID0+IHtcbiAgICAgICAgaGl0Q291bnRlciArPSAxO1xuICAgIH07XG4gICAgY29uc3QgaXNTdW5rID0gKCkgPT4ge1xuICAgICAgICBpZiAoaGl0Q291bnRlciA9PT0gc2l6ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgcmV0dXJuIHsgbmFtZSwgc2l6ZSwgaGl0LCBpc1N1bmsgfTtcbn07XG5leHBvcnQgZGVmYXVsdCBzaGlwRmFjdG9yeTtcbiIsImNvbnN0IHBsYXllckZhY3RvcnkgPSAoKSA9PiB7XG4gICAgY29uc3QgYXR0YWNrID0gKGdhbWVib2FyZCwgY29sLCByb3cpID0+IHtcbiAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgcmV0dXJuIGdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKGNvbCwgcm93KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ2FscmVhZHkgc2hvdCc7XG4gICAgfTtcbiAgICBjb25zdCByYW5kb21BdHRhY2sgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbHMgPSBbJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onXTtcbiAgICAgICAgbGV0IHJhbmRvbUNvbDtcbiAgICAgICAgbGV0IHJhbmRvbVJvdztcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgcmFuZG9tQ29sID0gY29sc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb2xzLmxlbmd0aCldO1xuICAgICAgICAgICAgcmFuZG9tUm93ID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAxMCkudG9TdHJpbmcoKTtcbiAgICAgICAgfSB3aGlsZSAoZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyA9PT0gJ2hpdCcgfHwgZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyA9PT0gJ21pc3MnKTtcbiAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKHJhbmRvbUNvbCwgcmFuZG9tUm93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKHJhbmRvbUNvbCwgcmFuZG9tUm93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgcmV0dXJuIGdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKHJhbmRvbUNvbCwgcmFuZG9tUm93KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ2FscmVhZHkgc2hvdCc7XG4gICAgfTtcbiAgICByZXR1cm4geyBhdHRhY2ssIHJhbmRvbUF0dGFjayB9O1xufTtcbmV4cG9ydCBkZWZhdWx0IHBsYXllckZhY3Rvcnk7XG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IGh1bWFuR2FtZWJvYXJkLCBjb21wdXRlckdhbWVib2FyZCB9IGZyb20gJy4vY29udHJvbGxlcic7XG5jb25zdCB1aSA9ICgoKSA9PiB7XG4gICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHdyYXBwZXIuaWQgPSAnd3JhcHBlcic7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmQod3JhcHBlcik7XG4gICAgY29uc3QgY3JlYXRlQ2VsbCA9IChjb2wpID0+IHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2NlbGwnKTtcbiAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKGNvbC5zdGF0dXMpO1xuICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnZGF0YS1jb2wnLCBjb2wuY29sKTtcbiAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcm93JywgY29sLnJvdyk7XG4gICAgICAgIHJldHVybiBjZWxsO1xuICAgIH07XG4gICAgY29uc3QgcmVuZGVyQ2VsbHMgPSAoZ2FtZWJvYXJkLCBib2FyZCkgPT4ge1xuICAgICAgICBnYW1lYm9hcmQuYXJyYXkuZm9yRWFjaCgocm93KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgoY29sKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IGNyZWF0ZUNlbGwoY29sKTtcbiAgICAgICAgICAgICAgICBib2FyZC5hcHBlbmQoY2VsbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCByZW5kZXJCb2FyZCA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgYm9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgYm9hcmQuY2xhc3NMaXN0LmFkZCgnYm9hcmQnKTtcbiAgICAgICAgaWYgKGdhbWVib2FyZCA9PT0gaHVtYW5HYW1lYm9hcmQpIHtcbiAgICAgICAgICAgIGJvYXJkLmlkID0gJ2ZpcnN0Qm9hcmQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGdhbWVib2FyZCA9PT0gY29tcHV0ZXJHYW1lYm9hcmQpIHtcbiAgICAgICAgICAgIGJvYXJkLmlkID0gJ3NlY29uZEJvYXJkJztcbiAgICAgICAgfVxuICAgICAgICByZW5kZXJDZWxscyhnYW1lYm9hcmQsIGJvYXJkKTtcbiAgICAgICAgd3JhcHBlci5hcHBlbmQoYm9hcmQpO1xuICAgIH07XG4gICAgY29uc3QgcmVmcmVzaEJvYXJkID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBjb25zdCBib2FyZElkID0gZ2FtZWJvYXJkID09PSBodW1hbkdhbWVib2FyZCA/ICdmaXJzdEJvYXJkJyA6ICdzZWNvbmRCb2FyZCc7XG4gICAgICAgIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7Ym9hcmRJZH1gKTtcbiAgICAgICAgYm9hcmQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIHJlbmRlckNlbGxzKGdhbWVib2FyZCwgYm9hcmQpO1xuICAgIH07XG4gICAgY29uc3QgZ2V0VXNlcklucHV0ID0gKGUpID0+IHtcbiAgICAgICAgaWYgKCFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpdCcpICYmICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21pc3MnKSkge1xuICAgICAgICAgICAgY29uc3QgY29sID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbCcpO1xuICAgICAgICAgICAgY29uc3Qgcm93ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXJvdycpO1xuICAgICAgICAgICAgcmV0dXJuIHsgY29sLCByb3cgfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgZnVuY3Rpb24gaGFuZGxlVXNlcklucHV0KCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3Qgc2Vjb25kQm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgICAgIGxldCB1c2VySW5wdXQ7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgdXNlcklucHV0ID0geWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kQm9hcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShnZXRVc2VySW5wdXQoZSkpO1xuICAgICAgICAgICAgICAgICAgICB9LCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IHdoaWxlICghdXNlcklucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGNvbCA9IHVzZXJJbnB1dC5jb2wudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHVzZXJJbnB1dC5yb3cudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHJldHVybiB7IGNvbCwgcm93IH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4geyByZW5kZXJCb2FyZCwgcmVmcmVzaEJvYXJkLCBoYW5kbGVVc2VySW5wdXQgfTtcbn0pKCk7XG5leHBvcnQgZGVmYXVsdCB1aTtcbiIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IGdhbWVib2FyZEZhY3RvcnkgZnJvbSAnLi9nYW1lYm9hcmQnO1xuaW1wb3J0IHNoaXBGYWN0b3J5IGZyb20gJy4vc2hpcCc7XG5pbXBvcnQgcGxheWVyRmFjdG9yeSBmcm9tICcuL3BsYXllcic7XG5pbXBvcnQgdWkgZnJvbSAnLi91aSc7XG5jb25zdCBodW1hbkdhbWVib2FyZCA9IGdhbWVib2FyZEZhY3RvcnkoKTtcbmNvbnN0IGNvbXB1dGVyR2FtZWJvYXJkID0gZ2FtZWJvYXJkRmFjdG9yeSgpO1xuY29uc3QgaHVtYW4gPSBwbGF5ZXJGYWN0b3J5KCk7XG5jb25zdCBjb21wdXRlciA9IHBsYXllckZhY3RvcnkoKTtcbmNvbnN0IHBvcHVsYXRlR2FtZWJvYXJkID0gKCkgPT4ge1xuICAgIGNvbnN0IGh1bWFuQ2FycmllciA9IHNoaXBGYWN0b3J5KCdDYXJyaWVyJyk7XG4gICAgY29uc3QgaHVtYW5CYXR0bGVzaGlwID0gc2hpcEZhY3RvcnkoJ0JhdHRsZXNoaXAnKTtcbiAgICBjb25zdCBodW1hbkRlc3Ryb3llciA9IHNoaXBGYWN0b3J5KCdEZXN0cm95ZXInKTtcbiAgICBjb25zdCBodW1hblN1Ym1hcmluZSA9IHNoaXBGYWN0b3J5KCdTdWJtYXJpbmUnKTtcbiAgICBjb25zdCBodW1hblBhdHJvbGJvYXQgPSBzaGlwRmFjdG9yeSgnUGF0cm9sIEJvYXQnKTtcbiAgICBjb25zdCBjb21wdXRlckNhcnJpZXIgPSBzaGlwRmFjdG9yeSgnQ2FycmllcicpO1xuICAgIGNvbnN0IGNvbXB1dGVyQmF0dGxlc2hpcCA9IHNoaXBGYWN0b3J5KCdCYXR0bGVzaGlwJyk7XG4gICAgY29uc3QgY29tcHV0ZXJEZXN0cm95ZXIgPSBzaGlwRmFjdG9yeSgnRGVzdHJveWVyJyk7XG4gICAgY29uc3QgY29tcHV0ZXJTdWJtYXJpbmUgPSBzaGlwRmFjdG9yeSgnU3VibWFyaW5lJyk7XG4gICAgY29uc3QgY29tcHV0ZXJQYXRyb2xib2F0ID0gc2hpcEZhY3RvcnkoJ1BhdHJvbCBCb2F0Jyk7XG4gICAgaHVtYW5HYW1lYm9hcmQucGxhY2VTaGlwKGh1bWFuQ2FycmllciwgJ0EnLCAnMScsICdob3Jpem9udGFsJyk7XG4gICAgaHVtYW5HYW1lYm9hcmQucGxhY2VTaGlwKGh1bWFuQmF0dGxlc2hpcCwgJ0EnLCAnMycsICdob3Jpem9udGFsJyk7XG4gICAgaHVtYW5HYW1lYm9hcmQucGxhY2VTaGlwKGh1bWFuRGVzdHJveWVyLCAnQScsICc1JywgJ2hvcml6b250YWwnKTtcbiAgICBodW1hbkdhbWVib2FyZC5wbGFjZVNoaXAoaHVtYW5TdWJtYXJpbmUsICdBJywgJzcnLCAnaG9yaXpvbnRhbCcpO1xuICAgIGh1bWFuR2FtZWJvYXJkLnBsYWNlU2hpcChodW1hblBhdHJvbGJvYXQsICdBJywgJzknLCAnaG9yaXpvbnRhbCcpO1xuICAgIGNvbXB1dGVyR2FtZWJvYXJkLnBsYWNlU2hpcChjb21wdXRlckNhcnJpZXIsICdBJywgJzEnLCAndmVydGljYWwnKTtcbiAgICBjb21wdXRlckdhbWVib2FyZC5wbGFjZVNoaXAoY29tcHV0ZXJCYXR0bGVzaGlwLCAnQycsICcxJywgJ3ZlcnRpY2FsJyk7XG4gICAgY29tcHV0ZXJHYW1lYm9hcmQucGxhY2VTaGlwKGNvbXB1dGVyRGVzdHJveWVyLCAnRScsICcxJywgJ3ZlcnRpY2FsJyk7XG4gICAgY29tcHV0ZXJHYW1lYm9hcmQucGxhY2VTaGlwKGNvbXB1dGVyU3VibWFyaW5lLCAnRycsICcxJywgJ3ZlcnRpY2FsJyk7XG4gICAgY29tcHV0ZXJHYW1lYm9hcmQucGxhY2VTaGlwKGNvbXB1dGVyUGF0cm9sYm9hdCwgJ0knLCAnMScsICd2ZXJ0aWNhbCcpO1xufTtcbmNvbnN0IGlzR2FtZU92ZXIgPSAoKSA9PiB7XG4gICAgaWYgKGNvbXB1dGVyR2FtZWJvYXJkLmFsbFN1bmsoKSkge1xuICAgICAgICBjb25zb2xlLmxvZygnQWxsIGNvbXB1dGVyIHNoaXBzIGFyZSBzdW5rLiBIdW1hbiBwbGF5ZXIgd29uIScpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGh1bWFuR2FtZWJvYXJkLmFsbFN1bmsoKSkge1xuICAgICAgICBjb25zb2xlLmxvZygnQWxsIGh1bWFuIHNoaXBzIGFyZSBzdW5rLiBDb21wdXRlciBwbGF5ZXIgd29uIScpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcbmNvbnN0IHN0YXJ0ID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgcG9wdWxhdGVHYW1lYm9hcmQoKTtcbiAgICB1aS5yZW5kZXJCb2FyZChodW1hbkdhbWVib2FyZCk7XG4gICAgdWkucmVuZGVyQm9hcmQoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgIHdoaWxlIChpc0dhbWVPdmVyKCkgPT09IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IHsgY29sLCByb3cgfSA9IHlpZWxkIHVpLmhhbmRsZVVzZXJJbnB1dCgpO1xuICAgICAgICBodW1hbi5hdHRhY2soY29tcHV0ZXJHYW1lYm9hcmQsIGNvbCwgcm93KTtcbiAgICAgICAgdWkucmVmcmVzaEJvYXJkKGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgY29uc29sZS5sb2coY29sLCByb3cpO1xuICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7XG4gICAgICAgIGNvbXB1dGVyLnJhbmRvbUF0dGFjayhodW1hbkdhbWVib2FyZCk7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChodW1hbkdhbWVib2FyZCk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCdHYW1lIE92ZXInKTtcbn0pO1xuZXhwb3J0IHsgaHVtYW5HYW1lYm9hcmQsIGNvbXB1dGVyR2FtZWJvYXJkIH07XG5leHBvcnQgZGVmYXVsdCBzdGFydDtcbiIsImltcG9ydCAnbm9ybWFsaXplLmNzcyc7XG5pbXBvcnQgJy4vc3R5bGUvc3R5bGUuY3NzJztcbmltcG9ydCBzdGFydCBmcm9tICcuL21vZHVsZXMvY29udHJvbGxlcic7XG5zdGFydCgpO1xuIl0sIm5hbWVzIjpbImNvbHMiLCJyb3dzIiwiYXJyYXkiLCJnZXRDZWxsIiwiY29sIiwicm93IiwiY29sSW5kZXgiLCJpbmRleE9mIiwicm93SW5kZXgiLCJzZXRDZWxsIiwibmV3U3RhdHVzIiwibmV3VGFrZW5CeSIsInN0YXR1cyIsInRha2VuQnkiLCJpIiwiaiIsInVuZGVmaW5lZCIsImdlbmVyYXRlQXJyYXkiLCJwbGFjZVNoaXAiLCJzaGlwIiwib3JpZW50YXRpb24iLCJpc0hvcml6b250YWwiLCJjZWxscyIsInN0YXJ0Iiwic2l6ZSIsImxlbmd0aCIsImN1cnJlbnRDb2wiLCJjdXJyZW50Um93IiwicmVjZWl2ZUF0dGFjayIsImNlbGwiLCJoaXQiLCJhbGxTdW5rIiwiaXNTdW5rIiwibmFtZSIsImhpdENvdW50ZXIiLCJhdHRhY2siLCJnYW1lYm9hcmQiLCJyYW5kb21BdHRhY2siLCJyYW5kb21Db2wiLCJyYW5kb21Sb3ciLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjZWlsIiwidG9TdHJpbmciLCJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInZhbHVlIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwidGhlbiIsImFwcGx5IiwidWkiLCJ3cmFwcGVyIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJib2R5IiwiYXBwZW5kIiwicmVuZGVyQ2VsbHMiLCJib2FyZCIsImZvckVhY2giLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJjcmVhdGVDZWxsIiwiZ2V0VXNlcklucHV0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJnZXRBdHRyaWJ1dGUiLCJyZW5kZXJCb2FyZCIsImh1bWFuR2FtZWJvYXJkIiwiY29tcHV0ZXJHYW1lYm9hcmQiLCJyZWZyZXNoQm9hcmQiLCJib2FyZElkIiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsImhhbmRsZVVzZXJJbnB1dCIsInRoaXMiLCJzZWNvbmRCb2FyZCIsInVzZXJJbnB1dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbmNlIiwiaHVtYW4iLCJwbGF5ZXIiLCJjb21wdXRlciIsImh1bWFuQ2FycmllciIsImh1bWFuQmF0dGxlc2hpcCIsImh1bWFuRGVzdHJveWVyIiwiaHVtYW5TdWJtYXJpbmUiLCJodW1hblBhdHJvbGJvYXQiLCJjb21wdXRlckNhcnJpZXIiLCJjb21wdXRlckJhdHRsZXNoaXAiLCJjb21wdXRlckRlc3Ryb3llciIsImNvbXB1dGVyU3VibWFyaW5lIiwiY29tcHV0ZXJQYXRyb2xib2F0IiwicG9wdWxhdGVHYW1lYm9hcmQiLCJjb25zb2xlIiwibG9nIiwic2V0VGltZW91dCJdLCJzb3VyY2VSb290IjoiIn0=