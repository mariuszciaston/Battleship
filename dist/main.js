(()=>{"use strict";const e=()=>{const e=["A","B","C","D","E","F","G","H","I","J"],t=["1","2","3","4","5","6","7","8","9","10"],a=[],r=[],s=(r,s)=>{const o=e.indexOf(r),l=t.indexOf(s);return-1===o||-1===l?null:a[l][o]},o=(r,s,o,l)=>{const n=e.indexOf(r),i=t.indexOf(s);return-1===n||-1===i?null:(a[i][n].status=o,l&&(a[i][n].takenBy=l),a[i][n])};return{generateArray:()=>{for(let r=0;r<10;r+=1){a[r]=[];for(let s=0;s<10;s+=1)a[r][s]={col:e[s],row:t[r],status:"empty",takenBy:null}}},clearBoard:()=>{a.flat().forEach((e=>{e.status="empty",e.takenBy=void 0})),r.length=0},getCell:s,setCell:o,removeShip:(e,t)=>{t.array.flat().forEach((t=>{"taken"===t.status&&t.takenBy.name===e.name&&(t.status="empty",t.takenBy=null);const a=r.indexOf(t);null===t.takenBy&&-1!==a&&r.splice(a,1)}))},placeShip:(a,l,n,i)=>{const c="horizontal"===i,d=c?e:t,u=d.indexOf(c?l:n);a.isVertical="horizontal"!==i;let h=[];if(u<0||u+a.size>d.length)return!1;for(let e=0;e<a.size;e+=1){const t=c?d[u+e]:l,r=c?n:d[u+e];if("empty"!==s(t,r).status)return!1;o(t,r,"taken",a),h.push(s(t,r))}return r.push(h[0]),!0},receiveAttack:(e,t)=>{const a=s(e,t);return"taken"===a.status?(a.takenBy.hit(),o(e,t,"hit"),a.status):"empty"===a.status||"reserved"===a.status?(o(e,t,"miss"),a.status):null},receiveAround:(e,t)=>{const a=s(e,t);return"empty"===a.status?(o(e,t,"reserved"),a.status):null},reserveSpace:(e,t,a)=>{const r=e.getCell(t,a);if(r&&r.takenBy){e.array.flat().filter((e=>e.takenBy&&e.takenBy.name===r.takenBy.name)).forEach((t=>{[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0},{col:-1,row:-1},{col:-1,row:1},{col:1,row:-1},{col:1,row:1}].forEach((a=>{const r=String.fromCharCode(t.col.charCodeAt(0)+a.col),s=(Number(t.row)+a.row).toString();e.getCell(r,s)&&e.receiveAround(r,s)}))}))}},hitButNotSunk:e=>e.array.flat().some((e=>"hit"===e.status&&!1===e.takenBy.isSunk())),sinkShip:(e,t,a)=>{const r=e.getCell(t,a);if(r&&r.takenBy&&r.takenBy.isSunk()){e.array.flat().filter((e=>e.takenBy&&e.takenBy.name===r.takenBy.name)).forEach((t=>{[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0},{col:-1,row:-1},{col:-1,row:1},{col:1,row:-1},{col:1,row:1}].forEach((a=>{const r=String.fromCharCode(t.col.charCodeAt(0)+a.col),s=(Number(t.row)+a.row).toString();e.getCell(r,s)&&e.receiveAttack(r,s)}))}))}},allSunk:e=>{let t=e.array.flat().filter((e=>e.takenBy));return!!(t.length>0&&t.every((e=>e.takenBy.isSunk())))},array:a,canBePlaced:(a,r,o,l)=>{const n="horizontal"===l,i=n?e:t,c=i.indexOf(n?r:o);if(c<0||c+a>i.length)return!1;const d=[];for(let e=0;e<a;e+=1){const t=n?i[c+e]:r,a=n?o:i[c+e];d.push("empty"===s(t,a).status)}return d.every((e=>!0===e))},shipsPlaced:r,removeReservedSpace:e=>{e.array.flat().forEach((e=>{"reserved"===e.status&&o(e.col,e.row,"empty")}))}}},t=e=>{let t;return"Carrier"===e&&(t=5),"Battleship"===e&&(t=4),"Destroyer"===e&&(t=3),"Submarine"===e&&(t=3),"PatrolBoat"===e&&(t=2),{name:e,size:t,hitCount:0,isVertical:!1,rotate(){this.isVertical=!this.isVertical},hit(){this.hitCount+=1},isSunk(){return this.hitCount===t}}},a=()=>{const e=["A","B","C","D","E","F","G","H","I","J"];let t=null,a=null;let r=1,s=!0,o=!0;const l=(e,t,c,d)=>{if(d.row===c)if(s){r=1;let o=String.fromCharCode(t.charCodeAt(0)+r);for(;e.getCell(o,c)&&"hit"===e.getCell(o,c).status;)r+=1,o=String.fromCharCode(t.charCodeAt(0)+r);e.getCell(o,c)&&"hit"!==e.getCell(o,c).status&&"miss"!==e.getCell(o,c).status?(e.receiveAttack(o,c),"hit"===e.getCell(o,c).status&&(n(a),i({col:o,row:c})),r+=1):(r=1,s=!1,l(e,o,c,d))}else{r=1;let o=String.fromCharCode(t.charCodeAt(0)-r);for(;e.getCell(o,c)&&"hit"===e.getCell(o,c).status;)r+=1,o=String.fromCharCode(t.charCodeAt(0)-r);e.getCell(o,c)&&"hit"!==e.getCell(o,c).status&&"miss"!==e.getCell(o,c).status?(e.receiveAttack(o,c),"hit"===e.getCell(o,c).status&&(n(a),i({col:o,row:c})),r+=1):(r=1,s=!0,l(e,o,c,d))}else if(d.col===t)if(o){r=1;let s=(Number(c)+r).toString();for(;e.getCell(t,s)&&"hit"===e.getCell(t,s).status;)r+=1,s=(Number(c)+r).toString();e.getCell(t,s)&&"hit"!==e.getCell(t,s).status&&"miss"!==e.getCell(t,s).status?(e.receiveAttack(t,s),"hit"===e.getCell(t,s).status&&(n(a),i({col:t,row:s})),r+=1):(r=1,o=!1,l(e,t,s,d))}else{r=1;let s=(Number(c)-r).toString();for(;e.getCell(t,s)&&"hit"===e.getCell(t,s).status;)r+=1,s=(Number(c)-r).toString();e.getCell(t,s)&&"hit"!==e.getCell(t,s).status&&"miss"!==e.getCell(t,s).status?(e.receiveAttack(t,s),"hit"===e.getCell(t,s).status&&(n(a),i({col:t,row:s})),r+=1):(r=1,o=!0,l(e,t,s,d))}},n=e=>{t=e},i=e=>{a=e};return{attack:(e,t,r)=>{if("hit"!==e.getCell(t,r).status&&"miss"!==e.getCell(t,r).status){let s=e.receiveAttack(t,r);return"hit"===s&&(n(a),i({col:t,row:r})),s}return"already shot"},randomAttack:t=>{let r,s;do{r=e[Math.floor(Math.random()*e.length)],s=Math.ceil(10*Math.random()).toString()}while("hit"===t.getCell(r,s).status||"miss"===t.getCell(r,s).status);if("hit"!==t.getCell(r,s).status&&"miss"!==t.getCell(r,s).status){const e=t.receiveAttack(r,s);return"hit"===t.getCell(r,s).status&&(n(a),i({col:r,row:s})),{result:e,col:r,row:s}}return{result:"already shot",col:r,row:s}},followupAttack:(e,t,s)=>{const o=[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0}].filter((a=>{const r=String.fromCharCode(t.charCodeAt(0)+a.col),o=(Number(s)+a.row).toString(),l=e.getCell(r,o);return!(!l||"miss"===l.status||"hit"===l.status)}));if(o.length>0){const l=o[Math.floor(Math.random()*o.length)],c=String.fromCharCode(t.charCodeAt(0)+l.col),d=(Number(s)+l.row).toString();e.receiveAttack(c,d),r=1,"hit"===e.getCell(c,d).status&&(n(a),i({col:c,row:d}))}},finishingAttack:l,prevHit:t,lastHit:a,getPrevHit:()=>t,getLastHit:()=>a,setPrevHit:n,setLastHit:i}};var r=function(e,t,a,r){return new(a||(a=Promise))((function(s,o){function l(e){try{i(r.next(e))}catch(e){o(e)}}function n(e){try{i(r.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,n)}i((r=r.apply(e,t||[])).next())}))};const s=(e,t,a)=>{const s=document.querySelector("#firstBoard"),o=document.querySelector("#secondBoard"),l=s.querySelectorAll(".cell"),i=o.querySelectorAll(".cell");let c,u,h,m,f=0,g=0,v=[];const p={carrier:a[0],battleship:a[1],destroyer:a[2],submarine:a[3],patrolboat:a[4]};let w=null;const y=document.querySelectorAll(".draggable");function S(e){return Array.from(e).filter((e=>!e.classList.contains("taken")))}const B=[...S(l),...S(i)];function C(e){return e.every((e=>e.classList.contains("empty")))&&(e.every((t=>t.dataset.col===e[0].dataset.col))||e.every((t=>t.dataset.row===e[0].dataset.row)))&&e.length===u&&e.every((e=>e.dataset.col>="A"&&e.dataset.col<="J"))&&e.every((e=>Number(e.dataset.row)>=1&&Number(e.dataset.row)<=10))}function b(e,t){return e.slice(Math.min(e.length-t,0))}const L=a=>{e.removeReservedSpace(e),t.removeReservedSpace(t);const r=a.target.getAttribute("data-name");let s=e.shipsPlaced.filter((e=>r!==e.takenBy.name.toLowerCase())),o=t.shipsPlaced.filter((e=>r!==e.takenBy.name.toLowerCase()));s.forEach((t=>{e.reserveSpace(e,t.col,t.row)})),o.forEach((e=>{t.reserveSpace(t,e.col,e.row)})),d.renew(),n.setInitMessage()};function k(a){return r(this,void 0,void 0,(function*(){yield new Promise((e=>setTimeout(e,0)));const r=a.target;let s;r.style.visibility="hidden",this.classList.add("dragging"),c=r.getAttribute("data-name"),u=Number(r.getAttribute("data-size")),f=a.offsetX,g=a.offsetY,h=p[c],m=h.isVertical?"vertical":"horizontal","firstBoard"===r.closest(".board").id&&(s=e),"secondBoard"===r.closest(".board").id&&(s=t),s.removeShip(h,s),n.clearShip(h,s)}))}function E(e){return function(t){const a=t.target;if("firstBoard"===a.closest(".board").id&&(t.preventDefault(),h)){let t=e-(h.isVertical?10*Math.floor(g/this.offsetHeight):Math.floor(f/this.offsetWidth));const a=[];for(let e=0;e<u;e++){let r=h.isVertical?t+10*e:t+e;l[r]&&(a.push(l[r]),v.push(l[r]))}C(a)&&(a.forEach((e=>{e.classList.add("highlight")})),w||(w=b(v,u)))}if("secondBoard"===a.closest(".board").id&&(t.preventDefault(),h)){let t=e-(h.isVertical?10*Math.floor(g/this.offsetHeight):Math.floor(f/this.offsetWidth));const a=[];for(let e=0;e<u;e++){let r=h.isVertical?t+10*e:t+e;i[r]&&(a.push(i[r]),v.push(i[r]))}C(a)&&(a.forEach((e=>{e.classList.add("highlight")})),w||(w=b(v,u)))}}}function P(){v.forEach((e=>{e.classList.remove("highlight")})),v=[]}function A(a){v.forEach((e=>{e.classList.remove("highlight")}));const r=b(v,u),s=a.target;"firstBoard"===s.closest(".board").id&&h&&null!==w&&(e.canBePlaced(h.size,r[0].dataset.col,r[0].dataset.row,m)?(e.placeShip(h,r[0].dataset.col,r[0].dataset.row,m),e.reserveSpace(e,r[0].dataset.col,r[0].dataset.row)):(e.placeShip(h,w[0].dataset.col,w[0].dataset.row,m),e.reserveSpace(e,w[0].dataset.col,w[0].dataset.row))),"secondBoard"===s.closest(".board").id&&h&&null!==w&&(t.canBePlaced(h.size,r[0].dataset.col,r[0].dataset.row,m)?(t.placeShip(h,r[0].dataset.col,r[0].dataset.row,m),t.reserveSpace(t,r[0].dataset.col,r[0].dataset.row)):(t.placeShip(h,w[0].dataset.col,w[0].dataset.row,m),t.reserveSpace(t,w[0].dataset.col,w[0].dataset.row))),e.removeReservedSpace(e),t.removeReservedSpace(t),e.shipsPlaced.forEach((t=>{e.reserveSpace(e,t.col,t.row)})),t.shipsPlaced.forEach((e=>{t.reserveSpace(t,e.col,e.row)})),d.renew(),n.canBeStarted(),n.setStartMessage(),w=null}function H(a){const r=a.target;r.style.visibility="visible",this.classList.remove("dragging"),0===v.length&&(r.closest(".board")&&"firstBoard"===r.closest(".board").id&&w&&e.canBePlaced(h.size,w[0].dataset.col,w[0].dataset.row,m)&&(e.placeShip(h,w[0].dataset.col,w[0].dataset.row,m),e.reserveSpace(e,w[0].dataset.col,w[0].dataset.row),d.renew()),r.closest(".board")&&"secondBoard"===r.closest(".board").id&&w&&t.canBePlaced(h.size,w[0].dataset.col,w[0].dataset.row,m)&&(t.placeShip(h,w[0].dataset.col,w[0].dataset.row,m),t.reserveSpace(t,w[0].dataset.col,w[0].dataset.row),d.renew()),n.canBeStarted()&&n.fillCells(o),n.setStartMessage())}function M(){e.shipsPlaced.forEach((t=>{e.reserveSpace(e,t.col,t.row)})),t.shipsPlaced.forEach((e=>{t.reserveSpace(t,e.col,e.row)})),d.renew(),n.setStartMessage()}function q(a){a.preventDefault();const r=a.target;let s;"firstBoard"===r.closest(".board").id&&(s=e),"secondBoard"===r.closest(".board").id&&(s=t),c=r.getAttribute("data-name"),u=Number(r.getAttribute("data-size")),h=p[c];const l=h,i=s.shipsPlaced.filter((e=>e.takenBy.name.toLowerCase()===c));s.removeShip(h,s),s.removeReservedSpace(s),s.shipsPlaced.forEach((e=>{s.reserveSpace(s,e.col,e.row)})),l.rotate(),m=l.isVertical?"vertical":"horizontal",s.canBePlaced(l.size,i[0].col,i[0].row,m)||(l.rotate(),m=l.isVertical?"vertical":"horizontal"),s.placeShip(l,i[0].col,i[0].row,m),s.shipsPlaced.forEach((e=>{s.reserveSpace(s,e.col,e.row)})),d.renew(),n.canBeStarted()&&n.fillCells(o)}function V(e){e.preventDefault()}l.forEach(((e,t)=>{e.addEventListener("dragover",E(t)),e.addEventListener("dragleave",P),e.addEventListener("drop",A)})),i.forEach(((e,t)=>{e.addEventListener("dragover",E(t)),e.addEventListener("dragleave",P),e.addEventListener("drop",A)})),y.forEach((e=>{e.addEventListener("mousedown",L),e.addEventListener("dragstart",k),e.addEventListener("dragend",H),e.addEventListener("mouseup",M),e.addEventListener("contextmenu",q),B.forEach((e=>e.addEventListener("contextmenu",V)))}))};var o=function(e,t,a,r){return new(a||(a=Promise))((function(s,o){function l(e){try{i(r.next(e))}catch(e){o(e)}}function n(e){try{i(r.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,n)}i((r=r.apply(e,t||[])).next())}))};const l=(()=>{const e=document.querySelector("#messageBox p"),t=document.querySelector("#boards"),a=document.querySelector("#firstBoard");let r=document.querySelector("#secondBoard");const n=document.querySelector("#playerVsComputer"),i=document.querySelector("#newGame"),c=document.querySelector("#computerVsComputer"),u=document.querySelector("#start"),h=document.querySelector("#randomPlacement"),m=[n,i,c,u,h],f=document.getElementsByName("speed"),g=(e,t)=>{e.array.forEach((e=>{e.forEach((e=>{const a=(e=>{const t=document.createElement("div");return t.classList.add("cell"),t.classList.add(e.status),t.setAttribute("data-col",e.col),t.setAttribute("data-row",e.row),e.takenBy&&t.setAttribute("data-shipName",e.takenBy.name.toLowerCase()),t})(e);t.append(a)}))}))},v=e=>e===d.humanGameboard?"firstBoard":e===d.computerGameboard?"secondBoard":void 0,p=e=>{const t=document.querySelector(`#${v(e)}`);t.innerHTML="",g(e,t)},w=e=>{if(!e.target.classList.contains("hit")&&!e.target.classList.contains("miss")){return{col:e.target.getAttribute("data-col"),row:e.target.getAttribute("data-row")}}},y=(e,t)=>{t.classList.remove("selected"),e.classList.contains("selected")||(e.classList.add("selected"),e===n&&o(void 0,void 0,void 0,(function*(){P(a),S(!0),m.forEach((e=>e.disabled=!0)),yield new Promise((e=>setTimeout(e,E()))),m.forEach((e=>e.disabled=!1)),S(!1),B(),C()})),e===c&&o(void 0,void 0,void 0,(function*(){S(!0),m.forEach((e=>e.disabled=!0)),yield new Promise((e=>setTimeout(e,E()))),m.forEach((e=>e.disabled=!1)),S(!1),u.disabled=!0,h.disabled=!0,c.disabled=!0})),d.restart(),L())},S=e=>{document.documentElement.classList.toggle("wait",e)},B=()=>5===d.humanGameboard.shipsPlaced.length&&0===d.computerGameboard.shipsPlaced.length?(r=document.querySelector("#secondBoard"),P(r),u.disabled=!1,!0):(u.disabled=!0,!1),C=()=>{const t="Use 'Random Placement' button, then press Start!",a="Drag and drop ships onto the left board or use 'Random Placement' button. Right click to rotate. When ready, press Start!";e.textContent!==t&&e.textContent!==a&&"Restarting..."!==e.textContent&&"You can now begin the game. Press start!"!==e.textContent||(e.textContent=t,window.matchMedia("(min-width: 1024px)").matches&&(e.textContent=a))},b=()=>{B()&&(e.textContent="You can now begin the game. Press start!")},L=()=>{e.textContent="Restarting..."};n.addEventListener("click",(()=>{P(a),y(n,c);document.querySelector("#secondBoard").classList.remove("start"),A(a),u.disabled=!0,n.disabled=!0})),c.addEventListener("click",(()=>{P(a),P(r),y(c,n);const e=document.querySelector("#secondBoard");e.classList.remove("hide"),e.classList.add("start"),Promise.all([A(a),A(r)]),u.disabled=!0,h.disabled=!0,c.disabled=!0})),i.addEventListener("click",(()=>o(void 0,void 0,void 0,(function*(){P(a),c.classList.contains("selected")&&(P(r),u.disabled=!0,h.disabled=!0,c.disabled=!0),l.removeBoardPointer(),yield o(void 0,void 0,void 0,(function*(){L(),S(!0),m.forEach((e=>e.disabled=!0)),yield d.newGame(),m.forEach((e=>e.disabled=!1)),S(!1),B(),n.classList.contains("selected")&&C()}));const e=document.querySelector("#secondBoard");e.classList.remove("hide"),n.classList.contains("selected")&&(e.classList.remove("start"),A(a),u.disabled=!0,n.disabled=!0),c.classList.contains("selected")&&(e.classList.add("start"),h.disabled=!0,Promise.all([A(a),A(r)]),u.disabled=!0,h.disabled=!0,c.disabled=!0)})))),u.addEventListener("click",(()=>{d.start();document.querySelector("#firstBoard").classList.add("hide");const e=document.querySelector("#secondBoard");e.classList.add("hide"),e.classList.add("start"),A(r),u.disabled=!0,h.disabled=!0})),h.addEventListener("click",(()=>{d.computerGameboard.clearBoard(),p(d.computerGameboard),d.randomizeShipsPlacement(d.humanGameboard),s(d.humanGameboard,d.computerGameboard,d.humanShips),B(),b(),P(r)}));let k=1e3;f.forEach((e=>{e.addEventListener("click",(()=>{let t=e;t.checked&&(k=Number(t.value))}))}));const E=()=>k;window.addEventListener("resize",C);const P=e=>{let t;e===a?t=document.querySelector("#firstBoard"):e===r&&(t=document.querySelector("#secondBoard"));t.querySelectorAll(".cell").forEach((e=>{e.classList.add("filled")}))},A=e=>o(void 0,void 0,void 0,(function*(){let t;S(!0),e===a?t=document.querySelector("#firstBoard"):e===r&&(t=document.querySelector("#secondBoard"));const s=t.querySelectorAll(".cell");s.forEach((e=>{e.classList.add("filled")})),yield new Promise((e=>{s.forEach(((t,a)=>{setTimeout((()=>{t.classList.remove("filled"),a===s.length-1&&e()}),E()/120*a)}))})),S(!1)}));return{renderBoard:e=>{const a=document.createElement("div");a.classList.add("board"),a.id=v(e),g(e,a),t.append(a)},clearShip:(e,t)=>{document.querySelectorAll(`#${v(t)} .cell`).forEach((t=>{t.classList.contains("taken")&&t.getAttribute("data-shipName")===e.name.toLowerCase()&&(t.classList.remove("taken"),t.classList.add("empty"),t.removeAttribute("data-shipName"))}))},refreshBoard:p,handleUserInput:()=>o(void 0,void 0,void 0,(function*(){const e=document.querySelectorAll("#secondBoard .cell");let t;do{t=yield new Promise((t=>{e.forEach((e=>{e.classList.contains("hit")||e.classList.contains("miss")||e.addEventListener("click",(e=>{t(w(e))}),{once:!0})}))}))}while(!t);return{col:t.col.toString(),row:t.row.toString()}})),pVcBtn:n,cVcBtn:c,waiting:S,setBoardPointer:e=>{const t=document.querySelector("#secondBoard");"player"===e?t.classList.add("boardOutline"):"computer"===e&&t.classList.remove("boardOutline")},removeBoardPointer:()=>{document.querySelector("#secondBoard").classList.remove("boardOutline")},createShipOverlay:e=>{e.shipsPlaced.forEach((t=>{const a=document.createElement("div"),r=t.takenBy.name.toLowerCase(),s=t.takenBy.size,o=t.takenBy.isVertical;a.classList.add("ship",r),a.setAttribute("data-size",`${s}`),a.setAttribute("data-name",`${r}`),a.setAttribute("draggable","true"),a.classList.add("draggable");const l=()=>{const e=document.querySelector("html"),t=parseFloat(window.getComputedStyle(e,null).getPropertyValue("font-size"));o?o&&(a.style.width=n/t+"rem",a.style.height=s*(n/t)+"rem"):(a.style.width=s*(n/t)+"rem",a.style.height=n/t+"rem")};let n=document.querySelector(".board .cell").getBoundingClientRect().width;l(),window.addEventListener("resize",(function(){n=document.querySelector(".board .cell").getBoundingClientRect().width,l()}));document.querySelector(`#${v(e)} .cell[data-col="${t.col}"][data-row="${t.row}"]`).appendChild(a)}))},canBeStarted:B,setInitMessage:C,setStartMessage:b,setTurnMessagePvC:t=>{e.textContent=t?"Player's turn. Take aim and attack!":"Computer's turn. The shot is coming!"},setTurnMessageCvC:t=>{e.textContent=t?"Violet's turn":"Blue's turn"},setGameOverMessagePvC:t=>{"player"===t?e.textContent="Game over, Player wins!":"computer"===t&&(e.textContent="Game over, Computer wins!")},setGameOverMessageCvC:t=>{"player"===t?e.textContent="Game over, Blue Computer wins!":"computer"===t&&(e.textContent="Game over, Violet Computer wins!")},setRestartMessage:L,getSpeedValue:E,fillCells:P,unFillCells:A,firstBoardElement:a}})(),n=l;var i=function(e,t,a,r){return new(a||(a=Promise))((function(s,o){function l(e){try{i(r.next(e))}catch(e){o(e)}}function n(e){try{i(r.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,n)}i((r=r.apply(e,t||[])).next())}))};const c=(()=>{const r=e(),o=e(),l=a(),d=a();let u=!0,h=t("Carrier"),m=t("Battleship"),f=t("Destroyer"),g=t("Submarine"),v=t("PatrolBoat");const p=[h,m,f,g,v],w=()=>{o.placeShip(h,"A","1","horizontal"),o.placeShip(m,"A","3","horizontal"),o.placeShip(f,"A","5","horizontal"),o.placeShip(g,"A","7","horizontal"),o.placeShip(v,"A","9","horizontal"),o.reserveSpace(o,"A","1"),o.reserveSpace(o,"A","3"),o.reserveSpace(o,"A","5"),o.reserveSpace(o,"A","7"),o.reserveSpace(o,"A","9")};const y=()=>o.allSunk(o)?(n.removeBoardPointer(),n.pVcBtn.classList.contains("selected")&&n.setGameOverMessagePvC("player"),n.cVcBtn.classList.contains("selected")&&n.setGameOverMessageCvC("player"),!0):!!r.allSunk(r)&&(n.removeBoardPointer(),n.pVcBtn.classList.contains("selected")&&n.setGameOverMessagePvC("computer"),n.cVcBtn.classList.contains("selected")&&n.setGameOverMessageCvC("computer"),!0),S=e=>{let t;if(e===r?t=d:e===o&&(t=l),e.hitButNotSunk(e)){if(null!==t.getPrevHit()&&null!==t.getLastHit()&&e.getCell(t.getLastHit().col,t.getLastHit().row).takenBy.hitCount>=2&&e.getCell(t.getLastHit().col,t.getLastHit().row).takenBy.hitCount<=4){if(t.finishingAttack(e,t.getLastHit().col,t.getLastHit().row,t.getPrevHit()),e.sinkShip(e,t.getLastHit().col,t.getLastHit().row),y())return}else if(1===e.getCell(t.getLastHit().col,t.getLastHit().row).takenBy.hitCount&&(t.followupAttack(e,t.getLastHit().col,t.getLastHit().row),e.sinkShip(e,t.getLastHit().col,t.getLastHit().row),y()))return}else{const{col:a,row:r}=t.randomAttack(e);if("hit"===e.getCell(a,r).status&&(t.setPrevHit(t.getLastHit()),t.setLastHit({col:a,row:r})),"hit"===e.getCell(a,r).status&&e.getCell(a,r).takenBy.isSunk()&&(e.sinkShip(e,a,r),t.setPrevHit(null),t.setLastHit(null),y()))return}},B=e=>{e.clearBoard(),(e=>{let a;e===r?(h=t("Carrier"),m=t("Battleship"),f=t("Destroyer"),g=t("Submarine"),v=t("PatrolBoat"),a=[h,m,f,g,v]):e===o&&(a=[t("Carrier"),t("Battleship"),t("Destroyer"),t("Submarine"),t("PatrolBoat")]);c.humanShips.length=0;const s=["A","B","C","D","E","F","G","H","I","J"],l=()=>s[Math.floor(Math.random()*s.length)],n=()=>Math.ceil(10*Math.random()).toString(),i=()=>Math.random()>.5?"horizontal":"vertical";a.forEach((t=>{let a=l(),r=n(),s=i(),o=e.canBePlaced(t.size,a,r,s);for(;!o;)a=l(),r=n(),s=i(),o=e.canBePlaced(t.size,a,r,s);o&&(e.placeShip(t,a,r,s),e.reserveSpace(e,a,r)),c.humanShips.push(t)}))})(e),n.refreshBoard(e),e===r&&n.createShipOverlay(e)},C=()=>{n.cVcBtn.classList.contains("selected")&&(B(r),B(o),u=!1,i(void 0,void 0,void 0,(function*(){n.removeBoardPointer();let e=!0;for(;!y()&&!u;){if(n.waiting(!0),e){if(n.setTurnMessageCvC(e),yield new Promise((e=>setTimeout(e,n.getSpeedValue()))),!n.cVcBtn.classList.contains("selected")||u)break;S(r),n.refreshBoard(r),e=!1}if(y()||u)break;if(!e){if(n.setTurnMessageCvC(e),yield new Promise((e=>setTimeout(e,n.getSpeedValue()))),!n.cVcBtn.classList.contains("selected")||u)break;S(o),n.refreshBoard(o),e=!0}}u=!1,n.waiting(!1)})),n.refreshBoard(r))},b=()=>{u=!0,l.setPrevHit(null),l.setLastHit(null),d.setPrevHit(null),d.setLastHit(null),r.clearBoard(),o.clearBoard(),w(),n.refreshBoard(r),n.refreshBoard(o),n.createShipOverlay(o),s(r,o,p),n.canBeStarted(),C(),p.forEach((e=>{!0===e.isVertical&&(e.isVertical=!1)}))};return{init:()=>{n.setInitMessage(),r.generateArray(),o.generateArray(),n.renderBoard(r),n.renderBoard(o),w(),n.refreshBoard(o),n.createShipOverlay(o),s(r,o,p),n.canBeStarted(),C(),n.unFillCells(n.firstBoardElement),n.pVcBtn.disabled=!0},renew:function(){n.refreshBoard(r),n.refreshBoard(o),n.createShipOverlay(r),n.createShipOverlay(o),s(r,o,p)},humanGameboard:r,computerGameboard:o,restart:b,newGame:()=>i(void 0,void 0,void 0,(function*(){u=!0,yield new Promise((e=>setTimeout(e,n.getSpeedValue()))),u=!1,b()})),start:()=>{n.refreshBoard(r),B(o),u=!1,i(void 0,void 0,void 0,(function*(){let e=!0;for(;!y()&&!u;){if(e){n.setTurnMessagePvC(e),n.setBoardPointer("player"),n.waiting(!1);const{col:t,row:a}=yield n.handleUserInput();l.attack(o,t,a),o.sinkShip(o,t,a),n.refreshBoard(o),e=!1}if(y()||u)break;if(!e){if(n.setTurnMessagePvC(e),n.setBoardPointer("computer"),n.waiting(!0),yield new Promise((e=>setTimeout(e,n.getSpeedValue()))),!n.pVcBtn.classList.contains("selected")||u)break;S(r),n.refreshBoard(r),e=!0}}u=!1,n.waiting(!1)}))},randomizeShipsPlacement:B,humanShips:p}})(),d=c;d.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVKLElBQUtULEVBQWMsQ0FLZixHQUpBLEVBQUdELGtCQUFrQkMsR0FDckIsRUFBR2pCLGdCQUFnQixZQUNuQixFQUFHL0IsU0FBUSxTQUNMLElBQUl0SCxTQUFTQyxHQUFZMEQsV0FBVzFELEVBQVMsRUFBR3dILG9CQUNqRCxFQUFHM0IsT0FBT3RELFVBQVVDLFNBQVMsYUFBZXNJLEVBQzdDLE1BRUpRLEVBQVd6RSxHQUNYLEVBQUdFLGFBQWFGLEdBQ2hCd0QsR0FBZSxDQUNuQixDQUNKLENBQ0FTLEdBQVksRUFDWixFQUFHekQsU0FBUSxFQUNmLEdBc0cwQixFQXdDd0RvQiwwQkFBeUJDLGFBQzlHLEVBL1FrQixHQWdSbkIsSUMzUkEsRUFBV2lELE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvZ2FtZWJvYXJkLnRzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9zaGlwLnRzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9wbGF5ZXIudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL2RyYWdBbmREcm9wLnRzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy91aS50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvY29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGdhbWVib2FyZEZhY3RvcnkgPSAoKSA9PiB7XG4gICAgY29uc3QgY29scyA9IFsnQScsICdCJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdIJywgJ0knLCAnSiddO1xuICAgIGNvbnN0IHJvd3MgPSBbJzEnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJzcnLCAnOCcsICc5JywgJzEwJ107XG4gICAgY29uc3QgYXJyYXkgPSBbXTtcbiAgICBjb25zdCBzaGlwc1BsYWNlZCA9IFtdO1xuICAgIGNvbnN0IGdlbmVyYXRlQXJyYXkgPSAoKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkgKz0gMSkge1xuICAgICAgICAgICAgYXJyYXlbaV0gPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGogKz0gMSkge1xuICAgICAgICAgICAgICAgIGFycmF5W2ldW2pdID0geyBjb2w6IGNvbHNbal0sIHJvdzogcm93c1tpXSwgc3RhdHVzOiAnZW1wdHknLCB0YWtlbkJ5OiBudWxsIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGNsZWFyQm9hcmQgPSAoKSA9PiB7XG4gICAgICAgIGFycmF5LmZsYXQoKS5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICBjZWxsLnN0YXR1cyA9ICdlbXB0eSc7XG4gICAgICAgICAgICBjZWxsLnRha2VuQnkgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuICAgICAgICBzaGlwc1BsYWNlZC5sZW5ndGggPSAwO1xuICAgIH07XG4gICAgY29uc3QgZ2V0Q2VsbCA9IChjb2wsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBjb2xJbmRleCA9IGNvbHMuaW5kZXhPZihjb2wpO1xuICAgICAgICBjb25zdCByb3dJbmRleCA9IHJvd3MuaW5kZXhPZihyb3cpO1xuICAgICAgICBpZiAoY29sSW5kZXggPT09IC0xIHx8IHJvd0luZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFycmF5W3Jvd0luZGV4XVtjb2xJbmRleF07XG4gICAgfTtcbiAgICBjb25zdCBzZXRDZWxsID0gKGNvbCwgcm93LCBuZXdTdGF0dXMsIG5ld1Rha2VuQnkpID0+IHtcbiAgICAgICAgY29uc3QgY29sSW5kZXggPSBjb2xzLmluZGV4T2YoY29sKTtcbiAgICAgICAgY29uc3Qgcm93SW5kZXggPSByb3dzLmluZGV4T2Yocm93KTtcbiAgICAgICAgaWYgKGNvbEluZGV4ID09PSAtMSB8fCByb3dJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGFycmF5W3Jvd0luZGV4XVtjb2xJbmRleF0uc3RhdHVzID0gbmV3U3RhdHVzO1xuICAgICAgICBpZiAobmV3VGFrZW5CeSkge1xuICAgICAgICAgICAgYXJyYXlbcm93SW5kZXhdW2NvbEluZGV4XS50YWtlbkJ5ID0gbmV3VGFrZW5CeTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyYXlbcm93SW5kZXhdW2NvbEluZGV4XTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVNoaXAgPSAoc2hpcCwgZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGNvbnN0IGdhbWVib2FyZENlbGxzID0gZ2FtZWJvYXJkLmFycmF5LmZsYXQoKTtcbiAgICAgICAgZ2FtZWJvYXJkQ2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNlbGwuc3RhdHVzID09PSAndGFrZW4nICYmIGNlbGwudGFrZW5CeS5uYW1lID09PSBzaGlwLm5hbWUpIHtcbiAgICAgICAgICAgICAgICBjZWxsLnN0YXR1cyA9ICdlbXB0eSc7XG4gICAgICAgICAgICAgICAgY2VsbC50YWtlbkJ5ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNoaXBJbmRleCA9IHNoaXBzUGxhY2VkLmluZGV4T2YoY2VsbCk7XG4gICAgICAgICAgICBpZiAoY2VsbC50YWtlbkJ5ID09PSBudWxsICYmIHNoaXBJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBzaGlwc1BsYWNlZC5zcGxpY2Uoc2hpcEluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBwbGFjZVNoaXAgPSAoc2hpcCwgY29sLCByb3csIG9yaWVudGF0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzSG9yaXpvbnRhbCA9IG9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCc7XG4gICAgICAgIGNvbnN0IGNlbGxzID0gaXNIb3Jpem9udGFsID8gY29scyA6IHJvd3M7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gY2VsbHMuaW5kZXhPZihpc0hvcml6b250YWwgPyBjb2wgOiByb3cpO1xuICAgICAgICBpZiAob3JpZW50YXRpb24gPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgICAgc2hpcC5pc1ZlcnRpY2FsID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzaGlwLmlzVmVydGljYWwgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzaGlwQ2VsbHMgPSBbXTtcbiAgICAgICAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCArIHNoaXAuc2l6ZSA+IGNlbGxzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5zaXplOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb2wgPSBpc0hvcml6b250YWwgPyBjZWxsc1tzdGFydCArIGldIDogY29sO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFJvdyA9IGlzSG9yaXpvbnRhbCA/IHJvdyA6IGNlbGxzW3N0YXJ0ICsgaV07XG4gICAgICAgICAgICBpZiAoZ2V0Q2VsbChjdXJyZW50Q29sLCBjdXJyZW50Um93KS5zdGF0dXMgIT09ICdlbXB0eScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRDZWxsKGN1cnJlbnRDb2wsIGN1cnJlbnRSb3csICd0YWtlbicsIHNoaXApO1xuICAgICAgICAgICAgc2hpcENlbGxzLnB1c2goZ2V0Q2VsbChjdXJyZW50Q29sLCBjdXJyZW50Um93KSk7XG4gICAgICAgIH1cbiAgICAgICAgc2hpcHNQbGFjZWQucHVzaChzaGlwQ2VsbHNbMF0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIGNvbnN0IGNhbkJlUGxhY2VkID0gKHNpemUsIGNvbCwgcm93LCBvcmllbnRhdGlvbikgPT4ge1xuICAgICAgICBjb25zdCBpc0hvcml6b250YWwgPSBvcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnO1xuICAgICAgICBjb25zdCBjZWxscyA9IGlzSG9yaXpvbnRhbCA/IGNvbHMgOiByb3dzO1xuICAgICAgICBjb25zdCBzdGFydCA9IGNlbGxzLmluZGV4T2YoaXNIb3Jpem9udGFsID8gY29sIDogcm93KTtcbiAgICAgICAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCArIHNpemUgPiBjZWxscy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcmVFbXB0eSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudENvbCA9IGlzSG9yaXpvbnRhbCA/IGNlbGxzW3N0YXJ0ICsgaV0gOiBjb2w7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Um93ID0gaXNIb3Jpem9udGFsID8gcm93IDogY2VsbHNbc3RhcnQgKyBpXTtcbiAgICAgICAgICAgIGFyZUVtcHR5LnB1c2goZ2V0Q2VsbChjdXJyZW50Q29sLCBjdXJyZW50Um93KS5zdGF0dXMgPT09ICdlbXB0eScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcmVFbXB0eS5ldmVyeSgoaXRlbSkgPT4gaXRlbSA9PT0gdHJ1ZSk7XG4gICAgfTtcbiAgICBjb25zdCByZWNlaXZlQXR0YWNrID0gKGNvbCwgcm93KSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBnZXRDZWxsKGNvbCwgcm93KTtcbiAgICAgICAgaWYgKGNlbGwuc3RhdHVzID09PSAndGFrZW4nKSB7XG4gICAgICAgICAgICBjZWxsLnRha2VuQnkuaGl0KCk7XG4gICAgICAgICAgICBzZXRDZWxsKGNvbCwgcm93LCAnaGl0Jyk7XG4gICAgICAgICAgICByZXR1cm4gY2VsbC5zdGF0dXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNlbGwuc3RhdHVzID09PSAnZW1wdHknIHx8IGNlbGwuc3RhdHVzID09PSAncmVzZXJ2ZWQnKSB7XG4gICAgICAgICAgICBzZXRDZWxsKGNvbCwgcm93LCAnbWlzcycpO1xuICAgICAgICAgICAgcmV0dXJuIGNlbGwuc3RhdHVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgY29uc3QgcmVjZWl2ZUFyb3VuZCA9IChjb2wsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gZ2V0Q2VsbChjb2wsIHJvdyk7XG4gICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ2VtcHR5Jykge1xuICAgICAgICAgICAgc2V0Q2VsbChjb2wsIHJvdywgJ3Jlc2VydmVkJyk7XG4gICAgICAgICAgICByZXR1cm4gY2VsbC5zdGF0dXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBjb25zdCByZXNlcnZlU3BhY2UgPSAoZ2FtZWJvYXJkLCBjb2wsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpO1xuICAgICAgICBpZiAoY2VsbCAmJiBjZWxsLnRha2VuQnkpIHtcbiAgICAgICAgICAgIGNvbnN0IGdhbWVib2FyZENlbGxzID0gZ2FtZWJvYXJkLmFycmF5LmZsYXQoKTtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBDZWxscyA9IGdhbWVib2FyZENlbGxzLmZpbHRlcigoYykgPT4gYy50YWtlbkJ5ICYmIGMudGFrZW5CeS5uYW1lID09PSBjZWxsLnRha2VuQnkubmFtZSk7XG4gICAgICAgICAgICBzaGlwQ2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAwLCByb3c6IC0xIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAwLCByb3c6IDEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IC0xLCByb3c6IDAgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogMCB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogLTEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IC0xLCByb3c6IDEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogLTEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogMSB9LFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9ucy5mb3JFYWNoKChkaXJlY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Q29sID0gU3RyaW5nLmZyb21DaGFyQ29kZShjZWxsLmNvbC5jaGFyQ29kZUF0KDApICsgZGlyZWN0aW9uLmNvbCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1JvdyA9IChOdW1iZXIoY2VsbC5yb3cpICsgZGlyZWN0aW9uLnJvdykudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgbmV3Um93KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBcm91bmQobmV3Q29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlUmVzZXJ2ZWRTcGFjZSA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgZ2FtZWJvYXJkQ2VsbHMgPSBnYW1lYm9hcmQuYXJyYXkuZmxhdCgpO1xuICAgICAgICBnYW1lYm9hcmRDZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2VsbC5zdGF0dXMgPT09ICdyZXNlcnZlZCcpIHtcbiAgICAgICAgICAgICAgICBzZXRDZWxsKGNlbGwuY29sLCBjZWxsLnJvdywgJ2VtcHR5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3Qgc2lua1NoaXAgPSAoZ2FtZWJvYXJkLCBjb2wsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpO1xuICAgICAgICBpZiAoY2VsbCAmJiBjZWxsLnRha2VuQnkgJiYgY2VsbC50YWtlbkJ5LmlzU3VuaygpKSB7XG4gICAgICAgICAgICBjb25zdCBzaGlwQ2VsbHMgPSBnYW1lYm9hcmQuYXJyYXkuZmxhdCgpLmZpbHRlcigoYykgPT4gYy50YWtlbkJ5ICYmIGMudGFrZW5CeS5uYW1lID09PSBjZWxsLnRha2VuQnkubmFtZSk7XG4gICAgICAgICAgICBzaGlwQ2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAwLCByb3c6IC0xIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAwLCByb3c6IDEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IC0xLCByb3c6IDAgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogMCB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogLTEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IC0xLCByb3c6IDEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogLTEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogMSB9LFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9ucy5mb3JFYWNoKChkaXJlY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Q29sID0gU3RyaW5nLmZyb21DaGFyQ29kZShjZWxsLmNvbC5jaGFyQ29kZUF0KDApICsgZGlyZWN0aW9uLmNvbCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1JvdyA9IChOdW1iZXIoY2VsbC5yb3cpICsgZGlyZWN0aW9uLnJvdykudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgbmV3Um93KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2sobmV3Q29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGl0QnV0Tm90U3VuayA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgZ2FtZWJvYXJkQ2VsbHMgPSBnYW1lYm9hcmQuYXJyYXkuZmxhdCgpO1xuICAgICAgICByZXR1cm4gZ2FtZWJvYXJkQ2VsbHMuc29tZSgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNlbGwuc3RhdHVzID09PSAnaGl0JyAmJiBjZWxsLnRha2VuQnkuaXNTdW5rKCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgYWxsU3VuayA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgZ2FtZWJvYXJkQ2VsbHMgPSBnYW1lYm9hcmQuYXJyYXkuZmxhdCgpO1xuICAgICAgICBsZXQgdGFrZW5CeUNlbGxzID0gZ2FtZWJvYXJkQ2VsbHMuZmlsdGVyKChjZWxsKSA9PiBjZWxsLnRha2VuQnkpO1xuICAgICAgICBpZiAodGFrZW5CeUNlbGxzLmxlbmd0aCA+IDAgJiYgdGFrZW5CeUNlbGxzLmV2ZXJ5KChjZWxsKSA9PiBjZWxsLnRha2VuQnkuaXNTdW5rKCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2VuZXJhdGVBcnJheSxcbiAgICAgICAgY2xlYXJCb2FyZCxcbiAgICAgICAgZ2V0Q2VsbCxcbiAgICAgICAgc2V0Q2VsbCxcbiAgICAgICAgcmVtb3ZlU2hpcCxcbiAgICAgICAgcGxhY2VTaGlwLFxuICAgICAgICByZWNlaXZlQXR0YWNrLFxuICAgICAgICByZWNlaXZlQXJvdW5kLFxuICAgICAgICByZXNlcnZlU3BhY2UsXG4gICAgICAgIGhpdEJ1dE5vdFN1bmssXG4gICAgICAgIHNpbmtTaGlwLFxuICAgICAgICBhbGxTdW5rLFxuICAgICAgICBhcnJheSxcbiAgICAgICAgY2FuQmVQbGFjZWQsXG4gICAgICAgIHNoaXBzUGxhY2VkLFxuICAgICAgICByZW1vdmVSZXNlcnZlZFNwYWNlLFxuICAgIH07XG59O1xuZXhwb3J0IGRlZmF1bHQgZ2FtZWJvYXJkRmFjdG9yeTtcbiIsImNvbnN0IHNoaXBGYWN0b3J5ID0gKG5hbWUpID0+IHtcbiAgICBsZXQgc2l6ZTtcbiAgICBpZiAobmFtZSA9PT0gJ0NhcnJpZXInKSB7XG4gICAgICAgIHNpemUgPSA1O1xuICAgIH1cbiAgICBpZiAobmFtZSA9PT0gJ0JhdHRsZXNoaXAnKSB7XG4gICAgICAgIHNpemUgPSA0O1xuICAgIH1cbiAgICBpZiAobmFtZSA9PT0gJ0Rlc3Ryb3llcicpIHtcbiAgICAgICAgc2l6ZSA9IDM7XG4gICAgfVxuICAgIGlmIChuYW1lID09PSAnU3VibWFyaW5lJykge1xuICAgICAgICBzaXplID0gMztcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09ICdQYXRyb2xCb2F0Jykge1xuICAgICAgICBzaXplID0gMjtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgc2l6ZSxcbiAgICAgICAgaGl0Q291bnQ6IDAsXG4gICAgICAgIGlzVmVydGljYWw6IGZhbHNlLFxuICAgICAgICByb3RhdGUoKSB7XG4gICAgICAgICAgICB0aGlzLmlzVmVydGljYWwgPSAhdGhpcy5pc1ZlcnRpY2FsO1xuICAgICAgICB9LFxuICAgICAgICBoaXQoKSB7XG4gICAgICAgICAgICB0aGlzLmhpdENvdW50ICs9IDE7XG4gICAgICAgIH0sXG4gICAgICAgIGlzU3VuaygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhpdENvdW50ID09PSBzaXplO1xuICAgICAgICB9LFxuICAgIH07XG59O1xuZXhwb3J0IGRlZmF1bHQgc2hpcEZhY3Rvcnk7XG4iLCJjb25zdCBwbGF5ZXJGYWN0b3J5ID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvbHMgPSBbJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onXTtcbiAgICBsZXQgcHJldkhpdCA9IG51bGw7XG4gICAgbGV0IGxhc3RIaXQgPSBudWxsO1xuICAgIGNvbnN0IGF0dGFjayA9IChnYW1lYm9hcmQsIGNvbCwgcm93KSA9PiB7XG4gICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIHJvdykuc3RhdHVzICE9PSAnaGl0JyAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIHJvdykuc3RhdHVzICE9PSAnbWlzcycpIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhjb2wsIHJvdyk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgIHNldFByZXZIaXQobGFzdEhpdCk7XG4gICAgICAgICAgICAgICAgc2V0TGFzdEhpdCh7IGNvbDogY29sLCByb3c6IHJvdyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICdhbHJlYWR5IHNob3QnO1xuICAgIH07XG4gICAgY29uc3QgcmFuZG9tQXR0YWNrID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBsZXQgcmFuZG9tQ29sO1xuICAgICAgICBsZXQgcmFuZG9tUm93O1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICByYW5kb21Db2wgPSBjb2xzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvbHMubGVuZ3RoKV07XG4gICAgICAgICAgICByYW5kb21Sb3cgPSBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIDEwKS50b1N0cmluZygpO1xuICAgICAgICB9IHdoaWxlIChnYW1lYm9hcmQuZ2V0Q2VsbChyYW5kb21Db2wsIHJhbmRvbVJvdykuc3RhdHVzID09PSAnaGl0JyB8fCBnYW1lYm9hcmQuZ2V0Q2VsbChyYW5kb21Db2wsIHJhbmRvbVJvdykuc3RhdHVzID09PSAnbWlzcycpO1xuICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyAhPT0gJ2hpdCcgJiYgZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyAhPT0gJ21pc3MnKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhyYW5kb21Db2wsIHJhbmRvbVJvdyk7XG4gICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICBzZXRQcmV2SGl0KGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IHJhbmRvbUNvbCwgcm93OiByYW5kb21Sb3cgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyByZXN1bHQsIGNvbDogcmFuZG9tQ29sLCByb3c6IHJhbmRvbVJvdyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHJlc3VsdDogJ2FscmVhZHkgc2hvdCcsIGNvbDogcmFuZG9tQ29sLCByb3c6IHJhbmRvbVJvdyB9O1xuICAgIH07XG4gICAgY29uc3QgZm9sbG93dXBBdHRhY2sgPSAoZ2FtZWJvYXJkLCBjb2wsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBkaXJlY3Rpb25zID0gW1xuICAgICAgICAgICAgeyBjb2w6IDAsIHJvdzogLTEgfSxcbiAgICAgICAgICAgIHsgY29sOiAwLCByb3c6IDEgfSxcbiAgICAgICAgICAgIHsgY29sOiAtMSwgcm93OiAwIH0sXG4gICAgICAgICAgICB7IGNvbDogMSwgcm93OiAwIH0sXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IHZhbGlkRGlyZWN0aW9ucyA9IGRpcmVjdGlvbnMuZmlsdGVyKChkaXJlY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgKyBkaXJlY3Rpb24uY29sKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1JvdyA9IChOdW1iZXIocm93KSArIGRpcmVjdGlvbi5yb3cpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBjb25zdCBjZWxsID0gZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgaWYgKGNlbGwgJiYgY2VsbC5zdGF0dXMgIT09ICdtaXNzJyAmJiBjZWxsLnN0YXR1cyAhPT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh2YWxpZERpcmVjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgcmFuZG9tRGlyZWN0aW9uID0gdmFsaWREaXJlY3Rpb25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHZhbGlkRGlyZWN0aW9ucy5sZW5ndGgpXTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgKyByYW5kb21EaXJlY3Rpb24uY29sKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1JvdyA9IChOdW1iZXIocm93KSArIHJhbmRvbURpcmVjdGlvbi5yb3cpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhuZXdDb2wsIG5ld1Jvdyk7XG4gICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCBuZXdSb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICBzZXRQcmV2SGl0KGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IG5ld0NvbCwgcm93OiBuZXdSb3cgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGxldCByYW5nZSA9IDE7XG4gICAgbGV0IGdvUmlnaHQgPSB0cnVlO1xuICAgIGxldCBnb0Rvd24gPSB0cnVlO1xuICAgIGNvbnN0IGZpbmlzaGluZ0F0dGFjayA9IChnYW1lYm9hcmQsIGNvbCwgcm93LCBwcmV2SGl0KSA9PiB7XG4gICAgICAgIGlmIChwcmV2SGl0LnJvdyA9PT0gcm93KSB7XG4gICAgICAgICAgICBpZiAoZ29SaWdodCkge1xuICAgICAgICAgICAgICAgIHJhbmdlID0gMTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Q29sID0gU3RyaW5nLmZyb21DaGFyQ29kZShjb2wuY2hhckNvZGVBdCgwKSArIHJhbmdlKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgKyByYW5nZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykgJiYgZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpLnN0YXR1cyAhPT0gJ2hpdCcgJiYgZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpLnN0YXR1cyAhPT0gJ21pc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKG5ld0NvbCwgcm93KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRQcmV2SGl0KGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGFzdEhpdCh7IGNvbDogbmV3Q29sLCByb3c6IHJvdyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgICAgICAgICBnb1JpZ2h0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGZpbmlzaGluZ0F0dGFjayhnYW1lYm9hcmQsIG5ld0NvbCwgcm93LCBwcmV2SGl0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgbGV0IG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgLSByYW5nZSk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgICAgICBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApIC0gcmFuZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhuZXdDb2wsIHJvdyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IG5ld0NvbCwgcm93OiByb3cgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgZ29SaWdodCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGZpbmlzaGluZ0F0dGFjayhnYW1lYm9hcmQsIG5ld0NvbCwgcm93LCBwcmV2SGl0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJldkhpdC5jb2wgPT09IGNvbCkge1xuICAgICAgICAgICAgaWYgKGdvRG93bikge1xuICAgICAgICAgICAgICAgIHJhbmdlID0gMTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Um93ID0gKE51bWJlcihyb3cpICsgcmFuZ2UpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgICAgICBuZXdSb3cgPSAoTnVtYmVyKHJvdykgKyByYW5nZSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzICE9PSAnaGl0JyAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzICE9PSAnbWlzcycpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soY29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFByZXZIaXQobGFzdEhpdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMYXN0SGl0KHsgY29sOiBjb2wsIHJvdzogbmV3Um93IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGdvRG93biA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hpbmdBdHRhY2soZ2FtZWJvYXJkLCBjb2wsIG5ld1JvdywgcHJldkhpdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgICAgIGxldCBuZXdSb3cgPSAoTnVtYmVyKHJvdykgLSByYW5nZSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIG5ld1JvdyA9IChOdW1iZXIocm93KSAtIHJhbmdlKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhjb2wsIG5ld1Jvdyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IGNvbCwgcm93OiBuZXdSb3cgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgZ29Eb3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZmluaXNoaW5nQXR0YWNrKGdhbWVib2FyZCwgY29sLCBuZXdSb3csIHByZXZIaXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgZ2V0UHJldkhpdCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHByZXZIaXQ7XG4gICAgfTtcbiAgICBjb25zdCBnZXRMYXN0SGl0ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gbGFzdEhpdDtcbiAgICB9O1xuICAgIGNvbnN0IHNldFByZXZIaXQgPSAobmV3UHJldkhpdCkgPT4ge1xuICAgICAgICBwcmV2SGl0ID0gbmV3UHJldkhpdDtcbiAgICB9O1xuICAgIGNvbnN0IHNldExhc3RIaXQgPSAobmV3TGFzdEhpdCkgPT4ge1xuICAgICAgICBsYXN0SGl0ID0gbmV3TGFzdEhpdDtcbiAgICB9O1xuICAgIHJldHVybiB7IGF0dGFjaywgcmFuZG9tQXR0YWNrLCBmb2xsb3d1cEF0dGFjaywgZmluaXNoaW5nQXR0YWNrLCBwcmV2SGl0LCBsYXN0SGl0LCBnZXRQcmV2SGl0LCBnZXRMYXN0SGl0LCBzZXRQcmV2SGl0LCBzZXRMYXN0SGl0IH07XG59O1xuZXhwb3J0IGRlZmF1bHQgcGxheWVyRmFjdG9yeTtcbiIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHVpIGZyb20gJy4vdWknO1xuaW1wb3J0IGNvbnRyb2xsZXIgZnJvbSAnLi9jb250cm9sbGVyJztcbmNvbnN0IGRyYWdBbmREcm9wID0gKGZpcnN0R2FtZWJvYXJkLCBzZWNvbmRHYW1lYm9hcmQsIHNoaXBzKSA9PiB7XG4gICAgY29uc3QgZmlyc3RCb2FyZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZmlyc3RCb2FyZCcpO1xuICAgIGNvbnN0IHNlY29uZEJvYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWNvbmRCb2FyZCcpO1xuICAgIGNvbnN0IGZpcnN0Qm9hcmRDZWxscyA9IGZpcnN0Qm9hcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJyk7XG4gICAgY29uc3Qgc2Vjb25kQm9hcmRDZWxscyA9IHNlY29uZEJvYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpO1xuICAgIGxldCBzaGlwTmFtZTtcbiAgICBsZXQgc2hpcFNpemU7XG4gICAgbGV0IGdyYWJQb2ludFggPSAwO1xuICAgIGxldCBncmFiUG9pbnRZID0gMDtcbiAgICBsZXQgc2hpcE9iajtcbiAgICBsZXQgb3JpZW50YXRpb247XG4gICAgbGV0IGhpZ2hsaWdodGVkQ2VsbHMgPSBbXTtcbiAgICBjb25zdCBzaGlwTmFtZVRvT2JqID0ge1xuICAgICAgICBjYXJyaWVyOiBzaGlwc1swXSxcbiAgICAgICAgYmF0dGxlc2hpcDogc2hpcHNbMV0sXG4gICAgICAgIGRlc3Ryb3llcjogc2hpcHNbMl0sXG4gICAgICAgIHN1Ym1hcmluZTogc2hpcHNbM10sXG4gICAgICAgIHBhdHJvbGJvYXQ6IHNoaXBzWzRdLFxuICAgIH07XG4gICAgbGV0IGxhc3REcmFnZ2VkID0gbnVsbDtcbiAgICBjb25zdCBkcmFnZ2FibGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRyYWdnYWJsZScpO1xuICAgIGZ1bmN0aW9uIGdldE5vblNoaXBDZWxscyhib2FyZENlbGxzKSB7XG4gICAgICAgIGNvbnN0IGJvYXJkQ2VsbHNBcnJheSA9IEFycmF5LmZyb20oYm9hcmRDZWxscyk7XG4gICAgICAgIHJldHVybiBib2FyZENlbGxzQXJyYXkuZmlsdGVyKChjZWxsKSA9PiAhY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ3Rha2VuJykpO1xuICAgIH1cbiAgICBjb25zdCBub25TaGlwQ2VsbHMgPSBbLi4uZ2V0Tm9uU2hpcENlbGxzKGZpcnN0Qm9hcmRDZWxscyksIC4uLmdldE5vblNoaXBDZWxscyhzZWNvbmRCb2FyZENlbGxzKV07XG4gICAgZnVuY3Rpb24gaXNWYWxpZFBsYWNlbWVudCh0b0hpZ2hsaWdodCkge1xuICAgICAgICByZXR1cm4gKHRvSGlnaGxpZ2h0LmV2ZXJ5KChjZWxsKSA9PiBjZWxsLmNsYXNzTGlzdC5jb250YWlucygnZW1wdHknKSkgJiZcbiAgICAgICAgICAgICh0b0hpZ2hsaWdodC5ldmVyeSgoY2VsbCkgPT4gY2VsbC5kYXRhc2V0LmNvbCA9PT0gdG9IaWdobGlnaHRbMF0uZGF0YXNldC5jb2wpIHx8XG4gICAgICAgICAgICAgICAgdG9IaWdobGlnaHQuZXZlcnkoKGNlbGwpID0+IGNlbGwuZGF0YXNldC5yb3cgPT09IHRvSGlnaGxpZ2h0WzBdLmRhdGFzZXQucm93KSkgJiZcbiAgICAgICAgICAgIHRvSGlnaGxpZ2h0Lmxlbmd0aCA9PT0gc2hpcFNpemUgJiZcbiAgICAgICAgICAgIHRvSGlnaGxpZ2h0LmV2ZXJ5KChjZWxsKSA9PiBjZWxsLmRhdGFzZXQuY29sID49ICdBJyAmJiBjZWxsLmRhdGFzZXQuY29sIDw9ICdKJykgJiZcbiAgICAgICAgICAgIHRvSGlnaGxpZ2h0LmV2ZXJ5KChjZWxsKSA9PiBOdW1iZXIoY2VsbC5kYXRhc2V0LnJvdykgPj0gMSAmJiBOdW1iZXIoY2VsbC5kYXRhc2V0LnJvdykgPD0gMTApKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0TGFzdFNoaXBTaXplRWxlbWVudHMoaGlnaGxpZ2h0ZWRDZWxscywgc2hpcFNpemUpIHtcbiAgICAgICAgcmV0dXJuIGhpZ2hsaWdodGVkQ2VsbHMuc2xpY2UoTWF0aC5taW4oaGlnaGxpZ2h0ZWRDZWxscy5sZW5ndGggLSBzaGlwU2l6ZSwgMCkpO1xuICAgIH1cbiAgICBjb25zdCBoYW5kbGVNb3VzZWRvd24gPSAoZSkgPT4ge1xuICAgICAgICBmaXJzdEdhbWVib2FyZC5yZW1vdmVSZXNlcnZlZFNwYWNlKGZpcnN0R2FtZWJvYXJkKTtcbiAgICAgICAgc2Vjb25kR2FtZWJvYXJkLnJlbW92ZVJlc2VydmVkU3BhY2Uoc2Vjb25kR2FtZWJvYXJkKTtcbiAgICAgICAgY29uc3QgdGFyZ2V0U2hpcE5hbWUgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScpO1xuICAgICAgICBsZXQgcmVtYWluaW5nU2hpcHNGaXJzdCA9IGZpcnN0R2FtZWJvYXJkLnNoaXBzUGxhY2VkLmZpbHRlcigoc2hpcCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldFNoaXBOYW1lICE9PSBzaGlwLnRha2VuQnkubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHJlbWFpbmluZ1NoaXBzU2Vjb25kID0gc2Vjb25kR2FtZWJvYXJkLnNoaXBzUGxhY2VkLmZpbHRlcigoc2hpcCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldFNoaXBOYW1lICE9PSBzaGlwLnRha2VuQnkubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVtYWluaW5nU2hpcHNGaXJzdC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBmaXJzdEdhbWVib2FyZC5yZXNlcnZlU3BhY2UoZmlyc3RHYW1lYm9hcmQsIHNoaXAuY29sLCBzaGlwLnJvdyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZW1haW5pbmdTaGlwc1NlY29uZC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBzZWNvbmRHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKHNlY29uZEdhbWVib2FyZCwgc2hpcC5jb2wsIHNoaXAucm93KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRyb2xsZXIucmVuZXcoKTtcbiAgICAgICAgdWkuc2V0SW5pdE1lc3NhZ2UoKTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGhhbmRsZURyYWdTdGFydChlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2RyYWdnaW5nJyk7XG4gICAgICAgICAgICBzaGlwTmFtZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScpO1xuICAgICAgICAgICAgc2hpcFNpemUgPSBOdW1iZXIodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zaXplJykpO1xuICAgICAgICAgICAgZ3JhYlBvaW50WCA9IGUub2Zmc2V0WDtcbiAgICAgICAgICAgIGdyYWJQb2ludFkgPSBlLm9mZnNldFk7XG4gICAgICAgICAgICBzaGlwT2JqID0gc2hpcE5hbWVUb09ialtzaGlwTmFtZV07XG4gICAgICAgICAgICBvcmllbnRhdGlvbiA9IHNoaXBPYmouaXNWZXJ0aWNhbCA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCc7XG4gICAgICAgICAgICBsZXQgZ2FtZWJvYXJkO1xuICAgICAgICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuYm9hcmQnKS5pZCA9PT0gJ2ZpcnN0Qm9hcmQnKSB7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkID0gZmlyc3RHYW1lYm9hcmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5ib2FyZCcpLmlkID09PSAnc2Vjb25kQm9hcmQnKSB7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkID0gc2Vjb25kR2FtZWJvYXJkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2FtZWJvYXJkLnJlbW92ZVNoaXAoc2hpcE9iaiwgZ2FtZWJvYXJkKTtcbiAgICAgICAgICAgIHVpLmNsZWFyU2hpcChzaGlwT2JqLCBnYW1lYm9hcmQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFuZGxlRHJhZ092ZXIoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQgPT09ICdmaXJzdEJvYXJkJykge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBpZiAoc2hpcE9iaikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3RhcnRDZWxsID0gaW5kZXggLSAoc2hpcE9iai5pc1ZlcnRpY2FsID8gTWF0aC5mbG9vcihncmFiUG9pbnRZIC8gdGhpcy5vZmZzZXRIZWlnaHQpICogMTAgOiBNYXRoLmZsb29yKGdyYWJQb2ludFggLyB0aGlzLm9mZnNldFdpZHRoKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvSGlnaGxpZ2h0ID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcFNpemU7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNlbGxJbmRleCA9IHNoaXBPYmouaXNWZXJ0aWNhbCA/IHN0YXJ0Q2VsbCArIGkgKiAxMCA6IHN0YXJ0Q2VsbCArIGk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RCb2FyZENlbGxzW2NlbGxJbmRleF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b0hpZ2hsaWdodC5wdXNoKGZpcnN0Qm9hcmRDZWxsc1tjZWxsSW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRlZENlbGxzLnB1c2goZmlyc3RCb2FyZENlbGxzW2NlbGxJbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1ZhbGlkUGxhY2VtZW50KHRvSGlnaGxpZ2h0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9IaWdobGlnaHQuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnaGlnaGxpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGFzdERyYWdnZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0RHJhZ2dlZCA9IGdldExhc3RTaGlwU2l6ZUVsZW1lbnRzKGhpZ2hsaWdodGVkQ2VsbHMsIHNoaXBTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQgPT09ICdzZWNvbmRCb2FyZCcpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaWYgKHNoaXBPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXJ0Q2VsbCA9IGluZGV4IC0gKHNoaXBPYmouaXNWZXJ0aWNhbCA/IE1hdGguZmxvb3IoZ3JhYlBvaW50WSAvIHRoaXMub2Zmc2V0SGVpZ2h0KSAqIDEwIDogTWF0aC5mbG9vcihncmFiUG9pbnRYIC8gdGhpcy5vZmZzZXRXaWR0aCkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b0hpZ2hsaWdodCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBTaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjZWxsSW5kZXggPSBzaGlwT2JqLmlzVmVydGljYWwgPyBzdGFydENlbGwgKyBpICogMTAgOiBzdGFydENlbGwgKyBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlY29uZEJvYXJkQ2VsbHNbY2VsbEluZGV4XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvSGlnaGxpZ2h0LnB1c2goc2Vjb25kQm9hcmRDZWxsc1tjZWxsSW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRlZENlbGxzLnB1c2goc2Vjb25kQm9hcmRDZWxsc1tjZWxsSW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZFBsYWNlbWVudCh0b0hpZ2hsaWdodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvSGlnaGxpZ2h0LmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxhc3REcmFnZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdERyYWdnZWQgPSBnZXRMYXN0U2hpcFNpemVFbGVtZW50cyhoaWdobGlnaHRlZENlbGxzLCBzaGlwU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZURyYWdMZWF2ZSgpIHtcbiAgICAgICAgaGlnaGxpZ2h0ZWRDZWxscy5mb3JFYWNoKChoaWdobGlnaHRlZENlbGwpID0+IHtcbiAgICAgICAgICAgIGhpZ2hsaWdodGVkQ2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWdobGlnaHQnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGhpZ2hsaWdodGVkQ2VsbHMgPSBbXTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFuZGxlRHJvcChlKSB7XG4gICAgICAgIGhpZ2hsaWdodGVkQ2VsbHMuZm9yRWFjaCgoaGlnaGxpZ2h0ZWRDZWxsKSA9PiB7XG4gICAgICAgICAgICBoaWdobGlnaHRlZENlbGwuY2xhc3NMaXN0LnJlbW92ZSgnaGlnaGxpZ2h0Jyk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBsYXN0ID0gZ2V0TGFzdFNoaXBTaXplRWxlbWVudHMoaGlnaGxpZ2h0ZWRDZWxscywgc2hpcFNpemUpO1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuYm9hcmQnKS5pZCA9PT0gJ2ZpcnN0Qm9hcmQnKSB7XG4gICAgICAgICAgICBpZiAoc2hpcE9iaiAmJiBsYXN0RHJhZ2dlZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChmaXJzdEdhbWVib2FyZC5jYW5CZVBsYWNlZChzaGlwT2JqLnNpemUsIGxhc3RbMF0uZGF0YXNldC5jb2wsIGxhc3RbMF0uZGF0YXNldC5yb3csIG9yaWVudGF0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdEdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcE9iaiwgbGFzdFswXS5kYXRhc2V0LmNvbCwgbGFzdFswXS5kYXRhc2V0LnJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBmaXJzdEdhbWVib2FyZC5yZXNlcnZlU3BhY2UoZmlyc3RHYW1lYm9hcmQsIGxhc3RbMF0uZGF0YXNldC5jb2wsIGxhc3RbMF0uZGF0YXNldC5yb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RHYW1lYm9hcmQucGxhY2VTaGlwKHNoaXBPYmosIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQuY29sLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LnJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBmaXJzdEdhbWVib2FyZC5yZXNlcnZlU3BhY2UoZmlyc3RHYW1lYm9hcmQsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQuY29sLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LnJvdyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQgPT09ICdzZWNvbmRCb2FyZCcpIHtcbiAgICAgICAgICAgIGlmIChzaGlwT2JqICYmIGxhc3REcmFnZ2VkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlY29uZEdhbWVib2FyZC5jYW5CZVBsYWNlZChzaGlwT2JqLnNpemUsIGxhc3RbMF0uZGF0YXNldC5jb2wsIGxhc3RbMF0uZGF0YXNldC5yb3csIG9yaWVudGF0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBzZWNvbmRHYW1lYm9hcmQucGxhY2VTaGlwKHNoaXBPYmosIGxhc3RbMF0uZGF0YXNldC5jb2wsIGxhc3RbMF0uZGF0YXNldC5yb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kR2FtZWJvYXJkLnJlc2VydmVTcGFjZShzZWNvbmRHYW1lYm9hcmQsIGxhc3RbMF0uZGF0YXNldC5jb2wsIGxhc3RbMF0uZGF0YXNldC5yb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kR2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwT2JqLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kR2FtZWJvYXJkLnJlc2VydmVTcGFjZShzZWNvbmRHYW1lYm9hcmQsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQuY29sLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LnJvdyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpcnN0R2FtZWJvYXJkLnJlbW92ZVJlc2VydmVkU3BhY2UoZmlyc3RHYW1lYm9hcmQpO1xuICAgICAgICBzZWNvbmRHYW1lYm9hcmQucmVtb3ZlUmVzZXJ2ZWRTcGFjZShzZWNvbmRHYW1lYm9hcmQpO1xuICAgICAgICBmaXJzdEdhbWVib2FyZC5zaGlwc1BsYWNlZC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBmaXJzdEdhbWVib2FyZC5yZXNlcnZlU3BhY2UoZmlyc3RHYW1lYm9hcmQsIHNoaXAuY29sLCBzaGlwLnJvdyk7XG4gICAgICAgIH0pO1xuICAgICAgICBzZWNvbmRHYW1lYm9hcmQuc2hpcHNQbGFjZWQuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgICAgICAgc2Vjb25kR2FtZWJvYXJkLnJlc2VydmVTcGFjZShzZWNvbmRHYW1lYm9hcmQsIHNoaXAuY29sLCBzaGlwLnJvdyk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb250cm9sbGVyLnJlbmV3KCk7XG4gICAgICAgIHVpLmNhbkJlU3RhcnRlZCgpO1xuICAgICAgICB1aS5zZXRTdGFydE1lc3NhZ2UoKTtcbiAgICAgICAgbGFzdERyYWdnZWQgPSBudWxsO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoYW5kbGVEcmFnRW5kKGUpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgIHRhcmdldC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWdnaW5nJyk7XG4gICAgICAgIGlmIChoaWdobGlnaHRlZENlbGxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuYm9hcmQnKSAmJiB0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQgPT09ICdmaXJzdEJvYXJkJykge1xuICAgICAgICAgICAgICAgIGlmIChsYXN0RHJhZ2dlZCAmJiBmaXJzdEdhbWVib2FyZC5jYW5CZVBsYWNlZChzaGlwT2JqLnNpemUsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQuY29sLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LnJvdywgb3JpZW50YXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0R2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwT2JqLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGZpcnN0R2FtZWJvYXJkLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3cpO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLnJlbmV3KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuYm9hcmQnKSAmJiB0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQgPT09ICdzZWNvbmRCb2FyZCcpIHtcbiAgICAgICAgICAgICAgICBpZiAobGFzdERyYWdnZWQgJiYgc2Vjb25kR2FtZWJvYXJkLmNhbkJlUGxhY2VkKHNoaXBPYmouc2l6ZSwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5jb2wsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kR2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwT2JqLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kR2FtZWJvYXJkLnJlc2VydmVTcGFjZShzZWNvbmRHYW1lYm9hcmQsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQuY29sLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LnJvdyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIucmVuZXcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodWkuY2FuQmVTdGFydGVkKCkpIHtcbiAgICAgICAgICAgICAgICB1aS5maWxsQ2VsbHMoc2Vjb25kQm9hcmRFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVpLnNldFN0YXJ0TWVzc2FnZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZU1vdXNldXAoKSB7XG4gICAgICAgIGZpcnN0R2FtZWJvYXJkLnNoaXBzUGxhY2VkLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgICAgIGZpcnN0R2FtZWJvYXJkLnJlc2VydmVTcGFjZShmaXJzdEdhbWVib2FyZCwgc2hpcC5jb2wsIHNoaXAucm93KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlY29uZEdhbWVib2FyZC5zaGlwc1BsYWNlZC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBzZWNvbmRHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKHNlY29uZEdhbWVib2FyZCwgc2hpcC5jb2wsIHNoaXAucm93KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRyb2xsZXIucmVuZXcoKTtcbiAgICAgICAgdWkuc2V0U3RhcnRNZXNzYWdlKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZVJvdGF0ZShlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgIGxldCBnYW1lYm9hcmQ7XG4gICAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQgPT09ICdmaXJzdEJvYXJkJykge1xuICAgICAgICAgICAgZ2FtZWJvYXJkID0gZmlyc3RHYW1lYm9hcmQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuYm9hcmQnKS5pZCA9PT0gJ3NlY29uZEJvYXJkJykge1xuICAgICAgICAgICAgZ2FtZWJvYXJkID0gc2Vjb25kR2FtZWJvYXJkO1xuICAgICAgICB9XG4gICAgICAgIHNoaXBOYW1lID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJyk7XG4gICAgICAgIHNoaXBTaXplID0gTnVtYmVyKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2l6ZScpKTtcbiAgICAgICAgc2hpcE9iaiA9IHNoaXBOYW1lVG9PYmpbc2hpcE5hbWVdO1xuICAgICAgICBjb25zdCB0ZW1wU2hpcCA9IHNoaXBPYmo7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBnYW1lYm9hcmQuc2hpcHNQbGFjZWQuZmlsdGVyKChzaGlwKSA9PiBzaGlwLnRha2VuQnkubmFtZS50b0xvd2VyQ2FzZSgpID09PSBzaGlwTmFtZSk7XG4gICAgICAgIGdhbWVib2FyZC5yZW1vdmVTaGlwKHNoaXBPYmosIGdhbWVib2FyZCk7XG4gICAgICAgIGdhbWVib2FyZC5yZW1vdmVSZXNlcnZlZFNwYWNlKGdhbWVib2FyZCk7XG4gICAgICAgIGdhbWVib2FyZC5zaGlwc1BsYWNlZC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBnYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGdhbWVib2FyZCwgc2hpcC5jb2wsIHNoaXAucm93KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRlbXBTaGlwLnJvdGF0ZSgpO1xuICAgICAgICBvcmllbnRhdGlvbiA9IHRlbXBTaGlwLmlzVmVydGljYWwgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnO1xuICAgICAgICBpZiAoZ2FtZWJvYXJkLmNhbkJlUGxhY2VkKHRlbXBTaGlwLnNpemUsIGN1cnJlbnRbMF0uY29sLCBjdXJyZW50WzBdLnJvdywgb3JpZW50YXRpb24pKSB7XG4gICAgICAgICAgICBnYW1lYm9hcmQucGxhY2VTaGlwKHRlbXBTaGlwLCBjdXJyZW50WzBdLmNvbCwgY3VycmVudFswXS5yb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRlbXBTaGlwLnJvdGF0ZSgpO1xuICAgICAgICAgICAgb3JpZW50YXRpb24gPSB0ZW1wU2hpcC5pc1ZlcnRpY2FsID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJztcbiAgICAgICAgICAgIGdhbWVib2FyZC5wbGFjZVNoaXAodGVtcFNoaXAsIGN1cnJlbnRbMF0uY29sLCBjdXJyZW50WzBdLnJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGdhbWVib2FyZC5zaGlwc1BsYWNlZC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBnYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGdhbWVib2FyZCwgc2hpcC5jb2wsIHNoaXAucm93KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRyb2xsZXIucmVuZXcoKTtcbiAgICAgICAgaWYgKHVpLmNhbkJlU3RhcnRlZCgpKSB7XG4gICAgICAgICAgICB1aS5maWxsQ2VsbHMoc2Vjb25kQm9hcmRFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBibG9ja1JpZ2h0Q2xpY2soZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIGZpcnN0Qm9hcmRDZWxscy5mb3JFYWNoKChjZWxsLCBpbmRleCkgPT4ge1xuICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgaGFuZGxlRHJhZ092ZXIoaW5kZXgpKTtcbiAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCBoYW5kbGVEcmFnTGVhdmUpO1xuICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBoYW5kbGVEcm9wKTtcbiAgICB9KTtcbiAgICBzZWNvbmRCb2FyZENlbGxzLmZvckVhY2goKGNlbGwsIGluZGV4KSA9PiB7XG4gICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBoYW5kbGVEcmFnT3ZlcihpbmRleCkpO1xuICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGhhbmRsZURyYWdMZWF2ZSk7XG4gICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGhhbmRsZURyb3ApO1xuICAgIH0pO1xuICAgIGRyYWdnYWJsZXMuZm9yRWFjaCgoZHJhZ2dhYmxlKSA9PiB7XG4gICAgICAgIGRyYWdnYWJsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVNb3VzZWRvd24pO1xuICAgICAgICBkcmFnZ2FibGUuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgaGFuZGxlRHJhZ1N0YXJ0KTtcbiAgICAgICAgZHJhZ2dhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCBoYW5kbGVEcmFnRW5kKTtcbiAgICAgICAgZHJhZ2dhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBoYW5kbGVNb3VzZXVwKTtcbiAgICAgICAgZHJhZ2dhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgaGFuZGxlUm90YXRlKTtcbiAgICAgICAgbm9uU2hpcENlbGxzLmZvckVhY2goKGNlbGwpID0+IGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBibG9ja1JpZ2h0Q2xpY2spKTtcbiAgICB9KTtcbn07XG5leHBvcnQgZGVmYXVsdCBkcmFnQW5kRHJvcDtcbiIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IGRyYWdBbmREcm9wIGZyb20gJy4vZHJhZ0FuZERyb3AnO1xuaW1wb3J0IGNvbnRyb2xsZXIgZnJvbSAnLi9jb250cm9sbGVyJztcbmNvbnN0IHVpID0gKCgpID0+IHtcbiAgICBjb25zdCBzdGF0dXNCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUJveCBwJyk7XG4gICAgY29uc3QgYm9hcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JvYXJkcycpO1xuICAgIGNvbnN0IGZpcnN0Qm9hcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpcnN0Qm9hcmQnKTtcbiAgICBsZXQgc2Vjb25kQm9hcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgY29uc3QgcFZjQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsYXllclZzQ29tcHV0ZXInKTtcbiAgICBjb25zdCBuZXdHYW1lQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25ld0dhbWUnKTtcbiAgICBjb25zdCBjVmNCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29tcHV0ZXJWc0NvbXB1dGVyJyk7XG4gICAgY29uc3Qgc3RhcnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3RhcnQnKTtcbiAgICBjb25zdCByYW5kb21CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmFuZG9tUGxhY2VtZW50Jyk7XG4gICAgY29uc3QgYWxsQnRucyA9IFtwVmNCdG4sIG5ld0dhbWVCdG4sIGNWY0J0biwgc3RhcnRCdG4sIHJhbmRvbUJ0bl07XG4gICAgY29uc3Qgc3BlZWRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoJ3NwZWVkJyk7XG4gICAgY29uc3QgY3JlYXRlQ2VsbCA9IChjZWxsKSA9PiB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjZWxsJyk7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjZWxsLnN0YXR1cyk7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWNvbCcsIGNlbGwuY29sKTtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcm93JywgY2VsbC5yb3cpO1xuICAgICAgICBpZiAoY2VsbC50YWtlbkJ5KSB7XG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1zaGlwTmFtZScsIGNlbGwudGFrZW5CeS5uYW1lLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH07XG4gICAgY29uc3QgcmVuZGVyQ2VsbHMgPSAoZ2FtZWJvYXJkLCBib2FyZCkgPT4ge1xuICAgICAgICBnYW1lYm9hcmQuYXJyYXkuZm9yRWFjaCgocm93KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgoY29sKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IGNyZWF0ZUNlbGwoY29sKTtcbiAgICAgICAgICAgICAgICBib2FyZC5hcHBlbmQoY2VsbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBnZXRCb2FyZElkID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBpZiAoZ2FtZWJvYXJkID09PSBjb250cm9sbGVyLmh1bWFuR2FtZWJvYXJkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2ZpcnN0Qm9hcmQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGdhbWVib2FyZCA9PT0gY29udHJvbGxlci5jb21wdXRlckdhbWVib2FyZCkge1xuICAgICAgICAgICAgcmV0dXJuICdzZWNvbmRCb2FyZCc7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHJlbmRlckJvYXJkID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBjb25zdCBib2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBib2FyZC5jbGFzc0xpc3QuYWRkKCdib2FyZCcpO1xuICAgICAgICBib2FyZC5pZCA9IGdldEJvYXJkSWQoZ2FtZWJvYXJkKTtcbiAgICAgICAgcmVuZGVyQ2VsbHMoZ2FtZWJvYXJkLCBib2FyZCk7XG4gICAgICAgIGJvYXJkcy5hcHBlbmQoYm9hcmQpO1xuICAgIH07XG4gICAgY29uc3QgY2xlYXJTaGlwID0gKHNoaXAsIGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBjb25zdCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCMke2dldEJvYXJkSWQoZ2FtZWJvYXJkKX0gLmNlbGxgKTtcbiAgICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YWtlbicpICYmIGNlbGwuZ2V0QXR0cmlidXRlKCdkYXRhLXNoaXBOYW1lJykgPT09IHNoaXAubmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCd0YWtlbicpO1xuICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnZW1wdHknKTtcbiAgICAgICAgICAgICAgICBjZWxsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1zaGlwTmFtZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHJlZnJlc2hCb2FyZCA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgYm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtnZXRCb2FyZElkKGdhbWVib2FyZCl9YCk7XG4gICAgICAgIGJvYXJkLmlubmVySFRNTCA9ICcnO1xuICAgICAgICByZW5kZXJDZWxscyhnYW1lYm9hcmQsIGJvYXJkKTtcbiAgICB9O1xuICAgIGNvbnN0IGdldFVzZXJJbnB1dCA9IChlKSA9PiB7XG4gICAgICAgIGlmICghZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaXQnKSAmJiAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtaXNzJykpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1jb2wnKTtcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1yb3cnKTtcbiAgICAgICAgICAgIHJldHVybiB7IGNvbCwgcm93IH07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZVVzZXJJbnB1dCA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBjb25zdCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNzZWNvbmRCb2FyZCAuY2VsbCcpO1xuICAgICAgICBsZXQgdXNlcklucHV0O1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICB1c2VySW5wdXQgPSB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjZWxsLmNsYXNzTGlzdC5jb250YWlucygnaGl0JykgJiYgIWNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdtaXNzJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZ2V0VXNlcklucHV0KGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsgb25jZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gd2hpbGUgKCF1c2VySW5wdXQpO1xuICAgICAgICBjb25zdCBjb2wgPSB1c2VySW5wdXQuY29sLnRvU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IHJvdyA9IHVzZXJJbnB1dC5yb3cudG9TdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIHsgY29sLCByb3cgfTtcbiAgICB9KTtcbiAgICBjb25zdCBoYW5kbGVQdkMgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgZmlsbENlbGxzKGZpcnN0Qm9hcmRFbGVtZW50KTtcbiAgICAgICAgd2FpdGluZyh0cnVlKTtcbiAgICAgICAgYWxsQnRucy5mb3JFYWNoKChidG4pID0+IChidG4uZGlzYWJsZWQgPSB0cnVlKSk7XG4gICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGdldFNwZWVkVmFsdWUoKSkpO1xuICAgICAgICBhbGxCdG5zLmZvckVhY2goKGJ0bikgPT4gKGJ0bi5kaXNhYmxlZCA9IGZhbHNlKSk7XG4gICAgICAgIHdhaXRpbmcoZmFsc2UpO1xuICAgICAgICBjYW5CZVN0YXJ0ZWQoKTtcbiAgICAgICAgc2V0SW5pdE1lc3NhZ2UoKTtcbiAgICB9KTtcbiAgICBjb25zdCBoYW5kbGVOZXdHYW1lID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHNldFJlc3RhcnRNZXNzYWdlKCk7XG4gICAgICAgIHdhaXRpbmcodHJ1ZSk7XG4gICAgICAgIGFsbEJ0bnMuZm9yRWFjaCgoYnRuKSA9PiAoYnRuLmRpc2FibGVkID0gdHJ1ZSkpO1xuICAgICAgICB5aWVsZCBjb250cm9sbGVyLm5ld0dhbWUoKTtcbiAgICAgICAgYWxsQnRucy5mb3JFYWNoKChidG4pID0+IChidG4uZGlzYWJsZWQgPSBmYWxzZSkpO1xuICAgICAgICB3YWl0aW5nKGZhbHNlKTtcbiAgICAgICAgY2FuQmVTdGFydGVkKCk7XG4gICAgICAgIGlmIChwVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBzZXRJbml0TWVzc2FnZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgaGFuZGxlQ3ZDID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHdhaXRpbmcodHJ1ZSk7XG4gICAgICAgIGFsbEJ0bnMuZm9yRWFjaCgoYnRuKSA9PiAoYnRuLmRpc2FibGVkID0gdHJ1ZSkpO1xuICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBnZXRTcGVlZFZhbHVlKCkpKTtcbiAgICAgICAgYWxsQnRucy5mb3JFYWNoKChidG4pID0+IChidG4uZGlzYWJsZWQgPSBmYWxzZSkpO1xuICAgICAgICB3YWl0aW5nKGZhbHNlKTtcbiAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICByYW5kb21CdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBjVmNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0pO1xuICAgIGNvbnN0IGhhbmRsZUdhbWVNb2RlID0gKHNlbGVjdGVkRWxlbWVudCwgZGVzZWxlY3RlZEVsZW1lbnQpID0+IHtcbiAgICAgICAgZGVzZWxlY3RlZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgaWYgKCFzZWxlY3RlZEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZEVsZW1lbnQgPT09IHBWY0J0bikge1xuICAgICAgICAgICAgICAgIGhhbmRsZVB2QygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkRWxlbWVudCA9PT0gY1ZjQnRuKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlQ3ZDKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250cm9sbGVyLnJlc3RhcnQoKTtcbiAgICAgICAgICAgIHNldFJlc3RhcnRNZXNzYWdlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHdhaXRpbmcgPSAoYm9vbCkgPT4ge1xuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnd2FpdCcsIGJvb2wpO1xuICAgIH07XG4gICAgY29uc3Qgc2V0Qm9hcmRQb2ludGVyID0gKHdoaWNoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlY29uZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWNvbmRCb2FyZCcpO1xuICAgICAgICBpZiAod2hpY2ggPT09ICdwbGF5ZXInKSB7XG4gICAgICAgICAgICBzZWNvbmQuY2xhc3NMaXN0LmFkZCgnYm9hcmRPdXRsaW5lJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAod2hpY2ggPT09ICdjb21wdXRlcicpIHtcbiAgICAgICAgICAgIHNlY29uZC5jbGFzc0xpc3QucmVtb3ZlKCdib2FyZE91dGxpbmUnKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlQm9hcmRQb2ludGVyID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBzZWNvbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5yZW1vdmUoJ2JvYXJkT3V0bGluZScpO1xuICAgIH07XG4gICAgY29uc3QgY3JlYXRlU2hpcE92ZXJsYXkgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGdhbWVib2FyZC5zaGlwc1BsYWNlZC5mb3JFYWNoKChmaXJzdENlbGwpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBjb25zdCBzaGlwTmFtZSA9IGZpcnN0Q2VsbC50YWtlbkJ5Lm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBTaXplID0gZmlyc3RDZWxsLnRha2VuQnkuc2l6ZTtcbiAgICAgICAgICAgIGNvbnN0IGlzVmVydGljYWwgPSBmaXJzdENlbGwudGFrZW5CeS5pc1ZlcnRpY2FsO1xuICAgICAgICAgICAgc2hpcEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2hpcCcsIHNoaXBOYW1lKTtcbiAgICAgICAgICAgIHNoaXBFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1zaXplJywgYCR7c2hpcFNpemV9YCk7XG4gICAgICAgICAgICBzaGlwRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScsIGAke3NoaXBOYW1lfWApO1xuICAgICAgICAgICAgc2hpcEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkcmFnZ2FibGUnLCAndHJ1ZScpO1xuICAgICAgICAgICAgc2hpcEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZHJhZ2dhYmxlJyk7XG4gICAgICAgICAgICBjb25zdCBzZXRTaGlwU3R5bGUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaHRtbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdEZvbnRTaXplID0gcGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShodG1sRWxlbWVudCwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgnZm9udC1zaXplJykpO1xuICAgICAgICAgICAgICAgIGlmICghaXNWZXJ0aWNhbCkge1xuICAgICAgICAgICAgICAgICAgICBzaGlwRWxlbWVudC5zdHlsZS53aWR0aCA9IHNoaXBTaXplICogKGNlbGxTaXplIC8gcm9vdEZvbnRTaXplKSArICdyZW0nO1xuICAgICAgICAgICAgICAgICAgICBzaGlwRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBjZWxsU2l6ZSAvIHJvb3RGb250U2l6ZSArICdyZW0nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc1ZlcnRpY2FsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoaXBFbGVtZW50LnN0eWxlLndpZHRoID0gY2VsbFNpemUgLyByb290Rm9udFNpemUgKyAncmVtJztcbiAgICAgICAgICAgICAgICAgICAgc2hpcEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gc2hpcFNpemUgKiAoY2VsbFNpemUgLyByb290Rm9udFNpemUpICsgJ3JlbSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGxldCBjZWxsU2l6ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib2FyZCAuY2VsbCcpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgICAgICAgc2V0U2hpcFN0eWxlKCk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNlbGxTaXplID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvYXJkIC5jZWxsJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgICAgICAgICAgc2V0U2hpcFN0eWxlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0Q2VsbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtnZXRCb2FyZElkKGdhbWVib2FyZCl9IC5jZWxsW2RhdGEtY29sPVwiJHtmaXJzdENlbGwuY29sfVwiXVtkYXRhLXJvdz1cIiR7Zmlyc3RDZWxsLnJvd31cIl1gKTtcbiAgICAgICAgICAgIGZpcnN0Q2VsbEVsZW1lbnQuYXBwZW5kQ2hpbGQoc2hpcEVsZW1lbnQpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IGNhbkJlU3RhcnRlZCA9ICgpID0+IHtcbiAgICAgICAgaWYgKGNvbnRyb2xsZXIuaHVtYW5HYW1lYm9hcmQuc2hpcHNQbGFjZWQubGVuZ3RoID09PSA1ICYmIGNvbnRyb2xsZXIuY29tcHV0ZXJHYW1lYm9hcmQuc2hpcHNQbGFjZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzZWNvbmRCb2FyZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgICAgIGZpbGxDZWxscyhzZWNvbmRCb2FyZEVsZW1lbnQpO1xuICAgICAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRJbml0TWVzc2FnZSA9ICgpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhdHVzVGV4dE1vYmlsZSA9IFwiVXNlICdSYW5kb20gUGxhY2VtZW50JyBidXR0b24sIHRoZW4gcHJlc3MgU3RhcnQhXCI7XG4gICAgICAgIGNvbnN0IHN0YXR1c1RleHREZXNrdG9wID0gXCJEcmFnIGFuZCBkcm9wIHNoaXBzIG9udG8gdGhlIGxlZnQgYm9hcmQgb3IgdXNlICdSYW5kb20gUGxhY2VtZW50JyBidXR0b24uIFJpZ2h0IGNsaWNrIHRvIHJvdGF0ZS4gV2hlbiByZWFkeSwgcHJlc3MgU3RhcnQhXCI7XG4gICAgICAgIGlmIChzdGF0dXNCb3gudGV4dENvbnRlbnQgPT09IHN0YXR1c1RleHRNb2JpbGUgfHxcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9PT0gc3RhdHVzVGV4dERlc2t0b3AgfHxcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9PT0gJ1Jlc3RhcnRpbmcuLi4nIHx8XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPT09ICdZb3UgY2FuIG5vdyBiZWdpbiB0aGUgZ2FtZS4gUHJlc3Mgc3RhcnQhJykge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gc3RhdHVzVGV4dE1vYmlsZTtcbiAgICAgICAgICAgIGlmICh3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogMTAyNHB4KScpLm1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSBzdGF0dXNUZXh0RGVza3RvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0U3RhcnRNZXNzYWdlID0gKCkgPT4ge1xuICAgICAgICBpZiAoY2FuQmVTdGFydGVkKCkpIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9ICdZb3UgY2FuIG5vdyBiZWdpbiB0aGUgZ2FtZS4gUHJlc3Mgc3RhcnQhJztcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0VHVybk1lc3NhZ2VQdkMgPSAoaXNQbGF5ZXJUdXJuKSA9PiB7XG4gICAgICAgIGlmIChpc1BsYXllclR1cm4pIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9IFwiUGxheWVyJ3MgdHVybi4gVGFrZSBhaW0gYW5kIGF0dGFjayFcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9IFwiQ29tcHV0ZXIncyB0dXJuLiBUaGUgc2hvdCBpcyBjb21pbmchXCI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldFR1cm5NZXNzYWdlQ3ZDID0gKGlzUGxheWVyVHVybikgPT4ge1xuICAgICAgICBpZiAoaXNQbGF5ZXJUdXJuKSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSBcIlZpb2xldCdzIHR1cm5cIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9IFwiQmx1ZSdzIHR1cm5cIjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0R2FtZU92ZXJNZXNzYWdlUHZDID0gKHdobykgPT4ge1xuICAgICAgICBpZiAod2hvID09PSAncGxheWVyJykge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gJ0dhbWUgb3ZlciwgUGxheWVyIHdpbnMhJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh3aG8gPT09ICdjb21wdXRlcicpIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9ICdHYW1lIG92ZXIsIENvbXB1dGVyIHdpbnMhJztcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0R2FtZU92ZXJNZXNzYWdlQ3ZDID0gKHdobykgPT4ge1xuICAgICAgICBpZiAod2hvID09PSAncGxheWVyJykge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gJ0dhbWUgb3ZlciwgQmx1ZSBDb21wdXRlciB3aW5zISc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAod2hvID09PSAnY29tcHV0ZXInKSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSAnR2FtZSBvdmVyLCBWaW9sZXQgQ29tcHV0ZXIgd2lucyEnO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRSZXN0YXJ0TWVzc2FnZSA9ICgpID0+IHtcbiAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gJ1Jlc3RhcnRpbmcuLi4nO1xuICAgIH07XG4gICAgcFZjQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBmaWxsQ2VsbHMoZmlyc3RCb2FyZEVsZW1lbnQpO1xuICAgICAgICBoYW5kbGVHYW1lTW9kZShwVmNCdG4sIGNWY0J0bik7XG4gICAgICAgIGNvbnN0IHNlY29uZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWNvbmRCb2FyZCcpO1xuICAgICAgICBzZWNvbmQuY2xhc3NMaXN0LnJlbW92ZSgnc3RhcnQnKTtcbiAgICAgICAgdW5GaWxsQ2VsbHMoZmlyc3RCb2FyZEVsZW1lbnQpO1xuICAgICAgICBzdGFydEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHBWY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSk7XG4gICAgY1ZjQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBmaWxsQ2VsbHMoZmlyc3RCb2FyZEVsZW1lbnQpO1xuICAgICAgICBmaWxsQ2VsbHMoc2Vjb25kQm9hcmRFbGVtZW50KTtcbiAgICAgICAgaGFuZGxlR2FtZU1vZGUoY1ZjQnRuLCBwVmNCdG4pO1xuICAgICAgICBjb25zdCBzZWNvbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5hZGQoJ3N0YXJ0Jyk7XG4gICAgICAgIFByb21pc2UuYWxsKFt1bkZpbGxDZWxscyhmaXJzdEJvYXJkRWxlbWVudCksIHVuRmlsbENlbGxzKHNlY29uZEJvYXJkRWxlbWVudCldKTtcbiAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICByYW5kb21CdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBjVmNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0pO1xuICAgIG5ld0dhbWVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgZmlsbENlbGxzKGZpcnN0Qm9hcmRFbGVtZW50KTtcbiAgICAgICAgaWYgKGNWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgIGZpbGxDZWxscyhzZWNvbmRCb2FyZEVsZW1lbnQpO1xuICAgICAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmFuZG9tQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNWY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdWkucmVtb3ZlQm9hcmRQb2ludGVyKCk7XG4gICAgICAgIHlpZWxkIGhhbmRsZU5ld0dhbWUoKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIHNlY29uZC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XG4gICAgICAgIGlmIChwVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBzZWNvbmQuY2xhc3NMaXN0LnJlbW92ZSgnc3RhcnQnKTtcbiAgICAgICAgICAgIHVuRmlsbENlbGxzKGZpcnN0Qm9hcmRFbGVtZW50KTtcbiAgICAgICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHBWY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgIHNlY29uZC5jbGFzc0xpc3QuYWRkKCdzdGFydCcpO1xuICAgICAgICAgICAgcmFuZG9tQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIFByb21pc2UuYWxsKFt1bkZpbGxDZWxscyhmaXJzdEJvYXJkRWxlbWVudCksIHVuRmlsbENlbGxzKHNlY29uZEJvYXJkRWxlbWVudCldKTtcbiAgICAgICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJhbmRvbUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICBjVmNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSkpO1xuICAgIHN0YXJ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjb250cm9sbGVyLnN0YXJ0KCk7XG4gICAgICAgIGNvbnN0IGZpcnN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpcnN0Qm9hcmQnKTtcbiAgICAgICAgZmlyc3QuY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xuICAgICAgICBjb25zdCBzZWNvbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5hZGQoJ3N0YXJ0Jyk7XG4gICAgICAgIHVuRmlsbENlbGxzKHNlY29uZEJvYXJkRWxlbWVudCk7XG4gICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgcmFuZG9tQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9KTtcbiAgICByYW5kb21CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNvbnRyb2xsZXIuY29tcHV0ZXJHYW1lYm9hcmQuY2xlYXJCb2FyZCgpO1xuICAgICAgICByZWZyZXNoQm9hcmQoY29udHJvbGxlci5jb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIGNvbnRyb2xsZXIucmFuZG9taXplU2hpcHNQbGFjZW1lbnQoY29udHJvbGxlci5odW1hbkdhbWVib2FyZCk7XG4gICAgICAgIGRyYWdBbmREcm9wKGNvbnRyb2xsZXIuaHVtYW5HYW1lYm9hcmQsIGNvbnRyb2xsZXIuY29tcHV0ZXJHYW1lYm9hcmQsIGNvbnRyb2xsZXIuaHVtYW5TaGlwcyk7XG4gICAgICAgIGNhbkJlU3RhcnRlZCgpO1xuICAgICAgICBzZXRTdGFydE1lc3NhZ2UoKTtcbiAgICAgICAgZmlsbENlbGxzKHNlY29uZEJvYXJkRWxlbWVudCk7XG4gICAgfSk7XG4gICAgbGV0IHNwZWVkVmFsdWUgPSAxMDAwO1xuICAgIHNwZWVkcy5mb3JFYWNoKChzcGVlZCkgPT4ge1xuICAgICAgICBzcGVlZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGxldCBpbnB1dCA9IHNwZWVkO1xuICAgICAgICAgICAgaWYgKGlucHV0LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBzcGVlZFZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgY29uc3QgZ2V0U3BlZWRWYWx1ZSA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHNwZWVkVmFsdWU7XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgc2V0SW5pdE1lc3NhZ2UpO1xuICAgIGNvbnN0IGZpbGxDZWxscyA9IChlbGVtZW50KSA9PiB7XG4gICAgICAgIGxldCBib2FyZDtcbiAgICAgICAgaWYgKGVsZW1lbnQgPT09IGZpcnN0Qm9hcmRFbGVtZW50KSB7XG4gICAgICAgICAgICBib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmaXJzdEJvYXJkJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZWxlbWVudCA9PT0gc2Vjb25kQm9hcmRFbGVtZW50KSB7XG4gICAgICAgICAgICBib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWNvbmRCb2FyZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNlbGxzID0gYm9hcmQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKTtcbiAgICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdmaWxsZWQnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCB1bkZpbGxDZWxscyA9IChlbGVtZW50KSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgd2FpdGluZyh0cnVlKTtcbiAgICAgICAgbGV0IGJvYXJkO1xuICAgICAgICBpZiAoZWxlbWVudCA9PT0gZmlyc3RCb2FyZEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpcnN0Qm9hcmQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlbGVtZW50ID09PSBzZWNvbmRCb2FyZEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2VsbHMgPSBib2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpO1xuICAgICAgICBjZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2ZpbGxlZCcpO1xuICAgICAgICB9KTtcbiAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGNlbGxzLmZvckVhY2goKGNlbGwsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnZmlsbGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gY2VsbHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgKGdldFNwZWVkVmFsdWUoKSAvIDEyMCkgKiBpbmRleCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHdhaXRpbmcoZmFsc2UpO1xuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlbmRlckJvYXJkLFxuICAgICAgICBjbGVhclNoaXAsXG4gICAgICAgIHJlZnJlc2hCb2FyZCxcbiAgICAgICAgaGFuZGxlVXNlcklucHV0LFxuICAgICAgICBwVmNCdG4sXG4gICAgICAgIGNWY0J0bixcbiAgICAgICAgd2FpdGluZyxcbiAgICAgICAgc2V0Qm9hcmRQb2ludGVyLFxuICAgICAgICByZW1vdmVCb2FyZFBvaW50ZXIsXG4gICAgICAgIGNyZWF0ZVNoaXBPdmVybGF5LFxuICAgICAgICBjYW5CZVN0YXJ0ZWQsXG4gICAgICAgIHNldEluaXRNZXNzYWdlLFxuICAgICAgICBzZXRTdGFydE1lc3NhZ2UsXG4gICAgICAgIHNldFR1cm5NZXNzYWdlUHZDLFxuICAgICAgICBzZXRUdXJuTWVzc2FnZUN2QyxcbiAgICAgICAgc2V0R2FtZU92ZXJNZXNzYWdlUHZDLFxuICAgICAgICBzZXRHYW1lT3Zlck1lc3NhZ2VDdkMsXG4gICAgICAgIHNldFJlc3RhcnRNZXNzYWdlLFxuICAgICAgICBnZXRTcGVlZFZhbHVlLFxuICAgICAgICBmaWxsQ2VsbHMsXG4gICAgICAgIHVuRmlsbENlbGxzLFxuICAgICAgICBmaXJzdEJvYXJkRWxlbWVudCxcbiAgICB9O1xufSkoKTtcbmV4cG9ydCBkZWZhdWx0IHVpO1xuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgZ2FtZWJvYXJkRmFjdG9yeSBmcm9tICcuL2dhbWVib2FyZCc7XG5pbXBvcnQgc2hpcEZhY3RvcnkgZnJvbSAnLi9zaGlwJztcbmltcG9ydCBwbGF5ZXJGYWN0b3J5IGZyb20gJy4vcGxheWVyJztcbmltcG9ydCB1aSBmcm9tICcuL3VpJztcbmltcG9ydCBkcmFnQW5kRHJvcCBmcm9tICcuL2RyYWdBbmREcm9wJztcbmNvbnN0IGNvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGh1bWFuR2FtZWJvYXJkID0gZ2FtZWJvYXJkRmFjdG9yeSgpO1xuICAgIGNvbnN0IGNvbXB1dGVyR2FtZWJvYXJkID0gZ2FtZWJvYXJkRmFjdG9yeSgpO1xuICAgIGNvbnN0IGh1bWFuID0gcGxheWVyRmFjdG9yeSgpO1xuICAgIGNvbnN0IGNvbXB1dGVyID0gcGxheWVyRmFjdG9yeSgpO1xuICAgIGxldCBpc1N0b3BwZWQgPSB0cnVlO1xuICAgIGxldCBodW1hbkNhcnJpZXIgPSBzaGlwRmFjdG9yeSgnQ2FycmllcicpO1xuICAgIGxldCBodW1hbkJhdHRsZXNoaXAgPSBzaGlwRmFjdG9yeSgnQmF0dGxlc2hpcCcpO1xuICAgIGxldCBodW1hbkRlc3Ryb3llciA9IHNoaXBGYWN0b3J5KCdEZXN0cm95ZXInKTtcbiAgICBsZXQgaHVtYW5TdWJtYXJpbmUgPSBzaGlwRmFjdG9yeSgnU3VibWFyaW5lJyk7XG4gICAgbGV0IGh1bWFuUGF0cm9sYm9hdCA9IHNoaXBGYWN0b3J5KCdQYXRyb2xCb2F0Jyk7XG4gICAgY29uc3QgaHVtYW5TaGlwcyA9IFtodW1hbkNhcnJpZXIsIGh1bWFuQmF0dGxlc2hpcCwgaHVtYW5EZXN0cm95ZXIsIGh1bWFuU3VibWFyaW5lLCBodW1hblBhdHJvbGJvYXRdO1xuICAgIGNvbnN0IHBvcHVsYXRlU2hpcHMgPSAoKSA9PiB7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnBsYWNlU2hpcChodW1hbkNhcnJpZXIsICdBJywgJzEnLCAnaG9yaXpvbnRhbCcpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5wbGFjZVNoaXAoaHVtYW5CYXR0bGVzaGlwLCAnQScsICczJywgJ2hvcml6b250YWwnKTtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucGxhY2VTaGlwKGh1bWFuRGVzdHJveWVyLCAnQScsICc1JywgJ2hvcml6b250YWwnKTtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucGxhY2VTaGlwKGh1bWFuU3VibWFyaW5lLCAnQScsICc3JywgJ2hvcml6b250YWwnKTtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucGxhY2VTaGlwKGh1bWFuUGF0cm9sYm9hdCwgJ0EnLCAnOScsICdob3Jpem9udGFsJyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnJlc2VydmVTcGFjZShjb21wdXRlckdhbWVib2FyZCwgJ0EnLCAnMScpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5yZXNlcnZlU3BhY2UoY29tcHV0ZXJHYW1lYm9hcmQsICdBJywgJzMnKTtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGNvbXB1dGVyR2FtZWJvYXJkLCAnQScsICc1Jyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnJlc2VydmVTcGFjZShjb21wdXRlckdhbWVib2FyZCwgJ0EnLCAnNycpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5yZXNlcnZlU3BhY2UoY29tcHV0ZXJHYW1lYm9hcmQsICdBJywgJzknKTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHJlbmV3KCkge1xuICAgICAgICB1aS5yZWZyZXNoQm9hcmQoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICB1aS5yZWZyZXNoQm9hcmQoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICB1aS5jcmVhdGVTaGlwT3ZlcmxheShodW1hbkdhbWVib2FyZCk7XG4gICAgICAgIHVpLmNyZWF0ZVNoaXBPdmVybGF5KGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgZHJhZ0FuZERyb3AoaHVtYW5HYW1lYm9hcmQsIGNvbXB1dGVyR2FtZWJvYXJkLCBodW1hblNoaXBzKTtcbiAgICB9XG4gICAgY29uc3QgaXNHYW1lT3ZlciA9ICgpID0+IHtcbiAgICAgICAgaWYgKGNvbXB1dGVyR2FtZWJvYXJkLmFsbFN1bmsoY29tcHV0ZXJHYW1lYm9hcmQpKSB7XG4gICAgICAgICAgICB1aS5yZW1vdmVCb2FyZFBvaW50ZXIoKTtcbiAgICAgICAgICAgIGlmICh1aS5wVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgdWkuc2V0R2FtZU92ZXJNZXNzYWdlUHZDKCdwbGF5ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1aS5jVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgdWkuc2V0R2FtZU92ZXJNZXNzYWdlQ3ZDKCdwbGF5ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodW1hbkdhbWVib2FyZC5hbGxTdW5rKGh1bWFuR2FtZWJvYXJkKSkge1xuICAgICAgICAgICAgdWkucmVtb3ZlQm9hcmRQb2ludGVyKCk7XG4gICAgICAgICAgICBpZiAodWkucFZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgICAgIHVpLnNldEdhbWVPdmVyTWVzc2FnZVB2QygnY29tcHV0ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1aS5jVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgdWkuc2V0R2FtZU92ZXJNZXNzYWdlQ3ZDKCdjb21wdXRlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgY29uc3QgY29tcHV0ZXJBSSA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgbGV0IHBsYXllcjtcbiAgICAgICAgaWYgKGdhbWVib2FyZCA9PT0gaHVtYW5HYW1lYm9hcmQpIHtcbiAgICAgICAgICAgIHBsYXllciA9IGNvbXB1dGVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGdhbWVib2FyZCA9PT0gY29tcHV0ZXJHYW1lYm9hcmQpIHtcbiAgICAgICAgICAgIHBsYXllciA9IGh1bWFuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnYW1lYm9hcmQuaGl0QnV0Tm90U3VuayhnYW1lYm9hcmQpKSB7XG4gICAgICAgICAgICBpZiAocGxheWVyLmdldFByZXZIaXQoKSAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIHBsYXllci5nZXRMYXN0SGl0KCkgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICBnYW1lYm9hcmQuZ2V0Q2VsbChwbGF5ZXIuZ2V0TGFzdEhpdCgpLmNvbCwgcGxheWVyLmdldExhc3RIaXQoKS5yb3cpLnRha2VuQnkuaGl0Q291bnQgPj0gMiAmJlxuICAgICAgICAgICAgICAgIGdhbWVib2FyZC5nZXRDZWxsKHBsYXllci5nZXRMYXN0SGl0KCkuY29sLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLnJvdykudGFrZW5CeS5oaXRDb3VudCA8PSA0KSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLmZpbmlzaGluZ0F0dGFjayhnYW1lYm9hcmQsIHBsYXllci5nZXRMYXN0SGl0KCkuY29sLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLnJvdywgcGxheWVyLmdldFByZXZIaXQoKSk7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnNpbmtTaGlwKGdhbWVib2FyZCwgcGxheWVyLmdldExhc3RIaXQoKS5jb2wsIHBsYXllci5nZXRMYXN0SGl0KCkucm93KTtcbiAgICAgICAgICAgICAgICBpZiAoaXNHYW1lT3ZlcigpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChwbGF5ZXIuZ2V0TGFzdEhpdCgpLmNvbCwgcGxheWVyLmdldExhc3RIaXQoKS5yb3cpLnRha2VuQnkuaGl0Q291bnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuZm9sbG93dXBBdHRhY2soZ2FtZWJvYXJkLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLmNvbCwgcGxheWVyLmdldExhc3RIaXQoKS5yb3cpO1xuICAgICAgICAgICAgICAgIGdhbWVib2FyZC5zaW5rU2hpcChnYW1lYm9hcmQsIHBsYXllci5nZXRMYXN0SGl0KCkuY29sLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLnJvdyk7XG4gICAgICAgICAgICAgICAgaWYgKGlzR2FtZU92ZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgeyBjb2wsIHJvdyB9ID0gcGxheWVyLnJhbmRvbUF0dGFjayhnYW1lYm9hcmQpO1xuICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLnNldFByZXZIaXQocGxheWVyLmdldExhc3RIaXQoKSk7XG4gICAgICAgICAgICAgICAgcGxheWVyLnNldExhc3RIaXQoeyBjb2wsIHJvdyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIHJvdykuc3RhdHVzID09PSAnaGl0JyAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIHJvdykudGFrZW5CeS5pc1N1bmsoKSkge1xuICAgICAgICAgICAgICAgIGdhbWVib2FyZC5zaW5rU2hpcChnYW1lYm9hcmQsIGNvbCwgcm93KTtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc2V0UHJldkhpdChudWxsKTtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc2V0TGFzdEhpdChudWxsKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNHYW1lT3ZlcigpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHBsYXllclZzQ29tcHV0ZXJNb2RlID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGxldCBpc1BsYXllclR1cm4gPSB0cnVlO1xuICAgICAgICB3aGlsZSAoIWlzR2FtZU92ZXIoKSAmJiAhaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICBpZiAoaXNQbGF5ZXJUdXJuKSB7XG4gICAgICAgICAgICAgICAgdWkuc2V0VHVybk1lc3NhZ2VQdkMoaXNQbGF5ZXJUdXJuKTtcbiAgICAgICAgICAgICAgICB1aS5zZXRCb2FyZFBvaW50ZXIoJ3BsYXllcicpO1xuICAgICAgICAgICAgICAgIHVpLndhaXRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgY29sLCByb3cgfSA9IHlpZWxkIHVpLmhhbmRsZVVzZXJJbnB1dCgpO1xuICAgICAgICAgICAgICAgIGh1bWFuLmF0dGFjayhjb21wdXRlckdhbWVib2FyZCwgY29sLCByb3cpO1xuICAgICAgICAgICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnNpbmtTaGlwKGNvbXB1dGVyR2FtZWJvYXJkLCBjb2wsIHJvdyk7XG4gICAgICAgICAgICAgICAgdWkucmVmcmVzaEJvYXJkKGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgICAgICAgICBpc1BsYXllclR1cm4gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0dhbWVPdmVyKCkgfHwgaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzUGxheWVyVHVybikge1xuICAgICAgICAgICAgICAgIHVpLnNldFR1cm5NZXNzYWdlUHZDKGlzUGxheWVyVHVybik7XG4gICAgICAgICAgICAgICAgdWkuc2V0Qm9hcmRQb2ludGVyKCdjb21wdXRlcicpO1xuICAgICAgICAgICAgICAgIHVpLndhaXRpbmcodHJ1ZSk7XG4gICAgICAgICAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdWkuZ2V0U3BlZWRWYWx1ZSgpKSk7XG4gICAgICAgICAgICAgICAgaWYgKCF1aS5wVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpIHx8IGlzU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29tcHV0ZXJBSShodW1hbkdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgdWkucmVmcmVzaEJvYXJkKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgICAgICAgICBpc1BsYXllclR1cm4gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICB1aS53YWl0aW5nKGZhbHNlKTtcbiAgICB9KTtcbiAgICBjb25zdCBjb21wdXRlclZzQ29tcHV0ZXJNb2RlID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHVpLnJlbW92ZUJvYXJkUG9pbnRlcigpO1xuICAgICAgICBsZXQgaXNQbGF5ZXJUdXJuID0gdHJ1ZTtcbiAgICAgICAgd2hpbGUgKCFpc0dhbWVPdmVyKCkgJiYgIWlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdWkud2FpdGluZyh0cnVlKTtcbiAgICAgICAgICAgIGlmIChpc1BsYXllclR1cm4pIHtcbiAgICAgICAgICAgICAgICB1aS5zZXRUdXJuTWVzc2FnZUN2Qyhpc1BsYXllclR1cm4pO1xuICAgICAgICAgICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIHVpLmdldFNwZWVkVmFsdWUoKSkpO1xuICAgICAgICAgICAgICAgIGlmICghdWkuY1ZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSB8fCBpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbXB1dGVyQUkoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgIHVpLnJlZnJlc2hCb2FyZChodW1hbkdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgaXNQbGF5ZXJUdXJuID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNHYW1lT3ZlcigpIHx8IGlzU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc1BsYXllclR1cm4pIHtcbiAgICAgICAgICAgICAgICB1aS5zZXRUdXJuTWVzc2FnZUN2Qyhpc1BsYXllclR1cm4pO1xuICAgICAgICAgICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIHVpLmdldFNwZWVkVmFsdWUoKSkpO1xuICAgICAgICAgICAgICAgIGlmICghdWkuY1ZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSB8fCBpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbXB1dGVyQUkoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgIHVpLnJlZnJlc2hCb2FyZChjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgaXNQbGF5ZXJUdXJuID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgdWkud2FpdGluZyhmYWxzZSk7XG4gICAgfSk7XG4gICAgY29uc3QgcmFuZG9tUGxhY2VtZW50ID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBsZXQgYWxsU2hpcHM7XG4gICAgICAgIGlmIChnYW1lYm9hcmQgPT09IGh1bWFuR2FtZWJvYXJkKSB7XG4gICAgICAgICAgICBodW1hbkNhcnJpZXIgPSBzaGlwRmFjdG9yeSgnQ2FycmllcicpO1xuICAgICAgICAgICAgaHVtYW5CYXR0bGVzaGlwID0gc2hpcEZhY3RvcnkoJ0JhdHRsZXNoaXAnKTtcbiAgICAgICAgICAgIGh1bWFuRGVzdHJveWVyID0gc2hpcEZhY3RvcnkoJ0Rlc3Ryb3llcicpO1xuICAgICAgICAgICAgaHVtYW5TdWJtYXJpbmUgPSBzaGlwRmFjdG9yeSgnU3VibWFyaW5lJyk7XG4gICAgICAgICAgICBodW1hblBhdHJvbGJvYXQgPSBzaGlwRmFjdG9yeSgnUGF0cm9sQm9hdCcpO1xuICAgICAgICAgICAgYWxsU2hpcHMgPSBbaHVtYW5DYXJyaWVyLCBodW1hbkJhdHRsZXNoaXAsIGh1bWFuRGVzdHJveWVyLCBodW1hblN1Ym1hcmluZSwgaHVtYW5QYXRyb2xib2F0XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChnYW1lYm9hcmQgPT09IGNvbXB1dGVyR2FtZWJvYXJkKSB7XG4gICAgICAgICAgICBjb25zdCBjb21wdXRlckNhcnJpZXIgPSBzaGlwRmFjdG9yeSgnQ2FycmllcicpO1xuICAgICAgICAgICAgY29uc3QgY29tcHV0ZXJCYXR0bGVzaGlwID0gc2hpcEZhY3RvcnkoJ0JhdHRsZXNoaXAnKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVyRGVzdHJveWVyID0gc2hpcEZhY3RvcnkoJ0Rlc3Ryb3llcicpO1xuICAgICAgICAgICAgY29uc3QgY29tcHV0ZXJTdWJtYXJpbmUgPSBzaGlwRmFjdG9yeSgnU3VibWFyaW5lJyk7XG4gICAgICAgICAgICBjb25zdCBjb21wdXRlclBhdHJvbGJvYXQgPSBzaGlwRmFjdG9yeSgnUGF0cm9sQm9hdCcpO1xuICAgICAgICAgICAgYWxsU2hpcHMgPSBbY29tcHV0ZXJDYXJyaWVyLCBjb21wdXRlckJhdHRsZXNoaXAsIGNvbXB1dGVyRGVzdHJveWVyLCBjb21wdXRlclN1Ym1hcmluZSwgY29tcHV0ZXJQYXRyb2xib2F0XTtcbiAgICAgICAgfVxuICAgICAgICBjb250cm9sbGVyLmh1bWFuU2hpcHMubGVuZ3RoID0gMDtcbiAgICAgICAgY29uc3QgY29scyA9IFsnQScsICdCJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdIJywgJ0knLCAnSiddO1xuICAgICAgICBjb25zdCByYW5kb21Db2wgPSAoKSA9PiBjb2xzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvbHMubGVuZ3RoKV07XG4gICAgICAgIGNvbnN0IHJhbmRvbVJvdyA9ICgpID0+IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogMTApLnRvU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IHJhbmRvbU9yaWVudGF0aW9uID0gKCkgPT4gKE1hdGgucmFuZG9tKCkgPiAwLjUgPyAnaG9yaXpvbnRhbCcgOiAndmVydGljYWwnKTtcbiAgICAgICAgYWxsU2hpcHMuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgICAgICAgbGV0IGNvbCA9IHJhbmRvbUNvbCgpO1xuICAgICAgICAgICAgbGV0IHJvdyA9IHJhbmRvbVJvdygpO1xuICAgICAgICAgICAgbGV0IG9yaWVudGF0aW9uID0gcmFuZG9tT3JpZW50YXRpb24oKTtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBnYW1lYm9hcmQuY2FuQmVQbGFjZWQoc2hpcC5zaXplLCBjb2wsIHJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICAgICAgd2hpbGUgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBjb2wgPSByYW5kb21Db2woKTtcbiAgICAgICAgICAgICAgICByb3cgPSByYW5kb21Sb3coKTtcbiAgICAgICAgICAgICAgICBvcmllbnRhdGlvbiA9IHJhbmRvbU9yaWVudGF0aW9uKCk7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZ2FtZWJvYXJkLmNhbkJlUGxhY2VkKHNoaXAuc2l6ZSwgY29sLCByb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBnYW1lYm9hcmQucGxhY2VTaGlwKHNoaXAsIGNvbCwgcm93LCBvcmllbnRhdGlvbik7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnJlc2VydmVTcGFjZShnYW1lYm9hcmQsIGNvbCwgcm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRyb2xsZXIuaHVtYW5TaGlwcy5wdXNoKHNoaXApO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHJhbmRvbWl6ZVNoaXBzUGxhY2VtZW50ID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBnYW1lYm9hcmQuY2xlYXJCb2FyZCgpO1xuICAgICAgICByYW5kb21QbGFjZW1lbnQoZ2FtZWJvYXJkKTtcbiAgICAgICAgdWkucmVmcmVzaEJvYXJkKGdhbWVib2FyZCk7XG4gICAgICAgIGlmIChnYW1lYm9hcmQgPT09IGh1bWFuR2FtZWJvYXJkKSB7XG4gICAgICAgICAgICB1aS5jcmVhdGVTaGlwT3ZlcmxheShnYW1lYm9hcmQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCByZXNldE9yaWVudGF0aW9uID0gKCkgPT4ge1xuICAgICAgICBodW1hblNoaXBzLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgICAgIGlmIChzaGlwLmlzVmVydGljYWwgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBzaGlwLmlzVmVydGljYWwgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBwaWNrR2FtZU1vZGUgPSAoKSA9PiB7XG4gICAgICAgIGlmICh1aS5jVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICByYW5kb21pemVTaGlwc1BsYWNlbWVudChodW1hbkdhbWVib2FyZCk7XG4gICAgICAgICAgICByYW5kb21pemVTaGlwc1BsYWNlbWVudChjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgICAgICBpc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbXB1dGVyVnNDb21wdXRlck1vZGUoKTtcbiAgICAgICAgICAgIHVpLnJlZnJlc2hCb2FyZChodW1hbkdhbWVib2FyZCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHN0YXJ0ID0gKCkgPT4ge1xuICAgICAgICB1aS5yZWZyZXNoQm9hcmQoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICByYW5kb21pemVTaGlwc1BsYWNlbWVudChjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIGlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICBwbGF5ZXJWc0NvbXB1dGVyTW9kZSgpO1xuICAgIH07XG4gICAgY29uc3QgcmVzdGFydCA9ICgpID0+IHtcbiAgICAgICAgaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgaHVtYW4uc2V0UHJldkhpdChudWxsKTtcbiAgICAgICAgaHVtYW4uc2V0TGFzdEhpdChudWxsKTtcbiAgICAgICAgY29tcHV0ZXIuc2V0UHJldkhpdChudWxsKTtcbiAgICAgICAgY29tcHV0ZXIuc2V0TGFzdEhpdChudWxsKTtcbiAgICAgICAgaHVtYW5HYW1lYm9hcmQuY2xlYXJCb2FyZCgpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5jbGVhckJvYXJkKCk7XG4gICAgICAgIHBvcHVsYXRlU2hpcHMoKTtcbiAgICAgICAgdWkucmVmcmVzaEJvYXJkKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgdWkucmVmcmVzaEJvYXJkKGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgdWkuY3JlYXRlU2hpcE92ZXJsYXkoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICBkcmFnQW5kRHJvcChodW1hbkdhbWVib2FyZCwgY29tcHV0ZXJHYW1lYm9hcmQsIGh1bWFuU2hpcHMpO1xuICAgICAgICB1aS5jYW5CZVN0YXJ0ZWQoKTtcbiAgICAgICAgcGlja0dhbWVNb2RlKCk7XG4gICAgICAgIHJlc2V0T3JpZW50YXRpb24oKTtcbiAgICB9O1xuICAgIGNvbnN0IG5ld0dhbWUgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdWkuZ2V0U3BlZWRWYWx1ZSgpKSk7XG4gICAgICAgIGlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICByZXN0YXJ0KCk7XG4gICAgfSk7XG4gICAgY29uc3QgaW5pdCA9ICgpID0+IHtcbiAgICAgICAgdWkuc2V0SW5pdE1lc3NhZ2UoKTtcbiAgICAgICAgaHVtYW5HYW1lYm9hcmQuZ2VuZXJhdGVBcnJheSgpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5nZW5lcmF0ZUFycmF5KCk7XG4gICAgICAgIHVpLnJlbmRlckJvYXJkKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgdWkucmVuZGVyQm9hcmQoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICBwb3B1bGF0ZVNoaXBzKCk7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIHVpLmNyZWF0ZVNoaXBPdmVybGF5KGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgZHJhZ0FuZERyb3AoaHVtYW5HYW1lYm9hcmQsIGNvbXB1dGVyR2FtZWJvYXJkLCBodW1hblNoaXBzKTtcbiAgICAgICAgdWkuY2FuQmVTdGFydGVkKCk7XG4gICAgICAgIHBpY2tHYW1lTW9kZSgpO1xuICAgICAgICB1aS51bkZpbGxDZWxscyh1aS5maXJzdEJvYXJkRWxlbWVudCk7XG4gICAgICAgIHVpLnBWY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfTtcbiAgICByZXR1cm4geyBpbml0LCByZW5ldywgaHVtYW5HYW1lYm9hcmQsIGNvbXB1dGVyR2FtZWJvYXJkLCByZXN0YXJ0LCBuZXdHYW1lLCBzdGFydCwgcmFuZG9taXplU2hpcHNQbGFjZW1lbnQsIGh1bWFuU2hpcHMgfTtcbn0pKCk7XG5leHBvcnQgZGVmYXVsdCBjb250cm9sbGVyO1xuIiwiaW1wb3J0ICdub3JtYWxpemUuY3NzJztcbmltcG9ydCAnLi9zdHlsZS9zdHlsZS5jc3MnO1xuaW1wb3J0IGNvbnRyb2xsZXIgZnJvbSAnLi9tb2R1bGVzL2NvbnRyb2xsZXInO1xuY29udHJvbGxlci5pbml0KCk7XG4iXSwibmFtZXMiOlsiY29scyIsInJvd3MiLCJhcnJheSIsInNoaXBzUGxhY2VkIiwiZ2V0Q2VsbCIsImNvbCIsInJvdyIsImNvbEluZGV4IiwiaW5kZXhPZiIsInJvd0luZGV4Iiwic2V0Q2VsbCIsIm5ld1N0YXR1cyIsIm5ld1Rha2VuQnkiLCJzdGF0dXMiLCJ0YWtlbkJ5IiwiZ2VuZXJhdGVBcnJheSIsImkiLCJqIiwiY2xlYXJCb2FyZCIsImZsYXQiLCJmb3JFYWNoIiwiY2VsbCIsInVuZGVmaW5lZCIsImxlbmd0aCIsInJlbW92ZVNoaXAiLCJzaGlwIiwiZ2FtZWJvYXJkIiwibmFtZSIsInNoaXBJbmRleCIsInNwbGljZSIsInBsYWNlU2hpcCIsIm9yaWVudGF0aW9uIiwiaXNIb3Jpem9udGFsIiwiY2VsbHMiLCJzdGFydCIsImlzVmVydGljYWwiLCJzaGlwQ2VsbHMiLCJzaXplIiwiY3VycmVudENvbCIsImN1cnJlbnRSb3ciLCJwdXNoIiwicmVjZWl2ZUF0dGFjayIsImhpdCIsInJlY2VpdmVBcm91bmQiLCJyZXNlcnZlU3BhY2UiLCJmaWx0ZXIiLCJjIiwiZGlyZWN0aW9uIiwibmV3Q29sIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiY2hhckNvZGVBdCIsIm5ld1JvdyIsIk51bWJlciIsInRvU3RyaW5nIiwiaGl0QnV0Tm90U3VuayIsInNvbWUiLCJpc1N1bmsiLCJzaW5rU2hpcCIsImFsbFN1bmsiLCJ0YWtlbkJ5Q2VsbHMiLCJldmVyeSIsImNhbkJlUGxhY2VkIiwiYXJlRW1wdHkiLCJpdGVtIiwicmVtb3ZlUmVzZXJ2ZWRTcGFjZSIsImhpdENvdW50Iiwicm90YXRlIiwidGhpcyIsInByZXZIaXQiLCJsYXN0SGl0IiwicmFuZ2UiLCJnb1JpZ2h0IiwiZ29Eb3duIiwiZmluaXNoaW5nQXR0YWNrIiwic2V0UHJldkhpdCIsInNldExhc3RIaXQiLCJuZXdQcmV2SGl0IiwibmV3TGFzdEhpdCIsImF0dGFjayIsInJlc3VsdCIsInJhbmRvbUF0dGFjayIsInJhbmRvbUNvbCIsInJhbmRvbVJvdyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImNlaWwiLCJmb2xsb3d1cEF0dGFjayIsInZhbGlkRGlyZWN0aW9ucyIsInJhbmRvbURpcmVjdGlvbiIsImdldFByZXZIaXQiLCJnZXRMYXN0SGl0IiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJ2YWx1ZSIsInN0ZXAiLCJuZXh0IiwiZSIsInJlamVjdGVkIiwiZG9uZSIsInRoZW4iLCJhcHBseSIsImZpcnN0R2FtZWJvYXJkIiwic2Vjb25kR2FtZWJvYXJkIiwic2hpcHMiLCJmaXJzdEJvYXJkRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInNlY29uZEJvYXJkRWxlbWVudCIsImZpcnN0Qm9hcmRDZWxscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzZWNvbmRCb2FyZENlbGxzIiwic2hpcE5hbWUiLCJzaGlwU2l6ZSIsInNoaXBPYmoiLCJncmFiUG9pbnRYIiwiZ3JhYlBvaW50WSIsImhpZ2hsaWdodGVkQ2VsbHMiLCJzaGlwTmFtZVRvT2JqIiwiY2FycmllciIsImJhdHRsZXNoaXAiLCJkZXN0cm95ZXIiLCJzdWJtYXJpbmUiLCJwYXRyb2xib2F0IiwibGFzdERyYWdnZWQiLCJkcmFnZ2FibGVzIiwiZ2V0Tm9uU2hpcENlbGxzIiwiYm9hcmRDZWxscyIsIkFycmF5IiwiZnJvbSIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwibm9uU2hpcENlbGxzIiwiaXNWYWxpZFBsYWNlbWVudCIsInRvSGlnaGxpZ2h0IiwiZGF0YXNldCIsImdldExhc3RTaGlwU2l6ZUVsZW1lbnRzIiwic2xpY2UiLCJtaW4iLCJoYW5kbGVNb3VzZWRvd24iLCJ0YXJnZXRTaGlwTmFtZSIsInRhcmdldCIsImdldEF0dHJpYnV0ZSIsInJlbWFpbmluZ1NoaXBzRmlyc3QiLCJ0b0xvd2VyQ2FzZSIsInJlbWFpbmluZ1NoaXBzU2Vjb25kIiwicmVuZXciLCJzZXRJbml0TWVzc2FnZSIsImhhbmRsZURyYWdTdGFydCIsInNldFRpbWVvdXQiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJhZGQiLCJvZmZzZXRYIiwib2Zmc2V0WSIsImNsb3Nlc3QiLCJpZCIsImNsZWFyU2hpcCIsImhhbmRsZURyYWdPdmVyIiwiaW5kZXgiLCJwcmV2ZW50RGVmYXVsdCIsInN0YXJ0Q2VsbCIsIm9mZnNldEhlaWdodCIsIm9mZnNldFdpZHRoIiwiY2VsbEluZGV4IiwiaGFuZGxlRHJhZ0xlYXZlIiwiaGlnaGxpZ2h0ZWRDZWxsIiwicmVtb3ZlIiwiaGFuZGxlRHJvcCIsImxhc3QiLCJjYW5CZVN0YXJ0ZWQiLCJzZXRTdGFydE1lc3NhZ2UiLCJoYW5kbGVEcmFnRW5kIiwiZmlsbENlbGxzIiwiaGFuZGxlTW91c2V1cCIsImhhbmRsZVJvdGF0ZSIsInRlbXBTaGlwIiwiY3VycmVudCIsImJsb2NrUmlnaHRDbGljayIsImFkZEV2ZW50TGlzdGVuZXIiLCJkcmFnZ2FibGUiLCJ1aSIsInN0YXR1c0JveCIsImJvYXJkcyIsInBWY0J0biIsIm5ld0dhbWVCdG4iLCJjVmNCdG4iLCJzdGFydEJ0biIsInJhbmRvbUJ0biIsImFsbEJ0bnMiLCJzcGVlZHMiLCJnZXRFbGVtZW50c0J5TmFtZSIsInJlbmRlckNlbGxzIiwiYm9hcmQiLCJlbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImNyZWF0ZUNlbGwiLCJhcHBlbmQiLCJnZXRCb2FyZElkIiwiaHVtYW5HYW1lYm9hcmQiLCJjb21wdXRlckdhbWVib2FyZCIsInJlZnJlc2hCb2FyZCIsImlubmVySFRNTCIsImdldFVzZXJJbnB1dCIsImhhbmRsZUdhbWVNb2RlIiwic2VsZWN0ZWRFbGVtZW50IiwiZGVzZWxlY3RlZEVsZW1lbnQiLCJ3YWl0aW5nIiwiYnRuIiwiZGlzYWJsZWQiLCJnZXRTcGVlZFZhbHVlIiwicmVzdGFydCIsInNldFJlc3RhcnRNZXNzYWdlIiwiYm9vbCIsImRvY3VtZW50RWxlbWVudCIsInRvZ2dsZSIsInN0YXR1c1RleHRNb2JpbGUiLCJzdGF0dXNUZXh0RGVza3RvcCIsInRleHRDb250ZW50Iiwid2luZG93IiwibWF0Y2hNZWRpYSIsIm1hdGNoZXMiLCJ1bkZpbGxDZWxscyIsInNlY29uZCIsImFsbCIsInJlbW92ZUJvYXJkUG9pbnRlciIsIm5ld0dhbWUiLCJyYW5kb21pemVTaGlwc1BsYWNlbWVudCIsImh1bWFuU2hpcHMiLCJzcGVlZFZhbHVlIiwic3BlZWQiLCJpbnB1dCIsImNoZWNrZWQiLCJyZW5kZXJCb2FyZCIsInJlbW92ZUF0dHJpYnV0ZSIsImhhbmRsZVVzZXJJbnB1dCIsInVzZXJJbnB1dCIsIm9uY2UiLCJzZXRCb2FyZFBvaW50ZXIiLCJ3aGljaCIsImNyZWF0ZVNoaXBPdmVybGF5IiwiZmlyc3RDZWxsIiwic2hpcEVsZW1lbnQiLCJzZXRTaGlwU3R5bGUiLCJodG1sRWxlbWVudCIsInJvb3RGb250U2l6ZSIsInBhcnNlRmxvYXQiLCJnZXRDb21wdXRlZFN0eWxlIiwiZ2V0UHJvcGVydHlWYWx1ZSIsIndpZHRoIiwiY2VsbFNpemUiLCJoZWlnaHQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJhcHBlbmRDaGlsZCIsInNldFR1cm5NZXNzYWdlUHZDIiwiaXNQbGF5ZXJUdXJuIiwic2V0VHVybk1lc3NhZ2VDdkMiLCJzZXRHYW1lT3Zlck1lc3NhZ2VQdkMiLCJ3aG8iLCJzZXRHYW1lT3Zlck1lc3NhZ2VDdkMiLCJjb250cm9sbGVyIiwiaHVtYW4iLCJwbGF5ZXIiLCJjb21wdXRlciIsImlzU3RvcHBlZCIsImh1bWFuQ2FycmllciIsImh1bWFuQmF0dGxlc2hpcCIsImh1bWFuRGVzdHJveWVyIiwiaHVtYW5TdWJtYXJpbmUiLCJodW1hblBhdHJvbGJvYXQiLCJwb3B1bGF0ZVNoaXBzIiwiaXNHYW1lT3ZlciIsImNvbXB1dGVyQUkiLCJhbGxTaGlwcyIsInJhbmRvbU9yaWVudGF0aW9uIiwicmFuZG9tUGxhY2VtZW50IiwicGlja0dhbWVNb2RlIiwiaW5pdCJdLCJzb3VyY2VSb290IjoiIn0=