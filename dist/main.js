(()=>{"use strict";const e=()=>{const e=["A","B","C","D","E","F","G","H","I","J"],t=["1","2","3","4","5","6","7","8","9","10"],a=[],r=[],s=(r,s)=>{const o=e.indexOf(r),i=t.indexOf(s);return-1===o||-1===i?null:a[i][o]},o=(r,s,o,i)=>{const l=e.indexOf(r),n=t.indexOf(s);return-1===l||-1===n?null:(a[n][l].status=o,i&&(a[n][l].takenBy=i),a[n][l])};return(()=>{for(let r=0;r<10;r+=1){a[r]=[];for(let s=0;s<10;s+=1)a[r][s]={col:e[s],row:t[r],status:"empty",takenBy:null}}})(),{clearBoard:()=>{for(let e=0;e<10;e+=1)for(let t=0;t<10;t+=1)a[e][t].status="empty",a[e][t].takenBy=void 0;r.length=0},getCell:s,setCell:o,removeShip:(e,t)=>{t.array.flat().forEach((a=>{let s;"taken"===a.status&&a.takenBy.name===e.name&&(a.status="empty",a.takenBy=null),r.forEach((e=>{null===e.takenBy&&r.splice(r.indexOf(e),1)})),t===u.humanGameboard?s="firstBoard":t===u.computerGameboard&&(s="secondBoard");document.querySelectorAll(`#${s} .cell`).forEach((t=>{t.classList.contains("taken")&&t.getAttribute("data-shipName")===e.name.toLowerCase()&&(t.classList.remove("taken"),t.classList.add("empty"),t.removeAttribute("data-shipName"))}))}))},placeShip:(a,i,l,n)=>{a.isVertical="horizontal"!==n;const c="horizontal"===n,d=c?e:t,u=d.indexOf(c?i:l);let h=[];if(u<0||u+a.size>d.length)return!1;for(let e=0;e<a.size;e+=1){const t=c?d[u+e]:i,r=c?l:d[u+e];if("empty"!==s(t,r).status)return!1;o(t,r,"taken",a),h.push(s(t,r))}return r.push(h[0]),!0},receiveAttack:(e,t)=>{const a=s(e,t);return"taken"===a.status?(a.takenBy.hit(),o(e,t,"hit"),a.status):"empty"===a.status||"reserved"===a.status?(o(e,t,"miss"),a.status):null},receiveAround:(e,t)=>{const a=s(e,t);return"empty"===a.status?(o(e,t,"reserved"),a.status):null},reserveSpace:(e,t,a)=>{const r=e.getCell(t,a);if(r&&r.takenBy){e.array.flat().filter((e=>e.takenBy&&e.takenBy.name===r.takenBy.name)).forEach((t=>{[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0},{col:-1,row:-1},{col:-1,row:1},{col:1,row:-1},{col:1,row:1}].forEach((a=>{const r=String.fromCharCode(t.col.charCodeAt(0)+a.col),s=(Number(t.row)+a.row).toString();e.getCell(r,s)&&e.receiveAround(r,s)}))}))}},hitButNotSunk:e=>e.array.flat().some((e=>"hit"===e.status&&!1===e.takenBy.isSunk())),sinkShip:(e,t,a)=>{const r=e.getCell(t,a);if(r&&r.takenBy&&r.takenBy.isSunk()){e.array.flat().filter((e=>e.takenBy&&e.takenBy.name===r.takenBy.name)).forEach((t=>{[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0},{col:-1,row:-1},{col:-1,row:1},{col:1,row:-1},{col:1,row:1}].forEach((a=>{const r=String.fromCharCode(t.col.charCodeAt(0)+a.col),s=(Number(t.row)+a.row).toString();e.getCell(r,s)&&e.receiveAttack(r,s)}))}))}},allSunk:e=>{let t=e.array.flat().filter((e=>e.takenBy));return!!(t.length>0&&t.every((e=>e.takenBy.isSunk())))},array:a,canBePlaced:(a,r,o,i)=>{const l="horizontal"===i,n=l?e:t,c=n.indexOf(l?r:o);if(c<0||c+a>n.length)return!1;const d=[];for(let e=0;e<a;e+=1){const t=l?n[c+e]:r,a=l?o:n[c+e];d.push("empty"===s(t,a).status)}return d.every((e=>!0===e))},shipsPlaced:r,removeReservedSpace:e=>{e.array.flat().forEach((e=>{"reserved"===e.status&&o(e.col,e.row,"empty")}))}}},t=e=>{let t;return"Carrier"===e&&(t=5),"Battleship"===e&&(t=4),"Destroyer"===e&&(t=3),"Submarine"===e&&(t=3),"PatrolBoat"===e&&(t=2),{name:e,size:t,hitCount:0,isVertical:!1,rotate(){this.isVertical=!this.isVertical},hit(){this.hitCount+=1},isSunk(){return this.hitCount===t}}},a=()=>{const e=["A","B","C","D","E","F","G","H","I","J"];let t=null,a=null;let r=1,s=!0,o=!0;const i=(e,t,c,d)=>{if(d.row===c)if(s){r=1;let o=String.fromCharCode(t.charCodeAt(0)+r);for(;e.getCell(o,c)&&"hit"===e.getCell(o,c).status;)r+=1,o=String.fromCharCode(t.charCodeAt(0)+r);e.getCell(o,c)&&"hit"!==e.getCell(o,c).status&&"miss"!==e.getCell(o,c).status?(e.receiveAttack(o,c),"hit"===e.getCell(o,c).status&&(l(a),n({col:o,row:c})),r+=1):(r=1,s=!1,i(e,o,c,d))}else{r=1;let o=String.fromCharCode(t.charCodeAt(0)-r);for(;e.getCell(o,c)&&"hit"===e.getCell(o,c).status;)r+=1,o=String.fromCharCode(t.charCodeAt(0)-r);e.getCell(o,c)&&"hit"!==e.getCell(o,c).status&&"miss"!==e.getCell(o,c).status?(e.receiveAttack(o,c),"hit"===e.getCell(o,c).status&&(l(a),n({col:o,row:c})),r+=1):(r=1,s=!0,i(e,o,c,d))}else if(d.col===t)if(o){r=1;let s=(Number(c)+r).toString();for(;e.getCell(t,s)&&"hit"===e.getCell(t,s).status;)r+=1,s=(Number(c)+r).toString();e.getCell(t,s)&&"hit"!==e.getCell(t,s).status&&"miss"!==e.getCell(t,s).status?(e.receiveAttack(t,s),"hit"===e.getCell(t,s).status&&(l(a),n({col:t,row:s})),r+=1):(r=1,o=!1,i(e,t,s,d))}else{r=1;let s=(Number(c)-r).toString();for(;e.getCell(t,s)&&"hit"===e.getCell(t,s).status;)r+=1,s=(Number(c)-r).toString();e.getCell(t,s)&&"hit"!==e.getCell(t,s).status&&"miss"!==e.getCell(t,s).status?(e.receiveAttack(t,s),"hit"===e.getCell(t,s).status&&(l(a),n({col:t,row:s})),r+=1):(r=1,o=!0,i(e,t,s,d))}},l=e=>{t=e},n=e=>{a=e};return{attack:(e,t,r)=>{if("hit"!==e.getCell(t,r).status&&"miss"!==e.getCell(t,r).status){let s=e.receiveAttack(t,r);return"hit"===s&&(l(a),n({col:t,row:r})),s}return"already shot"},randomAttack:t=>{let r,s;do{r=e[Math.floor(Math.random()*e.length)],s=Math.ceil(10*Math.random()).toString()}while("hit"===t.getCell(r,s).status||"miss"===t.getCell(r,s).status);if("hit"!==t.getCell(r,s).status&&"miss"!==t.getCell(r,s).status){const e=t.receiveAttack(r,s);return"hit"===t.getCell(r,s).status&&(l(a),n({col:r,row:s})),{result:e,col:r,row:s}}return{result:"already shot",col:r,row:s}},followupAttack:(e,t,s)=>{const o=[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0}].filter((a=>{const r=String.fromCharCode(t.charCodeAt(0)+a.col),o=(Number(s)+a.row).toString(),i=e.getCell(r,o);return!(!i||"miss"===i.status||"hit"===i.status)}));if(o.length>0){const i=o[Math.floor(Math.random()*o.length)],c=String.fromCharCode(t.charCodeAt(0)+i.col),d=(Number(s)+i.row).toString();e.receiveAttack(c,d),r=1,"hit"===e.getCell(c,d).status&&(l(a),n({col:c,row:d}))}},finishingAttack:i,prevHit:t,lastHit:a,getPrevHit:()=>t,getLastHit:()=>a,setPrevHit:l,setLastHit:n}};var r=function(e,t,a,r){return new(a||(a=Promise))((function(s,o){function i(e){try{n(r.next(e))}catch(e){o(e)}}function l(e){try{n(r.throw(e))}catch(e){o(e)}}function n(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}n((r=r.apply(e,t||[])).next())}))};const s=(e,t,a)=>{let o,i,l,c,d=0,h=0,m=[];const f={carrier:a[0],battleship:a[1],destroyer:a[2],submarine:a[3],patrolboat:a[4]},p=document.querySelector("#firstBoard"),v=document.querySelector("#secondBoard"),g=p.querySelectorAll(".cell"),S=v.querySelectorAll(".cell"),y=[];for(let e of g)e.classList.contains("taken")||y.push(e);for(let e of S)e.classList.contains("taken")||y.push(e);document.querySelectorAll(".draggable").forEach((e=>{e.addEventListener("mousedown",B),e.addEventListener("mouseup",C),e.addEventListener("dragstart",b),e.addEventListener("dragend",E),e.addEventListener("contextmenu",M),y.forEach((e=>{e.addEventListener("contextmenu",V)}))}));let w=null;function B(a){e.removeReservedSpace(e),t.removeReservedSpace(t);const r=a.target.getAttribute("data-name");let o=e.shipsPlaced.filter((e=>r!==e.takenBy.name.toLowerCase())),i=t.shipsPlaced.filter((e=>r!==e.takenBy.name.toLowerCase()));o.forEach((t=>{e.reserveSpace(e,t.col,t.row)})),i.forEach((e=>{t.reserveSpace(t,e.col,e.row)})),n.refreshBoard(e),n.refreshBoard(t),n.createShipOverlay("first",e.shipsPlaced),n.createShipOverlay("second",t.shipsPlaced),s(e,t,u.humanShips)}function C(){e.shipsPlaced.forEach((t=>{e.reserveSpace(e,t.col,t.row)})),t.shipsPlaced.forEach((e=>{t.reserveSpace(t,e.col,e.row)})),n.refreshBoard(e),n.refreshBoard(t),n.createShipOverlay("first",e.shipsPlaced),n.createShipOverlay("second",t.shipsPlaced),s(e,t,u.humanShips)}function b(a){return r(this,void 0,void 0,(function*(){yield new Promise((e=>setTimeout(e,0)));const r=a.target;r.style.visibility="hidden",this.classList.add("dragging"),o=r.getAttribute("data-name"),i=Number(r.getAttribute("data-size")),d=a.offsetX,h=a.offsetY,l=f[o],c=l.isVertical?"vertical":"horizontal","firstBoard"===r.closest(".board").id&&e.removeShip(l,e),"secondBoard"===r.closest(".board").id&&t.removeShip(l,t)}))}function L(e){return function(t){const a=t.target;if("firstBoard"===a.closest(".board").id&&(t.preventDefault(),l)){let t=e-(l.isVertical?10*Math.floor(h/this.offsetHeight):Math.floor(d/this.offsetWidth));const a=[];for(let e=0;e<i;e++){let r=l.isVertical?t+10*e:t+e;g[r]&&(a.push(g[r]),m.push(g[r]))}A(a)&&(a.forEach((e=>{e.classList.add("highlight")})),w||(w=H(m,i)))}if("secondBoard"===a.closest(".board").id&&(t.preventDefault(),l)){let t=e-(l.isVertical?10*Math.floor(h/this.offsetHeight):Math.floor(d/this.offsetWidth));const a=[];for(let e=0;e<i;e++){let r=l.isVertical?t+10*e:t+e;S[r]&&(a.push(S[r]),m.push(S[r]))}A(a)&&(a.forEach((e=>{e.classList.add("highlight")})),w||(w=H(m,i)))}}}function k(){m.forEach((e=>{e.classList.remove("highlight")})),m=[]}function P(a){m.forEach((e=>{e.classList.remove("highlight")}));const r=H(m,i),o=a.target;"firstBoard"===o.closest(".board").id&&l&&null!==w&&(e.canBePlaced(l.size,r[0].dataset.col,r[0].dataset.row,c)?(e.placeShip(l,r[0].dataset.col,r[0].dataset.row,c),e.reserveSpace(e,r[0].dataset.col,r[0].dataset.row)):(e.placeShip(l,w[0].dataset.col,w[0].dataset.row,c),e.reserveSpace(e,w[0].dataset.col,w[0].dataset.row))),"secondBoard"===o.closest(".board").id&&l&&null!==w&&(t.canBePlaced(l.size,r[0].dataset.col,r[0].dataset.row,c)?(t.placeShip(l,r[0].dataset.col,r[0].dataset.row,c),t.reserveSpace(t,r[0].dataset.col,r[0].dataset.row)):(t.placeShip(l,w[0].dataset.col,w[0].dataset.row,c),t.reserveSpace(t,w[0].dataset.col,w[0].dataset.row))),e.removeReservedSpace(e),t.removeReservedSpace(t),e.shipsPlaced.forEach((t=>{e.reserveSpace(e,t.col,t.row)})),t.shipsPlaced.forEach((e=>{t.reserveSpace(t,e.col,e.row)})),n.refreshBoard(e),n.refreshBoard(t),n.createShipOverlay("first",e.shipsPlaced),n.createShipOverlay("second",t.shipsPlaced),s(e,t,u.humanShips),n.canBeStarted(),n.setStartMessage(),w=null}function E(a){const r=a.target;r.style.visibility="visible",this.classList.remove("dragging"),0===m.length&&("firstBoard"===r.closest(".board").id?w&&e.canBePlaced(l.size,w[0].dataset.col,w[0].dataset.row,c)&&(e.placeShip(l,w[0].dataset.col,w[0].dataset.row,c),e.reserveSpace(e,w[0].dataset.col,w[0].dataset.row),n.refreshBoard(e),n.refreshBoard(t),n.createShipOverlay("first",e.shipsPlaced),n.createShipOverlay("second",t.shipsPlaced),s(e,t,u.humanShips)):"secondBoard"===r.closest(".board").id&&w&&t.canBePlaced(l.size,w[0].dataset.col,w[0].dataset.row,c)&&(t.placeShip(l,w[0].dataset.col,w[0].dataset.row,c),t.reserveSpace(t,w[0].dataset.col,w[0].dataset.row),n.refreshBoard(e),n.refreshBoard(t),n.createShipOverlay("first",e.shipsPlaced),n.createShipOverlay("second",t.shipsPlaced),s(e,t,u.humanShips)))}function A(e){return e.every((e=>e.classList.contains("empty")))&&(e.every((t=>t.dataset.col===e[0].dataset.col))||e.every((t=>t.dataset.row===e[0].dataset.row)))&&e.length===i&&e.every((e=>e.dataset.col>="A"&&e.dataset.col<="J"))&&e.every((e=>Number(e.dataset.row)>=1&&Number(e.dataset.row)<=10))}function H(e,t){return e.slice(Math.min(e.length-t,0))}function M(a){a.preventDefault();const r=a.target;let d;"firstBoard"===r.closest(".board").id&&(d=e),"secondBoard"===r.closest(".board").id&&(d=t),o=r.getAttribute("data-name"),i=Number(r.getAttribute("data-size")),l=f[o];const h=l,m=d.shipsPlaced.filter((e=>e.takenBy.name.toLowerCase()===o));d.removeShip(l,d),d.removeReservedSpace(d),d.shipsPlaced.forEach((e=>{d.reserveSpace(d,e.col,e.row)})),h.rotate(),c=h.isVertical?"vertical":"horizontal",d.canBePlaced(h.size,m[0].col,m[0].row,c)||(h.rotate(),c=h.isVertical?"vertical":"horizontal"),d.placeShip(h,m[0].col,m[0].row,c),d.shipsPlaced.forEach((e=>{d.reserveSpace(d,e.col,e.row)})),n.refreshBoard(d),n.createShipOverlay("first",e.shipsPlaced),n.createShipOverlay("second",t.shipsPlaced),s(e,t,u.humanShips)}function V(e){e.preventDefault()}g.forEach(((e,t)=>{e.addEventListener("dragover",L(t)),e.addEventListener("dragleave",k),e.addEventListener("drop",P)})),S.forEach(((e,t)=>{e.addEventListener("dragover",L(t)),e.addEventListener("dragleave",k),e.addEventListener("drop",P)}))},o=s;var i=function(e,t,a,r){return new(a||(a=Promise))((function(s,o){function i(e){try{n(r.next(e))}catch(e){o(e)}}function l(e){try{n(r.throw(e))}catch(e){o(e)}}function n(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}n((r=r.apply(e,t||[])).next())}))};const l=(()=>{const e=document.querySelector("#messageBox p"),t=document.querySelector("#boards"),a=document.querySelector("#playerVsComputer"),r=document.querySelector("#newGame"),s=document.querySelector("#computerVsComputer"),n=document.querySelector("#start"),c=document.querySelector("#randomPlacement"),d=[a,r,s,n,c],h=document.getElementsByName("speed"),m=(e,t)=>{e.array.forEach((e=>{e.forEach((e=>{const a=(e=>{const t=document.createElement("div");return t.classList.add("cell"),t.classList.add(e.status),t.setAttribute("data-col",e.col),t.setAttribute("data-row",e.row),e.takenBy&&t.setAttribute("data-shipName",e.takenBy.name.toLowerCase()),t})(e);t.append(a)}))}))},f=e=>{let t;e===u.humanGameboard?t="firstBoard":e===u.computerGameboard&&(t="secondBoard");const a=document.querySelector(`#${t}`);a.innerHTML="",m(e,a)},p=e=>{if(!e.target.classList.contains("hit")&&!e.target.classList.contains("miss")){return{col:e.target.getAttribute("data-col"),row:e.target.getAttribute("data-row")}}},v=(e,t)=>{t.classList.remove("selected"),e.classList.contains("selected")||(e.classList.add("selected"),e===a&&i(void 0,void 0,void 0,(function*(){L("first"),g(!0),d.forEach((e=>e.disabled=!0)),yield new Promise((e=>setTimeout(e,b()))),d.forEach((e=>e.disabled=!1)),g(!1),S(),y()})),e===s&&i(void 0,void 0,void 0,(function*(){g(!0),d.forEach((e=>e.disabled=!0)),yield new Promise((e=>setTimeout(e,b()))),d.forEach((e=>e.disabled=!1)),g(!1),n.disabled=!0,c.disabled=!0,s.disabled=!0})),u.restart(),B())},g=e=>{document.documentElement.classList.toggle("wait",e)},S=()=>5===u.humanGameboard.shipsPlaced.length&&0===u.computerGameboard.shipsPlaced.length?(L("second"),n.disabled=!1,!0):(n.disabled=!0,!1),y=()=>{e.textContent="Use 'Random Placement' button, then press Start!",window.matchMedia("(min-width: 1024px)").matches&&(e.textContent="Drag and drop ships onto the left board or use 'Random Placement' button. Right click to rotate. When ready, press Start!")},w=()=>{S()&&(e.textContent="You can now begin the game. Press start!")},B=()=>{e.textContent="Restarting..."};a.addEventListener("click",(()=>{L("first"),v(a,s);document.querySelector("#secondBoard").classList.remove("start"),k("first"),n.disabled=!0,a.disabled=!0})),s.addEventListener("click",(()=>{L("first"),L("second"),v(s,a);const e=document.querySelector("#secondBoard");e.classList.remove("hide"),e.classList.add("start"),Promise.all([k("first"),k("second")]),n.disabled=!0,c.disabled=!0,s.disabled=!0})),r.addEventListener("click",(()=>i(void 0,void 0,void 0,(function*(){L("first"),s.classList.contains("selected")&&(L("second"),n.disabled=!0,c.disabled=!0,s.disabled=!0),l.removeBoardPointer(),yield i(void 0,void 0,void 0,(function*(){B(),g(!0),d.forEach((e=>e.disabled=!0)),yield u.newGame(),d.forEach((e=>e.disabled=!1)),g(!1),S(),a.classList.contains("selected")&&y()}));const e=document.querySelector("#secondBoard");e.classList.remove("hide"),a.classList.contains("selected")&&(e.classList.remove("start"),k("first"),n.disabled=!0,a.disabled=!0),s.classList.contains("selected")&&(e.classList.add("start"),c.disabled=!0,Promise.all([k("first"),k("second")]),n.disabled=!0,c.disabled=!0,s.disabled=!0)})))),n.addEventListener("click",(()=>{u.start();document.querySelector("#firstBoard").classList.add("hide");const e=document.querySelector("#secondBoard");e.classList.add("hide"),e.classList.add("start"),k("second"),n.disabled=!0,c.disabled=!0})),c.addEventListener("click",(()=>{u.computerGameboard.clearBoard(),f(u.computerGameboard),u.randomizeShipsPlacement("first",u.humanGameboard),o(u.humanGameboard,u.computerGameboard,u.humanShips),S(),w(),L("second")}));let C=1e3;h.forEach((e=>{e.addEventListener("click",(()=>{let t=e;t.checked&&(C=Number(t.value))}))}));const b=()=>C;window.addEventListener("resize",y);const L=e=>{let t;"first"===e?t=document.querySelector("#firstBoard"):"second"===e&&(t=document.querySelector("#secondBoard"));t.querySelectorAll(".cell").forEach((e=>{e.classList.add("filled")}))},k=e=>i(void 0,void 0,void 0,(function*(){let t;g(!0),"first"===e?t=document.querySelector("#firstBoard"):"second"===e&&(t=document.querySelector("#secondBoard"));const a=t.querySelectorAll(".cell");a.forEach((e=>{e.classList.add("filled")})),yield new Promise((e=>{a.forEach(((t,r)=>{setTimeout((()=>{t.classList.remove("filled"),r===a.length-1&&e()}),b()/120*r)}))})),g(!1)}));return{renderBoard:e=>{const a=document.createElement("div");a.classList.add("board"),e===u.humanGameboard?a.id="firstBoard":e===u.computerGameboard&&(a.id="secondBoard"),m(e,a),t.append(a)},refreshBoard:f,handleUserInput:()=>i(void 0,void 0,void 0,(function*(){const e=document.querySelectorAll("#secondBoard .cell");let t;do{t=yield new Promise((t=>{e.forEach((e=>{e.classList.contains("hit")||e.classList.contains("miss")||e.addEventListener("click",(e=>{t(p(e))}),{once:!0})}))}))}while(!t);return{col:t.col.toString(),row:t.row.toString()}})),pVcBtn:a,cVcBtn:s,waiting:g,setBoardPointer:e=>{const t=document.querySelector("#secondBoard");"player"===e?t.classList.add("boardOutline"):"computer"===e&&t.classList.remove("boardOutline")},removeBoardPointer:()=>{document.querySelector("#secondBoard").classList.remove("boardOutline")},createShipOverlay:(e,t)=>{t.forEach((t=>{const a=document.createElement("div"),r=t.takenBy.name.toLowerCase(),s=t.takenBy.size,o=t.takenBy.isVertical;a.classList.add("ship",r),a.setAttribute("data-size",`${s}`),a.setAttribute("data-name",`${r}`),a.setAttribute("draggable","true"),a.classList.add("draggable");const i=()=>{const e=document.querySelector("html"),t=parseFloat(window.getComputedStyle(e,null).getPropertyValue("font-size"));o?o&&(a.style.width=n/t+"rem",a.style.height=s*(n/t)+"rem"):(a.style.width=s*(n/t)+"rem",a.style.height=n/t+"rem")};let l,n=document.querySelector(".board .cell").getBoundingClientRect().width;i(),window.addEventListener("resize",(function(){n=document.querySelector(".board .cell").getBoundingClientRect().width,i()})),"first"===e?l="firstBoard":"second"===e&&(l="secondBoard");document.querySelector(`#${l} .cell[data-col="${t.col}"][data-row="${t.row}"]`).appendChild(a)}))},dragAndDrop:o,canBeStarted:S,setInitMessage:y,setStartMessage:w,setTurnMessagePvC:t=>{e.textContent=t?"Player's turn. Take aim and attack!":"Computer's turn. The shot is coming!"},setTurnMessageCvC:t=>{e.textContent=t?"Violet's turn":"Blue's turn"},setGameOverMessagePvC:t=>{"player"===t?e.textContent="Game over, Player wins!":"computer"===t&&(e.textContent="Game over, Computer wins!")},setGameOverMessageCvC:t=>{"player"===t?e.textContent="Game over, Blue Computer wins!":"computer"===t&&(e.textContent="Game over, Violet Computer wins!")},setRestartMessage:B,getSpeedValue:b,unFillCells:k}})(),n=l;var c=function(e,t,a,r){return new(a||(a=Promise))((function(s,o){function i(e){try{n(r.next(e))}catch(e){o(e)}}function l(e){try{n(r.throw(e))}catch(e){o(e)}}function n(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}n((r=r.apply(e,t||[])).next())}))};const d=(()=>{const r=e(),s=e(),o=a(),i=a();let l=!0,u=t("Carrier"),h=t("Battleship"),m=t("Destroyer"),f=t("Submarine"),p=t("PatrolBoat");const v=[u,h,m,f,p],g=()=>{s.placeShip(u,"A","1","horizontal"),s.placeShip(h,"A","3","horizontal"),s.placeShip(m,"A","5","horizontal"),s.placeShip(f,"A","7","horizontal"),s.placeShip(p,"A","9","horizontal"),s.reserveSpace(s,"A","1"),s.reserveSpace(s,"A","3"),s.reserveSpace(s,"A","5"),s.reserveSpace(s,"A","7"),s.reserveSpace(s,"A","9")},S=()=>s.allSunk(s)?(n.removeBoardPointer(),n.pVcBtn.classList.contains("selected")&&n.setGameOverMessagePvC("player"),n.cVcBtn.classList.contains("selected")&&n.setGameOverMessageCvC("player"),!0):!!r.allSunk(r)&&(n.removeBoardPointer(),n.pVcBtn.classList.contains("selected")&&n.setGameOverMessagePvC("computer"),n.cVcBtn.classList.contains("selected")&&n.setGameOverMessageCvC("computer"),!0),y=e=>{let t;if(e===r?t=i:e===s&&(t=o),e.hitButNotSunk(e)){if(null!==t.getPrevHit()&&null!==t.getLastHit()&&e.getCell(t.getLastHit().col,t.getLastHit().row).takenBy.hitCount>=2&&e.getCell(t.getLastHit().col,t.getLastHit().row).takenBy.hitCount<=4){if(t.finishingAttack(e,t.getLastHit().col,t.getLastHit().row,t.getPrevHit()),e.sinkShip(e,t.getLastHit().col,t.getLastHit().row),S())return}else if(1===e.getCell(t.getLastHit().col,t.getLastHit().row).takenBy.hitCount&&(t.followupAttack(e,t.getLastHit().col,t.getLastHit().row),e.sinkShip(e,t.getLastHit().col,t.getLastHit().row),S()))return}else{const{col:a,row:r}=t.randomAttack(e);if("hit"===e.getCell(a,r).status&&(t.setPrevHit(t.getLastHit()),t.setLastHit({col:a,row:r})),"hit"===e.getCell(a,r).status&&e.getCell(a,r).takenBy.isSunk()&&(e.sinkShip(e,a,r),t.setPrevHit(null),t.setLastHit(null),S()))return}},w=(e,a)=>{a.clearBoard(),(e=>{let a;e===r?(u=t("Carrier"),h=t("Battleship"),m=t("Destroyer"),f=t("Submarine"),p=t("PatrolBoat"),a=[u,h,m,f,p]):e===s&&(a=[t("Carrier"),t("Battleship"),t("Destroyer"),t("Submarine"),t("PatrolBoat")]);d.humanShips.length=0;const o=["A","B","C","D","E","F","G","H","I","J"],i=()=>o[Math.floor(Math.random()*o.length)],l=()=>Math.ceil(10*Math.random()).toString(),n=()=>Math.random()>.5?"horizontal":"vertical";a.forEach((t=>{let a=i(),r=l(),s=n(),o=e.canBePlaced(t.size,a,r,s);for(;!o;)a=i(),r=l(),s=n(),o=e.canBePlaced(t.size,a,r,s);o&&(e.placeShip(t,a,r,s),e.reserveSpace(e,a,r)),d.humanShips.push(t)}))})(a),n.refreshBoard(a),"first"===e&&n.createShipOverlay("first",a.shipsPlaced)},B=()=>{n.cVcBtn.classList.contains("selected")&&(w("first",r),w("second",s),l=!1,c(void 0,void 0,void 0,(function*(){n.removeBoardPointer();let e=!0;for(;!S()&&!l;){if(n.waiting(!0),e){if(n.setTurnMessageCvC(e),yield new Promise((e=>setTimeout(e,n.getSpeedValue()))),!n.cVcBtn.classList.contains("selected")||l)break;y(r),n.refreshBoard(r),e=!1}if(S()||l)break;if(!e){if(n.setTurnMessageCvC(e),yield new Promise((e=>setTimeout(e,n.getSpeedValue()))),!n.cVcBtn.classList.contains("selected")||l)break;y(s),n.refreshBoard(s),e=!0}}l=!1,n.waiting(!1)})),n.refreshBoard(r))},C=()=>{l=!0,o.setPrevHit(null),o.setLastHit(null),i.setPrevHit(null),i.setLastHit(null),r.clearBoard(),s.clearBoard(),g(),n.refreshBoard(r),n.refreshBoard(s),n.createShipOverlay("second",s.shipsPlaced),n.dragAndDrop(r,s,v),n.canBeStarted(),B(),v.forEach((e=>{!0===e.isVertical&&(e.isVertical=!1)}))};return{init:()=>{n.setInitMessage(),n.renderBoard(r),n.renderBoard(s),g(),n.refreshBoard(s),n.createShipOverlay("second",s.shipsPlaced),n.dragAndDrop(r,s,v),n.canBeStarted(),B(),n.unFillCells("first"),n.pVcBtn.disabled=!0},humanGameboard:r,computerGameboard:s,restart:C,newGame:()=>c(void 0,void 0,void 0,(function*(){l=!0,yield new Promise((e=>setTimeout(e,n.getSpeedValue()))),l=!1,C()})),start:()=>{n.refreshBoard(r),w("second",s),l=!1,c(void 0,void 0,void 0,(function*(){let e=!0;for(;!S()&&!l;){if(e){n.setTurnMessagePvC(e),n.setBoardPointer("player"),n.waiting(!1);const{col:t,row:a}=yield n.handleUserInput();o.attack(s,t,a),s.sinkShip(s,t,a),n.refreshBoard(s),e=!1}if(S()||l)break;if(!e){if(n.setTurnMessagePvC(e),n.setBoardPointer("computer"),n.waiting(!0),yield new Promise((e=>setTimeout(e,n.getSpeedValue()))),!n.pVcBtn.classList.contains("selected")||l)break;y(r),n.refreshBoard(r),e=!0}}l=!1,n.waiting(!1)}))},randomizeShipsPlacement:w,humanShips:v}})(),u=d;u.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQ0EsTUFxT0EsRUFyT3lCLEtBQ3JCLE1BQU1BLEVBQU8sQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUNyREMsRUFBTyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLE1BQ3JEQyxFQUFRLEdBQ1JDLEVBQWMsR0FrQmRDLEVBQVUsQ0FBQ0MsRUFBS0MsS0FDbEIsTUFBTUMsRUFBV1AsRUFBS1EsUUFBUUgsR0FDeEJJLEVBQVdSLEVBQUtPLFFBQVFGLEdBQzlCLE9BQWtCLElBQWRDLElBQWlDLElBQWRFLEVBQ1osS0FFSlAsRUFBTU8sR0FBVUYsRUFBUyxFQUU5QkcsRUFBVSxDQUFDTCxFQUFLQyxFQUFLSyxFQUFXQyxLQUNsQyxNQUFNTCxFQUFXUCxFQUFLUSxRQUFRSCxHQUN4QkksRUFBV1IsRUFBS08sUUFBUUYsR0FDOUIsT0FBa0IsSUFBZEMsSUFBaUMsSUFBZEUsRUFDWixNQUVYUCxFQUFNTyxHQUFVRixHQUFVTSxPQUFTRixFQUMvQkMsSUFDQVYsRUFBTU8sR0FBVUYsR0FBVU8sUUFBVUYsR0FFakNWLEVBQU1PLEdBQVVGLEdBQVMsRUEyS3BDLE1BOU1zQixNQUNsQixJQUFLLElBQUlRLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxHQUFLLEVBQUcsQ0FDNUJiLEVBQU1hLEdBQUssR0FDWCxJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxHQUFLLEVBQ3pCZCxFQUFNYSxHQUFHQyxHQUFLLENBQUVYLElBQUtMLEVBQUtnQixHQUFJVixJQUFLTCxFQUFLYyxHQUFJRixPQUFRLFFBQVNDLFFBQVMsS0FFOUUsR0F1TUpHLEdBQ08sQ0FDSEMsV0F2TWUsS0FDZixJQUFLLElBQUlILEVBQUksRUFBR0EsRUFBSSxHQUFJQSxHQUFLLEVBQ3pCLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJLEdBQUlBLEdBQUssRUFDekJkLEVBQU1hLEdBQUdDLEdBQUdILE9BQVMsUUFDckJYLEVBQU1hLEdBQUdDLEdBQUdGLGFBQVVLLEVBRzlCaEIsRUFBWWlCLE9BQVMsQ0FBQyxFQWlNdEJoQixVQUNBTSxVQUNBVyxXQTdLZSxDQUFDQyxFQUFNQyxLQUNDQSxFQUFVckIsTUFBTXNCLE9BQ3hCQyxTQUFTQyxJQVVwQixJQUFJQyxFQVRnQixVQUFoQkQsRUFBS2IsUUFBc0JhLEVBQUtaLFFBQVFjLE9BQVNOLEVBQUtNLE9BQ3RERixFQUFLYixPQUFTLFFBQ2RhLEVBQUtaLFFBQVUsTUFFbkJYLEVBQVlzQixTQUFTSCxJQUNJLE9BQWpCQSxFQUFLUixTQUNMWCxFQUFZMEIsT0FBTzFCLEVBQVlLLFFBQVFjLEdBQU8sRUFDbEQsSUFHQUMsSUFBYyxFQUFXTyxlQUN6QkgsRUFBVSxhQUVMSixJQUFjLEVBQVdRLG9CQUM5QkosRUFBVSxlQUVBSyxTQUFTQyxpQkFBaUIsSUFBSU4sV0FDdENGLFNBQVNDLElBQ1BBLEVBQUtRLFVBQVVDLFNBQVMsVUFBWVQsRUFBS1UsYUFBYSxtQkFBcUJkLEVBQUtNLEtBQUtTLGdCQUNyRlgsRUFBS1EsVUFBVUksT0FBTyxTQUN0QlosRUFBS1EsVUFBVUssSUFBSSxTQUNuQmIsRUFBS2MsZ0JBQWdCLGlCQUN6QixHQUNGLEdBQ0osRUFtSkZDLFVBakpjLENBQUNuQixFQUFNakIsRUFBS0MsRUFBS29DLEtBRTNCcEIsRUFBS3FCLFdBRFcsZUFBaEJELEVBTUosTUFBTUUsRUFBK0IsZUFBaEJGLEVBQ2ZHLEVBQVFELEVBQWU1QyxFQUFPQyxFQUM5QjZDLEVBQVFELEVBQU1yQyxRQUFRb0MsRUFBZXZDLEVBQU1DLEdBQ2pELElBQUl5QyxFQUFZLEdBQ2hCLEdBQUlELEVBQVEsR0FBS0EsRUFBUXhCLEVBQUswQixLQUFPSCxFQUFNekIsT0FDdkMsT0FBTyxFQUVYLElBQUssSUFBSUwsRUFBSSxFQUFHQSxFQUFJTyxFQUFLMEIsS0FBTWpDLEdBQUssRUFBRyxDQUNuQyxNQUFNa0MsRUFBYUwsRUFBZUMsRUFBTUMsRUFBUS9CLEdBQUtWLEVBQy9DNkMsRUFBYU4sRUFBZXRDLEVBQU11QyxFQUFNQyxFQUFRL0IsR0FDdEQsR0FBK0MsVUFBM0NYLEVBQVE2QyxFQUFZQyxHQUFZckMsT0FDaEMsT0FBTyxFQUVYSCxFQUFRdUMsRUFBWUMsRUFBWSxRQUFTNUIsR0FDekN5QixFQUFVSSxLQUFLL0MsRUFBUTZDLEVBQVlDLEdBQ3ZDLENBRUEsT0FEQS9DLEVBQVlnRCxLQUFLSixFQUFVLEtBQ3BCLENBQUksRUEwSFhLLGNBekdrQixDQUFDL0MsRUFBS0MsS0FDeEIsTUFBTW9CLEVBQU90QixFQUFRQyxFQUFLQyxHQUMxQixNQUFvQixVQUFoQm9CLEVBQUtiLFFBQ0xhLEVBQUtaLFFBQVF1QyxNQUNiM0MsRUFBUUwsRUFBS0MsRUFBSyxPQUNYb0IsRUFBS2IsUUFFSSxVQUFoQmEsRUFBS2IsUUFBc0MsYUFBaEJhLEVBQUtiLFFBQ2hDSCxFQUFRTCxFQUFLQyxFQUFLLFFBQ1hvQixFQUFLYixRQUVULElBQUksRUErRlh5QyxjQTdGa0IsQ0FBQ2pELEVBQUtDLEtBQ3hCLE1BQU1vQixFQUFPdEIsRUFBUUMsRUFBS0MsR0FDMUIsTUFBb0IsVUFBaEJvQixFQUFLYixRQUNMSCxFQUFRTCxFQUFLQyxFQUFLLFlBQ1hvQixFQUFLYixRQUVULElBQUksRUF3RlgwQyxhQXRGaUIsQ0FBQ2hDLEVBQVdsQixFQUFLQyxLQUNsQyxNQUFNb0IsRUFBT0gsRUFBVW5CLFFBQVFDLEVBQUtDLEdBQ3BDLEdBQUlvQixHQUFRQSxFQUFLWixRQUFTLENBQ0pTLEVBQVVyQixNQUFNc0IsT0FBT2dDLFFBQVFDLEdBQU1BLEVBQUUzQyxTQUFXMkMsRUFBRTNDLFFBQVFjLE9BQVNGLEVBQUtaLFFBQVFjLE9BQzFGSCxTQUFTQyxJQUNJLENBQ2YsQ0FBRXJCLElBQUssRUFBR0MsS0FBTSxHQUNoQixDQUFFRCxJQUFLLEVBQUdDLElBQUssR0FDZixDQUFFRCxLQUFNLEVBQUdDLElBQUssR0FDaEIsQ0FBRUQsSUFBSyxFQUFHQyxJQUFLLEdBQ2YsQ0FBRUQsS0FBTSxFQUFHQyxLQUFNLEdBQ2pCLENBQUVELEtBQU0sRUFBR0MsSUFBSyxHQUNoQixDQUFFRCxJQUFLLEVBQUdDLEtBQU0sR0FDaEIsQ0FBRUQsSUFBSyxFQUFHQyxJQUFLLElBRVJtQixTQUFTaUMsSUFDaEIsTUFBTUMsRUFBU0MsT0FBT0MsYUFBYW5DLEVBQUtyQixJQUFJeUQsV0FBVyxHQUFLSixFQUFVckQsS0FDaEUwRCxHQUFVQyxPQUFPdEMsRUFBS3BCLEtBQU9vRCxFQUFVcEQsS0FBSzJELFdBQzlDMUMsRUFBVW5CLFFBQVF1RCxFQUFRSSxJQUMxQnhDLEVBQVUrQixjQUFjSyxFQUFRSSxFQUNwQyxHQUNGLEdBRVYsR0FnRUFHLGNBN0JtQjNDLEdBQ0lBLEVBQVVyQixNQUFNc0IsT0FDakIyQyxNQUFNekMsR0FDSixRQUFoQkEsRUFBS2IsU0FBOEMsSUFBMUJhLEVBQUtaLFFBQVFzRCxXQTJCOUNDLFNBdkRhLENBQUM5QyxFQUFXbEIsRUFBS0MsS0FDOUIsTUFBTW9CLEVBQU9ILEVBQVVuQixRQUFRQyxFQUFLQyxHQUNwQyxHQUFJb0IsR0FBUUEsRUFBS1osU0FBV1ksRUFBS1osUUFBUXNELFNBQVUsQ0FDN0I3QyxFQUFVckIsTUFBTXNCLE9BQU9nQyxRQUFRQyxHQUFNQSxFQUFFM0MsU0FBVzJDLEVBQUUzQyxRQUFRYyxPQUFTRixFQUFLWixRQUFRYyxPQUMxRkgsU0FBU0MsSUFDSSxDQUNmLENBQUVyQixJQUFLLEVBQUdDLEtBQU0sR0FDaEIsQ0FBRUQsSUFBSyxFQUFHQyxJQUFLLEdBQ2YsQ0FBRUQsS0FBTSxFQUFHQyxJQUFLLEdBQ2hCLENBQUVELElBQUssRUFBR0MsSUFBSyxHQUNmLENBQUVELEtBQU0sRUFBR0MsS0FBTSxHQUNqQixDQUFFRCxLQUFNLEVBQUdDLElBQUssR0FDaEIsQ0FBRUQsSUFBSyxFQUFHQyxLQUFNLEdBQ2hCLENBQUVELElBQUssRUFBR0MsSUFBSyxJQUVSbUIsU0FBU2lDLElBQ2hCLE1BQU1DLEVBQVNDLE9BQU9DLGFBQWFuQyxFQUFLckIsSUFBSXlELFdBQVcsR0FBS0osRUFBVXJELEtBQ2hFMEQsR0FBVUMsT0FBT3RDLEVBQUtwQixLQUFPb0QsRUFBVXBELEtBQUsyRCxXQUM5QzFDLEVBQVVuQixRQUFRdUQsRUFBUUksSUFDMUJ4QyxFQUFVNkIsY0FBY08sRUFBUUksRUFDcEMsR0FDRixHQUVWLEdBaUNBTyxRQXRCYS9DLElBRWIsSUFBSWdELEVBRG1CaEQsRUFBVXJCLE1BQU1zQixPQUNMZ0MsUUFBUTlCLEdBQVNBLEVBQUtaLFVBQ3hELFNBQUl5RCxFQUFhbkQsT0FBUyxHQUFLbUQsRUFBYUMsT0FBTzlDLEdBQVNBLEVBQUtaLFFBQVFzRCxXQUt6RSxFQWVBbEUsUUFDQXVFLFlBL0hnQixDQUFDekIsRUFBTTNDLEVBQUtDLEVBQUtvQyxLQUNqQyxNQUFNRSxFQUErQixlQUFoQkYsRUFDZkcsRUFBUUQsRUFBZTVDLEVBQU9DLEVBQzlCNkMsRUFBUUQsRUFBTXJDLFFBQVFvQyxFQUFldkMsRUFBTUMsR0FDakQsR0FBSXdDLEVBQVEsR0FBS0EsRUFBUUUsRUFBT0gsRUFBTXpCLE9BQ2xDLE9BQU8sRUFFWCxNQUFNc0QsRUFBVyxHQUNqQixJQUFLLElBQUkzRCxFQUFJLEVBQUdBLEVBQUlpQyxFQUFNakMsR0FBSyxFQUFHLENBQzlCLE1BQU1rQyxFQUFhTCxFQUFlQyxFQUFNQyxFQUFRL0IsR0FBS1YsRUFDL0M2QyxFQUFhTixFQUFldEMsRUFBTXVDLEVBQU1DLEVBQVEvQixHQUN0RDJELEVBQVN2QixLQUFnRCxVQUEzQy9DLEVBQVE2QyxFQUFZQyxHQUFZckMsT0FDbEQsQ0FDQSxPQUFPNkQsRUFBU0YsT0FBT0csSUFBa0IsSUFBVEEsR0FBYyxFQW1IOUN4RSxjQUNBeUUsb0JBcEV5QnJELElBQ0ZBLEVBQVVyQixNQUFNc0IsT0FDeEJDLFNBQVNDLElBQ0EsYUFBaEJBLEVBQUtiLFFBQ0xILEVBQVFnQixFQUFLckIsSUFBS3FCLEVBQUtwQixJQUFLLFFBQ2hDLEdBQ0YsRUErREwsRUNuTUwsRUFqQ3FCc0IsSUFDakIsSUFBSW9CLEVBZ0JKLE1BZmEsWUFBVHBCLElBQ0FvQixFQUFPLEdBRUUsZUFBVHBCLElBQ0FvQixFQUFPLEdBRUUsY0FBVHBCLElBQ0FvQixFQUFPLEdBRUUsY0FBVHBCLElBQ0FvQixFQUFPLEdBRUUsZUFBVHBCLElBQ0FvQixFQUFPLEdBRUosQ0FDSHBCLE9BQ0FvQixPQUNBNkIsU0FBVSxFQUNWbEMsWUFBWSxFQUNaLE1BQUFtQyxHQUNJQyxLQUFLcEMsWUFBY29DLEtBQUtwQyxVQUM1QixFQUNBLEdBQUFVLEdBQ0kwQixLQUFLRixVQUFZLENBQ3JCLEVBQ0EsTUFBQVQsR0FDSSxPQUFPVyxLQUFLRixXQUFhN0IsQ0FDN0IsRUFDSCxFQzJLTCxFQTFNc0IsS0FDbEIsTUFBTWhELEVBQU8sQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUMzRCxJQUFJZ0YsRUFBVSxLQUNWQyxFQUFVLEtBb0VkLElBQUlDLEVBQVEsRUFDUkMsR0FBVSxFQUNWQyxHQUFTLEVBQ2IsTUFBTUMsRUFBa0IsQ0FBQzlELEVBQVdsQixFQUFLQyxFQUFLMEUsS0FHMUMsR0FBSUEsRUFBUTFFLE1BQVFBLEVBRWhCLEdBQUk2RSxFQUFTLENBQ1RELEVBQVEsRUFFUixJQUFJdkIsRUFBU0MsT0FBT0MsYUFBYXhELEVBQUl5RCxXQUFXLEdBQUtvQixHQUNyRCxLQUFPM0QsRUFBVW5CLFFBQVF1RCxFQUFRckQsSUFBa0QsUUFBMUNpQixFQUFVbkIsUUFBUXVELEVBQVFyRCxHQUFLTyxRQUNwRXFFLEdBQVMsRUFDVHZCLEVBQVNDLE9BQU9DLGFBQWF4RCxFQUFJeUQsV0FBVyxHQUFLb0IsR0FFakQzRCxFQUFVbkIsUUFBUXVELEVBQVFyRCxJQUFrRCxRQUExQ2lCLEVBQVVuQixRQUFRdUQsRUFBUXJELEdBQUtPLFFBQThELFNBQTFDVSxFQUFVbkIsUUFBUXVELEVBQVFyRCxHQUFLTyxRQUNwSFUsRUFBVTZCLGNBQWNPLEVBQVFyRCxHQUNjLFFBQTFDaUIsRUFBVW5CLFFBQVF1RCxFQUFRckQsR0FBS08sU0FDL0J5RSxFQUFXTCxHQUNYTSxFQUFXLENBQUVsRixJQUFLc0QsRUFBUXJELElBQUtBLEtBTW5DNEUsR0FBUyxJQUdUQSxFQUFRLEVBQ1JDLEdBQVUsRUFDVkUsRUFBZ0I5RCxFQUFXb0MsRUFBUXJELEVBQUswRSxHQUVoRCxLQUNLLENBQ0RFLEVBQVEsRUFFUixJQUFJdkIsRUFBU0MsT0FBT0MsYUFBYXhELEVBQUl5RCxXQUFXLEdBQUtvQixHQUNyRCxLQUFPM0QsRUFBVW5CLFFBQVF1RCxFQUFRckQsSUFBa0QsUUFBMUNpQixFQUFVbkIsUUFBUXVELEVBQVFyRCxHQUFLTyxRQUNwRXFFLEdBQVMsRUFDVHZCLEVBQVNDLE9BQU9DLGFBQWF4RCxFQUFJeUQsV0FBVyxHQUFLb0IsR0FFakQzRCxFQUFVbkIsUUFBUXVELEVBQVFyRCxJQUFrRCxRQUExQ2lCLEVBQVVuQixRQUFRdUQsRUFBUXJELEdBQUtPLFFBQThELFNBQTFDVSxFQUFVbkIsUUFBUXVELEVBQVFyRCxHQUFLTyxRQUNwSFUsRUFBVTZCLGNBQWNPLEVBQVFyRCxHQUNjLFFBQTFDaUIsRUFBVW5CLFFBQVF1RCxFQUFRckQsR0FBS08sU0FDL0J5RSxFQUFXTCxHQUNYTSxFQUFXLENBQUVsRixJQUFLc0QsRUFBUXJELElBQUtBLEtBTW5DNEUsR0FBUyxJQUdUQSxFQUFRLEVBQ1JDLEdBQVUsRUFDVkUsRUFBZ0I5RCxFQUFXb0MsRUFBUXJELEVBQUswRSxHQUVoRCxNQUVDLEdBQUlBLEVBQVEzRSxNQUFRQSxFQUVyQixHQUFJK0UsRUFBUSxDQUNSRixFQUFRLEVBRVIsSUFBSW5CLEdBQVVDLE9BQU8xRCxHQUFPNEUsR0FBT2pCLFdBQ25DLEtBQU8xQyxFQUFVbkIsUUFBUUMsRUFBSzBELElBQXFELFFBQTFDeEMsRUFBVW5CLFFBQVFDLEVBQUswRCxHQUFRbEQsUUFDcEVxRSxHQUFTLEVBQ1RuQixHQUFVQyxPQUFPMUQsR0FBTzRFLEdBQU9qQixXQUUvQjFDLEVBQVVuQixRQUFRQyxFQUFLMEQsSUFBcUQsUUFBMUN4QyxFQUFVbkIsUUFBUUMsRUFBSzBELEdBQVFsRCxRQUE4RCxTQUExQ1UsRUFBVW5CLFFBQVFDLEVBQUswRCxHQUFRbEQsUUFDcEhVLEVBQVU2QixjQUFjL0MsRUFBSzBELEdBQ2lCLFFBQTFDeEMsRUFBVW5CLFFBQVFDLEVBQUswRCxHQUFRbEQsU0FDL0J5RSxFQUFXTCxHQUNYTSxFQUFXLENBQUVsRixJQUFLQSxFQUFLQyxJQUFLeUQsS0FNaENtQixHQUFTLElBR1RBLEVBQVEsRUFDUkUsR0FBUyxFQUNUQyxFQUFnQjlELEVBQVdsQixFQUFLMEQsRUFBUWlCLEdBRWhELEtBQ0ssQ0FDREUsRUFBUSxFQUVSLElBQUluQixHQUFVQyxPQUFPMUQsR0FBTzRFLEdBQU9qQixXQUNuQyxLQUFPMUMsRUFBVW5CLFFBQVFDLEVBQUswRCxJQUFxRCxRQUExQ3hDLEVBQVVuQixRQUFRQyxFQUFLMEQsR0FBUWxELFFBQ3BFcUUsR0FBUyxFQUNUbkIsR0FBVUMsT0FBTzFELEdBQU80RSxHQUFPakIsV0FFL0IxQyxFQUFVbkIsUUFBUUMsRUFBSzBELElBQXFELFFBQTFDeEMsRUFBVW5CLFFBQVFDLEVBQUswRCxHQUFRbEQsUUFBOEQsU0FBMUNVLEVBQVVuQixRQUFRQyxFQUFLMEQsR0FBUWxELFFBQ3BIVSxFQUFVNkIsY0FBYy9DLEVBQUswRCxHQUNpQixRQUExQ3hDLEVBQVVuQixRQUFRQyxFQUFLMEQsR0FBUWxELFNBQy9CeUUsRUFBV0wsR0FDWE0sRUFBVyxDQUFFbEYsSUFBS0EsRUFBS0MsSUFBS3lELEtBTWhDbUIsR0FBUyxJQUdUQSxFQUFRLEVBQ1JFLEdBQVMsRUFDVEMsRUFBZ0I5RCxFQUFXbEIsRUFBSzBELEVBQVFpQixHQUVoRCxDQUNKLEVBUUVNLEVBQWNFLElBQ2hCUixFQUFVUSxDQUFVLEVBRWxCRCxFQUFjRSxJQUNoQlIsRUFBVVEsQ0FBVSxFQUV4QixNQUFPLENBQUVDLE9BcE1NLENBQUNuRSxFQUFXbEIsRUFBS0MsS0FDNUIsR0FBMkMsUUFBdkNpQixFQUFVbkIsUUFBUUMsRUFBS0MsR0FBS08sUUFBMkQsU0FBdkNVLEVBQVVuQixRQUFRQyxFQUFLQyxHQUFLTyxPQUFtQixDQUMvRixJQUFJOEUsRUFBU3BFLEVBQVU2QixjQUFjL0MsRUFBS0MsR0FLMUMsTUFKZSxRQUFYcUYsSUFDQUwsRUFBV0wsR0FDWE0sRUFBVyxDQUFFbEYsSUFBS0EsRUFBS0MsSUFBS0EsS0FFekJxRixDQUNYLENBQ0EsTUFBTyxjQUFjLEVBMkxSQyxhQXpMS3JFLElBQ2xCLElBQUlzRSxFQUNBQyxFQUNKLEdBQ0lELEVBQVk3RixFQUFLK0YsS0FBS0MsTUFBTUQsS0FBS0UsU0FBV2pHLEVBQUtvQixTQUNqRDBFLEVBQVlDLEtBQUtHLEtBQXFCLEdBQWhCSCxLQUFLRSxVQUFlaEMsaUJBQ2MsUUFBbkQxQyxFQUFVbkIsUUFBUXlGLEVBQVdDLEdBQVdqRixRQUF1RSxTQUFuRFUsRUFBVW5CLFFBQVF5RixFQUFXQyxHQUFXakYsUUFDN0csR0FBdUQsUUFBbkRVLEVBQVVuQixRQUFReUYsRUFBV0MsR0FBV2pGLFFBQXVFLFNBQW5EVSxFQUFVbkIsUUFBUXlGLEVBQVdDLEdBQVdqRixPQUFtQixDQUN2SCxNQUFNOEUsRUFBU3BFLEVBQVU2QixjQUFjeUMsRUFBV0MsR0FTbEQsTUFSdUQsUUFBbkR2RSxFQUFVbkIsUUFBUXlGLEVBQVdDLEdBQVdqRixTQUN4Q3lFLEVBQVdMLEdBQ1hNLEVBQVcsQ0FBRWxGLElBQUt3RixFQUFXdkYsSUFBS3dGLEtBTS9CLENBQUVILFNBQVF0RixJQUFLd0YsRUFBV3ZGLElBQUt3RixFQUMxQyxDQUNBLE1BQU8sQ0FBRUgsT0FBUSxlQUFnQnRGLElBQUt3RixFQUFXdkYsSUFBS3dGLEVBQVcsRUFzS3RDSyxlQXBLUixDQUFDNUUsRUFBV2xCLEVBQUtDLEtBQ3BDLE1BTU04RixFQU5hLENBQ2YsQ0FBRS9GLElBQUssRUFBR0MsS0FBTSxHQUNoQixDQUFFRCxJQUFLLEVBQUdDLElBQUssR0FDZixDQUFFRCxLQUFNLEVBQUdDLElBQUssR0FDaEIsQ0FBRUQsSUFBSyxFQUFHQyxJQUFLLElBRWdCa0QsUUFBUUUsSUFDdkMsTUFBTUMsRUFBU0MsT0FBT0MsYUFBYXhELEVBQUl5RCxXQUFXLEdBQUtKLEVBQVVyRCxLQUMzRDBELEdBQVVDLE9BQU8xRCxHQUFPb0QsRUFBVXBELEtBQUsyRCxXQUN2Q3ZDLEVBQU9ILEVBQVVuQixRQUFRdUQsRUFBUUksR0FDdkMsU0FBSXJDLEdBQXdCLFNBQWhCQSxFQUFLYixRQUFxQyxRQUFoQmEsRUFBS2IsT0FHL0IsSUFFaEIsR0FBSXVGLEVBQWdCaEYsT0FBUyxFQUFHLENBQzVCLE1BQU1pRixFQUFrQkQsRUFBZ0JMLEtBQUtDLE1BQU1ELEtBQUtFLFNBQVdHLEVBQWdCaEYsU0FDN0V1QyxFQUFTQyxPQUFPQyxhQUFheEQsRUFBSXlELFdBQVcsR0FBS3VDLEVBQWdCaEcsS0FDakUwRCxHQUFVQyxPQUFPMUQsR0FBTytGLEVBQWdCL0YsS0FBSzJELFdBQ25EMUMsRUFBVTZCLGNBQWNPLEVBQVFJLEdBQ2hDbUIsRUFBUSxFQUN5QyxRQUE3QzNELEVBQVVuQixRQUFRdUQsRUFBUUksR0FBUWxELFNBQ2xDeUUsRUFBV0wsR0FDWE0sRUFBVyxDQUFFbEYsSUFBS3NELEVBQVFyRCxJQUFLeUQsSUFNdkMsQ0FHQSxFQW1JMkNzQixrQkFBaUJMLFVBQVNDLFVBQVNxQixXQVovRCxJQUNSdEIsRUFXbUZ1QixXQVQzRSxJQUNSdEIsRUFRK0ZLLGFBQVlDLGFBQVksRUN4TXRJLElBQUlpQixFQUF3QyxTQUFVQyxFQUFTQyxFQUFZQyxFQUFHQyxHQUUxRSxPQUFPLElBQUtELElBQU1BLEVBQUlFLFdBQVUsU0FBVUMsRUFBU0MsR0FDL0MsU0FBU0MsRUFBVUMsR0FBUyxJQUFNQyxFQUFLTixFQUFVTyxLQUFLRixHQUFTLENBQUUsTUFBT0csR0FBS0wsRUFBT0ssRUFBSSxDQUFFLENBQzFGLFNBQVNDLEVBQVNKLEdBQVMsSUFBTUMsRUFBS04sRUFBaUIsTUFBRUssR0FBUyxDQUFFLE1BQU9HLEdBQUtMLEVBQU9LLEVBQUksQ0FBRSxDQUM3RixTQUFTRixFQUFLdkIsR0FKbEIsSUFBZXNCLEVBSWF0QixFQUFPMkIsS0FBT1IsRUFBUW5CLEVBQU9zQixRQUoxQ0EsRUFJeUR0QixFQUFPc0IsTUFKaERBLGFBQWlCTixFQUFJTSxFQUFRLElBQUlOLEdBQUUsU0FBVUcsR0FBV0EsRUFBUUcsRUFBUSxLQUlqQk0sS0FBS1AsRUFBV0ssRUFBVyxDQUM3R0gsR0FBTU4sRUFBWUEsRUFBVVksTUFBTWYsRUFBU0MsR0FBYyxLQUFLUyxPQUNsRSxHQUNKLEVBR0EsTUFBTU0sRUFBYyxDQUFDQyxFQUFnQkMsRUFBaUJDLEtBQ2xELElBQUlDLEVBQ0FDLEVBR0FDLEVBQ0FyRixFQUhBc0YsRUFBYSxFQUNiQyxFQUFhLEVBR2JDLEVBQW1CLEdBQ3ZCLE1BQU1DLEVBQWdCLENBQ2xCQyxRQUFTUixFQUFNLEdBQ2ZTLFdBQVlULEVBQU0sR0FDbEJVLFVBQVdWLEVBQU0sR0FDakJXLFVBQVdYLEVBQU0sR0FDakJZLFdBQVlaLEVBQU0sSUFFaEJhLEVBQW9CekcsU0FBUzBHLGNBQWMsZUFDM0NDLEVBQXFCM0csU0FBUzBHLGNBQWMsZ0JBQzVDRSxFQUFrQkgsRUFBa0J4RyxpQkFBaUIsU0FDckQ0RyxFQUFtQkYsRUFBbUIxRyxpQkFBaUIsU0FDdkQ2RyxFQUFlLEdBQ3JCLElBQUssSUFBSXBILEtBQVFrSCxFQUNSbEgsRUFBS1EsVUFBVUMsU0FBUyxVQUN6QjJHLEVBQWEzRixLQUFLekIsR0FHMUIsSUFBSyxJQUFJQSxLQUFRbUgsRUFDUm5ILEVBQUtRLFVBQVVDLFNBQVMsVUFDekIyRyxFQUFhM0YsS0FBS3pCLEdBR1BNLFNBQVNDLGlCQUFpQixjQUNsQ1IsU0FBU3NILElBQ2hCQSxFQUFVQyxpQkFBaUIsWUFBYUMsR0FDeENGLEVBQVVDLGlCQUFpQixVQUFXRSxHQUN0Q0gsRUFBVUMsaUJBQWlCLFlBQWFHLEdBQ3hDSixFQUFVQyxpQkFBaUIsVUFBV0ksR0FDdENMLEVBQVVDLGlCQUFpQixjQUFlSyxHQUMxQ1AsRUFBYXJILFNBQVNDLElBQ2xCQSxFQUFLc0gsaUJBQWlCLGNBQWVNLEVBQWdCLEdBQ3ZELElBRU4sSUFBSUMsRUFBYyxLQUNsQixTQUFTTixFQUFnQjdCLEdBQ3JCTSxFQUFlOUMsb0JBQW9COEMsR0FDbkNDLEVBQWdCL0Msb0JBQW9CK0MsR0FDcEMsTUFBTTZCLEVBQWlCcEMsRUFBRXFDLE9BQU9ySCxhQUFhLGFBQzdDLElBQUlzSCxFQUEwQmhDLEVBQWV2SCxZQUFZcUQsUUFBUWxDLEdBQ3REa0ksSUFBbUJsSSxFQUFLUixRQUFRYyxLQUFLUyxnQkFFNUNzSCxFQUF5QmhDLEVBQWdCeEgsWUFBWXFELFFBQVFsQyxHQUN0RGtJLElBQW1CbEksRUFBS1IsUUFBUWMsS0FBS1MsZ0JBRWhEcUgsRUFBd0JqSSxTQUFTSCxJQUM3Qm9HLEVBQWVuRSxhQUFhbUUsRUFBZ0JwRyxFQUFLakIsSUFBS2lCLEVBQUtoQixJQUFJLElBRW5FcUosRUFBdUJsSSxTQUFTSCxJQUM1QnFHLEVBQWdCcEUsYUFBYW9FLEVBQWlCckcsRUFBS2pCLElBQUtpQixFQUFLaEIsSUFBSSxJQUVyRSxFQUFHc0osYUFBYWxDLEdBQ2hCLEVBQUdrQyxhQUFhakMsR0FDaEIsRUFBR2tDLGtCQUFrQixRQUFTbkMsRUFBZXZILGFBQzdDLEVBQUcwSixrQkFBa0IsU0FBVWxDLEVBQWdCeEgsYUFDL0NzSCxFQUFZQyxFQUFnQkMsRUFBaUIsRUFBV21DLFdBQzVELENBQ0EsU0FBU1osSUFDTHhCLEVBQWV2SCxZQUFZc0IsU0FBU0gsSUFDaENvRyxFQUFlbkUsYUFBYW1FLEVBQWdCcEcsRUFBS2pCLElBQUtpQixFQUFLaEIsSUFBSSxJQUVuRXFILEVBQWdCeEgsWUFBWXNCLFNBQVNILElBQ2pDcUcsRUFBZ0JwRSxhQUFhb0UsRUFBaUJyRyxFQUFLakIsSUFBS2lCLEVBQUtoQixJQUFJLElBRXJFLEVBQUdzSixhQUFhbEMsR0FDaEIsRUFBR2tDLGFBQWFqQyxHQUNoQixFQUFHa0Msa0JBQWtCLFFBQVNuQyxFQUFldkgsYUFDN0MsRUFBRzBKLGtCQUFrQixTQUFVbEMsRUFBZ0J4SCxhQUMvQ3NILEVBQVlDLEVBQWdCQyxFQUFpQixFQUFXbUMsV0FDNUQsQ0FDQSxTQUFTWCxFQUFnQi9CLEdBQ3JCLE9BQU9aLEVBQVV6QixVQUFNLE9BQVEsR0FBUSxrQkFDN0IsSUFBSThCLFNBQVNDLEdBQVlpRCxXQUFXakQsRUFBUyxLQUNuRCxNQUFNMkMsRUFBU3JDLEVBQUVxQyxPQUNqQkEsRUFBT08sTUFBTUMsV0FBYSxTQUMxQmxGLEtBQUs3QyxVQUFVSyxJQUFJLFlBQ25Cc0YsRUFBVzRCLEVBQU9ySCxhQUFhLGFBQy9CMEYsRUFBVzlELE9BQU95RixFQUFPckgsYUFBYSxjQUN0QzRGLEVBQWFaLEVBQUU4QyxRQUNmakMsRUFBYWIsRUFBRStDLFFBQ2ZwQyxFQUFVSSxFQUFjTixHQUN4Qm5GLEVBQWNxRixFQUFRcEYsV0FBYSxXQUFhLGFBQ1osZUFBaEM4RyxFQUFPVyxRQUFRLFVBQVVDLElBQ3pCM0MsRUFBZXJHLFdBQVcwRyxFQUFTTCxHQUVILGdCQUFoQytCLEVBQU9XLFFBQVEsVUFBVUMsSUFDekIxQyxFQUFnQnRHLFdBQVcwRyxFQUFTSixFQUU1QyxHQUNKLENBQ0EsU0FBUzJDLEVBQWVDLEdBQ3BCLE9BQU8sU0FBVW5ELEdBQ2IsTUFBTXFDLEVBQVNyQyxFQUFFcUMsT0FDakIsR0FBb0MsZUFBaENBLEVBQU9XLFFBQVEsVUFBVUMsS0FDekJqRCxFQUFFb0QsaUJBQ0V6QyxHQUFTLENBQ1QsSUFBSTBDLEVBQVlGLEdBQVN4QyxFQUFRcEYsV0FBMEQsR0FBN0NvRCxLQUFLQyxNQUFNaUMsRUFBYWxELEtBQUsyRixjQUFxQjNFLEtBQUtDLE1BQU1nQyxFQUFhakQsS0FBSzRGLGNBQzdILE1BQU1DLEVBQWMsR0FDcEIsSUFBSyxJQUFJN0osRUFBSSxFQUFHQSxFQUFJK0csRUFBVS9HLElBQUssQ0FDL0IsSUFBSThKLEVBQVk5QyxFQUFRcEYsV0FBYThILEVBQWdCLEdBQUoxSixFQUFTMEosRUFBWTFKLEVBQ2xFNkgsRUFBZ0JpQyxLQUNoQkQsRUFBWXpILEtBQUt5RixFQUFnQmlDLElBQ2pDM0MsRUFBaUIvRSxLQUFLeUYsRUFBZ0JpQyxJQUU5QyxDQUNJQyxFQUFpQkYsS0FDakJBLEVBQVluSixTQUFTQyxJQUNqQkEsRUFBS1EsVUFBVUssSUFBSSxZQUFZLElBRTlCZ0gsSUFDREEsRUFBY3dCLEVBQXdCN0MsRUFBa0JKLElBTXBFLENBRUosR0FBb0MsZ0JBQWhDMkIsRUFBT1csUUFBUSxVQUFVQyxLQUN6QmpELEVBQUVvRCxpQkFDRXpDLEdBQVMsQ0FDVCxJQUFJMEMsRUFBWUYsR0FBU3hDLEVBQVFwRixXQUEwRCxHQUE3Q29ELEtBQUtDLE1BQU1pQyxFQUFhbEQsS0FBSzJGLGNBQXFCM0UsS0FBS0MsTUFBTWdDLEVBQWFqRCxLQUFLNEYsY0FDN0gsTUFBTUMsRUFBYyxHQUNwQixJQUFLLElBQUk3SixFQUFJLEVBQUdBLEVBQUkrRyxFQUFVL0csSUFBSyxDQUMvQixJQUFJOEosRUFBWTlDLEVBQVFwRixXQUFhOEgsRUFBZ0IsR0FBSjFKLEVBQVMwSixFQUFZMUosRUFDbEU4SCxFQUFpQmdDLEtBQ2pCRCxFQUFZekgsS0FBSzBGLEVBQWlCZ0MsSUFDbEMzQyxFQUFpQi9FLEtBQUswRixFQUFpQmdDLElBRS9DLENBQ0lDLEVBQWlCRixLQUNqQkEsRUFBWW5KLFNBQVNDLElBQ2pCQSxFQUFLUSxVQUFVSyxJQUFJLFlBQVksSUFFOUJnSCxJQUNEQSxFQUFjd0IsRUFBd0I3QyxFQUFrQkosSUFNcEUsQ0FFUixDQUNKLENBQ0EsU0FBU2tELElBQ0w5QyxFQUFpQnpHLFNBQVN3SixJQUN0QkEsRUFBZ0IvSSxVQUFVSSxPQUFPLFlBQVksSUFFakQ0RixFQUFtQixFQUN2QixDQUNBLFNBQVNnRCxFQUFXOUQsR0FDaEJjLEVBQWlCekcsU0FBU3dKLElBQ3RCQSxFQUFnQi9JLFVBQVVJLE9BQU8sWUFBWSxJQUVqRCxNQUFNNkksRUFBT0osRUFBd0I3QyxFQUFrQkosR0FDakQyQixFQUFTckMsRUFBRXFDLE9BQ21CLGVBQWhDQSxFQUFPVyxRQUFRLFVBQVVDLElBQ3JCdEMsR0FBMkIsT0FBaEJ3QixJQUNQN0IsRUFBZWpELFlBQVlzRCxFQUFRL0UsS0FBTW1JLEVBQUssR0FBR0MsUUFBUS9LLElBQUs4SyxFQUFLLEdBQUdDLFFBQVE5SyxJQUFLb0MsSUFDbkZnRixFQUFlakYsVUFBVXNGLEVBQVNvRCxFQUFLLEdBQUdDLFFBQVEvSyxJQUFLOEssRUFBSyxHQUFHQyxRQUFROUssSUFBS29DLEdBQzVFZ0YsRUFBZW5FLGFBQWFtRSxFQUFnQnlELEVBQUssR0FBR0MsUUFBUS9LLElBQUs4SyxFQUFLLEdBQUdDLFFBQVE5SyxPQUdqRm9ILEVBQWVqRixVQUFVc0YsRUFBU3dCLEVBQVksR0FBRzZCLFFBQVEvSyxJQUFLa0osRUFBWSxHQUFHNkIsUUFBUTlLLElBQUtvQyxHQUMxRmdGLEVBQWVuRSxhQUFhbUUsRUFBZ0I2QixFQUFZLEdBQUc2QixRQUFRL0ssSUFBS2tKLEVBQVksR0FBRzZCLFFBQVE5SyxPQUl2RSxnQkFBaENtSixFQUFPVyxRQUFRLFVBQVVDLElBQ3JCdEMsR0FBMkIsT0FBaEJ3QixJQUNQNUIsRUFBZ0JsRCxZQUFZc0QsRUFBUS9FLEtBQU1tSSxFQUFLLEdBQUdDLFFBQVEvSyxJQUFLOEssRUFBSyxHQUFHQyxRQUFROUssSUFBS29DLElBQ3BGaUYsRUFBZ0JsRixVQUFVc0YsRUFBU29ELEVBQUssR0FBR0MsUUFBUS9LLElBQUs4SyxFQUFLLEdBQUdDLFFBQVE5SyxJQUFLb0MsR0FDN0VpRixFQUFnQnBFLGFBQWFvRSxFQUFpQndELEVBQUssR0FBR0MsUUFBUS9LLElBQUs4SyxFQUFLLEdBQUdDLFFBQVE5SyxPQUduRnFILEVBQWdCbEYsVUFBVXNGLEVBQVN3QixFQUFZLEdBQUc2QixRQUFRL0ssSUFBS2tKLEVBQVksR0FBRzZCLFFBQVE5SyxJQUFLb0MsR0FDM0ZpRixFQUFnQnBFLGFBQWFvRSxFQUFpQjRCLEVBQVksR0FBRzZCLFFBQVEvSyxJQUFLa0osRUFBWSxHQUFHNkIsUUFBUTlLLE9BSTdHb0gsRUFBZTlDLG9CQUFvQjhDLEdBQ25DQyxFQUFnQi9DLG9CQUFvQitDLEdBQ3BDRCxFQUFldkgsWUFBWXNCLFNBQVNILElBQ2hDb0csRUFBZW5FLGFBQWFtRSxFQUFnQnBHLEVBQUtqQixJQUFLaUIsRUFBS2hCLElBQUksSUFFbkVxSCxFQUFnQnhILFlBQVlzQixTQUFTSCxJQUNqQ3FHLEVBQWdCcEUsYUFBYW9FLEVBQWlCckcsRUFBS2pCLElBQUtpQixFQUFLaEIsSUFBSSxJQUVyRSxFQUFHc0osYUFBYWxDLEdBQ2hCLEVBQUdrQyxhQUFhakMsR0FDaEIsRUFBR2tDLGtCQUFrQixRQUFTbkMsRUFBZXZILGFBQzdDLEVBQUcwSixrQkFBa0IsU0FBVWxDLEVBQWdCeEgsYUFDL0NzSCxFQUFZQyxFQUFnQkMsRUFBaUIsRUFBV21DLFlBQ3hELEVBQUd1QixlQUNILEVBQUdDLGtCQUNIL0IsRUFBYyxJQUNsQixDQUNBLFNBQVNILEVBQWNoQyxHQUNuQixNQUFNcUMsRUFBU3JDLEVBQUVxQyxPQUNqQkEsRUFBT08sTUFBTUMsV0FBYSxVQUMxQmxGLEtBQUs3QyxVQUFVSSxPQUFPLFlBQ1UsSUFBNUI0RixFQUFpQjlHLFNBQ21CLGVBQWhDcUksRUFBT1csUUFBUSxVQUFVQyxHQUNyQmQsR0FBZTdCLEVBQWVqRCxZQUFZc0QsRUFBUS9FLEtBQU11RyxFQUFZLEdBQUc2QixRQUFRL0ssSUFBS2tKLEVBQVksR0FBRzZCLFFBQVE5SyxJQUFLb0MsS0FDaEhnRixFQUFlakYsVUFBVXNGLEVBQVN3QixFQUFZLEdBQUc2QixRQUFRL0ssSUFBS2tKLEVBQVksR0FBRzZCLFFBQVE5SyxJQUFLb0MsR0FDMUZnRixFQUFlbkUsYUFBYW1FLEVBQWdCNkIsRUFBWSxHQUFHNkIsUUFBUS9LLElBQUtrSixFQUFZLEdBQUc2QixRQUFROUssS0FDL0YsRUFBR3NKLGFBQWFsQyxHQUNoQixFQUFHa0MsYUFBYWpDLEdBQ2hCLEVBQUdrQyxrQkFBa0IsUUFBU25DLEVBQWV2SCxhQUM3QyxFQUFHMEosa0JBQWtCLFNBQVVsQyxFQUFnQnhILGFBQy9Dc0gsRUFBWUMsRUFBZ0JDLEVBQWlCLEVBQVdtQyxhQUd2QixnQkFBaENMLEVBQU9XLFFBQVEsVUFBVUMsSUFDMUJkLEdBQWU1QixFQUFnQmxELFlBQVlzRCxFQUFRL0UsS0FBTXVHLEVBQVksR0FBRzZCLFFBQVEvSyxJQUFLa0osRUFBWSxHQUFHNkIsUUFBUTlLLElBQUtvQyxLQUNqSGlGLEVBQWdCbEYsVUFBVXNGLEVBQVN3QixFQUFZLEdBQUc2QixRQUFRL0ssSUFBS2tKLEVBQVksR0FBRzZCLFFBQVE5SyxJQUFLb0MsR0FDM0ZpRixFQUFnQnBFLGFBQWFvRSxFQUFpQjRCLEVBQVksR0FBRzZCLFFBQVEvSyxJQUFLa0osRUFBWSxHQUFHNkIsUUFBUTlLLEtBQ2pHLEVBQUdzSixhQUFhbEMsR0FDaEIsRUFBR2tDLGFBQWFqQyxHQUNoQixFQUFHa0Msa0JBQWtCLFFBQVNuQyxFQUFldkgsYUFDN0MsRUFBRzBKLGtCQUFrQixTQUFVbEMsRUFBZ0J4SCxhQUMvQ3NILEVBQVlDLEVBQWdCQyxFQUFpQixFQUFXbUMsYUFJeEUsQ0FDQSxTQUFTZ0IsRUFBaUJGLEdBQ3RCLE9BQVFBLEVBQVlwRyxPQUFPOUMsR0FBU0EsRUFBS1EsVUFBVUMsU0FBUyxhQUN2RHlJLEVBQVlwRyxPQUFPOUMsR0FBU0EsRUFBSzBKLFFBQVEvSyxNQUFRdUssRUFBWSxHQUFHUSxRQUFRL0ssT0FDckV1SyxFQUFZcEcsT0FBTzlDLEdBQVNBLEVBQUswSixRQUFROUssTUFBUXNLLEVBQVksR0FBR1EsUUFBUTlLLFFBQzVFc0ssRUFBWXhKLFNBQVcwRyxHQUN2QjhDLEVBQVlwRyxPQUFPOUMsR0FBU0EsRUFBSzBKLFFBQVEvSyxLQUFPLEtBQU9xQixFQUFLMEosUUFBUS9LLEtBQU8sT0FDM0V1SyxFQUFZcEcsT0FBTzlDLEdBQVNzQyxPQUFPdEMsRUFBSzBKLFFBQVE5SyxNQUFRLEdBQUswRCxPQUFPdEMsRUFBSzBKLFFBQVE5SyxNQUFRLElBQ2pHLENBQ0EsU0FBU3lLLEVBQXdCN0MsRUFBa0JKLEdBQy9DLE9BQU9JLEVBQWlCcUQsTUFBTXhGLEtBQUt5RixJQUFJdEQsRUFBaUI5RyxPQUFTMEcsRUFBVSxHQUMvRSxDQVdBLFNBQVN1QixFQUFhakMsR0FDbEJBLEVBQUVvRCxpQkFDRixNQUFNZixFQUFTckMsRUFBRXFDLE9BQ2pCLElBQUlsSSxFQUNnQyxlQUFoQ2tJLEVBQU9XLFFBQVEsVUFBVUMsS0FDekI5SSxFQUFZbUcsR0FFb0IsZ0JBQWhDK0IsRUFBT1csUUFBUSxVQUFVQyxLQUN6QjlJLEVBQVlvRyxHQUVoQkUsRUFBVzRCLEVBQU9ySCxhQUFhLGFBQy9CMEYsRUFBVzlELE9BQU95RixFQUFPckgsYUFBYSxjQUN0QzJGLEVBQVVJLEVBQWNOLEdBQ3hCLE1BQU00RCxFQUFXMUQsRUFDWDJELEVBQVVuSyxFQUFVcEIsWUFBWXFELFFBQVFsQyxHQUFTQSxFQUFLUixRQUFRYyxLQUFLUyxnQkFBa0J3RixJQUMzRnRHLEVBQVVGLFdBQVcwRyxFQUFTeEcsR0FDOUJBLEVBQVVxRCxvQkFBb0JyRCxHQUM5QkEsRUFBVXBCLFlBQVlzQixTQUFTSCxJQUMzQkMsRUFBVWdDLGFBQWFoQyxFQUFXRCxFQUFLakIsSUFBS2lCLEVBQUtoQixJQUFJLElBRXpEbUwsRUFBUzNHLFNBQ1RwQyxFQUFjK0ksRUFBUzlJLFdBQWEsV0FBYSxhQUM3Q3BCLEVBQVVrRCxZQUFZZ0gsRUFBU3pJLEtBQU0wSSxFQUFRLEdBQUdyTCxJQUFLcUwsRUFBUSxHQUFHcEwsSUFBS29DLEtBSXJFK0ksRUFBUzNHLFNBQ1RwQyxFQUFjK0ksRUFBUzlJLFdBQWEsV0FBYSxjQUpqRHBCLEVBQVVrQixVQUFVZ0osRUFBVUMsRUFBUSxHQUFHckwsSUFBS3FMLEVBQVEsR0FBR3BMLElBQUtvQyxHQU9sRW5CLEVBQVVwQixZQUFZc0IsU0FBU0gsSUFDM0JDLEVBQVVnQyxhQUFhaEMsRUFBV0QsRUFBS2pCLElBQUtpQixFQUFLaEIsSUFBSSxJQUV6RCxFQUFHc0osYUFBYXJJLEdBQ2hCLEVBQUdzSSxrQkFBa0IsUUFBU25DLEVBQWV2SCxhQUM3QyxFQUFHMEosa0JBQWtCLFNBQVVsQyxFQUFnQnhILGFBQy9Dc0gsRUFBWUMsRUFBZ0JDLEVBQWlCLEVBQVdtQyxXQUM1RCxDQUNBLFNBQVNSLEVBQWdCbEMsR0FDckJBLEVBQUVvRCxnQkFDTixDQWxEQTVCLEVBQWdCbkgsU0FBUSxDQUFDQyxFQUFNNkksS0FDM0I3SSxFQUFLc0gsaUJBQWlCLFdBQVlzQixFQUFlQyxJQUNqRDdJLEVBQUtzSCxpQkFBaUIsWUFBYWdDLEdBQ25DdEosRUFBS3NILGlCQUFpQixPQUFRa0MsRUFBVyxJQUU3Q3JDLEVBQWlCcEgsU0FBUSxDQUFDQyxFQUFNNkksS0FDNUI3SSxFQUFLc0gsaUJBQWlCLFdBQVlzQixFQUFlQyxJQUNqRDdJLEVBQUtzSCxpQkFBaUIsWUFBYWdDLEdBQ25DdEosRUFBS3NILGlCQUFpQixPQUFRa0MsRUFBVyxHQTBDN0MsRUFFSixJQ3BUQSxJQUFJLEVBQXdDLFNBQVV6RSxFQUFTQyxFQUFZQyxFQUFHQyxHQUUxRSxPQUFPLElBQUtELElBQU1BLEVBQUlFLFdBQVUsU0FBVUMsRUFBU0MsR0FDL0MsU0FBU0MsRUFBVUMsR0FBUyxJQUFNQyxFQUFLTixFQUFVTyxLQUFLRixHQUFTLENBQUUsTUFBT0csR0FBS0wsRUFBT0ssRUFBSSxDQUFFLENBQzFGLFNBQVNDLEVBQVNKLEdBQVMsSUFBTUMsRUFBS04sRUFBaUIsTUFBRUssR0FBUyxDQUFFLE1BQU9HLEdBQUtMLEVBQU9LLEVBQUksQ0FBRSxDQUM3RixTQUFTRixFQUFLdkIsR0FKbEIsSUFBZXNCLEVBSWF0QixFQUFPMkIsS0FBT1IsRUFBUW5CLEVBQU9zQixRQUoxQ0EsRUFJeUR0QixFQUFPc0IsTUFKaERBLGFBQWlCTixFQUFJTSxFQUFRLElBQUlOLEdBQUUsU0FBVUcsR0FBV0EsRUFBUUcsRUFBUSxLQUlqQk0sS0FBS1AsRUFBV0ssRUFBVyxDQUM3R0gsR0FBTU4sRUFBWUEsRUFBVVksTUFBTWYsRUFBU0MsR0FBYyxLQUFLUyxPQUNsRSxHQUNKLEVBR0EsTUFBTXdFLEVBQUssTUFDUCxNQUFNQyxFQUFZNUosU0FBUzBHLGNBQWMsaUJBQ25DbUQsRUFBUzdKLFNBQVMwRyxjQUFjLFdBQ2hDb0QsRUFBUzlKLFNBQVMwRyxjQUFjLHFCQUNoQ3FELEVBQWEvSixTQUFTMEcsY0FBYyxZQUNwQ3NELEVBQVNoSyxTQUFTMEcsY0FBYyx1QkFDaEN1RCxFQUFXakssU0FBUzBHLGNBQWMsVUFDbEN3RCxFQUFZbEssU0FBUzBHLGNBQWMsb0JBQ25DeUQsRUFBVSxDQUFDTCxFQUFRQyxFQUFZQyxFQUFRQyxFQUFVQyxHQUNqREUsRUFBU3BLLFNBQVNxSyxrQkFBa0IsU0FZcENDLEVBQWMsQ0FBQy9LLEVBQVdnTCxLQUM1QmhMLEVBQVVyQixNQUFNdUIsU0FBU25CLElBQ3JCQSxFQUFJbUIsU0FBU3BCLElBQ1QsTUFBTXFCLEVBZEMsQ0FBQ0EsSUFDaEIsTUFBTThLLEVBQVV4SyxTQUFTeUssY0FBYyxPQVF2QyxPQVBBRCxFQUFRdEssVUFBVUssSUFBSSxRQUN0QmlLLEVBQVF0SyxVQUFVSyxJQUFJYixFQUFLYixRQUMzQjJMLEVBQVFFLGFBQWEsV0FBWWhMLEVBQUtyQixLQUN0Q21NLEVBQVFFLGFBQWEsV0FBWWhMLEVBQUtwQixLQUNsQ29CLEVBQUtaLFNBQ0wwTCxFQUFRRSxhQUFhLGdCQUFpQmhMLEVBQUtaLFFBQVFjLEtBQUtTLGVBRXJEbUssQ0FBTyxFQUtPRyxDQUFXdE0sR0FDeEJrTSxFQUFNSyxPQUFPbEwsRUFBSyxHQUNwQixHQUNKLEVBY0FrSSxFQUFnQnJJLElBQ2xCLElBQUlJLEVBQ0FKLElBQWMsRUFBV08sZUFDekJILEVBQVUsYUFFTEosSUFBYyxFQUFXUSxvQkFDOUJKLEVBQVUsZUFFZCxNQUFNNEssRUFBUXZLLFNBQVMwRyxjQUFjLElBQUkvRyxLQUN6QzRLLEVBQU1NLFVBQVksR0FDbEJQLEVBQVkvSyxFQUFXZ0wsRUFBTSxFQUUzQk8sRUFBZ0IxRixJQUNsQixJQUFLQSxFQUFFcUMsT0FBT3ZILFVBQVVDLFNBQVMsU0FBV2lGLEVBQUVxQyxPQUFPdkgsVUFBVUMsU0FBUyxRQUFTLENBRzdFLE1BQU8sQ0FBRTlCLElBRkcrRyxFQUFFcUMsT0FBT3JILGFBQWEsWUFFcEI5QixJQURGOEcsRUFBRXFDLE9BQU9ySCxhQUFhLFlBRXRDLEdBb0RFMkssRUFBaUIsQ0FBQ0MsRUFBaUJDLEtBQ3JDQSxFQUFrQi9LLFVBQVVJLE9BQU8sWUFDOUIwSyxFQUFnQjlLLFVBQVVDLFNBQVMsY0FDcEM2SyxFQUFnQjlLLFVBQVVLLElBQUksWUFDMUJ5SyxJQUFvQmxCLEdBcENSLE9BQVUsT0FBUSxPQUFRLEdBQVEsWUFDdERvQixFQUFVLFNBQ1ZDLEdBQVEsR0FDUmhCLEVBQVExSyxTQUFTMkwsR0FBU0EsRUFBSUMsVUFBVyxVQUNuQyxJQUFJeEcsU0FBU0MsR0FBWWlELFdBQVdqRCxFQUFTd0csT0FDbkRuQixFQUFRMUssU0FBUzJMLEdBQVNBLEVBQUlDLFVBQVcsSUFDekNGLEdBQVEsR0FDUjlCLElBQ0FrQyxHQUNKLElBOEJZUCxJQUFvQmhCLEdBakJSLE9BQVUsT0FBUSxPQUFRLEdBQVEsWUFDdERtQixHQUFRLEdBQ1JoQixFQUFRMUssU0FBUzJMLEdBQVNBLEVBQUlDLFVBQVcsVUFDbkMsSUFBSXhHLFNBQVNDLEdBQVlpRCxXQUFXakQsRUFBU3dHLE9BQ25EbkIsRUFBUTFLLFNBQVMyTCxHQUFTQSxFQUFJQyxVQUFXLElBQ3pDRixHQUFRLEdBQ1JsQixFQUFTb0IsVUFBVyxFQUNwQm5CLEVBQVVtQixVQUFXLEVBQ3JCckIsRUFBT3FCLFVBQVcsQ0FDdEIsSUFXUSxFQUFXRyxVQUNYQyxJQUNKLEVBRUVOLEVBQVdPLElBQ2IxTCxTQUFTMkwsZ0JBQWdCekwsVUFBVTBMLE9BQU8sT0FBUUYsRUFBSyxFQXVEckRyQyxFQUFlLElBQ29DLElBQWpELEVBQVd2SixlQUFlM0IsWUFBWWlCLFFBQW9FLElBQXBELEVBQVdXLGtCQUFrQjVCLFlBQVlpQixRQUMvRjhMLEVBQVUsVUFDVmpCLEVBQVNvQixVQUFXLEdBQ2IsSUFHUHBCLEVBQVNvQixVQUFXLEdBQ2IsR0FHVEUsRUFBaUIsS0FDbkIzQixFQUFVaUMsWUFBYyxtREFDcEJDLE9BQU9DLFdBQVcsdUJBQXVCQyxVQUN6Q3BDLEVBQVVpQyxZQUFjLDRIQUM1QixFQUVFdkMsRUFBa0IsS0FDaEJELE1BQ0FPLEVBQVVpQyxZQUFjLDJDQUM1QixFQWtDRUosRUFBb0IsS0FDdEI3QixFQUFVaUMsWUFBYyxlQUFlLEVBRTNDL0IsRUFBTzlDLGlCQUFpQixTQUFTLEtBQzdCa0UsRUFBVSxTQUNWSCxFQUFlakIsRUFBUUUsR0FDUmhLLFNBQVMwRyxjQUFjLGdCQUMvQnhHLFVBQVVJLE9BQU8sU0FDeEIyTCxFQUFZLFNBQ1poQyxFQUFTb0IsVUFBVyxFQUNwQnZCLEVBQU91QixVQUFXLENBQUksSUFFMUJyQixFQUFPaEQsaUJBQWlCLFNBQVMsS0FDN0JrRSxFQUFVLFNBQ1ZBLEVBQVUsVUFDVkgsRUFBZWYsRUFBUUYsR0FDdkIsTUFBTW9DLEVBQVNsTSxTQUFTMEcsY0FBYyxnQkFDdEN3RixFQUFPaE0sVUFBVUksT0FBTyxRQUN4QjRMLEVBQU9oTSxVQUFVSyxJQUFJLFNBQ3JCc0UsUUFBUXNILElBQUksQ0FBQ0YsRUFBWSxTQUFVQSxFQUFZLFlBQy9DaEMsRUFBU29CLFVBQVcsRUFDcEJuQixFQUFVbUIsVUFBVyxFQUNyQnJCLEVBQU9xQixVQUFXLENBQUksSUFFMUJ0QixFQUFXL0MsaUJBQWlCLFNBQVMsSUFBTSxPQUFVLE9BQVEsT0FBUSxHQUFRLFlBQ3pFa0UsRUFBVSxTQUNObEIsRUFBTzlKLFVBQVVDLFNBQVMsY0FDMUIrSyxFQUFVLFVBQ1ZqQixFQUFTb0IsVUFBVyxFQUNwQm5CLEVBQVVtQixVQUFXLEVBQ3JCckIsRUFBT3FCLFVBQVcsR0FFdEIxQixFQUFHeUMsMkJBbExxQixPQUFVLE9BQVEsT0FBUSxHQUFRLFlBQzFEWCxJQUNBTixHQUFRLEdBQ1JoQixFQUFRMUssU0FBUzJMLEdBQVNBLEVBQUlDLFVBQVcsVUFDbkMsRUFBV2dCLFVBQ2pCbEMsRUFBUTFLLFNBQVMyTCxHQUFTQSxFQUFJQyxVQUFXLElBQ3pDRixHQUFRLEdBQ1I5QixJQUNJUyxFQUFPNUosVUFBVUMsU0FBUyxhQUMxQm9MLEdBRVIsSUF5S0ksTUFBTVcsRUFBU2xNLFNBQVMwRyxjQUFjLGdCQUN0Q3dGLEVBQU9oTSxVQUFVSSxPQUFPLFFBQ3BCd0osRUFBTzVKLFVBQVVDLFNBQVMsY0FDMUIrTCxFQUFPaE0sVUFBVUksT0FBTyxTQUN4QjJMLEVBQVksU0FDWmhDLEVBQVNvQixVQUFXLEVBQ3BCdkIsRUFBT3VCLFVBQVcsR0FFbEJyQixFQUFPOUosVUFBVUMsU0FBUyxjQUMxQitMLEVBQU9oTSxVQUFVSyxJQUFJLFNBQ3JCMkosRUFBVW1CLFVBQVcsRUFDckJ4RyxRQUFRc0gsSUFBSSxDQUFDRixFQUFZLFNBQVVBLEVBQVksWUFDL0NoQyxFQUFTb0IsVUFBVyxFQUNwQm5CLEVBQVVtQixVQUFXLEVBQ3JCckIsRUFBT3FCLFVBQVcsRUFFMUIsTUFDQXBCLEVBQVNqRCxpQkFBaUIsU0FBUyxLQUMvQixFQUFXbEcsUUFDR2QsU0FBUzBHLGNBQWMsZUFDL0J4RyxVQUFVSyxJQUFJLFFBQ3BCLE1BQU0yTCxFQUFTbE0sU0FBUzBHLGNBQWMsZ0JBQ3RDd0YsRUFBT2hNLFVBQVVLLElBQUksUUFDckIyTCxFQUFPaE0sVUFBVUssSUFBSSxTQUNyQjBMLEVBQVksVUFDWmhDLEVBQVNvQixVQUFXLEVBQ3BCbkIsRUFBVW1CLFVBQVcsQ0FBSSxJQUU3Qm5CLEVBQVVsRCxpQkFBaUIsU0FBUyxLQUNoQyxFQUFXakgsa0JBQWtCYixhQUM3QjBJLEVBQWEsRUFBVzdILG1CQUN4QixFQUFXdU0sd0JBQXdCLFFBQVMsRUFBV3hNLGdCQUN2RCxFQUFZLEVBQVdBLGVBQWdCLEVBQVdDLGtCQUFtQixFQUFXK0gsWUFDaEZ1QixJQUNBQyxJQUNBNEIsRUFBVSxTQUFTLElBRXZCLElBQUlxQixFQUFhLElBQ2pCbkMsRUFBTzNLLFNBQVMrTSxJQUNaQSxFQUFNeEYsaUJBQWlCLFNBQVMsS0FDNUIsSUFBSXlGLEVBQVFELEVBQ1JDLEVBQU1DLFVBQ05ILEVBQWF2SyxPQUFPeUssRUFBTXhILE9BQzlCLEdBQ0YsSUFFTixNQUFNcUcsRUFBZ0IsSUFDWGlCLEVBRVhULE9BQU85RSxpQkFBaUIsU0FBVXVFLEdBQ2xDLE1BQU1MLEVBQWF1QixJQUNmLElBQUlsQyxFQUNVLFVBQVZrQyxFQUNBbEMsRUFBUXZLLFNBQVMwRyxjQUFjLGVBRWhCLFdBQVYrRixJQUNMbEMsRUFBUXZLLFNBQVMwRyxjQUFjLGlCQUVyQjZELEVBQU10SyxpQkFBaUIsU0FDL0JSLFNBQVNDLElBQ1hBLEVBQUtRLFVBQVVLLElBQUksU0FBUyxHQUM5QixFQUVBMEwsRUFBZVEsR0FBVSxPQUFVLE9BQVEsT0FBUSxHQUFRLFlBRTdELElBQUlsQyxFQURKWSxHQUFRLEdBRU0sVUFBVnNCLEVBQ0FsQyxFQUFRdkssU0FBUzBHLGNBQWMsZUFFaEIsV0FBVitGLElBQ0xsQyxFQUFRdkssU0FBUzBHLGNBQWMsaUJBRW5DLE1BQU03RixFQUFRMEosRUFBTXRLLGlCQUFpQixTQUNyQ1ksRUFBTXBCLFNBQVNDLElBQ1hBLEVBQUtRLFVBQVVLLElBQUksU0FBUyxVQUUxQixJQUFJc0UsU0FBU0MsSUFDZmpFLEVBQU1wQixTQUFRLENBQUNDLEVBQU02SSxLQUNqQlIsWUFBVyxLQUNQckksRUFBS1EsVUFBVUksT0FBTyxVQUNsQmlJLElBQVUxSCxFQUFNekIsT0FBUyxHQUN6QjBGLEdBQ0osR0FDQXdHLElBQWtCLElBQU8vQyxFQUFNLEdBQ3JDLElBRU40QyxHQUFRLEVBQ1osSUFDQSxNQUFPLENBQ0h3QixZQXhVaUJwTixJQUNqQixNQUFNZ0wsRUFBUXZLLFNBQVN5SyxjQUFjLE9BQ3JDRixFQUFNckssVUFBVUssSUFBSSxTQUNoQmhCLElBQWMsRUFBV08sZUFDekJ5SyxFQUFNbEMsR0FBSyxhQUVOOUksSUFBYyxFQUFXUSxvQkFDOUJ3SyxFQUFNbEMsR0FBSyxlQUVmaUMsRUFBWS9LLEVBQVdnTCxHQUN2QlYsRUFBT2UsT0FBT0wsRUFBTSxFQStUcEIzQyxlQUNBZ0YsZ0JBM1NvQixJQUFNLE9BQVUsT0FBUSxPQUFRLEdBQVEsWUFDNUQsTUFBTS9MLEVBQVFiLFNBQVNDLGlCQUFpQixzQkFDeEMsSUFBSTRNLEVBQ0osR0FDSUEsUUFBa0IsSUFBSWhJLFNBQVNDLElBQzNCakUsRUFBTXBCLFNBQVNDLElBQ05BLEVBQUtRLFVBQVVDLFNBQVMsUUFBV1QsRUFBS1EsVUFBVUMsU0FBUyxTQUM1RFQsRUFBS3NILGlCQUFpQixTQUFVNUIsSUFDNUJOLEVBQVFnRyxFQUFhMUYsR0FBRyxHQUN6QixDQUFFMEgsTUFBTSxHQUNmLEdBQ0YsV0FFQUQsR0FHVixNQUFPLENBQUV4TyxJQUZHd08sRUFBVXhPLElBQUk0RCxXQUVaM0QsSUFERnVPLEVBQVV2TyxJQUFJMkQsV0FFOUIsSUEyUkk2SCxTQUNBRSxTQUNBbUIsVUFDQTRCLGdCQTVPcUJDLElBQ3JCLE1BQU1kLEVBQVNsTSxTQUFTMEcsY0FBYyxnQkFDeEIsV0FBVnNHLEVBQ0FkLEVBQU9oTSxVQUFVSyxJQUFJLGdCQUVOLGFBQVZ5TSxHQUNMZCxFQUFPaE0sVUFBVUksT0FBTyxlQUM1QixFQXNPQThMLG1CQXBPdUIsS0FDUnBNLFNBQVMwRyxjQUFjLGdCQUMvQnhHLFVBQVVJLE9BQU8sZUFBZSxFQW1PdkN1SCxrQkFqT3NCLENBQUNvRixFQUFlckgsS0FDdENBLEVBQU1uRyxTQUFTeU4sSUFDWCxNQUFNQyxFQUFjbk4sU0FBU3lLLGNBQWMsT0FDckM1RSxFQUFXcUgsRUFBVXBPLFFBQVFjLEtBQUtTLGNBQ2xDeUYsRUFBV29ILEVBQVVwTyxRQUFRa0MsS0FDN0JMLEVBQWF1TSxFQUFVcE8sUUFBUTZCLFdBQ3JDd00sRUFBWWpOLFVBQVVLLElBQUksT0FBUXNGLEdBQ2xDc0gsRUFBWXpDLGFBQWEsWUFBYSxHQUFHNUUsS0FDekNxSCxFQUFZekMsYUFBYSxZQUFhLEdBQUc3RSxLQUN6Q3NILEVBQVl6QyxhQUFhLFlBQWEsUUFDdEN5QyxFQUFZak4sVUFBVUssSUFBSSxhQUMxQixNQUFNNk0sRUFBZSxLQUNqQixNQUFNQyxFQUFjck4sU0FBUzBHLGNBQWMsUUFDckM0RyxFQUFlQyxXQUFXekIsT0FBTzBCLGlCQUFpQkgsRUFBYSxNQUFNSSxpQkFBaUIsY0FDdkY5TSxFQUlJQSxJQUNMd00sRUFBWW5GLE1BQU0wRixNQUFRQyxFQUFXTCxFQUFlLE1BQ3BESCxFQUFZbkYsTUFBTTRGLE9BQVM5SCxHQUFZNkgsRUFBV0wsR0FBZ0IsUUFMbEVILEVBQVluRixNQUFNMEYsTUFBUTVILEdBQVk2SCxFQUFXTCxHQUFnQixNQUNqRUgsRUFBWW5GLE1BQU00RixPQUFTRCxFQUFXTCxFQUFlLE1BS3pELEVBRUosSUFNSS9DLEVBTkFvRCxFQUFXM04sU0FBUzBHLGNBQWMsZ0JBQWdCbUgsd0JBQXdCSCxNQUM5RU4sSUFDQXRCLE9BQU85RSxpQkFBaUIsVUFBVSxXQUM5QjJHLEVBQVczTixTQUFTMEcsY0FBYyxnQkFBZ0JtSCx3QkFBd0JILE1BQzFFTixHQUNKLElBRXNCLFVBQWxCSCxFQUNBMUMsRUFBUSxhQUVlLFdBQWxCMEMsSUFDTDFDLEVBQVEsZUFFYXZLLFNBQVMwRyxjQUFjLElBQUk2RCxxQkFBeUIyQyxFQUFVN08sbUJBQW1CNk8sRUFBVTVPLFNBQ25Hd1AsWUFBWVgsRUFBWSxHQUMzQyxFQTRMRjFILFlBQVcsRUFDWDRELGVBQ0FrQyxpQkFDQWpDLGtCQUNBeUUsa0JBeEt1QkMsSUFFbkJwRSxFQUFVaUMsWUFEVm1DLEVBQ3dCLHNDQUdBLHNDQUM1QixFQW1LQUMsa0JBakt1QkQsSUFFbkJwRSxFQUFVaUMsWUFEVm1DLEVBQ3dCLGdCQUdBLGFBQzVCLEVBNEpBRSxzQkExSjJCQyxJQUNmLFdBQVJBLEVBQ0F2RSxFQUFVaUMsWUFBYywwQkFFWCxhQUFSc0MsSUFDTHZFLEVBQVVpQyxZQUFjLDRCQUM1QixFQXFKQXVDLHNCQW5KMkJELElBQ2YsV0FBUkEsRUFDQXZFLEVBQVVpQyxZQUFjLGlDQUVYLGFBQVJzQyxJQUNMdkUsRUFBVWlDLFlBQWMsbUNBQzVCLEVBOElBSixvQkFDQUgsZ0JBQ0FXLGNBRVAsRUExWFUsR0EyWFgsSUN0WUEsSUFBSSxFQUF3QyxTQUFVeEgsRUFBU0MsRUFBWUMsRUFBR0MsR0FFMUUsT0FBTyxJQUFLRCxJQUFNQSxFQUFJRSxXQUFVLFNBQVVDLEVBQVNDLEdBQy9DLFNBQVNDLEVBQVVDLEdBQVMsSUFBTUMsRUFBS04sRUFBVU8sS0FBS0YsR0FBUyxDQUFFLE1BQU9HLEdBQUtMLEVBQU9LLEVBQUksQ0FBRSxDQUMxRixTQUFTQyxFQUFTSixHQUFTLElBQU1DLEVBQUtOLEVBQWlCLE1BQUVLLEdBQVMsQ0FBRSxNQUFPRyxHQUFLTCxFQUFPSyxFQUFJLENBQUUsQ0FDN0YsU0FBU0YsRUFBS3ZCLEdBSmxCLElBQWVzQixFQUlhdEIsRUFBTzJCLEtBQU9SLEVBQVFuQixFQUFPc0IsUUFKMUNBLEVBSXlEdEIsRUFBT3NCLE1BSmhEQSxhQUFpQk4sRUFBSU0sRUFBUSxJQUFJTixHQUFFLFNBQVVHLEdBQVdBLEVBQVFHLEVBQVEsS0FJakJNLEtBQUtQLEVBQVdLLEVBQVcsQ0FDN0dILEdBQU1OLEVBQVlBLEVBQVVZLE1BQU1mLEVBQVNDLEdBQWMsS0FBS1MsT0FDbEUsR0FDSixFQUtBLE1BQU1rSixFQUFhLE1BQ2YsTUFBTXZPLEVBQWlCUCxJQUNqQlEsRUFBb0JSLElBQ3BCK08sRUFBUUMsSUFDUkMsRUFBV0QsSUFDakIsSUFBSUUsR0FBWSxFQUNaQyxFQUFlcFAsRUFBWSxXQUMzQnFQLEVBQWtCclAsRUFBWSxjQUM5QnNQLEVBQWlCdFAsRUFBWSxhQUM3QnVQLEVBQWlCdlAsRUFBWSxhQUM3QndQLEVBQWtCeFAsRUFBWSxjQUNsQyxNQUFNd0ksRUFBYSxDQUFDNEcsRUFBY0MsRUFBaUJDLEVBQWdCQyxFQUFnQkMsR0FDN0VDLEVBQWdCLEtBQ2xCaFAsRUFBa0JVLFVBQVVpTyxFQUFjLElBQUssSUFBSyxjQUNwRDNPLEVBQWtCVSxVQUFVa08sRUFBaUIsSUFBSyxJQUFLLGNBQ3ZENU8sRUFBa0JVLFVBQVVtTyxFQUFnQixJQUFLLElBQUssY0FDdEQ3TyxFQUFrQlUsVUFBVW9PLEVBQWdCLElBQUssSUFBSyxjQUN0RDlPLEVBQWtCVSxVQUFVcU8sRUFBaUIsSUFBSyxJQUFLLGNBQ3ZEL08sRUFBa0J3QixhQUFheEIsRUFBbUIsSUFBSyxLQUN2REEsRUFBa0J3QixhQUFheEIsRUFBbUIsSUFBSyxLQUN2REEsRUFBa0J3QixhQUFheEIsRUFBbUIsSUFBSyxLQUN2REEsRUFBa0J3QixhQUFheEIsRUFBbUIsSUFBSyxLQUN2REEsRUFBa0J3QixhQUFheEIsRUFBbUIsSUFBSyxJQUFJLEVBRXpEaVAsRUFBYSxJQUNYalAsRUFBa0J1QyxRQUFRdkMsSUFDMUIsRUFBR3FNLHFCQUNDLEVBQUd0QyxPQUFPNUosVUFBVUMsU0FBUyxhQUM3QixFQUFHK04sc0JBQXNCLFVBRXpCLEVBQUdsRSxPQUFPOUosVUFBVUMsU0FBUyxhQUM3QixFQUFHaU8sc0JBQXNCLFdBR3RCLEtBRVB0TyxFQUFld0MsUUFBUXhDLEtBQ3ZCLEVBQUdzTSxxQkFDQyxFQUFHdEMsT0FBTzVKLFVBQVVDLFNBQVMsYUFDN0IsRUFBRytOLHNCQUFzQixZQUV6QixFQUFHbEUsT0FBTzlKLFVBQVVDLFNBQVMsYUFDN0IsRUFBR2lPLHNCQUFzQixhQUd0QixHQUlUYSxFQUFjMVAsSUFDaEIsSUFBSWdQLEVBT0osR0FOSWhQLElBQWNPLEVBQ2R5TyxFQUFTQyxFQUVKalAsSUFBY1EsSUFDbkJ3TyxFQUFTRCxHQUVUL08sRUFBVTJDLGNBQWMzQyxJQUN4QixHQUE0QixPQUF4QmdQLEVBQU9qSyxjQUNpQixPQUF4QmlLLEVBQU9oSyxjQUNQaEYsRUFBVW5CLFFBQVFtUSxFQUFPaEssYUFBYWxHLElBQUtrUSxFQUFPaEssYUFBYWpHLEtBQUtRLFFBQVErRCxVQUFZLEdBQ3hGdEQsRUFBVW5CLFFBQVFtUSxFQUFPaEssYUFBYWxHLElBQUtrUSxFQUFPaEssYUFBYWpHLEtBQUtRLFFBQVErRCxVQUFZLEdBSXhGLEdBRkEwTCxFQUFPbEwsZ0JBQWdCOUQsRUFBV2dQLEVBQU9oSyxhQUFhbEcsSUFBS2tRLEVBQU9oSyxhQUFhakcsSUFBS2lRLEVBQU9qSyxjQUMzRi9FLEVBQVU4QyxTQUFTOUMsRUFBV2dQLEVBQU9oSyxhQUFhbEcsSUFBS2tRLEVBQU9oSyxhQUFhakcsS0FDdkUwUSxJQUNBLFlBR0gsR0FBNkYsSUFBekZ6UCxFQUFVbkIsUUFBUW1RLEVBQU9oSyxhQUFhbEcsSUFBS2tRLEVBQU9oSyxhQUFhakcsS0FBS1EsUUFBUStELFdBQ2pGMEwsRUFBT3BLLGVBQWU1RSxFQUFXZ1AsRUFBT2hLLGFBQWFsRyxJQUFLa1EsRUFBT2hLLGFBQWFqRyxLQUM5RWlCLEVBQVU4QyxTQUFTOUMsRUFBV2dQLEVBQU9oSyxhQUFhbEcsSUFBS2tRLEVBQU9oSyxhQUFhakcsS0FDdkUwUSxLQUNBLFdBSVAsQ0FDRCxNQUFNLElBQUUzUSxFQUFHLElBQUVDLEdBQVFpUSxFQUFPM0ssYUFBYXJFLEdBS3pDLEdBSjJDLFFBQXZDQSxFQUFVbkIsUUFBUUMsRUFBS0MsR0FBS08sU0FDNUIwUCxFQUFPakwsV0FBV2lMLEVBQU9oSyxjQUN6QmdLLEVBQU9oTCxXQUFXLENBQUVsRixNQUFLQyxTQUVjLFFBQXZDaUIsRUFBVW5CLFFBQVFDLEVBQUtDLEdBQUtPLFFBQW9CVSxFQUFVbkIsUUFBUUMsRUFBS0MsR0FBS1EsUUFBUXNELFdBQ3BGN0MsRUFBVThDLFNBQVM5QyxFQUFXbEIsRUFBS0MsR0FDbkNpUSxFQUFPakwsV0FBVyxNQUNsQmlMLEVBQU9oTCxXQUFXLE1BQ2R5TCxLQUNBLE1BR1osR0EyR0UxQyxFQUEwQixDQUFDVyxFQUFlMU4sS0FDNUNBLEVBQVVMLGFBMUNVLENBQUNLLElBQ3JCLElBQUkyUCxFQUNBM1AsSUFBY08sR0FDZDRPLEVBQWVwUCxFQUFZLFdBQzNCcVAsRUFBa0JyUCxFQUFZLGNBQzlCc1AsRUFBaUJ0UCxFQUFZLGFBQzdCdVAsRUFBaUJ2UCxFQUFZLGFBQzdCd1AsRUFBa0J4UCxFQUFZLGNBQzlCNFAsRUFBVyxDQUFDUixFQUFjQyxFQUFpQkMsRUFBZ0JDLEVBQWdCQyxJQUV0RXZQLElBQWNRLElBTW5CbVAsRUFBVyxDQUxhNVAsRUFBWSxXQUNUQSxFQUFZLGNBQ2JBLEVBQVksYUFDWkEsRUFBWSxhQUNYQSxFQUFZLGdCQUczQytPLEVBQVd2RyxXQUFXMUksT0FBUyxFQUMvQixNQUFNcEIsRUFBTyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLEtBQ3JENkYsRUFBWSxJQUFNN0YsRUFBSytGLEtBQUtDLE1BQU1ELEtBQUtFLFNBQVdqRyxFQUFLb0IsU0FDdkQwRSxFQUFZLElBQU1DLEtBQUtHLEtBQXFCLEdBQWhCSCxLQUFLRSxVQUFlaEMsV0FDaERrTixFQUFvQixJQUFPcEwsS0FBS0UsU0FBVyxHQUFNLGFBQWUsV0FDdEVpTCxFQUFTelAsU0FBU0gsSUFDZCxJQUFJakIsRUFBTXdGLElBQ052RixFQUFNd0YsSUFDTnBELEVBQWN5TyxJQUNkeEwsRUFBU3BFLEVBQVVrRCxZQUFZbkQsRUFBSzBCLEtBQU0zQyxFQUFLQyxFQUFLb0MsR0FDeEQsTUFBUWlELEdBQ0p0RixFQUFNd0YsSUFDTnZGLEVBQU13RixJQUNOcEQsRUFBY3lPLElBQ2R4TCxFQUFTcEUsRUFBVWtELFlBQVluRCxFQUFLMEIsS0FBTTNDLEVBQUtDLEVBQUtvQyxHQUVwRGlELElBQ0FwRSxFQUFVa0IsVUFBVW5CLEVBQU1qQixFQUFLQyxFQUFLb0MsR0FDcENuQixFQUFVZ0MsYUFBYWhDLEVBQVdsQixFQUFLQyxJQUUzQytQLEVBQVd2RyxXQUFXM0csS0FBSzdCLEVBQUssR0FDbEMsRUFJRjhQLENBQWdCN1AsR0FDaEIsRUFBR3FJLGFBQWFySSxHQUNNLFVBQWxCME4sR0FDQSxFQUFHcEYsa0JBQWtCLFFBQVN0SSxFQUFVcEIsWUFDNUMsRUFTRWtSLEVBQWUsS0FDYixFQUFHckYsT0FBTzlKLFVBQVVDLFNBQVMsY0FDN0JtTSxFQUF3QixRQUFTeE0sR0FDakN3TSxFQUF3QixTQUFVdk0sR0FDbEMwTyxHQUFZLEVBNUZpQixPQUFVLE9BQVEsT0FBUSxHQUFRLFlBQ25FLEVBQUdyQyxxQkFDSCxJQUFJNEIsR0FBZSxFQUNuQixNQUFRZ0IsTUFBaUJQLEdBQVcsQ0FFaEMsR0FEQSxFQUFHdEQsU0FBUSxHQUNQNkMsRUFBYyxDQUdkLEdBRkEsRUFBR0Msa0JBQWtCRCxTQUNmLElBQUluSixTQUFTQyxHQUFZaUQsV0FBV2pELEVBQVMsRUFBR3dHLG9CQUNqRCxFQUFHdEIsT0FBTzlKLFVBQVVDLFNBQVMsYUFBZXNPLEVBQzdDLE1BRUpRLEVBQVduUCxHQUNYLEVBQUc4SCxhQUFhOUgsR0FDaEJrTyxHQUFlLENBQ25CLENBQ0EsR0FBSWdCLEtBQWdCUCxFQUNoQixNQUVKLElBQUtULEVBQWMsQ0FHZixHQUZBLEVBQUdDLGtCQUFrQkQsU0FDZixJQUFJbkosU0FBU0MsR0FBWWlELFdBQVdqRCxFQUFTLEVBQUd3RyxvQkFDakQsRUFBR3RCLE9BQU85SixVQUFVQyxTQUFTLGFBQWVzTyxFQUM3QyxNQUVKUSxFQUFXbFAsR0FDWCxFQUFHNkgsYUFBYTdILEdBQ2hCaU8sR0FBZSxDQUNuQixDQUNKLENBQ0FTLEdBQVksRUFDWixFQUFHdEQsU0FBUSxFQUNmLElBK0RRLEVBQUd2RCxhQUFhOUgsR0FDcEIsRUFRRTBMLEVBQVUsS0FDWmlELEdBQVksRUFDWkgsRUFBTWhMLFdBQVcsTUFDakJnTCxFQUFNL0ssV0FBVyxNQUNqQmlMLEVBQVNsTCxXQUFXLE1BQ3BCa0wsRUFBU2pMLFdBQVcsTUFDcEJ6RCxFQUFlWixhQUNmYSxFQUFrQmIsYUFDbEI2UCxJQUNBLEVBQUduSCxhQUFhOUgsR0FDaEIsRUFBRzhILGFBQWE3SCxHQUNoQixFQUFHOEgsa0JBQWtCLFNBQVU5SCxFQUFrQjVCLGFBQ2pELEVBQUdzSCxZQUFZM0YsRUFBZ0JDLEVBQW1CK0gsR0FDbEQsRUFBR3VCLGVBQ0hnRyxJQW5DQXZILEVBQVdySSxTQUFTSCxLQUNRLElBQXBCQSxFQUFLcUIsYUFDTHJCLEVBQUtxQixZQUFhLEVBQ3RCLEdBaUNjLEVBcUJ0QixNQUFPLENBQUUyTyxLQWJJLEtBQ1QsRUFBRy9ELGlCQUNILEVBQUdvQixZQUFZN00sR0FDZixFQUFHNk0sWUFBWTVNLEdBQ2ZnUCxJQUNBLEVBQUduSCxhQUFhN0gsR0FDaEIsRUFBRzhILGtCQUFrQixTQUFVOUgsRUFBa0I1QixhQUNqRCxFQUFHc0gsWUFBWTNGLEVBQWdCQyxFQUFtQitILEdBQ2xELEVBQUd1QixlQUNIZ0csSUFDQSxFQUFHcEQsWUFBWSxTQUNmLEVBQUduQyxPQUFPdUIsVUFBVyxDQUFJLEVBRWR2TCxpQkFBZ0JDLG9CQUFtQnlMLFVBQVNhLFFBbkIzQyxJQUFNLE9BQVUsT0FBUSxPQUFRLEdBQVEsWUFDcERvQyxHQUFZLFFBQ04sSUFBSTVKLFNBQVNDLEdBQVlpRCxXQUFXakQsRUFBUyxFQUFHd0csbUJBQ3REbUQsR0FBWSxFQUNaakQsR0FDSixJQWNvRTFLLE1BMUN0RCxLQUNWLEVBQUc4RyxhQUFhOUgsR0FDaEJ3TSxFQUF3QixTQUFVdk0sR0FDbEMwTyxHQUFZLEVBcEltQixPQUFVLE9BQVEsT0FBUSxHQUFRLFlBQ2pFLElBQUlULEdBQWUsRUFDbkIsTUFBUWdCLE1BQWlCUCxHQUFXLENBQ2hDLEdBQUlULEVBQWMsQ0FDZCxFQUFHRCxrQkFBa0JDLEdBQ3JCLEVBQUdqQixnQkFBZ0IsVUFDbkIsRUFBRzVCLFNBQVEsR0FDWCxNQUFNLElBQUU5TSxFQUFHLElBQUVDLFNBQWMsRUFBR3NPLGtCQUM5QjBCLEVBQU01SyxPQUFPM0QsRUFBbUIxQixFQUFLQyxHQUNyQ3lCLEVBQWtCc0MsU0FBU3RDLEVBQW1CMUIsRUFBS0MsR0FDbkQsRUFBR3NKLGFBQWE3SCxHQUNoQmlPLEdBQWUsQ0FDbkIsQ0FDQSxHQUFJZ0IsS0FBZ0JQLEVBQ2hCLE1BRUosSUFBS1QsRUFBYyxDQUtmLEdBSkEsRUFBR0Qsa0JBQWtCQyxHQUNyQixFQUFHakIsZ0JBQWdCLFlBQ25CLEVBQUc1QixTQUFRLFNBQ0wsSUFBSXRHLFNBQVNDLEdBQVlpRCxXQUFXakQsRUFBUyxFQUFHd0csb0JBQ2pELEVBQUd4QixPQUFPNUosVUFBVUMsU0FBUyxhQUFlc08sRUFDN0MsTUFFSlEsRUFBV25QLEdBQ1gsRUFBRzhILGFBQWE5SCxHQUNoQmtPLEdBQWUsQ0FDbkIsQ0FDSixDQUNBUyxHQUFZLEVBQ1osRUFBR3RELFNBQVEsRUFDZixHQXNHMEIsRUFzQ2lEbUIsMEJBQXlCeEUsYUFDdkcsRUF6UWtCLEdBMFFuQixJQ3BSQSxFQUFXd0gsTSIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9nYW1lYm9hcmQudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL3NoaXAudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL3BsYXllci50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvZHJhZ0FuZERyb3AudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL3VpLnRzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9jb250cm9sbGVyLnRzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbnRyb2xsZXIgZnJvbSAnLi9jb250cm9sbGVyJztcbmNvbnN0IGdhbWVib2FyZEZhY3RvcnkgPSAoKSA9PiB7XG4gICAgY29uc3QgY29scyA9IFsnQScsICdCJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdIJywgJ0knLCAnSiddO1xuICAgIGNvbnN0IHJvd3MgPSBbJzEnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJzcnLCAnOCcsICc5JywgJzEwJ107XG4gICAgY29uc3QgYXJyYXkgPSBbXTtcbiAgICBjb25zdCBzaGlwc1BsYWNlZCA9IFtdO1xuICAgIGNvbnN0IGdlbmVyYXRlQXJyYXkgPSAoKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkgKz0gMSkge1xuICAgICAgICAgICAgYXJyYXlbaV0gPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGogKz0gMSkge1xuICAgICAgICAgICAgICAgIGFycmF5W2ldW2pdID0geyBjb2w6IGNvbHNbal0sIHJvdzogcm93c1tpXSwgc3RhdHVzOiAnZW1wdHknLCB0YWtlbkJ5OiBudWxsIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGNsZWFyQm9hcmQgPSAoKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkgKz0gMSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaiArPSAxKSB7XG4gICAgICAgICAgICAgICAgYXJyYXlbaV1bal0uc3RhdHVzID0gJ2VtcHR5JztcbiAgICAgICAgICAgICAgICBhcnJheVtpXVtqXS50YWtlbkJ5ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNoaXBzUGxhY2VkLmxlbmd0aCA9IDA7XG4gICAgfTtcbiAgICBjb25zdCBnZXRDZWxsID0gKGNvbCwgcm93KSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbEluZGV4ID0gY29scy5pbmRleE9mKGNvbCk7XG4gICAgICAgIGNvbnN0IHJvd0luZGV4ID0gcm93cy5pbmRleE9mKHJvdyk7XG4gICAgICAgIGlmIChjb2xJbmRleCA9PT0gLTEgfHwgcm93SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyYXlbcm93SW5kZXhdW2NvbEluZGV4XTtcbiAgICB9O1xuICAgIGNvbnN0IHNldENlbGwgPSAoY29sLCByb3csIG5ld1N0YXR1cywgbmV3VGFrZW5CeSkgPT4ge1xuICAgICAgICBjb25zdCBjb2xJbmRleCA9IGNvbHMuaW5kZXhPZihjb2wpO1xuICAgICAgICBjb25zdCByb3dJbmRleCA9IHJvd3MuaW5kZXhPZihyb3cpO1xuICAgICAgICBpZiAoY29sSW5kZXggPT09IC0xIHx8IHJvd0luZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgYXJyYXlbcm93SW5kZXhdW2NvbEluZGV4XS5zdGF0dXMgPSBuZXdTdGF0dXM7XG4gICAgICAgIGlmIChuZXdUYWtlbkJ5KSB7XG4gICAgICAgICAgICBhcnJheVtyb3dJbmRleF1bY29sSW5kZXhdLnRha2VuQnkgPSBuZXdUYWtlbkJ5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheVtyb3dJbmRleF1bY29sSW5kZXhdO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlU2hpcCA9IChzaGlwLCBnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgZ2FtZWJvYXJkQ2VsbHMgPSBnYW1lYm9hcmQuYXJyYXkuZmxhdCgpO1xuICAgICAgICBnYW1lYm9hcmRDZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2VsbC5zdGF0dXMgPT09ICd0YWtlbicgJiYgY2VsbC50YWtlbkJ5Lm5hbWUgPT09IHNoaXAubmFtZSkge1xuICAgICAgICAgICAgICAgIGNlbGwuc3RhdHVzID0gJ2VtcHR5JztcbiAgICAgICAgICAgICAgICBjZWxsLnRha2VuQnkgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hpcHNQbGFjZWQuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzaGlwLnRha2VuQnkgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hpcHNQbGFjZWQuc3BsaWNlKHNoaXBzUGxhY2VkLmluZGV4T2Yoc2hpcCksIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGV0IGJvYXJkSWQ7XG4gICAgICAgICAgICBpZiAoZ2FtZWJvYXJkID09PSBjb250cm9sbGVyLmh1bWFuR2FtZWJvYXJkKSB7XG4gICAgICAgICAgICAgICAgYm9hcmRJZCA9ICdmaXJzdEJvYXJkJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGdhbWVib2FyZCA9PT0gY29udHJvbGxlci5jb21wdXRlckdhbWVib2FyZCkge1xuICAgICAgICAgICAgICAgIGJvYXJkSWQgPSAnc2Vjb25kQm9hcmQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAjJHtib2FyZElkfSAuY2VsbGApO1xuICAgICAgICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjZWxsLmNsYXNzTGlzdC5jb250YWlucygndGFrZW4nKSAmJiBjZWxsLmdldEF0dHJpYnV0ZSgnZGF0YS1zaGlwTmFtZScpID09PSBzaGlwLm5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ3Rha2VuJyk7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnZW1wdHknKTtcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtc2hpcE5hbWUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBwbGFjZVNoaXAgPSAoc2hpcCwgY29sLCByb3csIG9yaWVudGF0aW9uKSA9PiB7XG4gICAgICAgIGlmIChvcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgICBzaGlwLmlzVmVydGljYWwgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNoaXAuaXNWZXJ0aWNhbCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNIb3Jpem9udGFsID0gb3JpZW50YXRpb24gPT09ICdob3Jpem9udGFsJztcbiAgICAgICAgY29uc3QgY2VsbHMgPSBpc0hvcml6b250YWwgPyBjb2xzIDogcm93cztcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBjZWxscy5pbmRleE9mKGlzSG9yaXpvbnRhbCA/IGNvbCA6IHJvdyk7XG4gICAgICAgIGxldCBzaGlwQ2VsbHMgPSBbXTtcbiAgICAgICAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCArIHNoaXAuc2l6ZSA+IGNlbGxzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5zaXplOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb2wgPSBpc0hvcml6b250YWwgPyBjZWxsc1tzdGFydCArIGldIDogY29sO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFJvdyA9IGlzSG9yaXpvbnRhbCA/IHJvdyA6IGNlbGxzW3N0YXJ0ICsgaV07XG4gICAgICAgICAgICBpZiAoZ2V0Q2VsbChjdXJyZW50Q29sLCBjdXJyZW50Um93KS5zdGF0dXMgIT09ICdlbXB0eScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRDZWxsKGN1cnJlbnRDb2wsIGN1cnJlbnRSb3csICd0YWtlbicsIHNoaXApO1xuICAgICAgICAgICAgc2hpcENlbGxzLnB1c2goZ2V0Q2VsbChjdXJyZW50Q29sLCBjdXJyZW50Um93KSk7XG4gICAgICAgIH1cbiAgICAgICAgc2hpcHNQbGFjZWQucHVzaChzaGlwQ2VsbHNbMF0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIGNvbnN0IGNhbkJlUGxhY2VkID0gKHNpemUsIGNvbCwgcm93LCBvcmllbnRhdGlvbikgPT4ge1xuICAgICAgICBjb25zdCBpc0hvcml6b250YWwgPSBvcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnO1xuICAgICAgICBjb25zdCBjZWxscyA9IGlzSG9yaXpvbnRhbCA/IGNvbHMgOiByb3dzO1xuICAgICAgICBjb25zdCBzdGFydCA9IGNlbGxzLmluZGV4T2YoaXNIb3Jpem9udGFsID8gY29sIDogcm93KTtcbiAgICAgICAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCArIHNpemUgPiBjZWxscy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcmVFbXB0eSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudENvbCA9IGlzSG9yaXpvbnRhbCA/IGNlbGxzW3N0YXJ0ICsgaV0gOiBjb2w7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Um93ID0gaXNIb3Jpem9udGFsID8gcm93IDogY2VsbHNbc3RhcnQgKyBpXTtcbiAgICAgICAgICAgIGFyZUVtcHR5LnB1c2goZ2V0Q2VsbChjdXJyZW50Q29sLCBjdXJyZW50Um93KS5zdGF0dXMgPT09ICdlbXB0eScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcmVFbXB0eS5ldmVyeSgoaXRlbSkgPT4gaXRlbSA9PT0gdHJ1ZSk7XG4gICAgfTtcbiAgICBjb25zdCByZWNlaXZlQXR0YWNrID0gKGNvbCwgcm93KSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBnZXRDZWxsKGNvbCwgcm93KTtcbiAgICAgICAgaWYgKGNlbGwuc3RhdHVzID09PSAndGFrZW4nKSB7XG4gICAgICAgICAgICBjZWxsLnRha2VuQnkuaGl0KCk7XG4gICAgICAgICAgICBzZXRDZWxsKGNvbCwgcm93LCAnaGl0Jyk7XG4gICAgICAgICAgICByZXR1cm4gY2VsbC5zdGF0dXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNlbGwuc3RhdHVzID09PSAnZW1wdHknIHx8IGNlbGwuc3RhdHVzID09PSAncmVzZXJ2ZWQnKSB7XG4gICAgICAgICAgICBzZXRDZWxsKGNvbCwgcm93LCAnbWlzcycpO1xuICAgICAgICAgICAgcmV0dXJuIGNlbGwuc3RhdHVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgY29uc3QgcmVjZWl2ZUFyb3VuZCA9IChjb2wsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gZ2V0Q2VsbChjb2wsIHJvdyk7XG4gICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ2VtcHR5Jykge1xuICAgICAgICAgICAgc2V0Q2VsbChjb2wsIHJvdywgJ3Jlc2VydmVkJyk7XG4gICAgICAgICAgICByZXR1cm4gY2VsbC5zdGF0dXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBjb25zdCByZXNlcnZlU3BhY2UgPSAoZ2FtZWJvYXJkLCBjb2wsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpO1xuICAgICAgICBpZiAoY2VsbCAmJiBjZWxsLnRha2VuQnkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBDZWxscyA9IGdhbWVib2FyZC5hcnJheS5mbGF0KCkuZmlsdGVyKChjKSA9PiBjLnRha2VuQnkgJiYgYy50YWtlbkJ5Lm5hbWUgPT09IGNlbGwudGFrZW5CeS5uYW1lKTtcbiAgICAgICAgICAgIHNoaXBDZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDAsIHJvdzogLTEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDAsIHJvdzogMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogMCB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMSwgcm93OiAwIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAtMSwgcm93OiAtMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMSwgcm93OiAtMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMSwgcm93OiAxIH0sXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb25zLmZvckVhY2goKGRpcmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNlbGwuY29sLmNoYXJDb2RlQXQoMCkgKyBkaXJlY3Rpb24uY29sKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Um93ID0gKE51bWJlcihjZWxsLnJvdykgKyBkaXJlY3Rpb24ucm93KS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCBuZXdSb3cpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUFyb3VuZChuZXdDb2wsIG5ld1Jvdyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVSZXNlcnZlZFNwYWNlID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBjb25zdCBnYW1lYm9hcmRDZWxscyA9IGdhbWVib2FyZC5hcnJheS5mbGF0KCk7XG4gICAgICAgIGdhbWVib2FyZENlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ3Jlc2VydmVkJykge1xuICAgICAgICAgICAgICAgIHNldENlbGwoY2VsbC5jb2wsIGNlbGwucm93LCAnZW1wdHknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBzaW5rU2hpcCA9IChnYW1lYm9hcmQsIGNvbCwgcm93KSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIHJvdyk7XG4gICAgICAgIGlmIChjZWxsICYmIGNlbGwudGFrZW5CeSAmJiBjZWxsLnRha2VuQnkuaXNTdW5rKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBDZWxscyA9IGdhbWVib2FyZC5hcnJheS5mbGF0KCkuZmlsdGVyKChjKSA9PiBjLnRha2VuQnkgJiYgYy50YWtlbkJ5Lm5hbWUgPT09IGNlbGwudGFrZW5CeS5uYW1lKTtcbiAgICAgICAgICAgIHNoaXBDZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDAsIHJvdzogLTEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDAsIHJvdzogMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogMCB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMSwgcm93OiAwIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAtMSwgcm93OiAtMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMSwgcm93OiAtMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMSwgcm93OiAxIH0sXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb25zLmZvckVhY2goKGRpcmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNlbGwuY29sLmNoYXJDb2RlQXQoMCkgKyBkaXJlY3Rpb24uY29sKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Um93ID0gKE51bWJlcihjZWxsLnJvdykgKyBkaXJlY3Rpb24ucm93KS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCBuZXdSb3cpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhuZXdDb2wsIG5ld1Jvdyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBoaXRCdXROb3RTdW5rID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBjb25zdCBnYW1lYm9hcmRDZWxscyA9IGdhbWVib2FyZC5hcnJheS5mbGF0KCk7XG4gICAgICAgIHJldHVybiBnYW1lYm9hcmRDZWxscy5zb21lKChjZWxsKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2VsbC5zdGF0dXMgPT09ICdoaXQnICYmIGNlbGwudGFrZW5CeS5pc1N1bmsoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBhbGxTdW5rID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBjb25zdCBnYW1lYm9hcmRDZWxscyA9IGdhbWVib2FyZC5hcnJheS5mbGF0KCk7XG4gICAgICAgIGxldCB0YWtlbkJ5Q2VsbHMgPSBnYW1lYm9hcmRDZWxscy5maWx0ZXIoKGNlbGwpID0+IGNlbGwudGFrZW5CeSk7XG4gICAgICAgIGlmICh0YWtlbkJ5Q2VsbHMubGVuZ3RoID4gMCAmJiB0YWtlbkJ5Q2VsbHMuZXZlcnkoKGNlbGwpID0+IGNlbGwudGFrZW5CeS5pc1N1bmsoKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBnZW5lcmF0ZUFycmF5KCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2xlYXJCb2FyZCxcbiAgICAgICAgZ2V0Q2VsbCxcbiAgICAgICAgc2V0Q2VsbCxcbiAgICAgICAgcmVtb3ZlU2hpcCxcbiAgICAgICAgcGxhY2VTaGlwLFxuICAgICAgICByZWNlaXZlQXR0YWNrLFxuICAgICAgICByZWNlaXZlQXJvdW5kLFxuICAgICAgICByZXNlcnZlU3BhY2UsXG4gICAgICAgIGhpdEJ1dE5vdFN1bmssXG4gICAgICAgIHNpbmtTaGlwLFxuICAgICAgICBhbGxTdW5rLFxuICAgICAgICBhcnJheSxcbiAgICAgICAgY2FuQmVQbGFjZWQsXG4gICAgICAgIHNoaXBzUGxhY2VkLFxuICAgICAgICByZW1vdmVSZXNlcnZlZFNwYWNlLFxuICAgIH07XG59O1xuZXhwb3J0IGRlZmF1bHQgZ2FtZWJvYXJkRmFjdG9yeTtcbiIsImNvbnN0IHNoaXBGYWN0b3J5ID0gKG5hbWUpID0+IHtcbiAgICBsZXQgc2l6ZTtcbiAgICBpZiAobmFtZSA9PT0gJ0NhcnJpZXInKSB7XG4gICAgICAgIHNpemUgPSA1O1xuICAgIH1cbiAgICBpZiAobmFtZSA9PT0gJ0JhdHRsZXNoaXAnKSB7XG4gICAgICAgIHNpemUgPSA0O1xuICAgIH1cbiAgICBpZiAobmFtZSA9PT0gJ0Rlc3Ryb3llcicpIHtcbiAgICAgICAgc2l6ZSA9IDM7XG4gICAgfVxuICAgIGlmIChuYW1lID09PSAnU3VibWFyaW5lJykge1xuICAgICAgICBzaXplID0gMztcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09ICdQYXRyb2xCb2F0Jykge1xuICAgICAgICBzaXplID0gMjtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgc2l6ZSxcbiAgICAgICAgaGl0Q291bnQ6IDAsXG4gICAgICAgIGlzVmVydGljYWw6IGZhbHNlLFxuICAgICAgICByb3RhdGUoKSB7XG4gICAgICAgICAgICB0aGlzLmlzVmVydGljYWwgPSAhdGhpcy5pc1ZlcnRpY2FsO1xuICAgICAgICB9LFxuICAgICAgICBoaXQoKSB7XG4gICAgICAgICAgICB0aGlzLmhpdENvdW50ICs9IDE7XG4gICAgICAgIH0sXG4gICAgICAgIGlzU3VuaygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhpdENvdW50ID09PSBzaXplO1xuICAgICAgICB9LFxuICAgIH07XG59O1xuZXhwb3J0IGRlZmF1bHQgc2hpcEZhY3Rvcnk7XG4iLCJjb25zdCBwbGF5ZXJGYWN0b3J5ID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvbHMgPSBbJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onXTtcbiAgICBsZXQgcHJldkhpdCA9IG51bGw7XG4gICAgbGV0IGxhc3RIaXQgPSBudWxsO1xuICAgIGNvbnN0IGF0dGFjayA9IChnYW1lYm9hcmQsIGNvbCwgcm93KSA9PiB7XG4gICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIHJvdykuc3RhdHVzICE9PSAnaGl0JyAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIHJvdykuc3RhdHVzICE9PSAnbWlzcycpIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhjb2wsIHJvdyk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgIHNldFByZXZIaXQobGFzdEhpdCk7XG4gICAgICAgICAgICAgICAgc2V0TGFzdEhpdCh7IGNvbDogY29sLCByb3c6IHJvdyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICdhbHJlYWR5IHNob3QnO1xuICAgIH07XG4gICAgY29uc3QgcmFuZG9tQXR0YWNrID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBsZXQgcmFuZG9tQ29sO1xuICAgICAgICBsZXQgcmFuZG9tUm93O1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICByYW5kb21Db2wgPSBjb2xzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvbHMubGVuZ3RoKV07XG4gICAgICAgICAgICByYW5kb21Sb3cgPSBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIDEwKS50b1N0cmluZygpO1xuICAgICAgICB9IHdoaWxlIChnYW1lYm9hcmQuZ2V0Q2VsbChyYW5kb21Db2wsIHJhbmRvbVJvdykuc3RhdHVzID09PSAnaGl0JyB8fCBnYW1lYm9hcmQuZ2V0Q2VsbChyYW5kb21Db2wsIHJhbmRvbVJvdykuc3RhdHVzID09PSAnbWlzcycpO1xuICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyAhPT0gJ2hpdCcgJiYgZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyAhPT0gJ21pc3MnKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhyYW5kb21Db2wsIHJhbmRvbVJvdyk7XG4gICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICBzZXRQcmV2SGl0KGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IHJhbmRvbUNvbCwgcm93OiByYW5kb21Sb3cgfSk7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLScpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdyYW5kb21BdHRhY2sgcHJldkhpdCcsIHByZXZIaXQpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdyYW5kb21BdHRhY2sgbGFzdEhpdCcsIGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdyYW5kb21BdHRhY2sgcmFuZ2UnLCByYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyByZXN1bHQsIGNvbDogcmFuZG9tQ29sLCByb3c6IHJhbmRvbVJvdyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHJlc3VsdDogJ2FscmVhZHkgc2hvdCcsIGNvbDogcmFuZG9tQ29sLCByb3c6IHJhbmRvbVJvdyB9O1xuICAgIH07XG4gICAgY29uc3QgZm9sbG93dXBBdHRhY2sgPSAoZ2FtZWJvYXJkLCBjb2wsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBkaXJlY3Rpb25zID0gW1xuICAgICAgICAgICAgeyBjb2w6IDAsIHJvdzogLTEgfSxcbiAgICAgICAgICAgIHsgY29sOiAwLCByb3c6IDEgfSxcbiAgICAgICAgICAgIHsgY29sOiAtMSwgcm93OiAwIH0sXG4gICAgICAgICAgICB7IGNvbDogMSwgcm93OiAwIH0sXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IHZhbGlkRGlyZWN0aW9ucyA9IGRpcmVjdGlvbnMuZmlsdGVyKChkaXJlY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgKyBkaXJlY3Rpb24uY29sKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1JvdyA9IChOdW1iZXIocm93KSArIGRpcmVjdGlvbi5yb3cpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBjb25zdCBjZWxsID0gZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgaWYgKGNlbGwgJiYgY2VsbC5zdGF0dXMgIT09ICdtaXNzJyAmJiBjZWxsLnN0YXR1cyAhPT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh2YWxpZERpcmVjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgcmFuZG9tRGlyZWN0aW9uID0gdmFsaWREaXJlY3Rpb25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHZhbGlkRGlyZWN0aW9ucy5sZW5ndGgpXTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgKyByYW5kb21EaXJlY3Rpb24uY29sKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1JvdyA9IChOdW1iZXIocm93KSArIHJhbmRvbURpcmVjdGlvbi5yb3cpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhuZXdDb2wsIG5ld1Jvdyk7XG4gICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCBuZXdSb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICBzZXRQcmV2SGl0KGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IG5ld0NvbCwgcm93OiBuZXdSb3cgfSk7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLScpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdmb2xsb3d1cEF0dGFjayBwcmV2SGl0JywgcHJldkhpdCk7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2ZvbGxvd3VwQXR0YWNrIGxhc3RIaXQnLCBsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZm9sbG93dXBBdHRhY2sgcmFuZ2UnLCByYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnTmllIG1hIGRvc3TEmXBueWNoIGtpZXJ1bmvDs3cgZG8gYXRha3UnKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgbGV0IHJhbmdlID0gMTtcbiAgICBsZXQgZ29SaWdodCA9IHRydWU7XG4gICAgbGV0IGdvRG93biA9IHRydWU7XG4gICAgY29uc3QgZmluaXNoaW5nQXR0YWNrID0gKGdhbWVib2FyZCwgY29sLCByb3csIHByZXZIaXQpID0+IHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3N0YXJ0IGZpbmlzaGluZ0F0dGFjayBwcmV2SGl0JywgcHJldkhpdCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdzdGFydCBmaW5pc2hpbmdBdHRhY2sgbGFzdEhpdCcsIHsgY29sLCByb3cgfSk7XG4gICAgICAgIGlmIChwcmV2SGl0LnJvdyA9PT0gcm93KSB7XG4gICAgICAgICAgICAvLyBob3Jpem9udGFsIHNoaXAgY2FzZVxuICAgICAgICAgICAgaWYgKGdvUmlnaHQpIHtcbiAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2dvUmlnaHQnKTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Q29sID0gU3RyaW5nLmZyb21DaGFyQ29kZShjb2wuY2hhckNvZGVBdCgwKSArIHJhbmdlKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgKyByYW5nZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykgJiYgZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpLnN0YXR1cyAhPT0gJ2hpdCcgJiYgZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpLnN0YXR1cyAhPT0gJ21pc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKG5ld0NvbCwgcm93KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRQcmV2SGl0KGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGFzdEhpdCh7IGNvbDogbmV3Q29sLCByb3c6IHJvdyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncHJldkhpdCcsIHByZXZIaXQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbGFzdEhpdCcsIGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncmFuZ2UnLCByYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLS0nKTtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgZ29SaWdodCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hpbmdBdHRhY2soZ2FtZWJvYXJkLCBuZXdDb2wsIHJvdywgcHJldkhpdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdnb0xlZnQnKTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Q29sID0gU3RyaW5nLmZyb21DaGFyQ29kZShjb2wuY2hhckNvZGVBdCgwKSAtIHJhbmdlKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgLSByYW5nZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykgJiYgZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpLnN0YXR1cyAhPT0gJ2hpdCcgJiYgZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpLnN0YXR1cyAhPT0gJ21pc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKG5ld0NvbCwgcm93KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRQcmV2SGl0KGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGFzdEhpdCh7IGNvbDogbmV3Q29sLCByb3c6IHJvdyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncHJldkhpdCcsIHByZXZIaXQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbGFzdEhpdCcsIGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncmFuZ2UnLCByYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLS0nKTtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgZ29SaWdodCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGZpbmlzaGluZ0F0dGFjayhnYW1lYm9hcmQsIG5ld0NvbCwgcm93LCBwcmV2SGl0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJldkhpdC5jb2wgPT09IGNvbCkge1xuICAgICAgICAgICAgLy8gdmVydGljYWwgc2hpcCBjYXNlXG4gICAgICAgICAgICBpZiAoZ29Eb3duKSB7XG4gICAgICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdnb0Rvd24nKTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Um93ID0gKE51bWJlcihyb3cpICsgcmFuZ2UpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgICAgICBuZXdSb3cgPSAoTnVtYmVyKHJvdykgKyByYW5nZSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzICE9PSAnaGl0JyAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzICE9PSAnbWlzcycpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soY29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFByZXZIaXQobGFzdEhpdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMYXN0SGl0KHsgY29sOiBjb2wsIHJvdzogbmV3Um93IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdwcmV2SGl0JywgcHJldkhpdCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdsYXN0SGl0JywgbGFzdEhpdCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdyYW5nZScsIHJhbmdlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLScpO1xuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgICAgICAgICBnb0Rvd24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZmluaXNoaW5nQXR0YWNrKGdhbWVib2FyZCwgY29sLCBuZXdSb3csIHByZXZIaXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJhbmdlID0gMTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZ29VcCcpO1xuICAgICAgICAgICAgICAgIGxldCBuZXdSb3cgPSAoTnVtYmVyKHJvdykgLSByYW5nZSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIG5ld1JvdyA9IChOdW1iZXIocm93KSAtIHJhbmdlKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhjb2wsIG5ld1Jvdyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IGNvbCwgcm93OiBuZXdSb3cgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3ByZXZIaXQnLCBwcmV2SGl0KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2xhc3RIaXQnLCBsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3JhbmdlJywgcmFuZ2UpO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnLS0tLS0tLS0tLS0tLS0tJyk7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGdvRG93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGZpbmlzaGluZ0F0dGFjayhnYW1lYm9hcmQsIGNvbCwgbmV3Um93LCBwcmV2SGl0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGdldFByZXZIaXQgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBwcmV2SGl0O1xuICAgIH07XG4gICAgY29uc3QgZ2V0TGFzdEhpdCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGxhc3RIaXQ7XG4gICAgfTtcbiAgICBjb25zdCBzZXRQcmV2SGl0ID0gKG5ld1ByZXZIaXQpID0+IHtcbiAgICAgICAgcHJldkhpdCA9IG5ld1ByZXZIaXQ7XG4gICAgfTtcbiAgICBjb25zdCBzZXRMYXN0SGl0ID0gKG5ld0xhc3RIaXQpID0+IHtcbiAgICAgICAgbGFzdEhpdCA9IG5ld0xhc3RIaXQ7XG4gICAgfTtcbiAgICByZXR1cm4geyBhdHRhY2ssIHJhbmRvbUF0dGFjaywgZm9sbG93dXBBdHRhY2ssIGZpbmlzaGluZ0F0dGFjaywgcHJldkhpdCwgbGFzdEhpdCwgZ2V0UHJldkhpdCwgZ2V0TGFzdEhpdCwgc2V0UHJldkhpdCwgc2V0TGFzdEhpdCB9O1xufTtcbmV4cG9ydCBkZWZhdWx0IHBsYXllckZhY3Rvcnk7XG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB1aSBmcm9tICcuL3VpJztcbmltcG9ydCBjb250cm9sbGVyIGZyb20gJy4vY29udHJvbGxlcic7XG5jb25zdCBkcmFnQW5kRHJvcCA9IChmaXJzdEdhbWVib2FyZCwgc2Vjb25kR2FtZWJvYXJkLCBzaGlwcykgPT4ge1xuICAgIGxldCBzaGlwTmFtZTtcbiAgICBsZXQgc2hpcFNpemU7XG4gICAgbGV0IGdyYWJQb2ludFggPSAwO1xuICAgIGxldCBncmFiUG9pbnRZID0gMDtcbiAgICBsZXQgc2hpcE9iajtcbiAgICBsZXQgb3JpZW50YXRpb247XG4gICAgbGV0IGhpZ2hsaWdodGVkQ2VsbHMgPSBbXTtcbiAgICBjb25zdCBzaGlwTmFtZVRvT2JqID0ge1xuICAgICAgICBjYXJyaWVyOiBzaGlwc1swXSxcbiAgICAgICAgYmF0dGxlc2hpcDogc2hpcHNbMV0sXG4gICAgICAgIGRlc3Ryb3llcjogc2hpcHNbMl0sXG4gICAgICAgIHN1Ym1hcmluZTogc2hpcHNbM10sXG4gICAgICAgIHBhdHJvbGJvYXQ6IHNoaXBzWzRdLFxuICAgIH07XG4gICAgY29uc3QgZmlyc3RCb2FyZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZmlyc3RCb2FyZCcpO1xuICAgIGNvbnN0IHNlY29uZEJvYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWNvbmRCb2FyZCcpO1xuICAgIGNvbnN0IGZpcnN0Qm9hcmRDZWxscyA9IGZpcnN0Qm9hcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJyk7XG4gICAgY29uc3Qgc2Vjb25kQm9hcmRDZWxscyA9IHNlY29uZEJvYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpO1xuICAgIGNvbnN0IG5vblNoaXBDZWxscyA9IFtdO1xuICAgIGZvciAobGV0IGNlbGwgb2YgZmlyc3RCb2FyZENlbGxzKSB7XG4gICAgICAgIGlmICghY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ3Rha2VuJykpIHtcbiAgICAgICAgICAgIG5vblNoaXBDZWxscy5wdXNoKGNlbGwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGNlbGwgb2Ygc2Vjb25kQm9hcmRDZWxscykge1xuICAgICAgICBpZiAoIWNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YWtlbicpKSB7XG4gICAgICAgICAgICBub25TaGlwQ2VsbHMucHVzaChjZWxsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBkcmFnZ2FibGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRyYWdnYWJsZScpO1xuICAgIGRyYWdnYWJsZXMuZm9yRWFjaCgoZHJhZ2dhYmxlKSA9PiB7XG4gICAgICAgIGRyYWdnYWJsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVNb3VzZWRvd24pO1xuICAgICAgICBkcmFnZ2FibGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGhhbmRsZU1vdXNldXApO1xuICAgICAgICBkcmFnZ2FibGUuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgaGFuZGxlRHJhZ1N0YXJ0KTtcbiAgICAgICAgZHJhZ2dhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCBoYW5kbGVEcmFnRW5kKTtcbiAgICAgICAgZHJhZ2dhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgaGFuZGxlUm90YXRlKTtcbiAgICAgICAgbm9uU2hpcENlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBibG9ja1JpZ2h0Q2xpY2spO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBsZXQgbGFzdERyYWdnZWQgPSBudWxsO1xuICAgIGZ1bmN0aW9uIGhhbmRsZU1vdXNlZG93bihlKSB7XG4gICAgICAgIGZpcnN0R2FtZWJvYXJkLnJlbW92ZVJlc2VydmVkU3BhY2UoZmlyc3RHYW1lYm9hcmQpO1xuICAgICAgICBzZWNvbmRHYW1lYm9hcmQucmVtb3ZlUmVzZXJ2ZWRTcGFjZShzZWNvbmRHYW1lYm9hcmQpO1xuICAgICAgICBjb25zdCB0YXJnZXRTaGlwTmFtZSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJyk7XG4gICAgICAgIGxldCB1cGRhdGVkU2hpcHNQbGFjZWRGaXJzdCA9IGZpcnN0R2FtZWJvYXJkLnNoaXBzUGxhY2VkLmZpbHRlcigoc2hpcCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldFNoaXBOYW1lICE9PSBzaGlwLnRha2VuQnkubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHVwZGF0ZWRTaGlwc1BsYWNlZFRlbXAgPSBzZWNvbmRHYW1lYm9hcmQuc2hpcHNQbGFjZWQuZmlsdGVyKChzaGlwKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0U2hpcE5hbWUgIT09IHNoaXAudGFrZW5CeS5uYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB1cGRhdGVkU2hpcHNQbGFjZWRGaXJzdC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBmaXJzdEdhbWVib2FyZC5yZXNlcnZlU3BhY2UoZmlyc3RHYW1lYm9hcmQsIHNoaXAuY29sLCBzaGlwLnJvdyk7XG4gICAgICAgIH0pO1xuICAgICAgICB1cGRhdGVkU2hpcHNQbGFjZWRUZW1wLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgICAgIHNlY29uZEdhbWVib2FyZC5yZXNlcnZlU3BhY2Uoc2Vjb25kR2FtZWJvYXJkLCBzaGlwLmNvbCwgc2hpcC5yb3cpO1xuICAgICAgICB9KTtcbiAgICAgICAgdWkucmVmcmVzaEJvYXJkKGZpcnN0R2FtZWJvYXJkKTtcbiAgICAgICAgdWkucmVmcmVzaEJvYXJkKHNlY29uZEdhbWVib2FyZCk7XG4gICAgICAgIHVpLmNyZWF0ZVNoaXBPdmVybGF5KCdmaXJzdCcsIGZpcnN0R2FtZWJvYXJkLnNoaXBzUGxhY2VkKTtcbiAgICAgICAgdWkuY3JlYXRlU2hpcE92ZXJsYXkoJ3NlY29uZCcsIHNlY29uZEdhbWVib2FyZC5zaGlwc1BsYWNlZCk7XG4gICAgICAgIGRyYWdBbmREcm9wKGZpcnN0R2FtZWJvYXJkLCBzZWNvbmRHYW1lYm9hcmQsIGNvbnRyb2xsZXIuaHVtYW5TaGlwcyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZU1vdXNldXAoKSB7XG4gICAgICAgIGZpcnN0R2FtZWJvYXJkLnNoaXBzUGxhY2VkLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgICAgIGZpcnN0R2FtZWJvYXJkLnJlc2VydmVTcGFjZShmaXJzdEdhbWVib2FyZCwgc2hpcC5jb2wsIHNoaXAucm93KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlY29uZEdhbWVib2FyZC5zaGlwc1BsYWNlZC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBzZWNvbmRHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKHNlY29uZEdhbWVib2FyZCwgc2hpcC5jb2wsIHNoaXAucm93KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChmaXJzdEdhbWVib2FyZCk7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChzZWNvbmRHYW1lYm9hcmQpO1xuICAgICAgICB1aS5jcmVhdGVTaGlwT3ZlcmxheSgnZmlyc3QnLCBmaXJzdEdhbWVib2FyZC5zaGlwc1BsYWNlZCk7XG4gICAgICAgIHVpLmNyZWF0ZVNoaXBPdmVybGF5KCdzZWNvbmQnLCBzZWNvbmRHYW1lYm9hcmQuc2hpcHNQbGFjZWQpO1xuICAgICAgICBkcmFnQW5kRHJvcChmaXJzdEdhbWVib2FyZCwgc2Vjb25kR2FtZWJvYXJkLCBjb250cm9sbGVyLmh1bWFuU2hpcHMpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoYW5kbGVEcmFnU3RhcnQoZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB0YXJnZXQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdkcmFnZ2luZycpO1xuICAgICAgICAgICAgc2hpcE5hbWUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnKTtcbiAgICAgICAgICAgIHNoaXBTaXplID0gTnVtYmVyKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2l6ZScpKTtcbiAgICAgICAgICAgIGdyYWJQb2ludFggPSBlLm9mZnNldFg7XG4gICAgICAgICAgICBncmFiUG9pbnRZID0gZS5vZmZzZXRZO1xuICAgICAgICAgICAgc2hpcE9iaiA9IHNoaXBOYW1lVG9PYmpbc2hpcE5hbWVdO1xuICAgICAgICAgICAgb3JpZW50YXRpb24gPSBzaGlwT2JqLmlzVmVydGljYWwgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnO1xuICAgICAgICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuYm9hcmQnKS5pZCA9PT0gJ2ZpcnN0Qm9hcmQnKSB7XG4gICAgICAgICAgICAgICAgZmlyc3RHYW1lYm9hcmQucmVtb3ZlU2hpcChzaGlwT2JqLCBmaXJzdEdhbWVib2FyZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5ib2FyZCcpLmlkID09PSAnc2Vjb25kQm9hcmQnKSB7XG4gICAgICAgICAgICAgICAgc2Vjb25kR2FtZWJvYXJkLnJlbW92ZVNoaXAoc2hpcE9iaiwgc2Vjb25kR2FtZWJvYXJkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZURyYWdPdmVyKGluZGV4KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5ib2FyZCcpLmlkID09PSAnZmlyc3RCb2FyZCcpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaWYgKHNoaXBPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXJ0Q2VsbCA9IGluZGV4IC0gKHNoaXBPYmouaXNWZXJ0aWNhbCA/IE1hdGguZmxvb3IoZ3JhYlBvaW50WSAvIHRoaXMub2Zmc2V0SGVpZ2h0KSAqIDEwIDogTWF0aC5mbG9vcihncmFiUG9pbnRYIC8gdGhpcy5vZmZzZXRXaWR0aCkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b0hpZ2hsaWdodCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBTaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjZWxsSW5kZXggPSBzaGlwT2JqLmlzVmVydGljYWwgPyBzdGFydENlbGwgKyBpICogMTAgOiBzdGFydENlbGwgKyBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0Qm9hcmRDZWxsc1tjZWxsSW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9IaWdobGlnaHQucHVzaChmaXJzdEJvYXJkQ2VsbHNbY2VsbEluZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0ZWRDZWxscy5wdXNoKGZpcnN0Qm9hcmRDZWxsc1tjZWxsSW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZFBsYWNlbWVudCh0b0hpZ2hsaWdodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvSGlnaGxpZ2h0LmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxhc3REcmFnZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdERyYWdnZWQgPSBnZXRMYXN0U2hpcFNpemVFbGVtZW50cyhoaWdobGlnaHRlZENlbGxzLCBzaGlwU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFx0Y29uc29sZS5sb2coJ3NoaXAgaXMgb24gdGhlIGVkZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQgPT09ICdzZWNvbmRCb2FyZCcpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaWYgKHNoaXBPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXJ0Q2VsbCA9IGluZGV4IC0gKHNoaXBPYmouaXNWZXJ0aWNhbCA/IE1hdGguZmxvb3IoZ3JhYlBvaW50WSAvIHRoaXMub2Zmc2V0SGVpZ2h0KSAqIDEwIDogTWF0aC5mbG9vcihncmFiUG9pbnRYIC8gdGhpcy5vZmZzZXRXaWR0aCkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b0hpZ2hsaWdodCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBTaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjZWxsSW5kZXggPSBzaGlwT2JqLmlzVmVydGljYWwgPyBzdGFydENlbGwgKyBpICogMTAgOiBzdGFydENlbGwgKyBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlY29uZEJvYXJkQ2VsbHNbY2VsbEluZGV4XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvSGlnaGxpZ2h0LnB1c2goc2Vjb25kQm9hcmRDZWxsc1tjZWxsSW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRlZENlbGxzLnB1c2goc2Vjb25kQm9hcmRDZWxsc1tjZWxsSW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZFBsYWNlbWVudCh0b0hpZ2hsaWdodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvSGlnaGxpZ2h0LmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxhc3REcmFnZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdERyYWdnZWQgPSBnZXRMYXN0U2hpcFNpemVFbGVtZW50cyhoaWdobGlnaHRlZENlbGxzLCBzaGlwU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFx0Y29uc29sZS5sb2coJ3NoaXAgaXMgb24gdGhlIGVkZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFuZGxlRHJhZ0xlYXZlKCkge1xuICAgICAgICBoaWdobGlnaHRlZENlbGxzLmZvckVhY2goKGhpZ2hsaWdodGVkQ2VsbCkgPT4ge1xuICAgICAgICAgICAgaGlnaGxpZ2h0ZWRDZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZ2hsaWdodCcpO1xuICAgICAgICB9KTtcbiAgICAgICAgaGlnaGxpZ2h0ZWRDZWxscyA9IFtdO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoYW5kbGVEcm9wKGUpIHtcbiAgICAgICAgaGlnaGxpZ2h0ZWRDZWxscy5mb3JFYWNoKChoaWdobGlnaHRlZENlbGwpID0+IHtcbiAgICAgICAgICAgIGhpZ2hsaWdodGVkQ2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWdobGlnaHQnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGxhc3QgPSBnZXRMYXN0U2hpcFNpemVFbGVtZW50cyhoaWdobGlnaHRlZENlbGxzLCBzaGlwU2l6ZSk7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5ib2FyZCcpLmlkID09PSAnZmlyc3RCb2FyZCcpIHtcbiAgICAgICAgICAgIGlmIChzaGlwT2JqICYmIGxhc3REcmFnZ2VkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0R2FtZWJvYXJkLmNhbkJlUGxhY2VkKHNoaXBPYmouc2l6ZSwgbGFzdFswXS5kYXRhc2V0LmNvbCwgbGFzdFswXS5kYXRhc2V0LnJvdywgb3JpZW50YXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0R2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwT2JqLCBsYXN0WzBdLmRhdGFzZXQuY29sLCBsYXN0WzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0R2FtZWJvYXJkLnJlc2VydmVTcGFjZShmaXJzdEdhbWVib2FyZCwgbGFzdFswXS5kYXRhc2V0LmNvbCwgbGFzdFswXS5kYXRhc2V0LnJvdyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdEdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcE9iaiwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5jb2wsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0R2FtZWJvYXJkLnJlc2VydmVTcGFjZShmaXJzdEdhbWVib2FyZCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5jb2wsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQucm93KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuYm9hcmQnKS5pZCA9PT0gJ3NlY29uZEJvYXJkJykge1xuICAgICAgICAgICAgaWYgKHNoaXBPYmogJiYgbGFzdERyYWdnZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2Vjb25kR2FtZWJvYXJkLmNhbkJlUGxhY2VkKHNoaXBPYmouc2l6ZSwgbGFzdFswXS5kYXRhc2V0LmNvbCwgbGFzdFswXS5kYXRhc2V0LnJvdywgb3JpZW50YXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlY29uZEdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcE9iaiwgbGFzdFswXS5kYXRhc2V0LmNvbCwgbGFzdFswXS5kYXRhc2V0LnJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBzZWNvbmRHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKHNlY29uZEdhbWVib2FyZCwgbGFzdFswXS5kYXRhc2V0LmNvbCwgbGFzdFswXS5kYXRhc2V0LnJvdyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZWNvbmRHYW1lYm9hcmQucGxhY2VTaGlwKHNoaXBPYmosIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQuY29sLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LnJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBzZWNvbmRHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKHNlY29uZEdhbWVib2FyZCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5jb2wsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQucm93KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmlyc3RHYW1lYm9hcmQucmVtb3ZlUmVzZXJ2ZWRTcGFjZShmaXJzdEdhbWVib2FyZCk7XG4gICAgICAgIHNlY29uZEdhbWVib2FyZC5yZW1vdmVSZXNlcnZlZFNwYWNlKHNlY29uZEdhbWVib2FyZCk7XG4gICAgICAgIGZpcnN0R2FtZWJvYXJkLnNoaXBzUGxhY2VkLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgICAgIGZpcnN0R2FtZWJvYXJkLnJlc2VydmVTcGFjZShmaXJzdEdhbWVib2FyZCwgc2hpcC5jb2wsIHNoaXAucm93KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlY29uZEdhbWVib2FyZC5zaGlwc1BsYWNlZC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBzZWNvbmRHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKHNlY29uZEdhbWVib2FyZCwgc2hpcC5jb2wsIHNoaXAucm93KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChmaXJzdEdhbWVib2FyZCk7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChzZWNvbmRHYW1lYm9hcmQpO1xuICAgICAgICB1aS5jcmVhdGVTaGlwT3ZlcmxheSgnZmlyc3QnLCBmaXJzdEdhbWVib2FyZC5zaGlwc1BsYWNlZCk7XG4gICAgICAgIHVpLmNyZWF0ZVNoaXBPdmVybGF5KCdzZWNvbmQnLCBzZWNvbmRHYW1lYm9hcmQuc2hpcHNQbGFjZWQpO1xuICAgICAgICBkcmFnQW5kRHJvcChmaXJzdEdhbWVib2FyZCwgc2Vjb25kR2FtZWJvYXJkLCBjb250cm9sbGVyLmh1bWFuU2hpcHMpO1xuICAgICAgICB1aS5jYW5CZVN0YXJ0ZWQoKTtcbiAgICAgICAgdWkuc2V0U3RhcnRNZXNzYWdlKCk7XG4gICAgICAgIGxhc3REcmFnZ2VkID0gbnVsbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFuZGxlRHJhZ0VuZChlKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICB0YXJnZXQuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnZ2luZycpO1xuICAgICAgICBpZiAoaGlnaGxpZ2h0ZWRDZWxscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQgPT09ICdmaXJzdEJvYXJkJykge1xuICAgICAgICAgICAgICAgIGlmIChsYXN0RHJhZ2dlZCAmJiBmaXJzdEdhbWVib2FyZC5jYW5CZVBsYWNlZChzaGlwT2JqLnNpemUsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQuY29sLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LnJvdywgb3JpZW50YXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0R2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwT2JqLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGZpcnN0R2FtZWJvYXJkLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3cpO1xuICAgICAgICAgICAgICAgICAgICB1aS5yZWZyZXNoQm9hcmQoZmlyc3RHYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgICAgICB1aS5yZWZyZXNoQm9hcmQoc2Vjb25kR2FtZWJvYXJkKTtcbiAgICAgICAgICAgICAgICAgICAgdWkuY3JlYXRlU2hpcE92ZXJsYXkoJ2ZpcnN0JywgZmlyc3RHYW1lYm9hcmQuc2hpcHNQbGFjZWQpO1xuICAgICAgICAgICAgICAgICAgICB1aS5jcmVhdGVTaGlwT3ZlcmxheSgnc2Vjb25kJywgc2Vjb25kR2FtZWJvYXJkLnNoaXBzUGxhY2VkKTtcbiAgICAgICAgICAgICAgICAgICAgZHJhZ0FuZERyb3AoZmlyc3RHYW1lYm9hcmQsIHNlY29uZEdhbWVib2FyZCwgY29udHJvbGxlci5odW1hblNoaXBzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQgPT09ICdzZWNvbmRCb2FyZCcpIHtcbiAgICAgICAgICAgICAgICBpZiAobGFzdERyYWdnZWQgJiYgc2Vjb25kR2FtZWJvYXJkLmNhbkJlUGxhY2VkKHNoaXBPYmouc2l6ZSwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5jb2wsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kR2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwT2JqLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kR2FtZWJvYXJkLnJlc2VydmVTcGFjZShzZWNvbmRHYW1lYm9hcmQsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQuY29sLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LnJvdyk7XG4gICAgICAgICAgICAgICAgICAgIHVpLnJlZnJlc2hCb2FyZChmaXJzdEdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgICAgIHVpLnJlZnJlc2hCb2FyZChzZWNvbmRHYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgICAgICB1aS5jcmVhdGVTaGlwT3ZlcmxheSgnZmlyc3QnLCBmaXJzdEdhbWVib2FyZC5zaGlwc1BsYWNlZCk7XG4gICAgICAgICAgICAgICAgICAgIHVpLmNyZWF0ZVNoaXBPdmVybGF5KCdzZWNvbmQnLCBzZWNvbmRHYW1lYm9hcmQuc2hpcHNQbGFjZWQpO1xuICAgICAgICAgICAgICAgICAgICBkcmFnQW5kRHJvcChmaXJzdEdhbWVib2FyZCwgc2Vjb25kR2FtZWJvYXJkLCBjb250cm9sbGVyLmh1bWFuU2hpcHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBpc1ZhbGlkUGxhY2VtZW50KHRvSGlnaGxpZ2h0KSB7XG4gICAgICAgIHJldHVybiAodG9IaWdobGlnaHQuZXZlcnkoKGNlbGwpID0+IGNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlbXB0eScpKSAmJlxuICAgICAgICAgICAgKHRvSGlnaGxpZ2h0LmV2ZXJ5KChjZWxsKSA9PiBjZWxsLmRhdGFzZXQuY29sID09PSB0b0hpZ2hsaWdodFswXS5kYXRhc2V0LmNvbCkgfHxcbiAgICAgICAgICAgICAgICB0b0hpZ2hsaWdodC5ldmVyeSgoY2VsbCkgPT4gY2VsbC5kYXRhc2V0LnJvdyA9PT0gdG9IaWdobGlnaHRbMF0uZGF0YXNldC5yb3cpKSAmJlxuICAgICAgICAgICAgdG9IaWdobGlnaHQubGVuZ3RoID09PSBzaGlwU2l6ZSAmJlxuICAgICAgICAgICAgdG9IaWdobGlnaHQuZXZlcnkoKGNlbGwpID0+IGNlbGwuZGF0YXNldC5jb2wgPj0gJ0EnICYmIGNlbGwuZGF0YXNldC5jb2wgPD0gJ0onKSAmJlxuICAgICAgICAgICAgdG9IaWdobGlnaHQuZXZlcnkoKGNlbGwpID0+IE51bWJlcihjZWxsLmRhdGFzZXQucm93KSA+PSAxICYmIE51bWJlcihjZWxsLmRhdGFzZXQucm93KSA8PSAxMCkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRMYXN0U2hpcFNpemVFbGVtZW50cyhoaWdobGlnaHRlZENlbGxzLCBzaGlwU2l6ZSkge1xuICAgICAgICByZXR1cm4gaGlnaGxpZ2h0ZWRDZWxscy5zbGljZShNYXRoLm1pbihoaWdobGlnaHRlZENlbGxzLmxlbmd0aCAtIHNoaXBTaXplLCAwKSk7XG4gICAgfVxuICAgIGZpcnN0Qm9hcmRDZWxscy5mb3JFYWNoKChjZWxsLCBpbmRleCkgPT4ge1xuICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgaGFuZGxlRHJhZ092ZXIoaW5kZXgpKTtcbiAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCBoYW5kbGVEcmFnTGVhdmUpO1xuICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBoYW5kbGVEcm9wKTtcbiAgICB9KTtcbiAgICBzZWNvbmRCb2FyZENlbGxzLmZvckVhY2goKGNlbGwsIGluZGV4KSA9PiB7XG4gICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBoYW5kbGVEcmFnT3ZlcihpbmRleCkpO1xuICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGhhbmRsZURyYWdMZWF2ZSk7XG4gICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGhhbmRsZURyb3ApO1xuICAgIH0pO1xuICAgIGZ1bmN0aW9uIGhhbmRsZVJvdGF0ZShlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgIGxldCBnYW1lYm9hcmQ7XG4gICAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQgPT09ICdmaXJzdEJvYXJkJykge1xuICAgICAgICAgICAgZ2FtZWJvYXJkID0gZmlyc3RHYW1lYm9hcmQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuYm9hcmQnKS5pZCA9PT0gJ3NlY29uZEJvYXJkJykge1xuICAgICAgICAgICAgZ2FtZWJvYXJkID0gc2Vjb25kR2FtZWJvYXJkO1xuICAgICAgICB9XG4gICAgICAgIHNoaXBOYW1lID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJyk7XG4gICAgICAgIHNoaXBTaXplID0gTnVtYmVyKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2l6ZScpKTtcbiAgICAgICAgc2hpcE9iaiA9IHNoaXBOYW1lVG9PYmpbc2hpcE5hbWVdO1xuICAgICAgICBjb25zdCB0ZW1wU2hpcCA9IHNoaXBPYmo7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBnYW1lYm9hcmQuc2hpcHNQbGFjZWQuZmlsdGVyKChzaGlwKSA9PiBzaGlwLnRha2VuQnkubmFtZS50b0xvd2VyQ2FzZSgpID09PSBzaGlwTmFtZSk7XG4gICAgICAgIGdhbWVib2FyZC5yZW1vdmVTaGlwKHNoaXBPYmosIGdhbWVib2FyZCk7XG4gICAgICAgIGdhbWVib2FyZC5yZW1vdmVSZXNlcnZlZFNwYWNlKGdhbWVib2FyZCk7XG4gICAgICAgIGdhbWVib2FyZC5zaGlwc1BsYWNlZC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBnYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGdhbWVib2FyZCwgc2hpcC5jb2wsIHNoaXAucm93KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRlbXBTaGlwLnJvdGF0ZSgpO1xuICAgICAgICBvcmllbnRhdGlvbiA9IHRlbXBTaGlwLmlzVmVydGljYWwgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnO1xuICAgICAgICBpZiAoZ2FtZWJvYXJkLmNhbkJlUGxhY2VkKHRlbXBTaGlwLnNpemUsIGN1cnJlbnRbMF0uY29sLCBjdXJyZW50WzBdLnJvdywgb3JpZW50YXRpb24pKSB7XG4gICAgICAgICAgICBnYW1lYm9hcmQucGxhY2VTaGlwKHRlbXBTaGlwLCBjdXJyZW50WzBdLmNvbCwgY3VycmVudFswXS5yb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRlbXBTaGlwLnJvdGF0ZSgpO1xuICAgICAgICAgICAgb3JpZW50YXRpb24gPSB0ZW1wU2hpcC5pc1ZlcnRpY2FsID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJztcbiAgICAgICAgICAgIGdhbWVib2FyZC5wbGFjZVNoaXAodGVtcFNoaXAsIGN1cnJlbnRbMF0uY29sLCBjdXJyZW50WzBdLnJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGdhbWVib2FyZC5zaGlwc1BsYWNlZC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBnYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGdhbWVib2FyZCwgc2hpcC5jb2wsIHNoaXAucm93KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChnYW1lYm9hcmQpO1xuICAgICAgICB1aS5jcmVhdGVTaGlwT3ZlcmxheSgnZmlyc3QnLCBmaXJzdEdhbWVib2FyZC5zaGlwc1BsYWNlZCk7XG4gICAgICAgIHVpLmNyZWF0ZVNoaXBPdmVybGF5KCdzZWNvbmQnLCBzZWNvbmRHYW1lYm9hcmQuc2hpcHNQbGFjZWQpO1xuICAgICAgICBkcmFnQW5kRHJvcChmaXJzdEdhbWVib2FyZCwgc2Vjb25kR2FtZWJvYXJkLCBjb250cm9sbGVyLmh1bWFuU2hpcHMpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBibG9ja1JpZ2h0Q2xpY2soZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IGRyYWdBbmREcm9wO1xuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgZHJhZ0FuZERyb3AgZnJvbSAnLi9kcmFnQW5kRHJvcCc7XG5pbXBvcnQgY29udHJvbGxlciBmcm9tICcuL2NvbnRyb2xsZXInO1xuY29uc3QgdWkgPSAoKCkgPT4ge1xuICAgIGNvbnN0IHN0YXR1c0JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQm94IHAnKTtcbiAgICBjb25zdCBib2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9hcmRzJyk7XG4gICAgY29uc3QgcFZjQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsYXllclZzQ29tcHV0ZXInKTtcbiAgICBjb25zdCBuZXdHYW1lQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25ld0dhbWUnKTtcbiAgICBjb25zdCBjVmNCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29tcHV0ZXJWc0NvbXB1dGVyJyk7XG4gICAgY29uc3Qgc3RhcnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3RhcnQnKTtcbiAgICBjb25zdCByYW5kb21CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmFuZG9tUGxhY2VtZW50Jyk7XG4gICAgY29uc3QgYWxsQnRucyA9IFtwVmNCdG4sIG5ld0dhbWVCdG4sIGNWY0J0biwgc3RhcnRCdG4sIHJhbmRvbUJ0bl07XG4gICAgY29uc3Qgc3BlZWRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoJ3NwZWVkJyk7XG4gICAgY29uc3QgY3JlYXRlQ2VsbCA9IChjZWxsKSA9PiB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjZWxsJyk7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjZWxsLnN0YXR1cyk7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWNvbCcsIGNlbGwuY29sKTtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcm93JywgY2VsbC5yb3cpO1xuICAgICAgICBpZiAoY2VsbC50YWtlbkJ5KSB7XG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1zaGlwTmFtZScsIGNlbGwudGFrZW5CeS5uYW1lLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH07XG4gICAgY29uc3QgcmVuZGVyQ2VsbHMgPSAoZ2FtZWJvYXJkLCBib2FyZCkgPT4ge1xuICAgICAgICBnYW1lYm9hcmQuYXJyYXkuZm9yRWFjaCgocm93KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgoY29sKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IGNyZWF0ZUNlbGwoY29sKTtcbiAgICAgICAgICAgICAgICBib2FyZC5hcHBlbmQoY2VsbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCByZW5kZXJCb2FyZCA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgYm9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgYm9hcmQuY2xhc3NMaXN0LmFkZCgnYm9hcmQnKTtcbiAgICAgICAgaWYgKGdhbWVib2FyZCA9PT0gY29udHJvbGxlci5odW1hbkdhbWVib2FyZCkge1xuICAgICAgICAgICAgYm9hcmQuaWQgPSAnZmlyc3RCb2FyZCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZ2FtZWJvYXJkID09PSBjb250cm9sbGVyLmNvbXB1dGVyR2FtZWJvYXJkKSB7XG4gICAgICAgICAgICBib2FyZC5pZCA9ICdzZWNvbmRCb2FyZCc7XG4gICAgICAgIH1cbiAgICAgICAgcmVuZGVyQ2VsbHMoZ2FtZWJvYXJkLCBib2FyZCk7XG4gICAgICAgIGJvYXJkcy5hcHBlbmQoYm9hcmQpO1xuICAgIH07XG4gICAgY29uc3QgcmVmcmVzaEJvYXJkID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBsZXQgYm9hcmRJZDtcbiAgICAgICAgaWYgKGdhbWVib2FyZCA9PT0gY29udHJvbGxlci5odW1hbkdhbWVib2FyZCkge1xuICAgICAgICAgICAgYm9hcmRJZCA9ICdmaXJzdEJvYXJkJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChnYW1lYm9hcmQgPT09IGNvbnRyb2xsZXIuY29tcHV0ZXJHYW1lYm9hcmQpIHtcbiAgICAgICAgICAgIGJvYXJkSWQgPSAnc2Vjb25kQm9hcmQnO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7Ym9hcmRJZH1gKTtcbiAgICAgICAgYm9hcmQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIHJlbmRlckNlbGxzKGdhbWVib2FyZCwgYm9hcmQpO1xuICAgIH07XG4gICAgY29uc3QgZ2V0VXNlcklucHV0ID0gKGUpID0+IHtcbiAgICAgICAgaWYgKCFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpdCcpICYmICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21pc3MnKSkge1xuICAgICAgICAgICAgY29uc3QgY29sID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbCcpO1xuICAgICAgICAgICAgY29uc3Qgcm93ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXJvdycpO1xuICAgICAgICAgICAgcmV0dXJuIHsgY29sLCByb3cgfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlVXNlcklucHV0ID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnN0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3NlY29uZEJvYXJkIC5jZWxsJyk7XG4gICAgICAgIGxldCB1c2VySW5wdXQ7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIHVzZXJJbnB1dCA9IHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaXQnKSAmJiAhY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ21pc3MnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShnZXRVc2VySW5wdXQoZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSB3aGlsZSAoIXVzZXJJbnB1dCk7XG4gICAgICAgIGNvbnN0IGNvbCA9IHVzZXJJbnB1dC5jb2wudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3Qgcm93ID0gdXNlcklucHV0LnJvdy50b1N0cmluZygpO1xuICAgICAgICByZXR1cm4geyBjb2wsIHJvdyB9O1xuICAgIH0pO1xuICAgIGNvbnN0IGhhbmRsZVB2QyA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBmaWxsQ2VsbHMoJ2ZpcnN0Jyk7XG4gICAgICAgIHdhaXRpbmcodHJ1ZSk7XG4gICAgICAgIGFsbEJ0bnMuZm9yRWFjaCgoYnRuKSA9PiAoYnRuLmRpc2FibGVkID0gdHJ1ZSkpO1xuICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBnZXRTcGVlZFZhbHVlKCkpKTtcbiAgICAgICAgYWxsQnRucy5mb3JFYWNoKChidG4pID0+IChidG4uZGlzYWJsZWQgPSBmYWxzZSkpO1xuICAgICAgICB3YWl0aW5nKGZhbHNlKTtcbiAgICAgICAgY2FuQmVTdGFydGVkKCk7XG4gICAgICAgIHNldEluaXRNZXNzYWdlKCk7XG4gICAgfSk7XG4gICAgY29uc3QgaGFuZGxlTmV3R2FtZSA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBzZXRSZXN0YXJ0TWVzc2FnZSgpO1xuICAgICAgICB3YWl0aW5nKHRydWUpO1xuICAgICAgICBhbGxCdG5zLmZvckVhY2goKGJ0bikgPT4gKGJ0bi5kaXNhYmxlZCA9IHRydWUpKTtcbiAgICAgICAgeWllbGQgY29udHJvbGxlci5uZXdHYW1lKCk7XG4gICAgICAgIGFsbEJ0bnMuZm9yRWFjaCgoYnRuKSA9PiAoYnRuLmRpc2FibGVkID0gZmFsc2UpKTtcbiAgICAgICAgd2FpdGluZyhmYWxzZSk7XG4gICAgICAgIGNhbkJlU3RhcnRlZCgpO1xuICAgICAgICBpZiAocFZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgc2V0SW5pdE1lc3NhZ2UoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGhhbmRsZUN2QyA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICB3YWl0aW5nKHRydWUpO1xuICAgICAgICBhbGxCdG5zLmZvckVhY2goKGJ0bikgPT4gKGJ0bi5kaXNhYmxlZCA9IHRydWUpKTtcbiAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZ2V0U3BlZWRWYWx1ZSgpKSk7XG4gICAgICAgIGFsbEJ0bnMuZm9yRWFjaCgoYnRuKSA9PiAoYnRuLmRpc2FibGVkID0gZmFsc2UpKTtcbiAgICAgICAgd2FpdGluZyhmYWxzZSk7XG4gICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgcmFuZG9tQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgY1ZjQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9KTtcbiAgICBjb25zdCBoYW5kbGVHYW1lTW9kZSA9IChzZWxlY3RlZEVsZW1lbnQsIGRlc2VsZWN0ZWRFbGVtZW50KSA9PiB7XG4gICAgICAgIGRlc2VsZWN0ZWRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XG4gICAgICAgIGlmICghc2VsZWN0ZWRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRFbGVtZW50ID09PSBwVmNCdG4pIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVQdkMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZWxlY3RlZEVsZW1lbnQgPT09IGNWY0J0bikge1xuICAgICAgICAgICAgICAgIGhhbmRsZUN2QygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udHJvbGxlci5yZXN0YXJ0KCk7XG4gICAgICAgICAgICBzZXRSZXN0YXJ0TWVzc2FnZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCB3YWl0aW5nID0gKGJvb2wpID0+IHtcbiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ3dhaXQnLCBib29sKTtcbiAgICB9O1xuICAgIGNvbnN0IHNldEJvYXJkUG9pbnRlciA9ICh3aGljaCkgPT4ge1xuICAgICAgICBjb25zdCBzZWNvbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgaWYgKHdoaWNoID09PSAncGxheWVyJykge1xuICAgICAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5hZGQoJ2JvYXJkT3V0bGluZScpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHdoaWNoID09PSAnY29tcHV0ZXInKSB7XG4gICAgICAgICAgICBzZWNvbmQuY2xhc3NMaXN0LnJlbW92ZSgnYm9hcmRPdXRsaW5lJyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZUJvYXJkUG9pbnRlciA9ICgpID0+IHtcbiAgICAgICAgY29uc3Qgc2Vjb25kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIHNlY29uZC5jbGFzc0xpc3QucmVtb3ZlKCdib2FyZE91dGxpbmUnKTtcbiAgICB9O1xuICAgIGNvbnN0IGNyZWF0ZVNoaXBPdmVybGF5ID0gKGdhbWVib2FyZE5hbWUsIHNoaXBzKSA9PiB7XG4gICAgICAgIHNoaXBzLmZvckVhY2goKGZpcnN0Q2VsbCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2hpcEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBOYW1lID0gZmlyc3RDZWxsLnRha2VuQnkubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgY29uc3Qgc2hpcFNpemUgPSBmaXJzdENlbGwudGFrZW5CeS5zaXplO1xuICAgICAgICAgICAgY29uc3QgaXNWZXJ0aWNhbCA9IGZpcnN0Q2VsbC50YWtlbkJ5LmlzVmVydGljYWw7XG4gICAgICAgICAgICBzaGlwRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzaGlwJywgc2hpcE5hbWUpO1xuICAgICAgICAgICAgc2hpcEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXNpemUnLCBgJHtzaGlwU2l6ZX1gKTtcbiAgICAgICAgICAgIHNoaXBFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJywgYCR7c2hpcE5hbWV9YCk7XG4gICAgICAgICAgICBzaGlwRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RyYWdnYWJsZScsICd0cnVlJyk7XG4gICAgICAgICAgICBzaGlwRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkcmFnZ2FibGUnKTtcbiAgICAgICAgICAgIGNvbnN0IHNldFNoaXBTdHlsZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBodG1sRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKTtcbiAgICAgICAgICAgICAgICBjb25zdCByb290Rm9udFNpemUgPSBwYXJzZUZsb2F0KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGh0bWxFbGVtZW50LCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCdmb250LXNpemUnKSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZlcnRpY2FsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoaXBFbGVtZW50LnN0eWxlLndpZHRoID0gc2hpcFNpemUgKiAoY2VsbFNpemUgLyByb290Rm9udFNpemUpICsgJ3JlbSc7XG4gICAgICAgICAgICAgICAgICAgIHNoaXBFbGVtZW50LnN0eWxlLmhlaWdodCA9IGNlbGxTaXplIC8gcm9vdEZvbnRTaXplICsgJ3JlbSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzVmVydGljYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hpcEVsZW1lbnQuc3R5bGUud2lkdGggPSBjZWxsU2l6ZSAvIHJvb3RGb250U2l6ZSArICdyZW0nO1xuICAgICAgICAgICAgICAgICAgICBzaGlwRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBzaGlwU2l6ZSAqIChjZWxsU2l6ZSAvIHJvb3RGb250U2l6ZSkgKyAncmVtJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbGV0IGNlbGxTaXplID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvYXJkIC5jZWxsJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgICAgICBzZXRTaGlwU3R5bGUoKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY2VsbFNpemUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm9hcmQgLmNlbGwnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgICAgICAgICBzZXRTaGlwU3R5bGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGV0IGJvYXJkO1xuICAgICAgICAgICAgaWYgKGdhbWVib2FyZE5hbWUgPT09ICdmaXJzdCcpIHtcbiAgICAgICAgICAgICAgICBib2FyZCA9ICdmaXJzdEJvYXJkJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGdhbWVib2FyZE5hbWUgPT09ICdzZWNvbmQnKSB7XG4gICAgICAgICAgICAgICAgYm9hcmQgPSAnc2Vjb25kQm9hcmQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZmlyc3RDZWxsRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2JvYXJkfSAuY2VsbFtkYXRhLWNvbD1cIiR7Zmlyc3RDZWxsLmNvbH1cIl1bZGF0YS1yb3c9XCIke2ZpcnN0Q2VsbC5yb3d9XCJdYCk7XG4gICAgICAgICAgICBmaXJzdENlbGxFbGVtZW50LmFwcGVuZENoaWxkKHNoaXBFbGVtZW50KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBjYW5CZVN0YXJ0ZWQgPSAoKSA9PiB7XG4gICAgICAgIGlmIChjb250cm9sbGVyLmh1bWFuR2FtZWJvYXJkLnNoaXBzUGxhY2VkLmxlbmd0aCA9PT0gNSAmJiBjb250cm9sbGVyLmNvbXB1dGVyR2FtZWJvYXJkLnNoaXBzUGxhY2VkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZmlsbENlbGxzKCdzZWNvbmQnKTtcbiAgICAgICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0SW5pdE1lc3NhZ2UgPSAoKSA9PiB7XG4gICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9IFwiVXNlICdSYW5kb20gUGxhY2VtZW50JyBidXR0b24sIHRoZW4gcHJlc3MgU3RhcnQhXCI7XG4gICAgICAgIGlmICh3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogMTAyNHB4KScpLm1hdGNoZXMpIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9IFwiRHJhZyBhbmQgZHJvcCBzaGlwcyBvbnRvIHRoZSBsZWZ0IGJvYXJkIG9yIHVzZSAnUmFuZG9tIFBsYWNlbWVudCcgYnV0dG9uLiBSaWdodCBjbGljayB0byByb3RhdGUuIFdoZW4gcmVhZHksIHByZXNzIFN0YXJ0IVwiO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRTdGFydE1lc3NhZ2UgPSAoKSA9PiB7XG4gICAgICAgIGlmIChjYW5CZVN0YXJ0ZWQoKSkge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gJ1lvdSBjYW4gbm93IGJlZ2luIHRoZSBnYW1lLiBQcmVzcyBzdGFydCEnO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRUdXJuTWVzc2FnZVB2QyA9IChpc1BsYXllclR1cm4pID0+IHtcbiAgICAgICAgaWYgKGlzUGxheWVyVHVybikge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gXCJQbGF5ZXIncyB0dXJuLiBUYWtlIGFpbSBhbmQgYXR0YWNrIVwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gXCJDb21wdXRlcidzIHR1cm4uIFRoZSBzaG90IGlzIGNvbWluZyFcIjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0VHVybk1lc3NhZ2VDdkMgPSAoaXNQbGF5ZXJUdXJuKSA9PiB7XG4gICAgICAgIGlmIChpc1BsYXllclR1cm4pIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9IFwiVmlvbGV0J3MgdHVyblwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gXCJCbHVlJ3MgdHVyblwiO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRHYW1lT3Zlck1lc3NhZ2VQdkMgPSAod2hvKSA9PiB7XG4gICAgICAgIGlmICh3aG8gPT09ICdwbGF5ZXInKSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSAnR2FtZSBvdmVyLCBQbGF5ZXIgd2lucyEnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHdobyA9PT0gJ2NvbXB1dGVyJykge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gJ0dhbWUgb3ZlciwgQ29tcHV0ZXIgd2lucyEnO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRHYW1lT3Zlck1lc3NhZ2VDdkMgPSAod2hvKSA9PiB7XG4gICAgICAgIGlmICh3aG8gPT09ICdwbGF5ZXInKSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSAnR2FtZSBvdmVyLCBCbHVlIENvbXB1dGVyIHdpbnMhJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh3aG8gPT09ICdjb21wdXRlcicpIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9ICdHYW1lIG92ZXIsIFZpb2xldCBDb21wdXRlciB3aW5zISc7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldFJlc3RhcnRNZXNzYWdlID0gKCkgPT4ge1xuICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSAnUmVzdGFydGluZy4uLic7XG4gICAgfTtcbiAgICBwVmNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGZpbGxDZWxscygnZmlyc3QnKTtcbiAgICAgICAgaGFuZGxlR2FtZU1vZGUocFZjQnRuLCBjVmNCdG4pO1xuICAgICAgICBjb25zdCBzZWNvbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5yZW1vdmUoJ3N0YXJ0Jyk7XG4gICAgICAgIHVuRmlsbENlbGxzKCdmaXJzdCcpO1xuICAgICAgICBzdGFydEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHBWY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSk7XG4gICAgY1ZjQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBmaWxsQ2VsbHMoJ2ZpcnN0Jyk7XG4gICAgICAgIGZpbGxDZWxscygnc2Vjb25kJyk7XG4gICAgICAgIGhhbmRsZUdhbWVNb2RlKGNWY0J0biwgcFZjQnRuKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIHNlY29uZC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XG4gICAgICAgIHNlY29uZC5jbGFzc0xpc3QuYWRkKCdzdGFydCcpO1xuICAgICAgICBQcm9taXNlLmFsbChbdW5GaWxsQ2VsbHMoJ2ZpcnN0JyksIHVuRmlsbENlbGxzKCdzZWNvbmQnKV0pO1xuICAgICAgICBzdGFydEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHJhbmRvbUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGNWY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSk7XG4gICAgbmV3R2FtZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBmaWxsQ2VsbHMoJ2ZpcnN0Jyk7XG4gICAgICAgIGlmIChjVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBmaWxsQ2VsbHMoJ3NlY29uZCcpO1xuICAgICAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmFuZG9tQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNWY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdWkucmVtb3ZlQm9hcmRQb2ludGVyKCk7XG4gICAgICAgIHlpZWxkIGhhbmRsZU5ld0dhbWUoKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIHNlY29uZC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XG4gICAgICAgIGlmIChwVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBzZWNvbmQuY2xhc3NMaXN0LnJlbW92ZSgnc3RhcnQnKTtcbiAgICAgICAgICAgIHVuRmlsbENlbGxzKCdmaXJzdCcpO1xuICAgICAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgcFZjQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY1ZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5hZGQoJ3N0YXJ0Jyk7XG4gICAgICAgICAgICByYW5kb21CdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgUHJvbWlzZS5hbGwoW3VuRmlsbENlbGxzKCdmaXJzdCcpLCB1bkZpbGxDZWxscygnc2Vjb25kJyldKTtcbiAgICAgICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJhbmRvbUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICBjVmNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSkpO1xuICAgIHN0YXJ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjb250cm9sbGVyLnN0YXJ0KCk7XG4gICAgICAgIGNvbnN0IGZpcnN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpcnN0Qm9hcmQnKTtcbiAgICAgICAgZmlyc3QuY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xuICAgICAgICBjb25zdCBzZWNvbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5hZGQoJ3N0YXJ0Jyk7XG4gICAgICAgIHVuRmlsbENlbGxzKCdzZWNvbmQnKTtcbiAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICByYW5kb21CdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0pO1xuICAgIHJhbmRvbUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY29udHJvbGxlci5jb21wdXRlckdhbWVib2FyZC5jbGVhckJvYXJkKCk7XG4gICAgICAgIHJlZnJlc2hCb2FyZChjb250cm9sbGVyLmNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgY29udHJvbGxlci5yYW5kb21pemVTaGlwc1BsYWNlbWVudCgnZmlyc3QnLCBjb250cm9sbGVyLmh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgZHJhZ0FuZERyb3AoY29udHJvbGxlci5odW1hbkdhbWVib2FyZCwgY29udHJvbGxlci5jb21wdXRlckdhbWVib2FyZCwgY29udHJvbGxlci5odW1hblNoaXBzKTtcbiAgICAgICAgY2FuQmVTdGFydGVkKCk7XG4gICAgICAgIHNldFN0YXJ0TWVzc2FnZSgpO1xuICAgICAgICBmaWxsQ2VsbHMoJ3NlY29uZCcpO1xuICAgIH0pO1xuICAgIGxldCBzcGVlZFZhbHVlID0gMTAwMDtcbiAgICBzcGVlZHMuZm9yRWFjaCgoc3BlZWQpID0+IHtcbiAgICAgICAgc3BlZWQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgaW5wdXQgPSBzcGVlZDtcbiAgICAgICAgICAgIGlmIChpbnB1dC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgc3BlZWRWYWx1ZSA9IE51bWJlcihpbnB1dC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGNvbnN0IGdldFNwZWVkVmFsdWUgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBzcGVlZFZhbHVlO1xuICAgIH07XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHNldEluaXRNZXNzYWdlKTtcbiAgICBjb25zdCBmaWxsQ2VsbHMgPSAoaW5wdXQpID0+IHtcbiAgICAgICAgbGV0IGJvYXJkO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdmaXJzdCcpIHtcbiAgICAgICAgICAgIGJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpcnN0Qm9hcmQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbnB1dCA9PT0gJ3NlY29uZCcpIHtcbiAgICAgICAgICAgIGJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2VsbHMgPSBib2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpO1xuICAgICAgICBjZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2ZpbGxlZCcpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHVuRmlsbENlbGxzID0gKGlucHV0KSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgd2FpdGluZyh0cnVlKTtcbiAgICAgICAgbGV0IGJvYXJkO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdmaXJzdCcpIHtcbiAgICAgICAgICAgIGJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpcnN0Qm9hcmQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbnB1dCA9PT0gJ3NlY29uZCcpIHtcbiAgICAgICAgICAgIGJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2VsbHMgPSBib2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpO1xuICAgICAgICBjZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2ZpbGxlZCcpO1xuICAgICAgICB9KTtcbiAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGNlbGxzLmZvckVhY2goKGNlbGwsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnZmlsbGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gY2VsbHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgKGdldFNwZWVkVmFsdWUoKSAvIDEyMCkgKiBpbmRleCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHdhaXRpbmcoZmFsc2UpO1xuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlbmRlckJvYXJkLFxuICAgICAgICByZWZyZXNoQm9hcmQsXG4gICAgICAgIGhhbmRsZVVzZXJJbnB1dCxcbiAgICAgICAgcFZjQnRuLFxuICAgICAgICBjVmNCdG4sXG4gICAgICAgIHdhaXRpbmcsXG4gICAgICAgIHNldEJvYXJkUG9pbnRlcixcbiAgICAgICAgcmVtb3ZlQm9hcmRQb2ludGVyLFxuICAgICAgICBjcmVhdGVTaGlwT3ZlcmxheSxcbiAgICAgICAgZHJhZ0FuZERyb3AsXG4gICAgICAgIGNhbkJlU3RhcnRlZCxcbiAgICAgICAgc2V0SW5pdE1lc3NhZ2UsXG4gICAgICAgIHNldFN0YXJ0TWVzc2FnZSxcbiAgICAgICAgc2V0VHVybk1lc3NhZ2VQdkMsXG4gICAgICAgIHNldFR1cm5NZXNzYWdlQ3ZDLFxuICAgICAgICBzZXRHYW1lT3Zlck1lc3NhZ2VQdkMsXG4gICAgICAgIHNldEdhbWVPdmVyTWVzc2FnZUN2QyxcbiAgICAgICAgc2V0UmVzdGFydE1lc3NhZ2UsXG4gICAgICAgIGdldFNwZWVkVmFsdWUsXG4gICAgICAgIHVuRmlsbENlbGxzLFxuICAgIH07XG59KSgpO1xuZXhwb3J0IGRlZmF1bHQgdWk7XG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCBnYW1lYm9hcmRGYWN0b3J5IGZyb20gJy4vZ2FtZWJvYXJkJztcbmltcG9ydCBzaGlwRmFjdG9yeSBmcm9tICcuL3NoaXAnO1xuaW1wb3J0IHBsYXllckZhY3RvcnkgZnJvbSAnLi9wbGF5ZXInO1xuaW1wb3J0IHVpIGZyb20gJy4vdWknO1xuY29uc3QgY29udHJvbGxlciA9ICgoKSA9PiB7XG4gICAgY29uc3QgaHVtYW5HYW1lYm9hcmQgPSBnYW1lYm9hcmRGYWN0b3J5KCk7XG4gICAgY29uc3QgY29tcHV0ZXJHYW1lYm9hcmQgPSBnYW1lYm9hcmRGYWN0b3J5KCk7XG4gICAgY29uc3QgaHVtYW4gPSBwbGF5ZXJGYWN0b3J5KCk7XG4gICAgY29uc3QgY29tcHV0ZXIgPSBwbGF5ZXJGYWN0b3J5KCk7XG4gICAgbGV0IGlzU3RvcHBlZCA9IHRydWU7XG4gICAgbGV0IGh1bWFuQ2FycmllciA9IHNoaXBGYWN0b3J5KCdDYXJyaWVyJyk7XG4gICAgbGV0IGh1bWFuQmF0dGxlc2hpcCA9IHNoaXBGYWN0b3J5KCdCYXR0bGVzaGlwJyk7XG4gICAgbGV0IGh1bWFuRGVzdHJveWVyID0gc2hpcEZhY3RvcnkoJ0Rlc3Ryb3llcicpO1xuICAgIGxldCBodW1hblN1Ym1hcmluZSA9IHNoaXBGYWN0b3J5KCdTdWJtYXJpbmUnKTtcbiAgICBsZXQgaHVtYW5QYXRyb2xib2F0ID0gc2hpcEZhY3RvcnkoJ1BhdHJvbEJvYXQnKTtcbiAgICBjb25zdCBodW1hblNoaXBzID0gW2h1bWFuQ2FycmllciwgaHVtYW5CYXR0bGVzaGlwLCBodW1hbkRlc3Ryb3llciwgaHVtYW5TdWJtYXJpbmUsIGh1bWFuUGF0cm9sYm9hdF07XG4gICAgY29uc3QgcG9wdWxhdGVTaGlwcyA9ICgpID0+IHtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucGxhY2VTaGlwKGh1bWFuQ2FycmllciwgJ0EnLCAnMScsICdob3Jpem9udGFsJyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnBsYWNlU2hpcChodW1hbkJhdHRsZXNoaXAsICdBJywgJzMnLCAnaG9yaXpvbnRhbCcpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5wbGFjZVNoaXAoaHVtYW5EZXN0cm95ZXIsICdBJywgJzUnLCAnaG9yaXpvbnRhbCcpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5wbGFjZVNoaXAoaHVtYW5TdWJtYXJpbmUsICdBJywgJzcnLCAnaG9yaXpvbnRhbCcpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5wbGFjZVNoaXAoaHVtYW5QYXRyb2xib2F0LCAnQScsICc5JywgJ2hvcml6b250YWwnKTtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGNvbXB1dGVyR2FtZWJvYXJkLCAnQScsICcxJyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnJlc2VydmVTcGFjZShjb21wdXRlckdhbWVib2FyZCwgJ0EnLCAnMycpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5yZXNlcnZlU3BhY2UoY29tcHV0ZXJHYW1lYm9hcmQsICdBJywgJzUnKTtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGNvbXB1dGVyR2FtZWJvYXJkLCAnQScsICc3Jyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnJlc2VydmVTcGFjZShjb21wdXRlckdhbWVib2FyZCwgJ0EnLCAnOScpO1xuICAgIH07XG4gICAgY29uc3QgaXNHYW1lT3ZlciA9ICgpID0+IHtcbiAgICAgICAgaWYgKGNvbXB1dGVyR2FtZWJvYXJkLmFsbFN1bmsoY29tcHV0ZXJHYW1lYm9hcmQpKSB7XG4gICAgICAgICAgICB1aS5yZW1vdmVCb2FyZFBvaW50ZXIoKTtcbiAgICAgICAgICAgIGlmICh1aS5wVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgdWkuc2V0R2FtZU92ZXJNZXNzYWdlUHZDKCdwbGF5ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1aS5jVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgdWkuc2V0R2FtZU92ZXJNZXNzYWdlQ3ZDKCdwbGF5ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdBbGwgY29tcHV0ZXIgc2hpcHMgYXJlIHN1bmsuIEh1bWFuIHBsYXllciB3b24hJyk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHVtYW5HYW1lYm9hcmQuYWxsU3VuayhodW1hbkdhbWVib2FyZCkpIHtcbiAgICAgICAgICAgIHVpLnJlbW92ZUJvYXJkUG9pbnRlcigpO1xuICAgICAgICAgICAgaWYgKHVpLnBWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgICAgICB1aS5zZXRHYW1lT3Zlck1lc3NhZ2VQdkMoJ2NvbXB1dGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodWkuY1ZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgICAgIHVpLnNldEdhbWVPdmVyTWVzc2FnZUN2QygnY29tcHV0ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdBbGwgaHVtYW4gc2hpcHMgYXJlIHN1bmsuIENvbXB1dGVyIHBsYXllciB3b24hJyk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBjb25zdCBjb21wdXRlckFJID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBsZXQgcGxheWVyO1xuICAgICAgICBpZiAoZ2FtZWJvYXJkID09PSBodW1hbkdhbWVib2FyZCkge1xuICAgICAgICAgICAgcGxheWVyID0gY29tcHV0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZ2FtZWJvYXJkID09PSBjb21wdXRlckdhbWVib2FyZCkge1xuICAgICAgICAgICAgcGxheWVyID0gaHVtYW47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdhbWVib2FyZC5oaXRCdXROb3RTdW5rKGdhbWVib2FyZCkpIHtcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuZ2V0UHJldkhpdCgpICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgcGxheWVyLmdldExhc3RIaXQoKSAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIGdhbWVib2FyZC5nZXRDZWxsKHBsYXllci5nZXRMYXN0SGl0KCkuY29sLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLnJvdykudGFrZW5CeS5oaXRDb3VudCA+PSAyICYmXG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLmdldENlbGwocGxheWVyLmdldExhc3RIaXQoKS5jb2wsIHBsYXllci5nZXRMYXN0SGl0KCkucm93KS50YWtlbkJ5LmhpdENvdW50IDw9IDQpIHtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnRklOSVNIOiA+PSAyIHRyYWZpZW5pYSB3IHN0YXRlaycsIHBsYXllci5nZXRQcmV2SGl0KCkpO1xuICAgICAgICAgICAgICAgIHBsYXllci5maW5pc2hpbmdBdHRhY2soZ2FtZWJvYXJkLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLmNvbCwgcGxheWVyLmdldExhc3RIaXQoKS5yb3csIHBsYXllci5nZXRQcmV2SGl0KCkpO1xuICAgICAgICAgICAgICAgIGdhbWVib2FyZC5zaW5rU2hpcChnYW1lYm9hcmQsIHBsYXllci5nZXRMYXN0SGl0KCkuY29sLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLnJvdyk7XG4gICAgICAgICAgICAgICAgaWYgKGlzR2FtZU92ZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZ2FtZWJvYXJkLmdldENlbGwocGxheWVyLmdldExhc3RIaXQoKS5jb2wsIHBsYXllci5nZXRMYXN0SGl0KCkucm93KS50YWtlbkJ5LmhpdENvdW50ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLmZvbGxvd3VwQXR0YWNrKGdhbWVib2FyZCwgcGxheWVyLmdldExhc3RIaXQoKS5jb2wsIHBsYXllci5nZXRMYXN0SGl0KCkucm93KTtcbiAgICAgICAgICAgICAgICBnYW1lYm9hcmQuc2lua1NoaXAoZ2FtZWJvYXJkLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLmNvbCwgcGxheWVyLmdldExhc3RIaXQoKS5yb3cpO1xuICAgICAgICAgICAgICAgIGlmIChpc0dhbWVPdmVyKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHsgY29sLCByb3cgfSA9IHBsYXllci5yYW5kb21BdHRhY2soZ2FtZWJvYXJkKTtcbiAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIHJvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgIHBsYXllci5zZXRQcmV2SGl0KHBsYXllci5nZXRMYXN0SGl0KCkpO1xuICAgICAgICAgICAgICAgIHBsYXllci5zZXRMYXN0SGl0KHsgY29sLCByb3cgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpLnN0YXR1cyA9PT0gJ2hpdCcgJiYgZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpLnRha2VuQnkuaXNTdW5rKCkpIHtcbiAgICAgICAgICAgICAgICBnYW1lYm9hcmQuc2lua1NoaXAoZ2FtZWJvYXJkLCBjb2wsIHJvdyk7XG4gICAgICAgICAgICAgICAgcGxheWVyLnNldFByZXZIaXQobnVsbCk7XG4gICAgICAgICAgICAgICAgcGxheWVyLnNldExhc3RIaXQobnVsbCk7XG4gICAgICAgICAgICAgICAgaWYgKGlzR2FtZU92ZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBwbGF5ZXJWc0NvbXB1dGVyTW9kZSA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBsZXQgaXNQbGF5ZXJUdXJuID0gdHJ1ZTtcbiAgICAgICAgd2hpbGUgKCFpc0dhbWVPdmVyKCkgJiYgIWlzU3RvcHBlZCkge1xuICAgICAgICAgICAgaWYgKGlzUGxheWVyVHVybikge1xuICAgICAgICAgICAgICAgIHVpLnNldFR1cm5NZXNzYWdlUHZDKGlzUGxheWVyVHVybik7XG4gICAgICAgICAgICAgICAgdWkuc2V0Qm9hcmRQb2ludGVyKCdwbGF5ZXInKTtcbiAgICAgICAgICAgICAgICB1aS53YWl0aW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGNvbCwgcm93IH0gPSB5aWVsZCB1aS5oYW5kbGVVc2VySW5wdXQoKTtcbiAgICAgICAgICAgICAgICBodW1hbi5hdHRhY2soY29tcHV0ZXJHYW1lYm9hcmQsIGNvbCwgcm93KTtcbiAgICAgICAgICAgICAgICBjb21wdXRlckdhbWVib2FyZC5zaW5rU2hpcChjb21wdXRlckdhbWVib2FyZCwgY29sLCByb3cpO1xuICAgICAgICAgICAgICAgIHVpLnJlZnJlc2hCb2FyZChjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgaXNQbGF5ZXJUdXJuID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNHYW1lT3ZlcigpIHx8IGlzU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc1BsYXllclR1cm4pIHtcbiAgICAgICAgICAgICAgICB1aS5zZXRUdXJuTWVzc2FnZVB2Qyhpc1BsYXllclR1cm4pO1xuICAgICAgICAgICAgICAgIHVpLnNldEJvYXJkUG9pbnRlcignY29tcHV0ZXInKTtcbiAgICAgICAgICAgICAgICB1aS53YWl0aW5nKHRydWUpO1xuICAgICAgICAgICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIHVpLmdldFNwZWVkVmFsdWUoKSkpO1xuICAgICAgICAgICAgICAgIGlmICghdWkucFZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSB8fCBpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbXB1dGVyQUkoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgIHVpLnJlZnJlc2hCb2FyZChodW1hbkdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgaXNQbGF5ZXJUdXJuID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgdWkud2FpdGluZyhmYWxzZSk7XG4gICAgfSk7XG4gICAgY29uc3QgY29tcHV0ZXJWc0NvbXB1dGVyTW9kZSA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICB1aS5yZW1vdmVCb2FyZFBvaW50ZXIoKTtcbiAgICAgICAgbGV0IGlzUGxheWVyVHVybiA9IHRydWU7XG4gICAgICAgIHdoaWxlICghaXNHYW1lT3ZlcigpICYmICFpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHVpLndhaXRpbmcodHJ1ZSk7XG4gICAgICAgICAgICBpZiAoaXNQbGF5ZXJUdXJuKSB7XG4gICAgICAgICAgICAgICAgdWkuc2V0VHVybk1lc3NhZ2VDdkMoaXNQbGF5ZXJUdXJuKTtcbiAgICAgICAgICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCB1aS5nZXRTcGVlZFZhbHVlKCkpKTtcbiAgICAgICAgICAgICAgICBpZiAoIXVpLmNWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykgfHwgaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb21wdXRlckFJKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgICAgICAgICB1aS5yZWZyZXNoQm9hcmQoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgIGlzUGxheWVyVHVybiA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzR2FtZU92ZXIoKSB8fCBpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNQbGF5ZXJUdXJuKSB7XG4gICAgICAgICAgICAgICAgdWkuc2V0VHVybk1lc3NhZ2VDdkMoaXNQbGF5ZXJUdXJuKTtcbiAgICAgICAgICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCB1aS5nZXRTcGVlZFZhbHVlKCkpKTtcbiAgICAgICAgICAgICAgICBpZiAoIXVpLmNWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykgfHwgaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb21wdXRlckFJKGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgICAgICAgICB1aS5yZWZyZXNoQm9hcmQoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgIGlzUGxheWVyVHVybiA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHVpLndhaXRpbmcoZmFsc2UpO1xuICAgIH0pO1xuICAgIGNvbnN0IHJhbmRvbVBsYWNlbWVudCA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgbGV0IGFsbFNoaXBzO1xuICAgICAgICBpZiAoZ2FtZWJvYXJkID09PSBodW1hbkdhbWVib2FyZCkge1xuICAgICAgICAgICAgaHVtYW5DYXJyaWVyID0gc2hpcEZhY3RvcnkoJ0NhcnJpZXInKTtcbiAgICAgICAgICAgIGh1bWFuQmF0dGxlc2hpcCA9IHNoaXBGYWN0b3J5KCdCYXR0bGVzaGlwJyk7XG4gICAgICAgICAgICBodW1hbkRlc3Ryb3llciA9IHNoaXBGYWN0b3J5KCdEZXN0cm95ZXInKTtcbiAgICAgICAgICAgIGh1bWFuU3VibWFyaW5lID0gc2hpcEZhY3RvcnkoJ1N1Ym1hcmluZScpO1xuICAgICAgICAgICAgaHVtYW5QYXRyb2xib2F0ID0gc2hpcEZhY3RvcnkoJ1BhdHJvbEJvYXQnKTtcbiAgICAgICAgICAgIGFsbFNoaXBzID0gW2h1bWFuQ2FycmllciwgaHVtYW5CYXR0bGVzaGlwLCBodW1hbkRlc3Ryb3llciwgaHVtYW5TdWJtYXJpbmUsIGh1bWFuUGF0cm9sYm9hdF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZ2FtZWJvYXJkID09PSBjb21wdXRlckdhbWVib2FyZCkge1xuICAgICAgICAgICAgY29uc3QgY29tcHV0ZXJDYXJyaWVyID0gc2hpcEZhY3RvcnkoJ0NhcnJpZXInKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVyQmF0dGxlc2hpcCA9IHNoaXBGYWN0b3J5KCdCYXR0bGVzaGlwJyk7XG4gICAgICAgICAgICBjb25zdCBjb21wdXRlckRlc3Ryb3llciA9IHNoaXBGYWN0b3J5KCdEZXN0cm95ZXInKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVyU3VibWFyaW5lID0gc2hpcEZhY3RvcnkoJ1N1Ym1hcmluZScpO1xuICAgICAgICAgICAgY29uc3QgY29tcHV0ZXJQYXRyb2xib2F0ID0gc2hpcEZhY3RvcnkoJ1BhdHJvbEJvYXQnKTtcbiAgICAgICAgICAgIGFsbFNoaXBzID0gW2NvbXB1dGVyQ2FycmllciwgY29tcHV0ZXJCYXR0bGVzaGlwLCBjb21wdXRlckRlc3Ryb3llciwgY29tcHV0ZXJTdWJtYXJpbmUsIGNvbXB1dGVyUGF0cm9sYm9hdF07XG4gICAgICAgIH1cbiAgICAgICAgY29udHJvbGxlci5odW1hblNoaXBzLmxlbmd0aCA9IDA7XG4gICAgICAgIGNvbnN0IGNvbHMgPSBbJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onXTtcbiAgICAgICAgY29uc3QgcmFuZG9tQ29sID0gKCkgPT4gY29sc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb2xzLmxlbmd0aCldO1xuICAgICAgICBjb25zdCByYW5kb21Sb3cgPSAoKSA9PiBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIDEwKS50b1N0cmluZygpO1xuICAgICAgICBjb25zdCByYW5kb21PcmllbnRhdGlvbiA9ICgpID0+IChNYXRoLnJhbmRvbSgpID4gMC41ID8gJ2hvcml6b250YWwnIDogJ3ZlcnRpY2FsJyk7XG4gICAgICAgIGFsbFNoaXBzLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgICAgIGxldCBjb2wgPSByYW5kb21Db2woKTtcbiAgICAgICAgICAgIGxldCByb3cgPSByYW5kb21Sb3coKTtcbiAgICAgICAgICAgIGxldCBvcmllbnRhdGlvbiA9IHJhbmRvbU9yaWVudGF0aW9uKCk7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gZ2FtZWJvYXJkLmNhbkJlUGxhY2VkKHNoaXAuc2l6ZSwgY29sLCByb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgIHdoaWxlICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgY29sID0gcmFuZG9tQ29sKCk7XG4gICAgICAgICAgICAgICAgcm93ID0gcmFuZG9tUm93KCk7XG4gICAgICAgICAgICAgICAgb3JpZW50YXRpb24gPSByYW5kb21PcmllbnRhdGlvbigpO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGdhbWVib2FyZC5jYW5CZVBsYWNlZChzaGlwLnNpemUsIGNvbCwgcm93LCBvcmllbnRhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwLCBjb2wsIHJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICAgICAgICAgIGdhbWVib2FyZC5yZXNlcnZlU3BhY2UoZ2FtZWJvYXJkLCBjb2wsIHJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250cm9sbGVyLmh1bWFuU2hpcHMucHVzaChzaGlwKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCByYW5kb21pemVTaGlwc1BsYWNlbWVudCA9IChnYW1lYm9hcmROYW1lLCBnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgZ2FtZWJvYXJkLmNsZWFyQm9hcmQoKTtcbiAgICAgICAgcmFuZG9tUGxhY2VtZW50KGdhbWVib2FyZCk7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChnYW1lYm9hcmQpO1xuICAgICAgICBpZiAoZ2FtZWJvYXJkTmFtZSA9PT0gJ2ZpcnN0Jykge1xuICAgICAgICAgICAgdWkuY3JlYXRlU2hpcE92ZXJsYXkoJ2ZpcnN0JywgZ2FtZWJvYXJkLnNoaXBzUGxhY2VkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcmVzZXRPcmllbnRhdGlvbiA9ICgpID0+IHtcbiAgICAgICAgaHVtYW5TaGlwcy5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBpZiAoc2hpcC5pc1ZlcnRpY2FsID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgc2hpcC5pc1ZlcnRpY2FsID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgcGlja0dhbWVNb2RlID0gKCkgPT4ge1xuICAgICAgICBpZiAodWkuY1ZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgcmFuZG9taXplU2hpcHNQbGFjZW1lbnQoJ2ZpcnN0JywgaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICAgICAgcmFuZG9taXplU2hpcHNQbGFjZW1lbnQoJ3NlY29uZCcsIGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgICAgIGlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgY29tcHV0ZXJWc0NvbXB1dGVyTW9kZSgpO1xuICAgICAgICAgICAgdWkucmVmcmVzaEJvYXJkKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc3RhcnQgPSAoKSA9PiB7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChodW1hbkdhbWVib2FyZCk7XG4gICAgICAgIHJhbmRvbWl6ZVNoaXBzUGxhY2VtZW50KCdzZWNvbmQnLCBjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIGlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICBwbGF5ZXJWc0NvbXB1dGVyTW9kZSgpO1xuICAgIH07XG4gICAgY29uc3QgcmVzdGFydCA9ICgpID0+IHtcbiAgICAgICAgaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgaHVtYW4uc2V0UHJldkhpdChudWxsKTtcbiAgICAgICAgaHVtYW4uc2V0TGFzdEhpdChudWxsKTtcbiAgICAgICAgY29tcHV0ZXIuc2V0UHJldkhpdChudWxsKTtcbiAgICAgICAgY29tcHV0ZXIuc2V0TGFzdEhpdChudWxsKTtcbiAgICAgICAgaHVtYW5HYW1lYm9hcmQuY2xlYXJCb2FyZCgpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5jbGVhckJvYXJkKCk7XG4gICAgICAgIHBvcHVsYXRlU2hpcHMoKTtcbiAgICAgICAgdWkucmVmcmVzaEJvYXJkKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgdWkucmVmcmVzaEJvYXJkKGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgdWkuY3JlYXRlU2hpcE92ZXJsYXkoJ3NlY29uZCcsIGNvbXB1dGVyR2FtZWJvYXJkLnNoaXBzUGxhY2VkKTtcbiAgICAgICAgdWkuZHJhZ0FuZERyb3AoaHVtYW5HYW1lYm9hcmQsIGNvbXB1dGVyR2FtZWJvYXJkLCBodW1hblNoaXBzKTtcbiAgICAgICAgdWkuY2FuQmVTdGFydGVkKCk7XG4gICAgICAgIHBpY2tHYW1lTW9kZSgpO1xuICAgICAgICByZXNldE9yaWVudGF0aW9uKCk7XG4gICAgfTtcbiAgICBjb25zdCBuZXdHYW1lID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIHVpLmdldFNwZWVkVmFsdWUoKSkpO1xuICAgICAgICBpc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgcmVzdGFydCgpO1xuICAgIH0pO1xuICAgIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgICAgIHVpLnNldEluaXRNZXNzYWdlKCk7XG4gICAgICAgIHVpLnJlbmRlckJvYXJkKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgdWkucmVuZGVyQm9hcmQoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICBwb3B1bGF0ZVNoaXBzKCk7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIHVpLmNyZWF0ZVNoaXBPdmVybGF5KCdzZWNvbmQnLCBjb21wdXRlckdhbWVib2FyZC5zaGlwc1BsYWNlZCk7XG4gICAgICAgIHVpLmRyYWdBbmREcm9wKGh1bWFuR2FtZWJvYXJkLCBjb21wdXRlckdhbWVib2FyZCwgaHVtYW5TaGlwcyk7XG4gICAgICAgIHVpLmNhbkJlU3RhcnRlZCgpO1xuICAgICAgICBwaWNrR2FtZU1vZGUoKTtcbiAgICAgICAgdWkudW5GaWxsQ2VsbHMoJ2ZpcnN0Jyk7XG4gICAgICAgIHVpLnBWY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfTtcbiAgICByZXR1cm4geyBpbml0LCBodW1hbkdhbWVib2FyZCwgY29tcHV0ZXJHYW1lYm9hcmQsIHJlc3RhcnQsIG5ld0dhbWUsIHN0YXJ0LCByYW5kb21pemVTaGlwc1BsYWNlbWVudCwgaHVtYW5TaGlwcyB9O1xufSkoKTtcbmV4cG9ydCBkZWZhdWx0IGNvbnRyb2xsZXI7XG4iLCJpbXBvcnQgJ25vcm1hbGl6ZS5jc3MnO1xuaW1wb3J0ICcuL3N0eWxlL3N0eWxlLmNzcyc7XG5pbXBvcnQgY29udHJvbGxlciBmcm9tICcuL21vZHVsZXMvY29udHJvbGxlcic7XG5jb250cm9sbGVyLmluaXQoKTtcbiJdLCJuYW1lcyI6WyJjb2xzIiwicm93cyIsImFycmF5Iiwic2hpcHNQbGFjZWQiLCJnZXRDZWxsIiwiY29sIiwicm93IiwiY29sSW5kZXgiLCJpbmRleE9mIiwicm93SW5kZXgiLCJzZXRDZWxsIiwibmV3U3RhdHVzIiwibmV3VGFrZW5CeSIsInN0YXR1cyIsInRha2VuQnkiLCJpIiwiaiIsImdlbmVyYXRlQXJyYXkiLCJjbGVhckJvYXJkIiwidW5kZWZpbmVkIiwibGVuZ3RoIiwicmVtb3ZlU2hpcCIsInNoaXAiLCJnYW1lYm9hcmQiLCJmbGF0IiwiZm9yRWFjaCIsImNlbGwiLCJib2FyZElkIiwibmFtZSIsInNwbGljZSIsImh1bWFuR2FtZWJvYXJkIiwiY29tcHV0ZXJHYW1lYm9hcmQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImdldEF0dHJpYnV0ZSIsInRvTG93ZXJDYXNlIiwicmVtb3ZlIiwiYWRkIiwicmVtb3ZlQXR0cmlidXRlIiwicGxhY2VTaGlwIiwib3JpZW50YXRpb24iLCJpc1ZlcnRpY2FsIiwiaXNIb3Jpem9udGFsIiwiY2VsbHMiLCJzdGFydCIsInNoaXBDZWxscyIsInNpemUiLCJjdXJyZW50Q29sIiwiY3VycmVudFJvdyIsInB1c2giLCJyZWNlaXZlQXR0YWNrIiwiaGl0IiwicmVjZWl2ZUFyb3VuZCIsInJlc2VydmVTcGFjZSIsImZpbHRlciIsImMiLCJkaXJlY3Rpb24iLCJuZXdDb2wiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjaGFyQ29kZUF0IiwibmV3Um93IiwiTnVtYmVyIiwidG9TdHJpbmciLCJoaXRCdXROb3RTdW5rIiwic29tZSIsImlzU3VuayIsInNpbmtTaGlwIiwiYWxsU3VuayIsInRha2VuQnlDZWxscyIsImV2ZXJ5IiwiY2FuQmVQbGFjZWQiLCJhcmVFbXB0eSIsIml0ZW0iLCJyZW1vdmVSZXNlcnZlZFNwYWNlIiwiaGl0Q291bnQiLCJyb3RhdGUiLCJ0aGlzIiwicHJldkhpdCIsImxhc3RIaXQiLCJyYW5nZSIsImdvUmlnaHQiLCJnb0Rvd24iLCJmaW5pc2hpbmdBdHRhY2siLCJzZXRQcmV2SGl0Iiwic2V0TGFzdEhpdCIsIm5ld1ByZXZIaXQiLCJuZXdMYXN0SGl0IiwiYXR0YWNrIiwicmVzdWx0IiwicmFuZG9tQXR0YWNrIiwicmFuZG9tQ29sIiwicmFuZG9tUm93IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY2VpbCIsImZvbGxvd3VwQXR0YWNrIiwidmFsaWREaXJlY3Rpb25zIiwicmFuZG9tRGlyZWN0aW9uIiwiZ2V0UHJldkhpdCIsImdldExhc3RIaXQiLCJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInZhbHVlIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJkb25lIiwidGhlbiIsImFwcGx5IiwiZHJhZ0FuZERyb3AiLCJmaXJzdEdhbWVib2FyZCIsInNlY29uZEdhbWVib2FyZCIsInNoaXBzIiwic2hpcE5hbWUiLCJzaGlwU2l6ZSIsInNoaXBPYmoiLCJncmFiUG9pbnRYIiwiZ3JhYlBvaW50WSIsImhpZ2hsaWdodGVkQ2VsbHMiLCJzaGlwTmFtZVRvT2JqIiwiY2FycmllciIsImJhdHRsZXNoaXAiLCJkZXN0cm95ZXIiLCJzdWJtYXJpbmUiLCJwYXRyb2xib2F0IiwiZmlyc3RCb2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2Vjb25kQm9hcmRFbGVtZW50IiwiZmlyc3RCb2FyZENlbGxzIiwic2Vjb25kQm9hcmRDZWxscyIsIm5vblNoaXBDZWxscyIsImRyYWdnYWJsZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVNb3VzZWRvd24iLCJoYW5kbGVNb3VzZXVwIiwiaGFuZGxlRHJhZ1N0YXJ0IiwiaGFuZGxlRHJhZ0VuZCIsImhhbmRsZVJvdGF0ZSIsImJsb2NrUmlnaHRDbGljayIsImxhc3REcmFnZ2VkIiwidGFyZ2V0U2hpcE5hbWUiLCJ0YXJnZXQiLCJ1cGRhdGVkU2hpcHNQbGFjZWRGaXJzdCIsInVwZGF0ZWRTaGlwc1BsYWNlZFRlbXAiLCJyZWZyZXNoQm9hcmQiLCJjcmVhdGVTaGlwT3ZlcmxheSIsImh1bWFuU2hpcHMiLCJzZXRUaW1lb3V0Iiwic3R5bGUiLCJ2aXNpYmlsaXR5Iiwib2Zmc2V0WCIsIm9mZnNldFkiLCJjbG9zZXN0IiwiaWQiLCJoYW5kbGVEcmFnT3ZlciIsImluZGV4IiwicHJldmVudERlZmF1bHQiLCJzdGFydENlbGwiLCJvZmZzZXRIZWlnaHQiLCJvZmZzZXRXaWR0aCIsInRvSGlnaGxpZ2h0IiwiY2VsbEluZGV4IiwiaXNWYWxpZFBsYWNlbWVudCIsImdldExhc3RTaGlwU2l6ZUVsZW1lbnRzIiwiaGFuZGxlRHJhZ0xlYXZlIiwiaGlnaGxpZ2h0ZWRDZWxsIiwiaGFuZGxlRHJvcCIsImxhc3QiLCJkYXRhc2V0IiwiY2FuQmVTdGFydGVkIiwic2V0U3RhcnRNZXNzYWdlIiwic2xpY2UiLCJtaW4iLCJ0ZW1wU2hpcCIsImN1cnJlbnQiLCJ1aSIsInN0YXR1c0JveCIsImJvYXJkcyIsInBWY0J0biIsIm5ld0dhbWVCdG4iLCJjVmNCdG4iLCJzdGFydEJ0biIsInJhbmRvbUJ0biIsImFsbEJ0bnMiLCJzcGVlZHMiLCJnZXRFbGVtZW50c0J5TmFtZSIsInJlbmRlckNlbGxzIiwiYm9hcmQiLCJlbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImNyZWF0ZUNlbGwiLCJhcHBlbmQiLCJpbm5lckhUTUwiLCJnZXRVc2VySW5wdXQiLCJoYW5kbGVHYW1lTW9kZSIsInNlbGVjdGVkRWxlbWVudCIsImRlc2VsZWN0ZWRFbGVtZW50IiwiZmlsbENlbGxzIiwid2FpdGluZyIsImJ0biIsImRpc2FibGVkIiwiZ2V0U3BlZWRWYWx1ZSIsInNldEluaXRNZXNzYWdlIiwicmVzdGFydCIsInNldFJlc3RhcnRNZXNzYWdlIiwiYm9vbCIsImRvY3VtZW50RWxlbWVudCIsInRvZ2dsZSIsInRleHRDb250ZW50Iiwid2luZG93IiwibWF0Y2hNZWRpYSIsIm1hdGNoZXMiLCJ1bkZpbGxDZWxscyIsInNlY29uZCIsImFsbCIsInJlbW92ZUJvYXJkUG9pbnRlciIsIm5ld0dhbWUiLCJyYW5kb21pemVTaGlwc1BsYWNlbWVudCIsInNwZWVkVmFsdWUiLCJzcGVlZCIsImlucHV0IiwiY2hlY2tlZCIsInJlbmRlckJvYXJkIiwiaGFuZGxlVXNlcklucHV0IiwidXNlcklucHV0Iiwib25jZSIsInNldEJvYXJkUG9pbnRlciIsIndoaWNoIiwiZ2FtZWJvYXJkTmFtZSIsImZpcnN0Q2VsbCIsInNoaXBFbGVtZW50Iiwic2V0U2hpcFN0eWxlIiwiaHRtbEVsZW1lbnQiLCJyb290Rm9udFNpemUiLCJwYXJzZUZsb2F0IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImdldFByb3BlcnR5VmFsdWUiLCJ3aWR0aCIsImNlbGxTaXplIiwiaGVpZ2h0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiYXBwZW5kQ2hpbGQiLCJzZXRUdXJuTWVzc2FnZVB2QyIsImlzUGxheWVyVHVybiIsInNldFR1cm5NZXNzYWdlQ3ZDIiwic2V0R2FtZU92ZXJNZXNzYWdlUHZDIiwid2hvIiwic2V0R2FtZU92ZXJNZXNzYWdlQ3ZDIiwiY29udHJvbGxlciIsImh1bWFuIiwicGxheWVyIiwiY29tcHV0ZXIiLCJpc1N0b3BwZWQiLCJodW1hbkNhcnJpZXIiLCJodW1hbkJhdHRsZXNoaXAiLCJodW1hbkRlc3Ryb3llciIsImh1bWFuU3VibWFyaW5lIiwiaHVtYW5QYXRyb2xib2F0IiwicG9wdWxhdGVTaGlwcyIsImlzR2FtZU92ZXIiLCJjb21wdXRlckFJIiwiYWxsU2hpcHMiLCJyYW5kb21PcmllbnRhdGlvbiIsInJhbmRvbVBsYWNlbWVudCIsInBpY2tHYW1lTW9kZSIsImluaXQiXSwic291cmNlUm9vdCI6IiJ9