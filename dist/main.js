(()=>{"use strict";const e=()=>{const e=["A","B","C","D","E","F","G","H","I","J"],t=["1","2","3","4","5","6","7","8","9","10"],r=[],a=[],s=(a,s)=>{const o=e.indexOf(a),n=t.indexOf(s);return-1===o||-1===n?null:r[n][o]},o=(a,s,o,n)=>{const i=e.indexOf(a),l=t.indexOf(s);return-1===i||-1===l?null:(r[l][i].status=o,n&&(r[l][i].takenBy=n),r[l][i])};return{generateArray:()=>{for(let a=0;a<10;a+=1){r[a]=[];for(let s=0;s<10;s+=1)r[a][s]={col:e[s],row:t[a],status:"empty",takenBy:null}}},clearBoard:()=>{r.flat().forEach((e=>{e.status="empty",e.takenBy=void 0})),a.length=0},getCell:s,setCell:o,removeShip:(e,t)=>{t.array.flat().forEach((t=>{"taken"===t.status&&t.takenBy.name===e.name&&(t.status="empty",t.takenBy=null);const r=a.indexOf(t);null===t.takenBy&&-1!==r&&a.splice(r,1)}))},placeShip:(r,n,i,l)=>{const c="horizontal"===l,d=c?e:t,u=d.indexOf(c?n:i);r.isVertical="horizontal"!==l;let h=[];if(u<0||u+r.size>d.length)return!1;for(let e=0;e<r.size;e+=1){const t=c?d[u+e]:n,a=c?i:d[u+e];if("empty"!==s(t,a).status)return!1;o(t,a,"taken",r),h.push(s(t,a))}return a.push(h[0]),!0},receiveAttack:(e,t)=>{const r=s(e,t);return"taken"===r.status?(r.takenBy.hit(),o(e,t,"hit"),r.status):"empty"===r.status||"reserved"===r.status?(o(e,t,"miss"),r.status):null},receiveAround:(e,t)=>{const r=s(e,t);return"empty"===r.status?(o(e,t,"reserved"),r.status):null},reserveSpace:(e,t,r)=>{const a=e.getCell(t,r);if(a&&a.takenBy){e.array.flat().filter((e=>e.takenBy&&e.takenBy.name===a.takenBy.name)).forEach((t=>{[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0},{col:-1,row:-1},{col:-1,row:1},{col:1,row:-1},{col:1,row:1}].forEach((r=>{const a=String.fromCharCode(t.col.charCodeAt(0)+r.col),s=(Number(t.row)+r.row).toString();e.getCell(a,s)&&e.receiveAround(a,s)}))}))}},reserveSpaceForAll:function(e){e.shipsPlaced.forEach((t=>{e.reserveSpace(e,t.col,t.row)}))},hitButNotSunk:e=>e.array.flat().some((e=>"hit"===e.status&&!1===e.takenBy.isSunk())),sinkShip:(e,t,r)=>{const a=e.getCell(t,r);if(a&&a.takenBy&&a.takenBy.isSunk()){e.array.flat().filter((e=>e.takenBy&&e.takenBy.name===a.takenBy.name)).forEach((t=>{[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0},{col:-1,row:-1},{col:-1,row:1},{col:1,row:-1},{col:1,row:1}].forEach((r=>{const a=String.fromCharCode(t.col.charCodeAt(0)+r.col),s=(Number(t.row)+r.row).toString();e.getCell(a,s)&&e.receiveAttack(a,s)}))}))}},allSunk:e=>{let t=e.array.flat().filter((e=>e.takenBy));return!!(t.length>0&&t.every((e=>e.takenBy.isSunk())))},array:r,canBePlaced:(r,a,o,n)=>{const i="horizontal"===n,l=i?e:t,c=l.indexOf(i?a:o);if(c<0||c+r>l.length)return!1;const d=[];for(let e=0;e<r;e+=1){const t=i?l[c+e]:a,r=i?o:l[c+e];d.push("empty"===s(t,r).status)}return d.every((e=>!0===e))},shipsPlaced:a,removeReservedSpace:e=>{e.array.flat().forEach((e=>{"reserved"===e.status&&o(e.col,e.row,"empty")}))}}},t=e=>{let t;return"Carrier"===e&&(t=5),"Battleship"===e&&(t=4),"Destroyer"===e&&(t=3),"Submarine"===e&&(t=3),"PatrolBoat"===e&&(t=2),{name:e,size:t,hitCount:0,isVertical:!1,rotate(){this.isVertical=!this.isVertical},hit(){this.hitCount+=1},isSunk(){return this.hitCount===t}}},r=()=>{const e=["A","B","C","D","E","F","G","H","I","J"];let t=null,r=null,a=1,s=!0,o=!0;const n=(e,t,c,d)=>{if(d.row===c)if(s){a=1;let o=String.fromCharCode(t.charCodeAt(0)+a);for(;e.getCell(o,c)&&"hit"===e.getCell(o,c).status;)a+=1,o=String.fromCharCode(t.charCodeAt(0)+a);e.getCell(o,c)&&"hit"!==e.getCell(o,c).status&&"miss"!==e.getCell(o,c).status?(e.receiveAttack(o,c),"hit"===e.getCell(o,c).status&&(i(r),l({col:o,row:c})),a+=1):(a=1,s=!1,n(e,o,c,d))}else{a=1;let o=String.fromCharCode(t.charCodeAt(0)-a);for(;e.getCell(o,c)&&"hit"===e.getCell(o,c).status;)a+=1,o=String.fromCharCode(t.charCodeAt(0)-a);e.getCell(o,c)&&"hit"!==e.getCell(o,c).status&&"miss"!==e.getCell(o,c).status?(e.receiveAttack(o,c),"hit"===e.getCell(o,c).status&&(i(r),l({col:o,row:c})),a+=1):(a=1,s=!0,n(e,o,c,d))}else if(d.col===t)if(o){a=1;let s=(Number(c)+a).toString();for(;e.getCell(t,s)&&"hit"===e.getCell(t,s).status;)a+=1,s=(Number(c)+a).toString();e.getCell(t,s)&&"hit"!==e.getCell(t,s).status&&"miss"!==e.getCell(t,s).status?(e.receiveAttack(t,s),"hit"===e.getCell(t,s).status&&(i(r),l({col:t,row:s})),a+=1):(a=1,o=!1,n(e,t,s,d))}else{a=1;let s=(Number(c)-a).toString();for(;e.getCell(t,s)&&"hit"===e.getCell(t,s).status;)a+=1,s=(Number(c)-a).toString();e.getCell(t,s)&&"hit"!==e.getCell(t,s).status&&"miss"!==e.getCell(t,s).status?(e.receiveAttack(t,s),"hit"===e.getCell(t,s).status&&(i(r),l({col:t,row:s})),a+=1):(a=1,o=!0,n(e,t,s,d))}},i=e=>{t=e},l=e=>{r=e};return{attack:(e,t,a)=>{if("hit"!==e.getCell(t,a).status&&"miss"!==e.getCell(t,a).status){let s=e.receiveAttack(t,a);return"hit"===s&&(i(r),l({col:t,row:a})),s}return"already shot"},randomAttack:t=>{let a,s;do{a=e[Math.floor(Math.random()*e.length)],s=Math.ceil(10*Math.random()).toString()}while("hit"===t.getCell(a,s).status||"miss"===t.getCell(a,s).status);if("hit"!==t.getCell(a,s).status&&"miss"!==t.getCell(a,s).status){const e=t.receiveAttack(a,s);return"hit"===t.getCell(a,s).status&&(i(r),l({col:a,row:s})),{result:e,col:a,row:s}}return{result:"already shot",col:a,row:s}},followupAttack:(e,t,s)=>{const o=[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0}].filter((r=>{const a=String.fromCharCode(t.charCodeAt(0)+r.col),o=(Number(s)+r.row).toString(),n=e.getCell(a,o);return!(!n||"miss"===n.status||"hit"===n.status)}));if(o.length>0){const n=o[Math.floor(Math.random()*o.length)],c=String.fromCharCode(t.charCodeAt(0)+n.col),d=(Number(s)+n.row).toString();e.receiveAttack(c,d),a=1,"hit"===e.getCell(c,d).status&&(i(r),l({col:c,row:d}))}},finishingAttack:n,prevHit:t,lastHit:r,getPrevHit:()=>t,getLastHit:()=>r,setPrevHit:i,setLastHit:l}};var a=function(e,t,r,a){return new(r||(r=Promise))((function(s,o){function n(e){try{l(a.next(e))}catch(e){o(e)}}function i(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(n,i)}l((a=a.apply(e,t||[])).next())}))};const s=(e,t,r)=>{const s=document.querySelector("#firstBoard"),o=document.querySelector("#secondBoard"),n=s.querySelectorAll(".cell"),l=o.querySelectorAll(".cell");let c,u,h,m,f=0,g=0,v=[];const p={carrier:r[0],battleship:r[1],destroyer:r[2],submarine:r[3],patrolboat:r[4]};let y=null;const S=document.querySelectorAll(".draggable");function w(e){return Array.from(e).filter((e=>!e.classList.contains("taken")))}const C=[...w(n),...w(l)];function B(e,t){return e.slice(Math.min(e.length-t,0))}function b(r){const a=r.target;let s;const o=a.closest(".board").id;return"firstBoard"===o&&(s=e),"secondBoard"===o&&(s=t),{target:a,gameboard:s}}function L(e,t){return c=t.getAttribute("data-name"),u=Number(t.getAttribute("data-size")),f=e.offsetX,g=e.offsetY,h=p[c],m=h.isVertical?"vertical":"horizontal",{shipName:c,shipObj:h}}function k(){v.forEach((e=>e.classList.remove("highlight")))}function A(e){return"firstBoard"===e||"secondBoard"===e}function P(e){const{gameboard:t}=b(e);t.removeReservedSpace(t),function(e,t){const{target:r}=b(t),a=r.getAttribute("data-name");let s=e.shipsPlaced.filter((e=>a!==e.takenBy.name.toLowerCase()));s.forEach((t=>{e.reserveSpace(e,t.col,t.row)}))}(t,e),d.renew(),i.setInitMessage()}function E(e){return a(this,void 0,void 0,(function*(){yield new Promise((e=>setTimeout(e,0)));const{target:t,gameboard:r}=b(e);t.style.visibility="hidden",L(e,t),r.removeShip(h,r),i.clearShip(h,r)}))}function H(e){return function(t){const{target:r}=b(t),a=r.closest(".board").id;if(A(a)&&(t.preventDefault(),h)){const r=function(e,t,r){const{target:a}=b(r);return e-(t.isVertical?10*Math.floor(g/a.offsetHeight):Math.floor(f/a.offsetWidth))}(e,h,t),s=function(e){return"firstBoard"===e?n:l}(a),o=[];!function(e,t,r,a){for(let s=0;s<u;s++){let o=e.isVertical?t+10*s:t+s;r[o]&&(a.push(r[o]),v.push(r[o]))}}(h,r,s,o),function(e){return e.every((e=>e.classList.contains("empty")))&&(e.every((t=>t.dataset.col===e[0].dataset.col))||e.every((t=>t.dataset.row===e[0].dataset.row)))&&e.length===u&&e.every((e=>e.dataset.col>="A"&&e.dataset.col<="J"))&&e.every((e=>Number(e.dataset.row)>=1&&Number(e.dataset.row)<=10))}(o)&&(!function(e){e.forEach((e=>{e.classList.add("highlight")}))}(o),y||(y=B(v,u)))}}}function M(){k(),v.length=0}function V(e){k();const t=B(v,u),{target:r,gameboard:a}=b(e);A(r.closest(".board").id)&&h&&null!==y&&function(e,t,r,a){e.canBePlaced(t.size,r[0].dataset.col,r[0].dataset.row,a)?(e.placeShip(t,r[0].dataset.col,r[0].dataset.row,a),e.reserveSpace(e,r[0].dataset.col,r[0].dataset.row)):(e.placeShip(t,y[0].dataset.col,y[0].dataset.row,a),e.reserveSpace(e,y[0].dataset.col,y[0].dataset.row))}(a,h,t,m),a.removeReservedSpace(a),a.reserveSpaceForAll(a),d.renew(),i.canBeStarted(),i.setStartMessage(),y=null}function q(r){const a=r.target;a.style.visibility="visible",function(r,a){if(0===v.length){const s=r.closest(".board");if(s){let{gameboard:r}=b(a);"firstBoard"===s.id?r=e:"secondBoard"===s.id&&(r=t),r&&y&&r.canBePlaced(h.size,y[0].dataset.col,y[0].dataset.row,m)&&(r.placeShip(h,y[0].dataset.col,y[0].dataset.row,m),r.reserveSpace(r,y[0].dataset.col,y[0].dataset.row),d.renew())}}}(a,r),i.canBeStarted()&&i.fillCells("second"),i.setStartMessage()}function x(e){const{gameboard:t}=b(e);t.reserveSpaceForAll(t),d.renew(),i.setStartMessage()}function z(e){e.preventDefault();const{target:t,gameboard:r}=b(e),{shipName:a,shipObj:s}=L(e,t),o=r.shipsPlaced.filter((e=>e.takenBy.name.toLowerCase()===a));r.removeShip(s,r),r.removeReservedSpace(r),r.reserveSpaceForAll(r),s.rotate(),m=s.isVertical?"vertical":"horizontal",r.canBePlaced(s.size,o[0].col,o[0].row,m)||(s.rotate(),m=s.isVertical?"vertical":"horizontal"),r.placeShip(s,o[0].col,o[0].row,m),r.reserveSpaceForAll(r),d.renew(),i.canBeStarted()&&i.fillCells("second")}function G(e){e.preventDefault()}function O(e){e.forEach(((e,t)=>{e.addEventListener("dragover",H(t)),e.addEventListener("dragleave",M),e.addEventListener("drop",V)}))}O(n),O(l),S.forEach((e=>{e.addEventListener("mousedown",P),e.addEventListener("dragstart",E),e.addEventListener("dragend",q),e.addEventListener("mouseup",x),e.addEventListener("contextmenu",z),C.forEach((e=>e.addEventListener("contextmenu",G)))}))};var o=function(e,t,r,a){return new(r||(r=Promise))((function(s,o){function n(e){try{l(a.next(e))}catch(e){o(e)}}function i(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(n,i)}l((a=a.apply(e,t||[])).next())}))};const n=(()=>{const e=document.querySelector("#messageBox p"),t=document.querySelector("#boards"),r=document.querySelector("#playerVsComputer"),a=document.querySelector("#newGame"),n=document.querySelector("#computerVsComputer"),i=document.querySelector("#start"),l=document.querySelector("#randomPlacement"),c=[r,a,n,i,l],u=document.getElementsByName("speed");let h=1e3;const m=(e,t)=>{e.array.forEach((e=>{e.forEach((e=>{const r=(e=>{const t=document.createElement("div");return t.classList.add("cell"),t.classList.add(e.status),t.setAttribute("data-col",e.col),t.setAttribute("data-row",e.row),e.takenBy&&t.setAttribute("data-shipName",e.takenBy.name.toLowerCase()),t})(e);t.append(r)}))}))},f=e=>e===d.humanGameboard?"firstBoard":e===d.computerGameboard?"secondBoard":void 0,g=e=>{const t=document.querySelector(`#${f(e)}`);t.innerHTML="",m(e,t)},v=e=>{if(!e.target.classList.contains("hit")&&!e.target.classList.contains("miss")){return{col:e.target.getAttribute("data-col"),row:e.target.getAttribute("data-row")}}},p=(e,t)=>{t.classList.remove("selected"),e.classList.contains("selected")||(e.classList.add("selected"),e===r&&o(void 0,void 0,void 0,(function*(){k("first"),y(!0),c.forEach((e=>e.disabled=!0)),yield new Promise((e=>setTimeout(e,E()))),c.forEach((e=>e.disabled=!1)),y(!1),C(),B()})),e===n&&o(void 0,void 0,void 0,(function*(){y(!0),c.forEach((e=>e.disabled=!0)),yield new Promise((e=>setTimeout(e,E()))),c.forEach((e=>e.disabled=!1)),y(!1),i.disabled=!0,l.disabled=!0,n.disabled=!0})),d.restart(),L())},y=e=>{document.documentElement.classList.toggle("wait",e)},S=()=>{document.querySelector("#secondBoard").classList.remove("boardOutline")},w=(e,t,r,a)=>{const s=document.querySelector("html"),o=parseFloat(window.getComputedStyle(s,null).getPropertyValue("font-size"));a?(e.style.width=r/o+"rem",e.style.height=t*(r/o)+"rem"):(e.style.width=t*(r/o)+"rem",e.style.height=r/o+"rem")},C=()=>5===d.humanGameboard.shipsPlaced.length&&0===d.computerGameboard.shipsPlaced.length?(k("second"),i.disabled=!1,!0):(i.disabled=!0,!1),B=()=>{const t="Use 'Random Placement' button, then press Start!",r="Drag and drop ships onto the left board or use 'Random Placement' button. Right click to rotate. When ready, press Start!";e.textContent!==t&&e.textContent!==r&&"Restarting..."!==e.textContent&&"You can now begin the game. Press start!"!==e.textContent||(e.textContent=t,window.matchMedia("(min-width: 1024px)").matches&&(e.textContent=r))},b=()=>{C()&&(e.textContent="You can now begin the game. Press start!")},L=()=>{e.textContent="Restarting..."},k=e=>{let t;"first"===e?t=document.querySelector("#firstBoard"):"second"===e&&(t=document.querySelector("#secondBoard"));t.querySelectorAll(".cell").forEach((e=>{e.classList.add("filled")}))},A=e=>o(void 0,void 0,void 0,(function*(){let t;y(!0),"first"===e?t=document.querySelector("#firstBoard"):"second"===e&&(t=document.querySelector("#secondBoard"));const r=t.querySelectorAll(".cell");r.forEach((e=>{e.classList.add("filled")})),yield new Promise((e=>{r.forEach(((t,a)=>{setTimeout((()=>{t.classList.remove("filled"),a===r.length-1&&e()}),E()/120*a)}))})),y(!1)}));r.addEventListener("click",(()=>{k("first"),p(r,n);document.querySelector("#secondBoard").classList.remove("start"),i.disabled=!0,r.disabled=!0,A("first")})),n.addEventListener("click",(()=>{k("first"),k("second"),p(n,r);const e=document.querySelector("#secondBoard");e.classList.remove("hide"),e.classList.add("start"),i.disabled=!0,l.disabled=!0,n.disabled=!0,Promise.all([A("first"),A("second")])})),a.addEventListener("click",(()=>o(void 0,void 0,void 0,(function*(){S(),k("first"),n.classList.contains("selected")&&(k("second"),i.disabled=!0,l.disabled=!0,n.disabled=!0),yield o(void 0,void 0,void 0,(function*(){L(),y(!0),c.forEach((e=>e.disabled=!0)),yield d.newGame(),c.forEach((e=>e.disabled=!1)),y(!1),C(),r.classList.contains("selected")&&B()}));const e=document.querySelector("#secondBoard");e.classList.remove("hide"),r.classList.contains("selected")&&(e.classList.remove("start"),A("first"),i.disabled=!0,r.disabled=!0),n.classList.contains("selected")&&(e.classList.add("start"),l.disabled=!0,Promise.all([A("first"),A("second")]),i.disabled=!0,l.disabled=!0,n.disabled=!0)})))),i.addEventListener("click",(()=>{d.start();document.querySelector("#firstBoard").classList.add("hide");const e=document.querySelector("#secondBoard");e.classList.add("hide"),e.classList.add("start"),i.disabled=!0,l.disabled=!0,A("second")})),l.addEventListener("click",(()=>{d.computerGameboard.clearBoard(),g(d.computerGameboard),d.randomizeShipsPlacement(d.humanGameboard),s(d.humanGameboard,d.computerGameboard,d.humanShips),C(),b(),k("second")}));const P=e=>{let t=e.target;t.checked&&(h=Number(t.value))},E=()=>h;return u.forEach((e=>{e.addEventListener("click",P)})),window.addEventListener("resize",B),{renderBoard:e=>{const r=document.createElement("div");r.classList.add("board"),r.id=f(e),m(e,r),t.append(r)},clearShip:(e,t)=>{document.querySelectorAll(`#${f(t)} .cell`).forEach((t=>{t.classList.contains("taken")&&t.getAttribute("data-shipName")===e.name.toLowerCase()&&(t.classList.remove("taken"),t.classList.add("empty"),t.removeAttribute("data-shipName"))}))},refreshBoard:g,handleUserInput:()=>o(void 0,void 0,void 0,(function*(){const e=document.querySelectorAll("#secondBoard .cell");let t;do{t=yield new Promise((t=>{e.forEach((e=>{e.classList.contains("hit")||e.classList.contains("miss")||e.addEventListener("click",(e=>{t(v(e))}),{once:!0})}))}))}while(!t);return{col:t.col.toString(),row:t.row.toString()}})),pVcBtn:r,cVcBtn:n,waiting:y,setBoardPointer:e=>{const t=document.querySelector("#secondBoard");"player"===e?t.classList.add("boardOutline"):"computer"===e&&t.classList.remove("boardOutline")},removeBoardPointer:S,createShipOverlay:e=>{e.shipsPlaced.forEach((t=>{const r=(e=>{const t=document.createElement("div"),r=e.takenBy.name.toLowerCase(),a=e.takenBy.size;return t.classList.add("ship",r,"draggable"),t.setAttribute("data-size",`${a}`),t.setAttribute("data-name",`${r}`),t.setAttribute("draggable","true"),t})(t),a=document.querySelector(".board .cell").getBoundingClientRect().width,s=t.takenBy.size,o=t.takenBy.isVertical;document.querySelector(`#${f(e)} .cell[data-col="${t.col}"][data-row="${t.row}"]`).appendChild(r),w(r,s,a,o),window.addEventListener("resize",(()=>((e,t,r)=>{const a=document.querySelector(".board .cell").getBoundingClientRect().width;w(e,t,a,r)})(r,s,o)))}))},canBeStarted:C,setInitMessage:B,setStartMessage:b,setTurnMessagePvC:t=>{e.textContent=t?"Player's turn. Take aim and attack!":"Computer's turn. The shot is coming!"},setTurnMessageCvC:t=>{e.textContent=t?"Violet's turn":"Blue's turn"},setGameOverMessagePvC:t=>{"player"===t?e.textContent="Game over, Player wins!":"computer"===t&&(e.textContent="Game over, Computer wins!")},setGameOverMessageCvC:t=>{"player"===t?e.textContent="Game over, Blue Computer wins!":"computer"===t&&(e.textContent="Game over, Violet Computer wins!")},setRestartMessage:L,getSpeedValue:E,fillCells:k,unFillCells:A}})(),i=n;var l=function(e,t,r,a){return new(r||(r=Promise))((function(s,o){function n(e){try{l(a.next(e))}catch(e){o(e)}}function i(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(n,i)}l((a=a.apply(e,t||[])).next())}))};const c=(()=>{const a=e(),o=e(),n=r(),d=r();let u=!0,h=t("Carrier"),m=t("Battleship"),f=t("Destroyer"),g=t("Submarine"),v=t("PatrolBoat");const p=[h,m,f,g,v],y=()=>{o.placeShip(h,"A","1","horizontal"),o.placeShip(m,"A","3","horizontal"),o.placeShip(f,"A","5","horizontal"),o.placeShip(g,"A","7","horizontal"),o.placeShip(v,"A","9","horizontal"),o.reserveSpace(o,"A","1"),o.reserveSpace(o,"A","3"),o.reserveSpace(o,"A","5"),o.reserveSpace(o,"A","7"),o.reserveSpace(o,"A","9")},S=()=>o.allSunk(o)?(i.removeBoardPointer(),i.pVcBtn.classList.contains("selected")&&i.setGameOverMessagePvC("player"),i.cVcBtn.classList.contains("selected")&&i.setGameOverMessageCvC("player"),!0):!!a.allSunk(a)&&(i.removeBoardPointer(),i.pVcBtn.classList.contains("selected")&&i.setGameOverMessagePvC("computer"),i.cVcBtn.classList.contains("selected")&&i.setGameOverMessageCvC("computer"),!0),w=e=>{let t;if(e===a?t=d:e===o&&(t=n),e.hitButNotSunk(e)){if(null!==t.getPrevHit()&&null!==t.getLastHit()&&e.getCell(t.getLastHit().col,t.getLastHit().row).takenBy.hitCount>=2&&e.getCell(t.getLastHit().col,t.getLastHit().row).takenBy.hitCount<=4){if(t.finishingAttack(e,t.getLastHit().col,t.getLastHit().row,t.getPrevHit()),e.sinkShip(e,t.getLastHit().col,t.getLastHit().row),S())return}else if(1===e.getCell(t.getLastHit().col,t.getLastHit().row).takenBy.hitCount&&(t.followupAttack(e,t.getLastHit().col,t.getLastHit().row),e.sinkShip(e,t.getLastHit().col,t.getLastHit().row),S()))return}else{const{col:r,row:a}=t.randomAttack(e);if("hit"===e.getCell(r,a).status&&(t.setPrevHit(t.getLastHit()),t.setLastHit({col:r,row:a})),"hit"===e.getCell(r,a).status&&e.getCell(r,a).takenBy.isSunk()&&(e.sinkShip(e,r,a),t.setPrevHit(null),t.setLastHit(null),S()))return}},C=e=>{e.clearBoard(),(e=>{let r;e===a?(h=t("Carrier"),m=t("Battleship"),f=t("Destroyer"),g=t("Submarine"),v=t("PatrolBoat"),r=[h,m,f,g,v]):e===o&&(r=[t("Carrier"),t("Battleship"),t("Destroyer"),t("Submarine"),t("PatrolBoat")]);c.humanShips.length=0;const s=["A","B","C","D","E","F","G","H","I","J"],n=()=>s[Math.floor(Math.random()*s.length)],i=()=>Math.ceil(10*Math.random()).toString(),l=()=>Math.random()>.5?"horizontal":"vertical";r.forEach((t=>{let r=n(),a=i(),s=l(),o=e.canBePlaced(t.size,r,a,s);for(;!o;)r=n(),a=i(),s=l(),o=e.canBePlaced(t.size,r,a,s);o&&(e.placeShip(t,r,a,s),e.reserveSpace(e,r,a)),c.humanShips.push(t)}))})(e),i.refreshBoard(e),e===a&&i.createShipOverlay(e)},B=()=>{i.cVcBtn.classList.contains("selected")&&(C(a),C(o),u=!1,l(void 0,void 0,void 0,(function*(){i.removeBoardPointer();let e=!0;for(;!S()&&!u;){if(i.waiting(!0),e){if(i.setTurnMessageCvC(e),yield new Promise((e=>setTimeout(e,i.getSpeedValue()))),!i.cVcBtn.classList.contains("selected")||u)break;w(a),i.refreshBoard(a),e=!1}if(S()||u)break;if(!e){if(i.setTurnMessageCvC(e),yield new Promise((e=>setTimeout(e,i.getSpeedValue()))),!i.cVcBtn.classList.contains("selected")||u)break;w(o),i.refreshBoard(o),e=!0}}u=!1,i.waiting(!1)})),i.refreshBoard(a))},b=()=>{u=!0,n.setPrevHit(null),n.setLastHit(null),d.setPrevHit(null),d.setLastHit(null),a.clearBoard(),o.clearBoard(),y(),i.refreshBoard(a),i.refreshBoard(o),i.createShipOverlay(o),s(a,o,p),i.canBeStarted(),B(),p.forEach((e=>{!0===e.isVertical&&(e.isVertical=!1)}))};return{init:()=>{i.setInitMessage(),a.generateArray(),o.generateArray(),i.renderBoard(a),i.renderBoard(o),y(),i.refreshBoard(o),i.createShipOverlay(o),s(a,o,p),i.canBeStarted(),B(),i.unFillCells("first"),i.pVcBtn.disabled=!0},renew:()=>{i.refreshBoard(a),i.refreshBoard(o),i.createShipOverlay(a),i.createShipOverlay(o),s(a,o,p)},humanGameboard:a,computerGameboard:o,restart:b,newGame:()=>l(void 0,void 0,void 0,(function*(){u=!0,yield new Promise((e=>setTimeout(e,i.getSpeedValue()))),u=!1,b()})),start:()=>{i.refreshBoard(a),C(o),u=!1,l(void 0,void 0,void 0,(function*(){let e=!0;for(;!S()&&!u;){if(e){i.setTurnMessagePvC(e),i.setBoardPointer("player"),i.waiting(!1);const{col:t,row:r}=yield i.handleUserInput();n.attack(o,t,r),o.sinkShip(o,t,r),i.refreshBoard(o),e=!1}if(S()||u)break;if(!e){if(i.setTurnMessagePvC(e),i.setBoardPointer("computer"),i.waiting(!0),yield new Promise((e=>setTimeout(e,i.getSpeedValue()))),!i.pVcBtn.classList.contains("selected")||u)break;w(a),i.refreshBoard(a),e=!0}}u=!1,i.waiting(!1)}))},randomizeShipsPlacement:C,humanShips:p}})(),d=c;d.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzdDLE1BRUpRLEVBQVc1RSxHQUNYLEVBQUdFLGFBQWFGLEdBQ2hCMkQsR0FBZSxDQUNuQixDQUNKLENBQ0FTLEdBQVksRUFDWixFQUFHNUQsU0FBUSxFQUNmLEdBc0cwQixFQXdDd0QrQiwwQkFBeUJDLGFBQzlHLEVBL1FrQixHQWdSbkIsSUMzUkEsRUFBV3lDLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvZ2FtZWJvYXJkLnRzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9zaGlwLnRzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9wbGF5ZXIudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL2RyYWdBbmREcm9wLnRzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy91aS50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvY29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGdhbWVib2FyZEZhY3RvcnkgPSAoKSA9PiB7XG4gICAgY29uc3QgY29scyA9IFsnQScsICdCJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdIJywgJ0knLCAnSiddO1xuICAgIGNvbnN0IHJvd3MgPSBbJzEnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJzcnLCAnOCcsICc5JywgJzEwJ107XG4gICAgY29uc3QgYXJyYXkgPSBbXTtcbiAgICBjb25zdCBzaGlwc1BsYWNlZCA9IFtdO1xuICAgIGNvbnN0IGdlbmVyYXRlQXJyYXkgPSAoKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkgKz0gMSkge1xuICAgICAgICAgICAgYXJyYXlbaV0gPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGogKz0gMSkge1xuICAgICAgICAgICAgICAgIGFycmF5W2ldW2pdID0geyBjb2w6IGNvbHNbal0sIHJvdzogcm93c1tpXSwgc3RhdHVzOiAnZW1wdHknLCB0YWtlbkJ5OiBudWxsIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGNsZWFyQm9hcmQgPSAoKSA9PiB7XG4gICAgICAgIGFycmF5LmZsYXQoKS5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICBjZWxsLnN0YXR1cyA9ICdlbXB0eSc7XG4gICAgICAgICAgICBjZWxsLnRha2VuQnkgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuICAgICAgICBzaGlwc1BsYWNlZC5sZW5ndGggPSAwO1xuICAgIH07XG4gICAgY29uc3QgZ2V0Q2VsbCA9IChjb2wsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBjb2xJbmRleCA9IGNvbHMuaW5kZXhPZihjb2wpO1xuICAgICAgICBjb25zdCByb3dJbmRleCA9IHJvd3MuaW5kZXhPZihyb3cpO1xuICAgICAgICBpZiAoY29sSW5kZXggPT09IC0xIHx8IHJvd0luZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFycmF5W3Jvd0luZGV4XVtjb2xJbmRleF07XG4gICAgfTtcbiAgICBjb25zdCBzZXRDZWxsID0gKGNvbCwgcm93LCBuZXdTdGF0dXMsIG5ld1Rha2VuQnkpID0+IHtcbiAgICAgICAgY29uc3QgY29sSW5kZXggPSBjb2xzLmluZGV4T2YoY29sKTtcbiAgICAgICAgY29uc3Qgcm93SW5kZXggPSByb3dzLmluZGV4T2Yocm93KTtcbiAgICAgICAgaWYgKGNvbEluZGV4ID09PSAtMSB8fCByb3dJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGFycmF5W3Jvd0luZGV4XVtjb2xJbmRleF0uc3RhdHVzID0gbmV3U3RhdHVzO1xuICAgICAgICBpZiAobmV3VGFrZW5CeSkge1xuICAgICAgICAgICAgYXJyYXlbcm93SW5kZXhdW2NvbEluZGV4XS50YWtlbkJ5ID0gbmV3VGFrZW5CeTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyYXlbcm93SW5kZXhdW2NvbEluZGV4XTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVNoaXAgPSAoc2hpcCwgZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGNvbnN0IGdhbWVib2FyZENlbGxzID0gZ2FtZWJvYXJkLmFycmF5LmZsYXQoKTtcbiAgICAgICAgZ2FtZWJvYXJkQ2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNlbGwuc3RhdHVzID09PSAndGFrZW4nICYmIGNlbGwudGFrZW5CeS5uYW1lID09PSBzaGlwLm5hbWUpIHtcbiAgICAgICAgICAgICAgICBjZWxsLnN0YXR1cyA9ICdlbXB0eSc7XG4gICAgICAgICAgICAgICAgY2VsbC50YWtlbkJ5ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNoaXBJbmRleCA9IHNoaXBzUGxhY2VkLmluZGV4T2YoY2VsbCk7XG4gICAgICAgICAgICBpZiAoY2VsbC50YWtlbkJ5ID09PSBudWxsICYmIHNoaXBJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBzaGlwc1BsYWNlZC5zcGxpY2Uoc2hpcEluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBwbGFjZVNoaXAgPSAoc2hpcCwgY29sLCByb3csIG9yaWVudGF0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzSG9yaXpvbnRhbCA9IG9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCc7XG4gICAgICAgIGNvbnN0IGNlbGxzID0gaXNIb3Jpem9udGFsID8gY29scyA6IHJvd3M7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gY2VsbHMuaW5kZXhPZihpc0hvcml6b250YWwgPyBjb2wgOiByb3cpO1xuICAgICAgICBpZiAob3JpZW50YXRpb24gPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgICAgc2hpcC5pc1ZlcnRpY2FsID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzaGlwLmlzVmVydGljYWwgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzaGlwQ2VsbHMgPSBbXTtcbiAgICAgICAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCArIHNoaXAuc2l6ZSA+IGNlbGxzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5zaXplOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb2wgPSBpc0hvcml6b250YWwgPyBjZWxsc1tzdGFydCArIGldIDogY29sO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFJvdyA9IGlzSG9yaXpvbnRhbCA/IHJvdyA6IGNlbGxzW3N0YXJ0ICsgaV07XG4gICAgICAgICAgICBpZiAoZ2V0Q2VsbChjdXJyZW50Q29sLCBjdXJyZW50Um93KS5zdGF0dXMgIT09ICdlbXB0eScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRDZWxsKGN1cnJlbnRDb2wsIGN1cnJlbnRSb3csICd0YWtlbicsIHNoaXApO1xuICAgICAgICAgICAgc2hpcENlbGxzLnB1c2goZ2V0Q2VsbChjdXJyZW50Q29sLCBjdXJyZW50Um93KSk7XG4gICAgICAgIH1cbiAgICAgICAgc2hpcHNQbGFjZWQucHVzaChzaGlwQ2VsbHNbMF0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIGNvbnN0IGNhbkJlUGxhY2VkID0gKHNpemUsIGNvbCwgcm93LCBvcmllbnRhdGlvbikgPT4ge1xuICAgICAgICBjb25zdCBpc0hvcml6b250YWwgPSBvcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnO1xuICAgICAgICBjb25zdCBjZWxscyA9IGlzSG9yaXpvbnRhbCA/IGNvbHMgOiByb3dzO1xuICAgICAgICBjb25zdCBzdGFydCA9IGNlbGxzLmluZGV4T2YoaXNIb3Jpem9udGFsID8gY29sIDogcm93KTtcbiAgICAgICAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCArIHNpemUgPiBjZWxscy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcmVFbXB0eSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudENvbCA9IGlzSG9yaXpvbnRhbCA/IGNlbGxzW3N0YXJ0ICsgaV0gOiBjb2w7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Um93ID0gaXNIb3Jpem9udGFsID8gcm93IDogY2VsbHNbc3RhcnQgKyBpXTtcbiAgICAgICAgICAgIGFyZUVtcHR5LnB1c2goZ2V0Q2VsbChjdXJyZW50Q29sLCBjdXJyZW50Um93KS5zdGF0dXMgPT09ICdlbXB0eScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcmVFbXB0eS5ldmVyeSgoaXRlbSkgPT4gaXRlbSA9PT0gdHJ1ZSk7XG4gICAgfTtcbiAgICBjb25zdCByZWNlaXZlQXR0YWNrID0gKGNvbCwgcm93KSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBnZXRDZWxsKGNvbCwgcm93KTtcbiAgICAgICAgaWYgKGNlbGwuc3RhdHVzID09PSAndGFrZW4nKSB7XG4gICAgICAgICAgICBjZWxsLnRha2VuQnkuaGl0KCk7XG4gICAgICAgICAgICBzZXRDZWxsKGNvbCwgcm93LCAnaGl0Jyk7XG4gICAgICAgICAgICByZXR1cm4gY2VsbC5zdGF0dXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNlbGwuc3RhdHVzID09PSAnZW1wdHknIHx8IGNlbGwuc3RhdHVzID09PSAncmVzZXJ2ZWQnKSB7XG4gICAgICAgICAgICBzZXRDZWxsKGNvbCwgcm93LCAnbWlzcycpO1xuICAgICAgICAgICAgcmV0dXJuIGNlbGwuc3RhdHVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgY29uc3QgcmVjZWl2ZUFyb3VuZCA9IChjb2wsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gZ2V0Q2VsbChjb2wsIHJvdyk7XG4gICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ2VtcHR5Jykge1xuICAgICAgICAgICAgc2V0Q2VsbChjb2wsIHJvdywgJ3Jlc2VydmVkJyk7XG4gICAgICAgICAgICByZXR1cm4gY2VsbC5zdGF0dXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBjb25zdCByZXNlcnZlU3BhY2UgPSAoZ2FtZWJvYXJkLCBjb2wsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpO1xuICAgICAgICBpZiAoY2VsbCAmJiBjZWxsLnRha2VuQnkpIHtcbiAgICAgICAgICAgIGNvbnN0IGdhbWVib2FyZENlbGxzID0gZ2FtZWJvYXJkLmFycmF5LmZsYXQoKTtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBDZWxscyA9IGdhbWVib2FyZENlbGxzLmZpbHRlcigoYykgPT4gYy50YWtlbkJ5ICYmIGMudGFrZW5CeS5uYW1lID09PSBjZWxsLnRha2VuQnkubmFtZSk7XG4gICAgICAgICAgICBzaGlwQ2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAwLCByb3c6IC0xIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAwLCByb3c6IDEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IC0xLCByb3c6IDAgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogMCB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogLTEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IC0xLCByb3c6IDEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogLTEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogMSB9LFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9ucy5mb3JFYWNoKChkaXJlY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Q29sID0gU3RyaW5nLmZyb21DaGFyQ29kZShjZWxsLmNvbC5jaGFyQ29kZUF0KDApICsgZGlyZWN0aW9uLmNvbCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1JvdyA9IChOdW1iZXIoY2VsbC5yb3cpICsgZGlyZWN0aW9uLnJvdykudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgbmV3Um93KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBcm91bmQobmV3Q29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgZnVuY3Rpb24gcmVzZXJ2ZVNwYWNlRm9yQWxsKGdhbWVib2FyZCkge1xuICAgICAgICBnYW1lYm9hcmQuc2hpcHNQbGFjZWQuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgICAgICAgZ2FtZWJvYXJkLnJlc2VydmVTcGFjZShnYW1lYm9hcmQsIHNoaXAuY29sLCBzaGlwLnJvdyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCByZW1vdmVSZXNlcnZlZFNwYWNlID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBjb25zdCBnYW1lYm9hcmRDZWxscyA9IGdhbWVib2FyZC5hcnJheS5mbGF0KCk7XG4gICAgICAgIGdhbWVib2FyZENlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ3Jlc2VydmVkJykge1xuICAgICAgICAgICAgICAgIHNldENlbGwoY2VsbC5jb2wsIGNlbGwucm93LCAnZW1wdHknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBzaW5rU2hpcCA9IChnYW1lYm9hcmQsIGNvbCwgcm93KSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIHJvdyk7XG4gICAgICAgIGlmIChjZWxsICYmIGNlbGwudGFrZW5CeSAmJiBjZWxsLnRha2VuQnkuaXNTdW5rKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBDZWxscyA9IGdhbWVib2FyZC5hcnJheS5mbGF0KCkuZmlsdGVyKChjKSA9PiBjLnRha2VuQnkgJiYgYy50YWtlbkJ5Lm5hbWUgPT09IGNlbGwudGFrZW5CeS5uYW1lKTtcbiAgICAgICAgICAgIHNoaXBDZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDAsIHJvdzogLTEgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IDAsIHJvdzogMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogMCB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMSwgcm93OiAwIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAtMSwgcm93OiAtMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMSwgcm93OiAtMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMSwgcm93OiAxIH0sXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb25zLmZvckVhY2goKGRpcmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNlbGwuY29sLmNoYXJDb2RlQXQoMCkgKyBkaXJlY3Rpb24uY29sKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Um93ID0gKE51bWJlcihjZWxsLnJvdykgKyBkaXJlY3Rpb24ucm93KS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCBuZXdSb3cpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhuZXdDb2wsIG5ld1Jvdyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBoaXRCdXROb3RTdW5rID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBjb25zdCBnYW1lYm9hcmRDZWxscyA9IGdhbWVib2FyZC5hcnJheS5mbGF0KCk7XG4gICAgICAgIHJldHVybiBnYW1lYm9hcmRDZWxscy5zb21lKChjZWxsKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2VsbC5zdGF0dXMgPT09ICdoaXQnICYmIGNlbGwudGFrZW5CeS5pc1N1bmsoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBhbGxTdW5rID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBjb25zdCBnYW1lYm9hcmRDZWxscyA9IGdhbWVib2FyZC5hcnJheS5mbGF0KCk7XG4gICAgICAgIGxldCB0YWtlbkJ5Q2VsbHMgPSBnYW1lYm9hcmRDZWxscy5maWx0ZXIoKGNlbGwpID0+IGNlbGwudGFrZW5CeSk7XG4gICAgICAgIGlmICh0YWtlbkJ5Q2VsbHMubGVuZ3RoID4gMCAmJiB0YWtlbkJ5Q2VsbHMuZXZlcnkoKGNlbGwpID0+IGNlbGwudGFrZW5CeS5pc1N1bmsoKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZW5lcmF0ZUFycmF5LFxuICAgICAgICBjbGVhckJvYXJkLFxuICAgICAgICBnZXRDZWxsLFxuICAgICAgICBzZXRDZWxsLFxuICAgICAgICByZW1vdmVTaGlwLFxuICAgICAgICBwbGFjZVNoaXAsXG4gICAgICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgICAgIHJlY2VpdmVBcm91bmQsXG4gICAgICAgIHJlc2VydmVTcGFjZSxcbiAgICAgICAgcmVzZXJ2ZVNwYWNlRm9yQWxsLFxuICAgICAgICBoaXRCdXROb3RTdW5rLFxuICAgICAgICBzaW5rU2hpcCxcbiAgICAgICAgYWxsU3VuayxcbiAgICAgICAgYXJyYXksXG4gICAgICAgIGNhbkJlUGxhY2VkLFxuICAgICAgICBzaGlwc1BsYWNlZCxcbiAgICAgICAgcmVtb3ZlUmVzZXJ2ZWRTcGFjZSxcbiAgICB9O1xufTtcbmV4cG9ydCBkZWZhdWx0IGdhbWVib2FyZEZhY3Rvcnk7XG4iLCJjb25zdCBzaGlwRmFjdG9yeSA9IChuYW1lKSA9PiB7XG4gICAgbGV0IHNpemU7XG4gICAgaWYgKG5hbWUgPT09ICdDYXJyaWVyJykge1xuICAgICAgICBzaXplID0gNTtcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09ICdCYXR0bGVzaGlwJykge1xuICAgICAgICBzaXplID0gNDtcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09ICdEZXN0cm95ZXInKSB7XG4gICAgICAgIHNpemUgPSAzO1xuICAgIH1cbiAgICBpZiAobmFtZSA9PT0gJ1N1Ym1hcmluZScpIHtcbiAgICAgICAgc2l6ZSA9IDM7XG4gICAgfVxuICAgIGlmIChuYW1lID09PSAnUGF0cm9sQm9hdCcpIHtcbiAgICAgICAgc2l6ZSA9IDI7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIHNpemUsXG4gICAgICAgIGhpdENvdW50OiAwLFxuICAgICAgICBpc1ZlcnRpY2FsOiBmYWxzZSxcbiAgICAgICAgcm90YXRlKCkge1xuICAgICAgICAgICAgdGhpcy5pc1ZlcnRpY2FsID0gIXRoaXMuaXNWZXJ0aWNhbDtcbiAgICAgICAgfSxcbiAgICAgICAgaGl0KCkge1xuICAgICAgICAgICAgdGhpcy5oaXRDb3VudCArPSAxO1xuICAgICAgICB9LFxuICAgICAgICBpc1N1bmsoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oaXRDb3VudCA9PT0gc2l6ZTtcbiAgICAgICAgfSxcbiAgICB9O1xufTtcbmV4cG9ydCBkZWZhdWx0IHNoaXBGYWN0b3J5O1xuIiwiY29uc3QgcGxheWVyRmFjdG9yeSA9ICgpID0+IHtcbiAgICBjb25zdCBjb2xzID0gWydBJywgJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAnSScsICdKJ107XG4gICAgbGV0IHByZXZIaXQgPSBudWxsO1xuICAgIGxldCBsYXN0SGl0ID0gbnVsbDtcbiAgICBsZXQgcmFuZ2UgPSAxO1xuICAgIGxldCBnb1JpZ2h0ID0gdHJ1ZTtcbiAgICBsZXQgZ29Eb3duID0gdHJ1ZTtcbiAgICBjb25zdCBhdHRhY2sgPSAoZ2FtZWJvYXJkLCBjb2wsIHJvdykgPT4ge1xuICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpLnN0YXR1cyAhPT0gJ2hpdCcgJiYgZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpLnN0YXR1cyAhPT0gJ21pc3MnKSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soY29sLCByb3cpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICBzZXRQcmV2SGl0KGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IGNvbCwgcm93OiByb3cgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnYWxyZWFkeSBzaG90JztcbiAgICB9O1xuICAgIGNvbnN0IHJhbmRvbUF0dGFjayA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgbGV0IHJhbmRvbUNvbDtcbiAgICAgICAgbGV0IHJhbmRvbVJvdztcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgcmFuZG9tQ29sID0gY29sc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb2xzLmxlbmd0aCldO1xuICAgICAgICAgICAgcmFuZG9tUm93ID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAxMCkudG9TdHJpbmcoKTtcbiAgICAgICAgfSB3aGlsZSAoZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyA9PT0gJ2hpdCcgfHwgZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyA9PT0gJ21pc3MnKTtcbiAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKHJhbmRvbUNvbCwgcmFuZG9tUm93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKHJhbmRvbUNvbCwgcmFuZG9tUm93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2socmFuZG9tQ29sLCByYW5kb21Sb3cpO1xuICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKHJhbmRvbUNvbCwgcmFuZG9tUm93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICBzZXRMYXN0SGl0KHsgY29sOiByYW5kb21Db2wsIHJvdzogcmFuZG9tUm93IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgcmVzdWx0LCBjb2w6IHJhbmRvbUNvbCwgcm93OiByYW5kb21Sb3cgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyByZXN1bHQ6ICdhbHJlYWR5IHNob3QnLCBjb2w6IHJhbmRvbUNvbCwgcm93OiByYW5kb21Sb3cgfTtcbiAgICB9O1xuICAgIGNvbnN0IGZvbGxvd3VwQXR0YWNrID0gKGdhbWVib2FyZCwgY29sLCByb3cpID0+IHtcbiAgICAgICAgY29uc3QgZGlyZWN0aW9ucyA9IFtcbiAgICAgICAgICAgIHsgY29sOiAwLCByb3c6IC0xIH0sXG4gICAgICAgICAgICB7IGNvbDogMCwgcm93OiAxIH0sXG4gICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogMCB9LFxuICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogMCB9LFxuICAgICAgICBdO1xuICAgICAgICBjb25zdCB2YWxpZERpcmVjdGlvbnMgPSBkaXJlY3Rpb25zLmZpbHRlcigoZGlyZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApICsgZGlyZWN0aW9uLmNvbCk7XG4gICAgICAgICAgICBjb25zdCBuZXdSb3cgPSAoTnVtYmVyKHJvdykgKyBkaXJlY3Rpb24ucm93KS50b1N0cmluZygpO1xuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgbmV3Um93KTtcbiAgICAgICAgICAgIGlmIChjZWxsICYmIGNlbGwuc3RhdHVzICE9PSAnbWlzcycgJiYgY2VsbC5zdGF0dXMgIT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodmFsaWREaXJlY3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJhbmRvbURpcmVjdGlvbiA9IHZhbGlkRGlyZWN0aW9uc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB2YWxpZERpcmVjdGlvbnMubGVuZ3RoKV07XG4gICAgICAgICAgICBjb25zdCBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApICsgcmFuZG9tRGlyZWN0aW9uLmNvbCk7XG4gICAgICAgICAgICBjb25zdCBuZXdSb3cgPSAoTnVtYmVyKHJvdykgKyByYW5kb21EaXJlY3Rpb24ucm93KS50b1N0cmluZygpO1xuICAgICAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2sobmV3Q29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgbmV3Um93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICBzZXRMYXN0SGl0KHsgY29sOiBuZXdDb2wsIHJvdzogbmV3Um93IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBmaW5pc2hpbmdBdHRhY2sgPSAoZ2FtZWJvYXJkLCBjb2wsIHJvdywgcHJldkhpdCkgPT4ge1xuICAgICAgICBpZiAocHJldkhpdC5yb3cgPT09IHJvdykge1xuICAgICAgICAgICAgaWYgKGdvUmlnaHQpIHtcbiAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgbGV0IG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgKyByYW5nZSk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgICAgICBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApICsgcmFuZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhuZXdDb2wsIHJvdyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IG5ld0NvbCwgcm93OiByb3cgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgZ29SaWdodCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hpbmdBdHRhY2soZ2FtZWJvYXJkLCBuZXdDb2wsIHJvdywgcHJldkhpdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgICAgIGxldCBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApIC0gcmFuZ2UpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykgJiYgZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgbmV3Q29sID0gU3RyaW5nLmZyb21DaGFyQ29kZShjb2wuY2hhckNvZGVBdCgwKSAtIHJhbmdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzICE9PSAnaGl0JyAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzICE9PSAnbWlzcycpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2sobmV3Q29sLCByb3cpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFByZXZIaXQobGFzdEhpdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMYXN0SGl0KHsgY29sOiBuZXdDb2wsIHJvdzogcm93IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGdvUmlnaHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hpbmdBdHRhY2soZ2FtZWJvYXJkLCBuZXdDb2wsIHJvdywgcHJldkhpdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHByZXZIaXQuY29sID09PSBjb2wpIHtcbiAgICAgICAgICAgIGlmIChnb0Rvd24pIHtcbiAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgbGV0IG5ld1JvdyA9IChOdW1iZXIocm93KSArIHJhbmdlKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1JvdykgJiYgZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgbmV3Um93ID0gKE51bWJlcihyb3cpICsgcmFuZ2UpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1JvdykgJiYgZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpLnN0YXR1cyAhPT0gJ2hpdCcgJiYgZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpLnN0YXR1cyAhPT0gJ21pc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKGNvbCwgbmV3Um93KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRQcmV2SGl0KGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGFzdEhpdCh7IGNvbDogY29sLCByb3c6IG5ld1JvdyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgICAgICAgICBnb0Rvd24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZmluaXNoaW5nQXR0YWNrKGdhbWVib2FyZCwgY29sLCBuZXdSb3csIHByZXZIaXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJhbmdlID0gMTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Um93ID0gKE51bWJlcihyb3cpIC0gcmFuZ2UpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgICAgICBuZXdSb3cgPSAoTnVtYmVyKHJvdykgLSByYW5nZSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzICE9PSAnaGl0JyAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzICE9PSAnbWlzcycpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soY29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFByZXZIaXQobGFzdEhpdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMYXN0SGl0KHsgY29sOiBjb2wsIHJvdzogbmV3Um93IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGdvRG93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGZpbmlzaGluZ0F0dGFjayhnYW1lYm9hcmQsIGNvbCwgbmV3Um93LCBwcmV2SGl0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGdldFByZXZIaXQgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBwcmV2SGl0O1xuICAgIH07XG4gICAgY29uc3QgZ2V0TGFzdEhpdCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGxhc3RIaXQ7XG4gICAgfTtcbiAgICBjb25zdCBzZXRQcmV2SGl0ID0gKG5ld1ByZXZIaXQpID0+IHtcbiAgICAgICAgcHJldkhpdCA9IG5ld1ByZXZIaXQ7XG4gICAgfTtcbiAgICBjb25zdCBzZXRMYXN0SGl0ID0gKG5ld0xhc3RIaXQpID0+IHtcbiAgICAgICAgbGFzdEhpdCA9IG5ld0xhc3RIaXQ7XG4gICAgfTtcbiAgICByZXR1cm4geyBhdHRhY2ssIHJhbmRvbUF0dGFjaywgZm9sbG93dXBBdHRhY2ssIGZpbmlzaGluZ0F0dGFjaywgcHJldkhpdCwgbGFzdEhpdCwgZ2V0UHJldkhpdCwgZ2V0TGFzdEhpdCwgc2V0UHJldkhpdCwgc2V0TGFzdEhpdCB9O1xufTtcbmV4cG9ydCBkZWZhdWx0IHBsYXllckZhY3Rvcnk7XG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB1aSBmcm9tICcuL3VpJztcbmltcG9ydCBjb250cm9sbGVyIGZyb20gJy4vY29udHJvbGxlcic7XG5jb25zdCBkcmFnQW5kRHJvcCA9IChmaXJzdEdhbWVib2FyZCwgc2Vjb25kR2FtZWJvYXJkLCBzaGlwcykgPT4ge1xuICAgIGNvbnN0IGZpcnN0Qm9hcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpcnN0Qm9hcmQnKTtcbiAgICBjb25zdCBzZWNvbmRCb2FyZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICBjb25zdCBmaXJzdEJvYXJkQ2VsbHMgPSBmaXJzdEJvYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpO1xuICAgIGNvbnN0IHNlY29uZEJvYXJkQ2VsbHMgPSBzZWNvbmRCb2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKTtcbiAgICBsZXQgc2hpcE5hbWU7XG4gICAgbGV0IHNoaXBTaXplO1xuICAgIGxldCBncmFiUG9pbnRYID0gMDtcbiAgICBsZXQgZ3JhYlBvaW50WSA9IDA7XG4gICAgbGV0IHNoaXBPYmo7XG4gICAgbGV0IG9yaWVudGF0aW9uO1xuICAgIGxldCBoaWdobGlnaHRlZENlbGxzID0gW107XG4gICAgY29uc3Qgc2hpcE5hbWVUb09iaiA9IHtcbiAgICAgICAgY2Fycmllcjogc2hpcHNbMF0sXG4gICAgICAgIGJhdHRsZXNoaXA6IHNoaXBzWzFdLFxuICAgICAgICBkZXN0cm95ZXI6IHNoaXBzWzJdLFxuICAgICAgICBzdWJtYXJpbmU6IHNoaXBzWzNdLFxuICAgICAgICBwYXRyb2xib2F0OiBzaGlwc1s0XSxcbiAgICB9O1xuICAgIGxldCBsYXN0RHJhZ2dlZCA9IG51bGw7XG4gICAgY29uc3QgZHJhZ2dhYmxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcmFnZ2FibGUnKTtcbiAgICBmdW5jdGlvbiBnZXROb25TaGlwQ2VsbHMoYm9hcmRDZWxscykge1xuICAgICAgICBjb25zdCBib2FyZENlbGxzQXJyYXkgPSBBcnJheS5mcm9tKGJvYXJkQ2VsbHMpO1xuICAgICAgICByZXR1cm4gYm9hcmRDZWxsc0FycmF5LmZpbHRlcigoY2VsbCkgPT4gIWNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YWtlbicpKTtcbiAgICB9XG4gICAgY29uc3Qgbm9uU2hpcENlbGxzID0gWy4uLmdldE5vblNoaXBDZWxscyhmaXJzdEJvYXJkQ2VsbHMpLCAuLi5nZXROb25TaGlwQ2VsbHMoc2Vjb25kQm9hcmRDZWxscyldO1xuICAgIGZ1bmN0aW9uIGlzVmFsaWRQbGFjZW1lbnQodG9IaWdobGlnaHQpIHtcbiAgICAgICAgcmV0dXJuICh0b0hpZ2hsaWdodC5ldmVyeSgoY2VsbCkgPT4gY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2VtcHR5JykpICYmXG4gICAgICAgICAgICAodG9IaWdobGlnaHQuZXZlcnkoKGNlbGwpID0+IGNlbGwuZGF0YXNldC5jb2wgPT09IHRvSGlnaGxpZ2h0WzBdLmRhdGFzZXQuY29sKSB8fFxuICAgICAgICAgICAgICAgIHRvSGlnaGxpZ2h0LmV2ZXJ5KChjZWxsKSA9PiBjZWxsLmRhdGFzZXQucm93ID09PSB0b0hpZ2hsaWdodFswXS5kYXRhc2V0LnJvdykpICYmXG4gICAgICAgICAgICB0b0hpZ2hsaWdodC5sZW5ndGggPT09IHNoaXBTaXplICYmXG4gICAgICAgICAgICB0b0hpZ2hsaWdodC5ldmVyeSgoY2VsbCkgPT4gY2VsbC5kYXRhc2V0LmNvbCA+PSAnQScgJiYgY2VsbC5kYXRhc2V0LmNvbCA8PSAnSicpICYmXG4gICAgICAgICAgICB0b0hpZ2hsaWdodC5ldmVyeSgoY2VsbCkgPT4gTnVtYmVyKGNlbGwuZGF0YXNldC5yb3cpID49IDEgJiYgTnVtYmVyKGNlbGwuZGF0YXNldC5yb3cpIDw9IDEwKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldExhc3RTaGlwU2l6ZUVsZW1lbnRzKGhpZ2hsaWdodGVkQ2VsbHMsIHNoaXBTaXplKSB7XG4gICAgICAgIHJldHVybiBoaWdobGlnaHRlZENlbGxzLnNsaWNlKE1hdGgubWluKGhpZ2hsaWdodGVkQ2VsbHMubGVuZ3RoIC0gc2hpcFNpemUsIDApKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0R2FtZWJvYXJkKGUpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgIGxldCBnYW1lYm9hcmQ7XG4gICAgICAgIGNvbnN0IGJvYXJkSWQgPSB0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQ7XG4gICAgICAgIGlmIChib2FyZElkID09PSAnZmlyc3RCb2FyZCcpIHtcbiAgICAgICAgICAgIGdhbWVib2FyZCA9IGZpcnN0R2FtZWJvYXJkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChib2FyZElkID09PSAnc2Vjb25kQm9hcmQnKSB7XG4gICAgICAgICAgICBnYW1lYm9hcmQgPSBzZWNvbmRHYW1lYm9hcmQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdGFyZ2V0LCBnYW1lYm9hcmQgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVzZXJ2ZVNwYWNlRm9yUmVtYWluaW5nU2hpcHMoZ2FtZWJvYXJkLCBlKSB7XG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBnZXRHYW1lYm9hcmQoZSk7XG4gICAgICAgIGNvbnN0IHRhcmdldFNoaXBOYW1lID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJyk7XG4gICAgICAgIGxldCByZW1haW5pbmdTaGlwcyA9IGdhbWVib2FyZC5zaGlwc1BsYWNlZC5maWx0ZXIoKHNoaXApID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRTaGlwTmFtZSAhPT0gc2hpcC50YWtlbkJ5Lm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlbWFpbmluZ1NoaXBzLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgICAgIGdhbWVib2FyZC5yZXNlcnZlU3BhY2UoZ2FtZWJvYXJkLCBzaGlwLmNvbCwgc2hpcC5yb3cpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0U2hpcEF0dHJpYnV0ZXMoZSwgdGFyZ2V0KSB7XG4gICAgICAgIHNoaXBOYW1lID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJyk7XG4gICAgICAgIHNoaXBTaXplID0gTnVtYmVyKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2l6ZScpKTtcbiAgICAgICAgZ3JhYlBvaW50WCA9IGUub2Zmc2V0WDtcbiAgICAgICAgZ3JhYlBvaW50WSA9IGUub2Zmc2V0WTtcbiAgICAgICAgc2hpcE9iaiA9IHNoaXBOYW1lVG9PYmpbc2hpcE5hbWVdO1xuICAgICAgICBvcmllbnRhdGlvbiA9IHNoaXBPYmouaXNWZXJ0aWNhbCA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCc7XG4gICAgICAgIHJldHVybiB7IHNoaXBOYW1lLCBzaGlwT2JqIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByZXZlbnRPZmZCb2FyZFBsYWNlbWVudCh0YXJnZXQsIGUpIHtcbiAgICAgICAgaWYgKGhpZ2hsaWdodGVkQ2VsbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBib2FyZCA9IHRhcmdldC5jbG9zZXN0KCcuYm9hcmQnKTtcbiAgICAgICAgICAgIGlmIChib2FyZCkge1xuICAgICAgICAgICAgICAgIGxldCB7IGdhbWVib2FyZCB9ID0gZ2V0R2FtZWJvYXJkKGUpO1xuICAgICAgICAgICAgICAgIGlmIChib2FyZC5pZCA9PT0gJ2ZpcnN0Qm9hcmQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZCA9IGZpcnN0R2FtZWJvYXJkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChib2FyZC5pZCA9PT0gJ3NlY29uZEJvYXJkJykge1xuICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQgPSBzZWNvbmRHYW1lYm9hcmQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQgJiYgbGFzdERyYWdnZWQgJiYgZ2FtZWJvYXJkLmNhbkJlUGxhY2VkKHNoaXBPYmouc2l6ZSwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5jb2wsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwT2JqLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnJlc2VydmVTcGFjZShnYW1lYm9hcmQsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQuY29sLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LnJvdyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIucmVuZXcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0U3RhcnRDZWxsKGluZGV4LCBzaGlwT2JqLCBlKSB7XG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBnZXRHYW1lYm9hcmQoZSk7XG4gICAgICAgIHJldHVybiBpbmRleCAtIChzaGlwT2JqLmlzVmVydGljYWwgPyBNYXRoLmZsb29yKGdyYWJQb2ludFkgLyB0YXJnZXQub2Zmc2V0SGVpZ2h0KSAqIDEwIDogTWF0aC5mbG9vcihncmFiUG9pbnRYIC8gdGFyZ2V0Lm9mZnNldFdpZHRoKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEJvYXJkQ2VsbHMoYm9hcmRJZCkge1xuICAgICAgICByZXR1cm4gYm9hcmRJZCA9PT0gJ2ZpcnN0Qm9hcmQnID8gZmlyc3RCb2FyZENlbGxzIDogc2Vjb25kQm9hcmRDZWxscztcbiAgICB9XG4gICAgZnVuY3Rpb24gaGlnaGxpZ2h0Q2VsbHModG9IaWdobGlnaHQpIHtcbiAgICAgICAgdG9IaWdobGlnaHQuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHQnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhpZ2hsaWdodENlbGxzT25Cb2FyZChzaGlwT2JqLCBzdGFydENlbGwsIGJvYXJkQ2VsbHMsIHRvSGlnaGxpZ2h0KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcFNpemU7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNlbGxJbmRleCA9IHNoaXBPYmouaXNWZXJ0aWNhbCA/IHN0YXJ0Q2VsbCArIGkgKiAxMCA6IHN0YXJ0Q2VsbCArIGk7XG4gICAgICAgICAgICBpZiAoYm9hcmRDZWxsc1tjZWxsSW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgdG9IaWdobGlnaHQucHVzaChib2FyZENlbGxzW2NlbGxJbmRleF0pO1xuICAgICAgICAgICAgICAgIGhpZ2hsaWdodGVkQ2VsbHMucHVzaChib2FyZENlbGxzW2NlbGxJbmRleF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbW92ZUhpZ2hsaWdodCgpIHtcbiAgICAgICAgaGlnaGxpZ2h0ZWRDZWxscy5mb3JFYWNoKChoaWdobGlnaHRlZENlbGwpID0+IGhpZ2hsaWdodGVkQ2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWdobGlnaHQnKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzQm9hcmRWYWxpZChib2FyZElkKSB7XG4gICAgICAgIHJldHVybiBib2FyZElkID09PSAnZmlyc3RCb2FyZCcgfHwgYm9hcmRJZCA9PT0gJ3NlY29uZEJvYXJkJztcbiAgICB9XG4gICAgZnVuY3Rpb24gcGxhY2VTaGlwT25Cb2FyZChnYW1lYm9hcmQsIHNoaXBPYmosIGxhc3QsIG9yaWVudGF0aW9uKSB7XG4gICAgICAgIGlmIChnYW1lYm9hcmQuY2FuQmVQbGFjZWQoc2hpcE9iai5zaXplLCBsYXN0WzBdLmRhdGFzZXQuY29sLCBsYXN0WzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbikpIHtcbiAgICAgICAgICAgIGdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcE9iaiwgbGFzdFswXS5kYXRhc2V0LmNvbCwgbGFzdFswXS5kYXRhc2V0LnJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICAgICAgZ2FtZWJvYXJkLnJlc2VydmVTcGFjZShnYW1lYm9hcmQsIGxhc3RbMF0uZGF0YXNldC5jb2wsIGxhc3RbMF0uZGF0YXNldC5yb3cpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZ2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwT2JqLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgIGdhbWVib2FyZC5yZXNlcnZlU3BhY2UoZ2FtZWJvYXJkLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3cpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZU1vdXNlZG93bihlKSB7XG4gICAgICAgIGNvbnN0IHsgZ2FtZWJvYXJkIH0gPSBnZXRHYW1lYm9hcmQoZSk7XG4gICAgICAgIGdhbWVib2FyZC5yZW1vdmVSZXNlcnZlZFNwYWNlKGdhbWVib2FyZCk7XG4gICAgICAgIHJlc2VydmVTcGFjZUZvclJlbWFpbmluZ1NoaXBzKGdhbWVib2FyZCwgZSk7XG4gICAgICAgIGNvbnRyb2xsZXIucmVuZXcoKTtcbiAgICAgICAgdWkuc2V0SW5pdE1lc3NhZ2UoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFuZGxlRHJhZ1N0YXJ0KGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDApKTtcbiAgICAgICAgICAgIGNvbnN0IHsgdGFyZ2V0LCBnYW1lYm9hcmQgfSA9IGdldEdhbWVib2FyZChlKTtcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgICAgICBzZXRTaGlwQXR0cmlidXRlcyhlLCB0YXJnZXQpO1xuICAgICAgICAgICAgZ2FtZWJvYXJkLnJlbW92ZVNoaXAoc2hpcE9iaiwgZ2FtZWJvYXJkKTtcbiAgICAgICAgICAgIHVpLmNsZWFyU2hpcChzaGlwT2JqLCBnYW1lYm9hcmQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFuZGxlRHJhZ092ZXIoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZ2V0R2FtZWJvYXJkKGUpO1xuICAgICAgICAgICAgY29uc3QgYm9hcmRJZCA9IHRhcmdldC5jbG9zZXN0KCcuYm9hcmQnKS5pZDtcbiAgICAgICAgICAgIGlmIChpc0JvYXJkVmFsaWQoYm9hcmRJZCkpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaWYgKHNoaXBPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRDZWxsID0gZ2V0U3RhcnRDZWxsKGluZGV4LCBzaGlwT2JqLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYm9hcmRDZWxscyA9IGdldEJvYXJkQ2VsbHMoYm9hcmRJZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvSGlnaGxpZ2h0ID0gW107XG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodENlbGxzT25Cb2FyZChzaGlwT2JqLCBzdGFydENlbGwsIGJvYXJkQ2VsbHMsIHRvSGlnaGxpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzVmFsaWRQbGFjZW1lbnQodG9IaWdobGlnaHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRDZWxscyh0b0hpZ2hsaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxhc3REcmFnZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdERyYWdnZWQgPSBnZXRMYXN0U2hpcFNpemVFbGVtZW50cyhoaWdobGlnaHRlZENlbGxzLCBzaGlwU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZURyYWdMZWF2ZSgpIHtcbiAgICAgICAgcmVtb3ZlSGlnaGxpZ2h0KCk7XG4gICAgICAgIGhpZ2hsaWdodGVkQ2VsbHMubGVuZ3RoID0gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFuZGxlRHJvcChlKSB7XG4gICAgICAgIHJlbW92ZUhpZ2hsaWdodCgpO1xuICAgICAgICBjb25zdCBsYXN0ID0gZ2V0TGFzdFNoaXBTaXplRWxlbWVudHMoaGlnaGxpZ2h0ZWRDZWxscywgc2hpcFNpemUpO1xuICAgICAgICBjb25zdCB7IHRhcmdldCwgZ2FtZWJvYXJkIH0gPSBnZXRHYW1lYm9hcmQoZSk7XG4gICAgICAgIGNvbnN0IGJvYXJkSWQgPSB0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQ7XG4gICAgICAgIGlmIChpc0JvYXJkVmFsaWQoYm9hcmRJZCkgJiYgc2hpcE9iaiAmJiBsYXN0RHJhZ2dlZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcGxhY2VTaGlwT25Cb2FyZChnYW1lYm9hcmQsIHNoaXBPYmosIGxhc3QsIG9yaWVudGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBnYW1lYm9hcmQucmVtb3ZlUmVzZXJ2ZWRTcGFjZShnYW1lYm9hcmQpO1xuICAgICAgICBnYW1lYm9hcmQucmVzZXJ2ZVNwYWNlRm9yQWxsKGdhbWVib2FyZCk7XG4gICAgICAgIGNvbnRyb2xsZXIucmVuZXcoKTtcbiAgICAgICAgdWkuY2FuQmVTdGFydGVkKCk7XG4gICAgICAgIHVpLnNldFN0YXJ0TWVzc2FnZSgpO1xuICAgICAgICBsYXN0RHJhZ2dlZCA9IG51bGw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZURyYWdFbmQoZSkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgIHByZXZlbnRPZmZCb2FyZFBsYWNlbWVudCh0YXJnZXQsIGUpO1xuICAgICAgICBpZiAodWkuY2FuQmVTdGFydGVkKCkpIHtcbiAgICAgICAgICAgIHVpLmZpbGxDZWxscygnc2Vjb25kJyk7XG4gICAgICAgIH1cbiAgICAgICAgdWkuc2V0U3RhcnRNZXNzYWdlKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZU1vdXNldXAoZSkge1xuICAgICAgICBjb25zdCB7IGdhbWVib2FyZCB9ID0gZ2V0R2FtZWJvYXJkKGUpO1xuICAgICAgICBnYW1lYm9hcmQucmVzZXJ2ZVNwYWNlRm9yQWxsKGdhbWVib2FyZCk7XG4gICAgICAgIGNvbnRyb2xsZXIucmVuZXcoKTtcbiAgICAgICAgdWkuc2V0U3RhcnRNZXNzYWdlKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZVJvdGF0ZShlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgeyB0YXJnZXQsIGdhbWVib2FyZCB9ID0gZ2V0R2FtZWJvYXJkKGUpO1xuICAgICAgICBjb25zdCB7IHNoaXBOYW1lLCBzaGlwT2JqIH0gPSBzZXRTaGlwQXR0cmlidXRlcyhlLCB0YXJnZXQpO1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gZ2FtZWJvYXJkLnNoaXBzUGxhY2VkLmZpbHRlcigoc2hpcCkgPT4gc2hpcC50YWtlbkJ5Lm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gc2hpcE5hbWUpO1xuICAgICAgICBnYW1lYm9hcmQucmVtb3ZlU2hpcChzaGlwT2JqLCBnYW1lYm9hcmQpO1xuICAgICAgICBnYW1lYm9hcmQucmVtb3ZlUmVzZXJ2ZWRTcGFjZShnYW1lYm9hcmQpO1xuICAgICAgICBnYW1lYm9hcmQucmVzZXJ2ZVNwYWNlRm9yQWxsKGdhbWVib2FyZCk7XG4gICAgICAgIHNoaXBPYmoucm90YXRlKCk7XG4gICAgICAgIG9yaWVudGF0aW9uID0gc2hpcE9iai5pc1ZlcnRpY2FsID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJztcbiAgICAgICAgaWYgKCFnYW1lYm9hcmQuY2FuQmVQbGFjZWQoc2hpcE9iai5zaXplLCBjdXJyZW50WzBdLmNvbCwgY3VycmVudFswXS5yb3csIG9yaWVudGF0aW9uKSkge1xuICAgICAgICAgICAgc2hpcE9iai5yb3RhdGUoKTtcbiAgICAgICAgICAgIG9yaWVudGF0aW9uID0gc2hpcE9iai5pc1ZlcnRpY2FsID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJztcbiAgICAgICAgfVxuICAgICAgICBnYW1lYm9hcmQucGxhY2VTaGlwKHNoaXBPYmosIGN1cnJlbnRbMF0uY29sLCBjdXJyZW50WzBdLnJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICBnYW1lYm9hcmQucmVzZXJ2ZVNwYWNlRm9yQWxsKGdhbWVib2FyZCk7XG4gICAgICAgIGNvbnRyb2xsZXIucmVuZXcoKTtcbiAgICAgICAgaWYgKHVpLmNhbkJlU3RhcnRlZCgpKSB7XG4gICAgICAgICAgICB1aS5maWxsQ2VsbHMoJ3NlY29uZCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJsb2NrUmlnaHRDbGljayhlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnNUb0NlbGxzKGNlbGxzKSB7XG4gICAgICAgIGNlbGxzLmZvckVhY2goKGNlbGwsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgaGFuZGxlRHJhZ092ZXIoaW5kZXgpKTtcbiAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgaGFuZGxlRHJhZ0xlYXZlKTtcbiAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGhhbmRsZURyb3ApO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWRkRXZlbnRMaXN0ZW5lcnNUb0NlbGxzKGZpcnN0Qm9hcmRDZWxscyk7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcnNUb0NlbGxzKHNlY29uZEJvYXJkQ2VsbHMpO1xuICAgIGRyYWdnYWJsZXMuZm9yRWFjaCgoZHJhZ2dhYmxlKSA9PiB7XG4gICAgICAgIGRyYWdnYWJsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVNb3VzZWRvd24pO1xuICAgICAgICBkcmFnZ2FibGUuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgaGFuZGxlRHJhZ1N0YXJ0KTtcbiAgICAgICAgZHJhZ2dhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCBoYW5kbGVEcmFnRW5kKTtcbiAgICAgICAgZHJhZ2dhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBoYW5kbGVNb3VzZXVwKTtcbiAgICAgICAgZHJhZ2dhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgaGFuZGxlUm90YXRlKTtcbiAgICAgICAgbm9uU2hpcENlbGxzLmZvckVhY2goKGNlbGwpID0+IGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBibG9ja1JpZ2h0Q2xpY2spKTtcbiAgICB9KTtcbn07XG5leHBvcnQgZGVmYXVsdCBkcmFnQW5kRHJvcDtcbiIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IGRyYWdBbmREcm9wIGZyb20gJy4vZHJhZ0FuZERyb3AnO1xuaW1wb3J0IGNvbnRyb2xsZXIgZnJvbSAnLi9jb250cm9sbGVyJztcbmNvbnN0IHVpID0gKCgpID0+IHtcbiAgICBjb25zdCBzdGF0dXNCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUJveCBwJyk7XG4gICAgY29uc3QgYm9hcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JvYXJkcycpO1xuICAgIGNvbnN0IHBWY0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwbGF5ZXJWc0NvbXB1dGVyJyk7XG4gICAgY29uc3QgbmV3R2FtZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdHYW1lJyk7XG4gICAgY29uc3QgY1ZjQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbXB1dGVyVnNDb21wdXRlcicpO1xuICAgIGNvbnN0IHN0YXJ0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N0YXJ0Jyk7XG4gICAgY29uc3QgcmFuZG9tQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3JhbmRvbVBsYWNlbWVudCcpO1xuICAgIGNvbnN0IGFsbEJ0bnMgPSBbcFZjQnRuLCBuZXdHYW1lQnRuLCBjVmNCdG4sIHN0YXJ0QnRuLCByYW5kb21CdG5dO1xuICAgIGNvbnN0IHNwZWVkcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCdzcGVlZCcpO1xuICAgIGxldCBzcGVlZFZhbHVlID0gMTAwMDtcbiAgICBjb25zdCBjcmVhdGVDZWxsID0gKGNlbGwpID0+IHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NlbGwnKTtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNlbGwuc3RhdHVzKTtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29sJywgY2VsbC5jb2wpO1xuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1yb3cnLCBjZWxsLnJvdyk7XG4gICAgICAgIGlmIChjZWxsLnRha2VuQnkpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXNoaXBOYW1lJywgY2VsbC50YWtlbkJ5Lm5hbWUudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfTtcbiAgICBjb25zdCByZW5kZXJDZWxscyA9IChnYW1lYm9hcmQsIGJvYXJkKSA9PiB7XG4gICAgICAgIGdhbWVib2FyZC5hcnJheS5mb3JFYWNoKChyb3cpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKChjb2wpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gY3JlYXRlQ2VsbChjb2wpO1xuICAgICAgICAgICAgICAgIGJvYXJkLmFwcGVuZChjZWxsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IGdldEJvYXJkSWQgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGlmIChnYW1lYm9hcmQgPT09IGNvbnRyb2xsZXIuaHVtYW5HYW1lYm9hcmQpIHtcbiAgICAgICAgICAgIHJldHVybiAnZmlyc3RCb2FyZCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZ2FtZWJvYXJkID09PSBjb250cm9sbGVyLmNvbXB1dGVyR2FtZWJvYXJkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3NlY29uZEJvYXJkJztcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcmVuZGVyQm9hcmQgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGJvYXJkLmNsYXNzTGlzdC5hZGQoJ2JvYXJkJyk7XG4gICAgICAgIGJvYXJkLmlkID0gZ2V0Qm9hcmRJZChnYW1lYm9hcmQpO1xuICAgICAgICByZW5kZXJDZWxscyhnYW1lYm9hcmQsIGJvYXJkKTtcbiAgICAgICAgYm9hcmRzLmFwcGVuZChib2FyZCk7XG4gICAgfTtcbiAgICBjb25zdCBjbGVhclNoaXAgPSAoc2hpcCwgZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgIyR7Z2V0Qm9hcmRJZChnYW1lYm9hcmQpfSAuY2VsbGApO1xuICAgICAgICBjZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ3Rha2VuJykgJiYgY2VsbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2hpcE5hbWUnKSA9PT0gc2hpcC5uYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ3Rha2VuJyk7XG4gICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdlbXB0eScpO1xuICAgICAgICAgICAgICAgIGNlbGwucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXNoaXBOYW1lJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgcmVmcmVzaEJvYXJkID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBjb25zdCBib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2dldEJvYXJkSWQoZ2FtZWJvYXJkKX1gKTtcbiAgICAgICAgYm9hcmQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIHJlbmRlckNlbGxzKGdhbWVib2FyZCwgYm9hcmQpO1xuICAgIH07XG4gICAgY29uc3QgZ2V0VXNlcklucHV0ID0gKGUpID0+IHtcbiAgICAgICAgaWYgKCFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpdCcpICYmICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21pc3MnKSkge1xuICAgICAgICAgICAgY29uc3QgY29sID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbCcpO1xuICAgICAgICAgICAgY29uc3Qgcm93ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXJvdycpO1xuICAgICAgICAgICAgcmV0dXJuIHsgY29sLCByb3cgfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlVXNlcklucHV0ID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnN0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3NlY29uZEJvYXJkIC5jZWxsJyk7XG4gICAgICAgIGxldCB1c2VySW5wdXQ7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIHVzZXJJbnB1dCA9IHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaXQnKSAmJiAhY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ21pc3MnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShnZXRVc2VySW5wdXQoZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSB3aGlsZSAoIXVzZXJJbnB1dCk7XG4gICAgICAgIGNvbnN0IGNvbCA9IHVzZXJJbnB1dC5jb2wudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3Qgcm93ID0gdXNlcklucHV0LnJvdy50b1N0cmluZygpO1xuICAgICAgICByZXR1cm4geyBjb2wsIHJvdyB9O1xuICAgIH0pO1xuICAgIGNvbnN0IGhhbmRsZVB2QyA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBmaWxsQ2VsbHMoJ2ZpcnN0Jyk7XG4gICAgICAgIHdhaXRpbmcodHJ1ZSk7XG4gICAgICAgIGFsbEJ0bnMuZm9yRWFjaCgoYnRuKSA9PiAoYnRuLmRpc2FibGVkID0gdHJ1ZSkpO1xuICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBnZXRTcGVlZFZhbHVlKCkpKTtcbiAgICAgICAgYWxsQnRucy5mb3JFYWNoKChidG4pID0+IChidG4uZGlzYWJsZWQgPSBmYWxzZSkpO1xuICAgICAgICB3YWl0aW5nKGZhbHNlKTtcbiAgICAgICAgY2FuQmVTdGFydGVkKCk7XG4gICAgICAgIHNldEluaXRNZXNzYWdlKCk7XG4gICAgfSk7XG4gICAgY29uc3QgaGFuZGxlTmV3R2FtZSA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBzZXRSZXN0YXJ0TWVzc2FnZSgpO1xuICAgICAgICB3YWl0aW5nKHRydWUpO1xuICAgICAgICBhbGxCdG5zLmZvckVhY2goKGJ0bikgPT4gKGJ0bi5kaXNhYmxlZCA9IHRydWUpKTtcbiAgICAgICAgeWllbGQgY29udHJvbGxlci5uZXdHYW1lKCk7XG4gICAgICAgIGFsbEJ0bnMuZm9yRWFjaCgoYnRuKSA9PiAoYnRuLmRpc2FibGVkID0gZmFsc2UpKTtcbiAgICAgICAgd2FpdGluZyhmYWxzZSk7XG4gICAgICAgIGNhbkJlU3RhcnRlZCgpO1xuICAgICAgICBpZiAocFZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgc2V0SW5pdE1lc3NhZ2UoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGhhbmRsZUN2QyA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICB3YWl0aW5nKHRydWUpO1xuICAgICAgICBhbGxCdG5zLmZvckVhY2goKGJ0bikgPT4gKGJ0bi5kaXNhYmxlZCA9IHRydWUpKTtcbiAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZ2V0U3BlZWRWYWx1ZSgpKSk7XG4gICAgICAgIGFsbEJ0bnMuZm9yRWFjaCgoYnRuKSA9PiAoYnRuLmRpc2FibGVkID0gZmFsc2UpKTtcbiAgICAgICAgd2FpdGluZyhmYWxzZSk7XG4gICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgcmFuZG9tQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgY1ZjQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9KTtcbiAgICBjb25zdCBoYW5kbGVHYW1lTW9kZSA9IChzZWxlY3RlZEVsZW1lbnQsIGRlc2VsZWN0ZWRFbGVtZW50KSA9PiB7XG4gICAgICAgIGRlc2VsZWN0ZWRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XG4gICAgICAgIGlmICghc2VsZWN0ZWRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRFbGVtZW50ID09PSBwVmNCdG4pIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVQdkMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZWxlY3RlZEVsZW1lbnQgPT09IGNWY0J0bikge1xuICAgICAgICAgICAgICAgIGhhbmRsZUN2QygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udHJvbGxlci5yZXN0YXJ0KCk7XG4gICAgICAgICAgICBzZXRSZXN0YXJ0TWVzc2FnZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCB3YWl0aW5nID0gKGJvb2wpID0+IHtcbiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ3dhaXQnLCBib29sKTtcbiAgICB9O1xuICAgIGNvbnN0IHNldEJvYXJkUG9pbnRlciA9ICh3aGljaCkgPT4ge1xuICAgICAgICBjb25zdCBzZWNvbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgaWYgKHdoaWNoID09PSAncGxheWVyJykge1xuICAgICAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5hZGQoJ2JvYXJkT3V0bGluZScpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHdoaWNoID09PSAnY29tcHV0ZXInKSB7XG4gICAgICAgICAgICBzZWNvbmQuY2xhc3NMaXN0LnJlbW92ZSgnYm9hcmRPdXRsaW5lJyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZUJvYXJkUG9pbnRlciA9ICgpID0+IHtcbiAgICAgICAgY29uc3Qgc2Vjb25kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIHNlY29uZC5jbGFzc0xpc3QucmVtb3ZlKCdib2FyZE91dGxpbmUnKTtcbiAgICB9O1xuICAgIGNvbnN0IGNyZWF0ZVNoaXBFbGVtZW50ID0gKGZpcnN0Q2VsbCkgPT4ge1xuICAgICAgICBjb25zdCBzaGlwRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb25zdCBzaGlwTmFtZSA9IGZpcnN0Q2VsbC50YWtlbkJ5Lm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3Qgc2hpcFNpemUgPSBmaXJzdENlbGwudGFrZW5CeS5zaXplO1xuICAgICAgICBzaGlwRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzaGlwJywgc2hpcE5hbWUsICdkcmFnZ2FibGUnKTtcbiAgICAgICAgc2hpcEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXNpemUnLCBgJHtzaGlwU2l6ZX1gKTtcbiAgICAgICAgc2hpcEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnLCBgJHtzaGlwTmFtZX1gKTtcbiAgICAgICAgc2hpcEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkcmFnZ2FibGUnLCAndHJ1ZScpO1xuICAgICAgICByZXR1cm4gc2hpcEVsZW1lbnQ7XG4gICAgfTtcbiAgICBjb25zdCBzZXRTaGlwU3R5bGUgPSAoc2hpcEVsZW1lbnQsIHNoaXBTaXplLCBjZWxsU2l6ZSwgaXNWZXJ0aWNhbCkgPT4ge1xuICAgICAgICBjb25zdCBodG1sRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKTtcbiAgICAgICAgY29uc3Qgcm9vdEZvbnRTaXplID0gcGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShodG1sRWxlbWVudCwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgnZm9udC1zaXplJykpO1xuICAgICAgICBpZiAoIWlzVmVydGljYWwpIHtcbiAgICAgICAgICAgIHNoaXBFbGVtZW50LnN0eWxlLndpZHRoID0gc2hpcFNpemUgKiAoY2VsbFNpemUgLyByb290Rm9udFNpemUpICsgJ3JlbSc7XG4gICAgICAgICAgICBzaGlwRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBjZWxsU2l6ZSAvIHJvb3RGb250U2l6ZSArICdyZW0nO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2hpcEVsZW1lbnQuc3R5bGUud2lkdGggPSBjZWxsU2l6ZSAvIHJvb3RGb250U2l6ZSArICdyZW0nO1xuICAgICAgICAgICAgc2hpcEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gc2hpcFNpemUgKiAoY2VsbFNpemUgLyByb290Rm9udFNpemUpICsgJ3JlbSc7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHJlc2l6ZUhhbmRsZXIgPSAoc2hpcEVsZW1lbnQsIHNoaXBTaXplLCBpc1ZlcnRpY2FsKSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGxTaXplID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvYXJkIC5jZWxsJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgIHNldFNoaXBTdHlsZShzaGlwRWxlbWVudCwgc2hpcFNpemUsIGNlbGxTaXplLCBpc1ZlcnRpY2FsKTtcbiAgICB9O1xuICAgIGNvbnN0IGNyZWF0ZVNoaXBPdmVybGF5ID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBnYW1lYm9hcmQuc2hpcHNQbGFjZWQuZm9yRWFjaCgoZmlyc3RDZWxsKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzaGlwRWxlbWVudCA9IGNyZWF0ZVNoaXBFbGVtZW50KGZpcnN0Q2VsbCk7XG4gICAgICAgICAgICBjb25zdCBjZWxsU2l6ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib2FyZCAuY2VsbCcpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgICAgICAgY29uc3Qgc2hpcFNpemUgPSBmaXJzdENlbGwudGFrZW5CeS5zaXplO1xuICAgICAgICAgICAgY29uc3QgaXNWZXJ0aWNhbCA9IGZpcnN0Q2VsbC50YWtlbkJ5LmlzVmVydGljYWw7XG4gICAgICAgICAgICBjb25zdCBmaXJzdENlbGxFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7Z2V0Qm9hcmRJZChnYW1lYm9hcmQpfSAuY2VsbFtkYXRhLWNvbD1cIiR7Zmlyc3RDZWxsLmNvbH1cIl1bZGF0YS1yb3c9XCIke2ZpcnN0Q2VsbC5yb3d9XCJdYCk7XG4gICAgICAgICAgICBmaXJzdENlbGxFbGVtZW50LmFwcGVuZENoaWxkKHNoaXBFbGVtZW50KTtcbiAgICAgICAgICAgIHNldFNoaXBTdHlsZShzaGlwRWxlbWVudCwgc2hpcFNpemUsIGNlbGxTaXplLCBpc1ZlcnRpY2FsKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiByZXNpemVIYW5kbGVyKHNoaXBFbGVtZW50LCBzaGlwU2l6ZSwgaXNWZXJ0aWNhbCkpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IGNhbkJlU3RhcnRlZCA9ICgpID0+IHtcbiAgICAgICAgaWYgKGNvbnRyb2xsZXIuaHVtYW5HYW1lYm9hcmQuc2hpcHNQbGFjZWQubGVuZ3RoID09PSA1ICYmIGNvbnRyb2xsZXIuY29tcHV0ZXJHYW1lYm9hcmQuc2hpcHNQbGFjZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBmaWxsQ2VsbHMoJ3NlY29uZCcpO1xuICAgICAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRJbml0TWVzc2FnZSA9ICgpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhdHVzVGV4dE1vYmlsZSA9IFwiVXNlICdSYW5kb20gUGxhY2VtZW50JyBidXR0b24sIHRoZW4gcHJlc3MgU3RhcnQhXCI7XG4gICAgICAgIGNvbnN0IHN0YXR1c1RleHREZXNrdG9wID0gXCJEcmFnIGFuZCBkcm9wIHNoaXBzIG9udG8gdGhlIGxlZnQgYm9hcmQgb3IgdXNlICdSYW5kb20gUGxhY2VtZW50JyBidXR0b24uIFJpZ2h0IGNsaWNrIHRvIHJvdGF0ZS4gV2hlbiByZWFkeSwgcHJlc3MgU3RhcnQhXCI7XG4gICAgICAgIGlmIChzdGF0dXNCb3gudGV4dENvbnRlbnQgPT09IHN0YXR1c1RleHRNb2JpbGUgfHxcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9PT0gc3RhdHVzVGV4dERlc2t0b3AgfHxcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9PT0gJ1Jlc3RhcnRpbmcuLi4nIHx8XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPT09ICdZb3UgY2FuIG5vdyBiZWdpbiB0aGUgZ2FtZS4gUHJlc3Mgc3RhcnQhJykge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gc3RhdHVzVGV4dE1vYmlsZTtcbiAgICAgICAgICAgIGlmICh3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogMTAyNHB4KScpLm1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSBzdGF0dXNUZXh0RGVza3RvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0U3RhcnRNZXNzYWdlID0gKCkgPT4ge1xuICAgICAgICBpZiAoY2FuQmVTdGFydGVkKCkpIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9ICdZb3UgY2FuIG5vdyBiZWdpbiB0aGUgZ2FtZS4gUHJlc3Mgc3RhcnQhJztcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0VHVybk1lc3NhZ2VQdkMgPSAoaXNQbGF5ZXJUdXJuKSA9PiB7XG4gICAgICAgIGlmIChpc1BsYXllclR1cm4pIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9IFwiUGxheWVyJ3MgdHVybi4gVGFrZSBhaW0gYW5kIGF0dGFjayFcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9IFwiQ29tcHV0ZXIncyB0dXJuLiBUaGUgc2hvdCBpcyBjb21pbmchXCI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldFR1cm5NZXNzYWdlQ3ZDID0gKGlzUGxheWVyVHVybikgPT4ge1xuICAgICAgICBpZiAoaXNQbGF5ZXJUdXJuKSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSBcIlZpb2xldCdzIHR1cm5cIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9IFwiQmx1ZSdzIHR1cm5cIjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0R2FtZU92ZXJNZXNzYWdlUHZDID0gKHdobykgPT4ge1xuICAgICAgICBpZiAod2hvID09PSAncGxheWVyJykge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gJ0dhbWUgb3ZlciwgUGxheWVyIHdpbnMhJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh3aG8gPT09ICdjb21wdXRlcicpIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9ICdHYW1lIG92ZXIsIENvbXB1dGVyIHdpbnMhJztcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0R2FtZU92ZXJNZXNzYWdlQ3ZDID0gKHdobykgPT4ge1xuICAgICAgICBpZiAod2hvID09PSAncGxheWVyJykge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gJ0dhbWUgb3ZlciwgQmx1ZSBDb21wdXRlciB3aW5zISc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAod2hvID09PSAnY29tcHV0ZXInKSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSAnR2FtZSBvdmVyLCBWaW9sZXQgQ29tcHV0ZXIgd2lucyEnO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRSZXN0YXJ0TWVzc2FnZSA9ICgpID0+IHtcbiAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gJ1Jlc3RhcnRpbmcuLi4nO1xuICAgIH07XG4gICAgY29uc3QgZmlsbENlbGxzID0gKGlucHV0KSA9PiB7XG4gICAgICAgIGxldCBib2FyZDtcbiAgICAgICAgaWYgKGlucHV0ID09PSAnZmlyc3QnKSB7XG4gICAgICAgICAgICBib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmaXJzdEJvYXJkJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5wdXQgPT09ICdzZWNvbmQnKSB7XG4gICAgICAgICAgICBib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWNvbmRCb2FyZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNlbGxzID0gYm9hcmQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKTtcbiAgICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdmaWxsZWQnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCB1bkZpbGxDZWxscyA9IChpbnB1dCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHdhaXRpbmcodHJ1ZSk7XG4gICAgICAgIGxldCBib2FyZDtcbiAgICAgICAgaWYgKGlucHV0ID09PSAnZmlyc3QnKSB7XG4gICAgICAgICAgICBib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmaXJzdEJvYXJkJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5wdXQgPT09ICdzZWNvbmQnKSB7XG4gICAgICAgICAgICBib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWNvbmRCb2FyZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNlbGxzID0gYm9hcmQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKTtcbiAgICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdmaWxsZWQnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBjZWxscy5mb3JFYWNoKChjZWxsLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2ZpbGxlZCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IGNlbGxzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIChnZXRTcGVlZFZhbHVlKCkgLyAxMjApICogaW5kZXgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB3YWl0aW5nKGZhbHNlKTtcbiAgICB9KTtcbiAgICBwVmNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGZpbGxDZWxscygnZmlyc3QnKTtcbiAgICAgICAgaGFuZGxlR2FtZU1vZGUocFZjQnRuLCBjVmNCdG4pO1xuICAgICAgICBjb25zdCBzZWNvbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5yZW1vdmUoJ3N0YXJ0Jyk7XG4gICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgcFZjQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgdW5GaWxsQ2VsbHMoJ2ZpcnN0Jyk7XG4gICAgfSk7XG4gICAgY1ZjQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBmaWxsQ2VsbHMoJ2ZpcnN0Jyk7XG4gICAgICAgIGZpbGxDZWxscygnc2Vjb25kJyk7XG4gICAgICAgIGhhbmRsZUdhbWVNb2RlKGNWY0J0biwgcFZjQnRuKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIHNlY29uZC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XG4gICAgICAgIHNlY29uZC5jbGFzc0xpc3QuYWRkKCdzdGFydCcpO1xuICAgICAgICBzdGFydEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHJhbmRvbUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGNWY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIFByb21pc2UuYWxsKFt1bkZpbGxDZWxscygnZmlyc3QnKSwgdW5GaWxsQ2VsbHMoJ3NlY29uZCcpXSk7XG4gICAgfSk7XG4gICAgbmV3R2FtZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICByZW1vdmVCb2FyZFBvaW50ZXIoKTtcbiAgICAgICAgZmlsbENlbGxzKCdmaXJzdCcpO1xuICAgICAgICBpZiAoY1ZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgZmlsbENlbGxzKCdzZWNvbmQnKTtcbiAgICAgICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJhbmRvbUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICBjVmNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHlpZWxkIGhhbmRsZU5ld0dhbWUoKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIHNlY29uZC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XG4gICAgICAgIGlmIChwVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBzZWNvbmQuY2xhc3NMaXN0LnJlbW92ZSgnc3RhcnQnKTtcbiAgICAgICAgICAgIHVuRmlsbENlbGxzKCdmaXJzdCcpO1xuICAgICAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgcFZjQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY1ZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5hZGQoJ3N0YXJ0Jyk7XG4gICAgICAgICAgICByYW5kb21CdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgUHJvbWlzZS5hbGwoW3VuRmlsbENlbGxzKCdmaXJzdCcpLCB1bkZpbGxDZWxscygnc2Vjb25kJyldKTtcbiAgICAgICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJhbmRvbUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICBjVmNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSkpO1xuICAgIHN0YXJ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjb250cm9sbGVyLnN0YXJ0KCk7XG4gICAgICAgIGNvbnN0IGZpcnN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpcnN0Qm9hcmQnKTtcbiAgICAgICAgZmlyc3QuY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xuICAgICAgICBjb25zdCBzZWNvbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5hZGQoJ3N0YXJ0Jyk7XG4gICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgcmFuZG9tQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgdW5GaWxsQ2VsbHMoJ3NlY29uZCcpO1xuICAgIH0pO1xuICAgIHJhbmRvbUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY29udHJvbGxlci5jb21wdXRlckdhbWVib2FyZC5jbGVhckJvYXJkKCk7XG4gICAgICAgIHJlZnJlc2hCb2FyZChjb250cm9sbGVyLmNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgY29udHJvbGxlci5yYW5kb21pemVTaGlwc1BsYWNlbWVudChjb250cm9sbGVyLmh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgZHJhZ0FuZERyb3AoY29udHJvbGxlci5odW1hbkdhbWVib2FyZCwgY29udHJvbGxlci5jb21wdXRlckdhbWVib2FyZCwgY29udHJvbGxlci5odW1hblNoaXBzKTtcbiAgICAgICAgY2FuQmVTdGFydGVkKCk7XG4gICAgICAgIHNldFN0YXJ0TWVzc2FnZSgpO1xuICAgICAgICBmaWxsQ2VsbHMoJ3NlY29uZCcpO1xuICAgIH0pO1xuICAgIGNvbnN0IHNldFNwZWVkVmFsdWUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IGlucHV0ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBpZiAoaW5wdXQuY2hlY2tlZCkge1xuICAgICAgICAgICAgc3BlZWRWYWx1ZSA9IE51bWJlcihpbnB1dC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGdldFNwZWVkVmFsdWUgPSAoKSA9PiBzcGVlZFZhbHVlO1xuICAgIHNwZWVkcy5mb3JFYWNoKChzcGVlZEJ0bikgPT4ge1xuICAgICAgICBzcGVlZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNldFNwZWVkVmFsdWUpO1xuICAgIH0pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBzZXRJbml0TWVzc2FnZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVuZGVyQm9hcmQsXG4gICAgICAgIGNsZWFyU2hpcCxcbiAgICAgICAgcmVmcmVzaEJvYXJkLFxuICAgICAgICBoYW5kbGVVc2VySW5wdXQsXG4gICAgICAgIHBWY0J0bixcbiAgICAgICAgY1ZjQnRuLFxuICAgICAgICB3YWl0aW5nLFxuICAgICAgICBzZXRCb2FyZFBvaW50ZXIsXG4gICAgICAgIHJlbW92ZUJvYXJkUG9pbnRlcixcbiAgICAgICAgY3JlYXRlU2hpcE92ZXJsYXksXG4gICAgICAgIGNhbkJlU3RhcnRlZCxcbiAgICAgICAgc2V0SW5pdE1lc3NhZ2UsXG4gICAgICAgIHNldFN0YXJ0TWVzc2FnZSxcbiAgICAgICAgc2V0VHVybk1lc3NhZ2VQdkMsXG4gICAgICAgIHNldFR1cm5NZXNzYWdlQ3ZDLFxuICAgICAgICBzZXRHYW1lT3Zlck1lc3NhZ2VQdkMsXG4gICAgICAgIHNldEdhbWVPdmVyTWVzc2FnZUN2QyxcbiAgICAgICAgc2V0UmVzdGFydE1lc3NhZ2UsXG4gICAgICAgIGdldFNwZWVkVmFsdWUsXG4gICAgICAgIGZpbGxDZWxscyxcbiAgICAgICAgdW5GaWxsQ2VsbHMsXG4gICAgfTtcbn0pKCk7XG5leHBvcnQgZGVmYXVsdCB1aTtcbiIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IGdhbWVib2FyZEZhY3RvcnkgZnJvbSAnLi9nYW1lYm9hcmQnO1xuaW1wb3J0IHNoaXBGYWN0b3J5IGZyb20gJy4vc2hpcCc7XG5pbXBvcnQgcGxheWVyRmFjdG9yeSBmcm9tICcuL3BsYXllcic7XG5pbXBvcnQgdWkgZnJvbSAnLi91aSc7XG5pbXBvcnQgZHJhZ0FuZERyb3AgZnJvbSAnLi9kcmFnQW5kRHJvcCc7XG5jb25zdCBjb250cm9sbGVyID0gKCgpID0+IHtcbiAgICBjb25zdCBodW1hbkdhbWVib2FyZCA9IGdhbWVib2FyZEZhY3RvcnkoKTtcbiAgICBjb25zdCBjb21wdXRlckdhbWVib2FyZCA9IGdhbWVib2FyZEZhY3RvcnkoKTtcbiAgICBjb25zdCBodW1hbiA9IHBsYXllckZhY3RvcnkoKTtcbiAgICBjb25zdCBjb21wdXRlciA9IHBsYXllckZhY3RvcnkoKTtcbiAgICBsZXQgaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICBsZXQgaHVtYW5DYXJyaWVyID0gc2hpcEZhY3RvcnkoJ0NhcnJpZXInKTtcbiAgICBsZXQgaHVtYW5CYXR0bGVzaGlwID0gc2hpcEZhY3RvcnkoJ0JhdHRsZXNoaXAnKTtcbiAgICBsZXQgaHVtYW5EZXN0cm95ZXIgPSBzaGlwRmFjdG9yeSgnRGVzdHJveWVyJyk7XG4gICAgbGV0IGh1bWFuU3VibWFyaW5lID0gc2hpcEZhY3RvcnkoJ1N1Ym1hcmluZScpO1xuICAgIGxldCBodW1hblBhdHJvbGJvYXQgPSBzaGlwRmFjdG9yeSgnUGF0cm9sQm9hdCcpO1xuICAgIGNvbnN0IGh1bWFuU2hpcHMgPSBbaHVtYW5DYXJyaWVyLCBodW1hbkJhdHRsZXNoaXAsIGh1bWFuRGVzdHJveWVyLCBodW1hblN1Ym1hcmluZSwgaHVtYW5QYXRyb2xib2F0XTtcbiAgICBjb25zdCBwb3B1bGF0ZVNoaXBzID0gKCkgPT4ge1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5wbGFjZVNoaXAoaHVtYW5DYXJyaWVyLCAnQScsICcxJywgJ2hvcml6b250YWwnKTtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucGxhY2VTaGlwKGh1bWFuQmF0dGxlc2hpcCwgJ0EnLCAnMycsICdob3Jpem9udGFsJyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnBsYWNlU2hpcChodW1hbkRlc3Ryb3llciwgJ0EnLCAnNScsICdob3Jpem9udGFsJyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnBsYWNlU2hpcChodW1hblN1Ym1hcmluZSwgJ0EnLCAnNycsICdob3Jpem9udGFsJyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnBsYWNlU2hpcChodW1hblBhdHJvbGJvYXQsICdBJywgJzknLCAnaG9yaXpvbnRhbCcpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5yZXNlcnZlU3BhY2UoY29tcHV0ZXJHYW1lYm9hcmQsICdBJywgJzEnKTtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGNvbXB1dGVyR2FtZWJvYXJkLCAnQScsICczJyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnJlc2VydmVTcGFjZShjb21wdXRlckdhbWVib2FyZCwgJ0EnLCAnNScpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5yZXNlcnZlU3BhY2UoY29tcHV0ZXJHYW1lYm9hcmQsICdBJywgJzcnKTtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGNvbXB1dGVyR2FtZWJvYXJkLCAnQScsICc5Jyk7XG4gICAgfTtcbiAgICBjb25zdCByZW5ldyA9ICgpID0+IHtcbiAgICAgICAgdWkucmVmcmVzaEJvYXJkKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgdWkucmVmcmVzaEJvYXJkKGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgdWkuY3JlYXRlU2hpcE92ZXJsYXkoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICB1aS5jcmVhdGVTaGlwT3ZlcmxheShjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIGRyYWdBbmREcm9wKGh1bWFuR2FtZWJvYXJkLCBjb21wdXRlckdhbWVib2FyZCwgaHVtYW5TaGlwcyk7XG4gICAgfTtcbiAgICBjb25zdCBpc0dhbWVPdmVyID0gKCkgPT4ge1xuICAgICAgICBpZiAoY29tcHV0ZXJHYW1lYm9hcmQuYWxsU3Vuayhjb21wdXRlckdhbWVib2FyZCkpIHtcbiAgICAgICAgICAgIHVpLnJlbW92ZUJvYXJkUG9pbnRlcigpO1xuICAgICAgICAgICAgaWYgKHVpLnBWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgICAgICB1aS5zZXRHYW1lT3Zlck1lc3NhZ2VQdkMoJ3BsYXllcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVpLmNWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgICAgICB1aS5zZXRHYW1lT3Zlck1lc3NhZ2VDdkMoJ3BsYXllcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh1bWFuR2FtZWJvYXJkLmFsbFN1bmsoaHVtYW5HYW1lYm9hcmQpKSB7XG4gICAgICAgICAgICB1aS5yZW1vdmVCb2FyZFBvaW50ZXIoKTtcbiAgICAgICAgICAgIGlmICh1aS5wVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgdWkuc2V0R2FtZU92ZXJNZXNzYWdlUHZDKCdjb21wdXRlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVpLmNWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgICAgICB1aS5zZXRHYW1lT3Zlck1lc3NhZ2VDdkMoJ2NvbXB1dGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBjb25zdCBjb21wdXRlckFJID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBsZXQgcGxheWVyO1xuICAgICAgICBpZiAoZ2FtZWJvYXJkID09PSBodW1hbkdhbWVib2FyZCkge1xuICAgICAgICAgICAgcGxheWVyID0gY29tcHV0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZ2FtZWJvYXJkID09PSBjb21wdXRlckdhbWVib2FyZCkge1xuICAgICAgICAgICAgcGxheWVyID0gaHVtYW47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdhbWVib2FyZC5oaXRCdXROb3RTdW5rKGdhbWVib2FyZCkpIHtcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuZ2V0UHJldkhpdCgpICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgcGxheWVyLmdldExhc3RIaXQoKSAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIGdhbWVib2FyZC5nZXRDZWxsKHBsYXllci5nZXRMYXN0SGl0KCkuY29sLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLnJvdykudGFrZW5CeS5oaXRDb3VudCA+PSAyICYmXG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLmdldENlbGwocGxheWVyLmdldExhc3RIaXQoKS5jb2wsIHBsYXllci5nZXRMYXN0SGl0KCkucm93KS50YWtlbkJ5LmhpdENvdW50IDw9IDQpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuZmluaXNoaW5nQXR0YWNrKGdhbWVib2FyZCwgcGxheWVyLmdldExhc3RIaXQoKS5jb2wsIHBsYXllci5nZXRMYXN0SGl0KCkucm93LCBwbGF5ZXIuZ2V0UHJldkhpdCgpKTtcbiAgICAgICAgICAgICAgICBnYW1lYm9hcmQuc2lua1NoaXAoZ2FtZWJvYXJkLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLmNvbCwgcGxheWVyLmdldExhc3RIaXQoKS5yb3cpO1xuICAgICAgICAgICAgICAgIGlmIChpc0dhbWVPdmVyKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGdhbWVib2FyZC5nZXRDZWxsKHBsYXllci5nZXRMYXN0SGl0KCkuY29sLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLnJvdykudGFrZW5CeS5oaXRDb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHBsYXllci5mb2xsb3d1cEF0dGFjayhnYW1lYm9hcmQsIHBsYXllci5nZXRMYXN0SGl0KCkuY29sLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLnJvdyk7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnNpbmtTaGlwKGdhbWVib2FyZCwgcGxheWVyLmdldExhc3RIaXQoKS5jb2wsIHBsYXllci5nZXRMYXN0SGl0KCkucm93KTtcbiAgICAgICAgICAgICAgICBpZiAoaXNHYW1lT3ZlcigpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB7IGNvbCwgcm93IH0gPSBwbGF5ZXIucmFuZG9tQXR0YWNrKGdhbWVib2FyZCk7XG4gICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc2V0UHJldkhpdChwbGF5ZXIuZ2V0TGFzdEhpdCgpKTtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc2V0TGFzdEhpdCh7IGNvbCwgcm93IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KS5zdGF0dXMgPT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KS50YWtlbkJ5LmlzU3VuaygpKSB7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnNpbmtTaGlwKGdhbWVib2FyZCwgY29sLCByb3cpO1xuICAgICAgICAgICAgICAgIHBsYXllci5zZXRQcmV2SGl0KG51bGwpO1xuICAgICAgICAgICAgICAgIHBsYXllci5zZXRMYXN0SGl0KG51bGwpO1xuICAgICAgICAgICAgICAgIGlmIChpc0dhbWVPdmVyKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcGxheWVyVnNDb21wdXRlck1vZGUgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgbGV0IGlzUGxheWVyVHVybiA9IHRydWU7XG4gICAgICAgIHdoaWxlICghaXNHYW1lT3ZlcigpICYmICFpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIGlmIChpc1BsYXllclR1cm4pIHtcbiAgICAgICAgICAgICAgICB1aS5zZXRUdXJuTWVzc2FnZVB2Qyhpc1BsYXllclR1cm4pO1xuICAgICAgICAgICAgICAgIHVpLnNldEJvYXJkUG9pbnRlcigncGxheWVyJyk7XG4gICAgICAgICAgICAgICAgdWkud2FpdGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBjb2wsIHJvdyB9ID0geWllbGQgdWkuaGFuZGxlVXNlcklucHV0KCk7XG4gICAgICAgICAgICAgICAgaHVtYW4uYXR0YWNrKGNvbXB1dGVyR2FtZWJvYXJkLCBjb2wsIHJvdyk7XG4gICAgICAgICAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQuc2lua1NoaXAoY29tcHV0ZXJHYW1lYm9hcmQsIGNvbCwgcm93KTtcbiAgICAgICAgICAgICAgICB1aS5yZWZyZXNoQm9hcmQoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgIGlzUGxheWVyVHVybiA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzR2FtZU92ZXIoKSB8fCBpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNQbGF5ZXJUdXJuKSB7XG4gICAgICAgICAgICAgICAgdWkuc2V0VHVybk1lc3NhZ2VQdkMoaXNQbGF5ZXJUdXJuKTtcbiAgICAgICAgICAgICAgICB1aS5zZXRCb2FyZFBvaW50ZXIoJ2NvbXB1dGVyJyk7XG4gICAgICAgICAgICAgICAgdWkud2FpdGluZyh0cnVlKTtcbiAgICAgICAgICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCB1aS5nZXRTcGVlZFZhbHVlKCkpKTtcbiAgICAgICAgICAgICAgICBpZiAoIXVpLnBWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykgfHwgaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb21wdXRlckFJKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgICAgICAgICB1aS5yZWZyZXNoQm9hcmQoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgIGlzUGxheWVyVHVybiA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHVpLndhaXRpbmcoZmFsc2UpO1xuICAgIH0pO1xuICAgIGNvbnN0IGNvbXB1dGVyVnNDb21wdXRlck1vZGUgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgdWkucmVtb3ZlQm9hcmRQb2ludGVyKCk7XG4gICAgICAgIGxldCBpc1BsYXllclR1cm4gPSB0cnVlO1xuICAgICAgICB3aGlsZSAoIWlzR2FtZU92ZXIoKSAmJiAhaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB1aS53YWl0aW5nKHRydWUpO1xuICAgICAgICAgICAgaWYgKGlzUGxheWVyVHVybikge1xuICAgICAgICAgICAgICAgIHVpLnNldFR1cm5NZXNzYWdlQ3ZDKGlzUGxheWVyVHVybik7XG4gICAgICAgICAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdWkuZ2V0U3BlZWRWYWx1ZSgpKSk7XG4gICAgICAgICAgICAgICAgaWYgKCF1aS5jVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpIHx8IGlzU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29tcHV0ZXJBSShodW1hbkdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgdWkucmVmcmVzaEJvYXJkKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgICAgICAgICBpc1BsYXllclR1cm4gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0dhbWVPdmVyKCkgfHwgaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzUGxheWVyVHVybikge1xuICAgICAgICAgICAgICAgIHVpLnNldFR1cm5NZXNzYWdlQ3ZDKGlzUGxheWVyVHVybik7XG4gICAgICAgICAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdWkuZ2V0U3BlZWRWYWx1ZSgpKSk7XG4gICAgICAgICAgICAgICAgaWYgKCF1aS5jVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpIHx8IGlzU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29tcHV0ZXJBSShjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgdWkucmVmcmVzaEJvYXJkKGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgICAgICAgICBpc1BsYXllclR1cm4gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICB1aS53YWl0aW5nKGZhbHNlKTtcbiAgICB9KTtcbiAgICBjb25zdCByYW5kb21QbGFjZW1lbnQgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGxldCBhbGxTaGlwcztcbiAgICAgICAgaWYgKGdhbWVib2FyZCA9PT0gaHVtYW5HYW1lYm9hcmQpIHtcbiAgICAgICAgICAgIGh1bWFuQ2FycmllciA9IHNoaXBGYWN0b3J5KCdDYXJyaWVyJyk7XG4gICAgICAgICAgICBodW1hbkJhdHRsZXNoaXAgPSBzaGlwRmFjdG9yeSgnQmF0dGxlc2hpcCcpO1xuICAgICAgICAgICAgaHVtYW5EZXN0cm95ZXIgPSBzaGlwRmFjdG9yeSgnRGVzdHJveWVyJyk7XG4gICAgICAgICAgICBodW1hblN1Ym1hcmluZSA9IHNoaXBGYWN0b3J5KCdTdWJtYXJpbmUnKTtcbiAgICAgICAgICAgIGh1bWFuUGF0cm9sYm9hdCA9IHNoaXBGYWN0b3J5KCdQYXRyb2xCb2F0Jyk7XG4gICAgICAgICAgICBhbGxTaGlwcyA9IFtodW1hbkNhcnJpZXIsIGh1bWFuQmF0dGxlc2hpcCwgaHVtYW5EZXN0cm95ZXIsIGh1bWFuU3VibWFyaW5lLCBodW1hblBhdHJvbGJvYXRdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGdhbWVib2FyZCA9PT0gY29tcHV0ZXJHYW1lYm9hcmQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVyQ2FycmllciA9IHNoaXBGYWN0b3J5KCdDYXJyaWVyJyk7XG4gICAgICAgICAgICBjb25zdCBjb21wdXRlckJhdHRsZXNoaXAgPSBzaGlwRmFjdG9yeSgnQmF0dGxlc2hpcCcpO1xuICAgICAgICAgICAgY29uc3QgY29tcHV0ZXJEZXN0cm95ZXIgPSBzaGlwRmFjdG9yeSgnRGVzdHJveWVyJyk7XG4gICAgICAgICAgICBjb25zdCBjb21wdXRlclN1Ym1hcmluZSA9IHNoaXBGYWN0b3J5KCdTdWJtYXJpbmUnKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVyUGF0cm9sYm9hdCA9IHNoaXBGYWN0b3J5KCdQYXRyb2xCb2F0Jyk7XG4gICAgICAgICAgICBhbGxTaGlwcyA9IFtjb21wdXRlckNhcnJpZXIsIGNvbXB1dGVyQmF0dGxlc2hpcCwgY29tcHV0ZXJEZXN0cm95ZXIsIGNvbXB1dGVyU3VibWFyaW5lLCBjb21wdXRlclBhdHJvbGJvYXRdO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRyb2xsZXIuaHVtYW5TaGlwcy5sZW5ndGggPSAwO1xuICAgICAgICBjb25zdCBjb2xzID0gWydBJywgJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAnSScsICdKJ107XG4gICAgICAgIGNvbnN0IHJhbmRvbUNvbCA9ICgpID0+IGNvbHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY29scy5sZW5ndGgpXTtcbiAgICAgICAgY29uc3QgcmFuZG9tUm93ID0gKCkgPT4gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAxMCkudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgcmFuZG9tT3JpZW50YXRpb24gPSAoKSA9PiAoTWF0aC5yYW5kb20oKSA+IDAuNSA/ICdob3Jpem9udGFsJyA6ICd2ZXJ0aWNhbCcpO1xuICAgICAgICBhbGxTaGlwcy5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBsZXQgY29sID0gcmFuZG9tQ29sKCk7XG4gICAgICAgICAgICBsZXQgcm93ID0gcmFuZG9tUm93KCk7XG4gICAgICAgICAgICBsZXQgb3JpZW50YXRpb24gPSByYW5kb21PcmllbnRhdGlvbigpO1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGdhbWVib2FyZC5jYW5CZVBsYWNlZChzaGlwLnNpemUsIGNvbCwgcm93LCBvcmllbnRhdGlvbik7XG4gICAgICAgICAgICB3aGlsZSAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGNvbCA9IHJhbmRvbUNvbCgpO1xuICAgICAgICAgICAgICAgIHJvdyA9IHJhbmRvbVJvdygpO1xuICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uID0gcmFuZG9tT3JpZW50YXRpb24oKTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBnYW1lYm9hcmQuY2FuQmVQbGFjZWQoc2hpcC5zaXplLCBjb2wsIHJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcCwgY29sLCByb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgICAgICBnYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGdhbWVib2FyZCwgY29sLCByb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udHJvbGxlci5odW1hblNoaXBzLnB1c2goc2hpcCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgcmFuZG9taXplU2hpcHNQbGFjZW1lbnQgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGdhbWVib2FyZC5jbGVhckJvYXJkKCk7XG4gICAgICAgIHJhbmRvbVBsYWNlbWVudChnYW1lYm9hcmQpO1xuICAgICAgICB1aS5yZWZyZXNoQm9hcmQoZ2FtZWJvYXJkKTtcbiAgICAgICAgaWYgKGdhbWVib2FyZCA9PT0gaHVtYW5HYW1lYm9hcmQpIHtcbiAgICAgICAgICAgIHVpLmNyZWF0ZVNoaXBPdmVybGF5KGdhbWVib2FyZCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHJlc2V0T3JpZW50YXRpb24gPSAoKSA9PiB7XG4gICAgICAgIGh1bWFuU2hpcHMuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgICAgICAgaWYgKHNoaXAuaXNWZXJ0aWNhbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHNoaXAuaXNWZXJ0aWNhbCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHBpY2tHYW1lTW9kZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKHVpLmNWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgIHJhbmRvbWl6ZVNoaXBzUGxhY2VtZW50KGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgICAgIHJhbmRvbWl6ZVNoaXBzUGxhY2VtZW50KGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgICAgIGlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgY29tcHV0ZXJWc0NvbXB1dGVyTW9kZSgpO1xuICAgICAgICAgICAgdWkucmVmcmVzaEJvYXJkKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc3RhcnQgPSAoKSA9PiB7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChodW1hbkdhbWVib2FyZCk7XG4gICAgICAgIHJhbmRvbWl6ZVNoaXBzUGxhY2VtZW50KGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHBsYXllclZzQ29tcHV0ZXJNb2RlKCk7XG4gICAgfTtcbiAgICBjb25zdCByZXN0YXJ0ID0gKCkgPT4ge1xuICAgICAgICBpc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICBodW1hbi5zZXRQcmV2SGl0KG51bGwpO1xuICAgICAgICBodW1hbi5zZXRMYXN0SGl0KG51bGwpO1xuICAgICAgICBjb21wdXRlci5zZXRQcmV2SGl0KG51bGwpO1xuICAgICAgICBjb21wdXRlci5zZXRMYXN0SGl0KG51bGwpO1xuICAgICAgICBodW1hbkdhbWVib2FyZC5jbGVhckJvYXJkKCk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLmNsZWFyQm9hcmQoKTtcbiAgICAgICAgcG9wdWxhdGVTaGlwcygpO1xuICAgICAgICB1aS5yZWZyZXNoQm9hcmQoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICB1aS5yZWZyZXNoQm9hcmQoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICB1aS5jcmVhdGVTaGlwT3ZlcmxheShjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIGRyYWdBbmREcm9wKGh1bWFuR2FtZWJvYXJkLCBjb21wdXRlckdhbWVib2FyZCwgaHVtYW5TaGlwcyk7XG4gICAgICAgIHVpLmNhbkJlU3RhcnRlZCgpO1xuICAgICAgICBwaWNrR2FtZU1vZGUoKTtcbiAgICAgICAgcmVzZXRPcmllbnRhdGlvbigpO1xuICAgIH07XG4gICAgY29uc3QgbmV3R2FtZSA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBpc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCB1aS5nZXRTcGVlZFZhbHVlKCkpKTtcbiAgICAgICAgaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHJlc3RhcnQoKTtcbiAgICB9KTtcbiAgICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgICAgICB1aS5zZXRJbml0TWVzc2FnZSgpO1xuICAgICAgICBodW1hbkdhbWVib2FyZC5nZW5lcmF0ZUFycmF5KCk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLmdlbmVyYXRlQXJyYXkoKTtcbiAgICAgICAgdWkucmVuZGVyQm9hcmQoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICB1aS5yZW5kZXJCb2FyZChjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIHBvcHVsYXRlU2hpcHMoKTtcbiAgICAgICAgdWkucmVmcmVzaEJvYXJkKGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgdWkuY3JlYXRlU2hpcE92ZXJsYXkoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICBkcmFnQW5kRHJvcChodW1hbkdhbWVib2FyZCwgY29tcHV0ZXJHYW1lYm9hcmQsIGh1bWFuU2hpcHMpO1xuICAgICAgICB1aS5jYW5CZVN0YXJ0ZWQoKTtcbiAgICAgICAgcGlja0dhbWVNb2RlKCk7XG4gICAgICAgIHVpLnVuRmlsbENlbGxzKCdmaXJzdCcpO1xuICAgICAgICB1aS5wVmNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH07XG4gICAgcmV0dXJuIHsgaW5pdCwgcmVuZXcsIGh1bWFuR2FtZWJvYXJkLCBjb21wdXRlckdhbWVib2FyZCwgcmVzdGFydCwgbmV3R2FtZSwgc3RhcnQsIHJhbmRvbWl6ZVNoaXBzUGxhY2VtZW50LCBodW1hblNoaXBzIH07XG59KSgpO1xuZXhwb3J0IGRlZmF1bHQgY29udHJvbGxlcjtcbiIsImltcG9ydCAnbm9ybWFsaXplLmNzcyc7XG5pbXBvcnQgJy4vc3R5bGUvc3R5bGUuY3NzJztcbmltcG9ydCBjb250cm9sbGVyIGZyb20gJy4vbW9kdWxlcy9jb250cm9sbGVyJztcbmNvbnRyb2xsZXIuaW5pdCgpO1xuIl0sIm5hbWVzIjpbImNvbHMiLCJyb3dzIiwiYXJyYXkiLCJzaGlwc1BsYWNlZCIsImdldENlbGwiLCJjb2wiLCJyb3ciLCJjb2xJbmRleCIsImluZGV4T2YiLCJyb3dJbmRleCIsInNldENlbGwiLCJuZXdTdGF0dXMiLCJuZXdUYWtlbkJ5Iiwic3RhdHVzIiwidGFrZW5CeSIsImdlbmVyYXRlQXJyYXkiLCJpIiwiaiIsImNsZWFyQm9hcmQiLCJmbGF0IiwiZm9yRWFjaCIsImNlbGwiLCJ1bmRlZmluZWQiLCJsZW5ndGgiLCJyZW1vdmVTaGlwIiwic2hpcCIsImdhbWVib2FyZCIsIm5hbWUiLCJzaGlwSW5kZXgiLCJzcGxpY2UiLCJwbGFjZVNoaXAiLCJvcmllbnRhdGlvbiIsImlzSG9yaXpvbnRhbCIsImNlbGxzIiwic3RhcnQiLCJpc1ZlcnRpY2FsIiwic2hpcENlbGxzIiwic2l6ZSIsImN1cnJlbnRDb2wiLCJjdXJyZW50Um93IiwicHVzaCIsInJlY2VpdmVBdHRhY2siLCJoaXQiLCJyZWNlaXZlQXJvdW5kIiwicmVzZXJ2ZVNwYWNlIiwiZmlsdGVyIiwiYyIsImRpcmVjdGlvbiIsIm5ld0NvbCIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImNoYXJDb2RlQXQiLCJuZXdSb3ciLCJOdW1iZXIiLCJ0b1N0cmluZyIsInJlc2VydmVTcGFjZUZvckFsbCIsImhpdEJ1dE5vdFN1bmsiLCJzb21lIiwiaXNTdW5rIiwic2lua1NoaXAiLCJhbGxTdW5rIiwidGFrZW5CeUNlbGxzIiwiZXZlcnkiLCJjYW5CZVBsYWNlZCIsImFyZUVtcHR5IiwiaXRlbSIsInJlbW92ZVJlc2VydmVkU3BhY2UiLCJoaXRDb3VudCIsInJvdGF0ZSIsInRoaXMiLCJwcmV2SGl0IiwibGFzdEhpdCIsInJhbmdlIiwiZ29SaWdodCIsImdvRG93biIsImZpbmlzaGluZ0F0dGFjayIsInNldFByZXZIaXQiLCJzZXRMYXN0SGl0IiwibmV3UHJldkhpdCIsIm5ld0xhc3RIaXQiLCJhdHRhY2siLCJyZXN1bHQiLCJyYW5kb21BdHRhY2siLCJyYW5kb21Db2wiLCJyYW5kb21Sb3ciLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjZWlsIiwiZm9sbG93dXBBdHRhY2siLCJ2YWxpZERpcmVjdGlvbnMiLCJyYW5kb21EaXJlY3Rpb24iLCJnZXRQcmV2SGl0IiwiZ2V0TGFzdEhpdCIsIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJmaXJzdEdhbWVib2FyZCIsInNlY29uZEdhbWVib2FyZCIsInNoaXBzIiwiZmlyc3RCb2FyZEVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzZWNvbmRCb2FyZEVsZW1lbnQiLCJmaXJzdEJvYXJkQ2VsbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2Vjb25kQm9hcmRDZWxscyIsInNoaXBOYW1lIiwic2hpcFNpemUiLCJzaGlwT2JqIiwiZ3JhYlBvaW50WCIsImdyYWJQb2ludFkiLCJoaWdobGlnaHRlZENlbGxzIiwic2hpcE5hbWVUb09iaiIsImNhcnJpZXIiLCJiYXR0bGVzaGlwIiwiZGVzdHJveWVyIiwic3VibWFyaW5lIiwicGF0cm9sYm9hdCIsImxhc3REcmFnZ2VkIiwiZHJhZ2dhYmxlcyIsImdldE5vblNoaXBDZWxscyIsImJvYXJkQ2VsbHMiLCJBcnJheSIsImZyb20iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsIm5vblNoaXBDZWxscyIsImdldExhc3RTaGlwU2l6ZUVsZW1lbnRzIiwic2xpY2UiLCJtaW4iLCJnZXRHYW1lYm9hcmQiLCJ0YXJnZXQiLCJib2FyZElkIiwiY2xvc2VzdCIsImlkIiwic2V0U2hpcEF0dHJpYnV0ZXMiLCJnZXRBdHRyaWJ1dGUiLCJvZmZzZXRYIiwib2Zmc2V0WSIsInJlbW92ZUhpZ2hsaWdodCIsImhpZ2hsaWdodGVkQ2VsbCIsInJlbW92ZSIsImlzQm9hcmRWYWxpZCIsImhhbmRsZU1vdXNlZG93biIsInRhcmdldFNoaXBOYW1lIiwicmVtYWluaW5nU2hpcHMiLCJ0b0xvd2VyQ2FzZSIsInJlc2VydmVTcGFjZUZvclJlbWFpbmluZ1NoaXBzIiwicmVuZXciLCJzZXRJbml0TWVzc2FnZSIsImhhbmRsZURyYWdTdGFydCIsInNldFRpbWVvdXQiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJjbGVhclNoaXAiLCJoYW5kbGVEcmFnT3ZlciIsImluZGV4IiwicHJldmVudERlZmF1bHQiLCJzdGFydENlbGwiLCJvZmZzZXRIZWlnaHQiLCJvZmZzZXRXaWR0aCIsImdldFN0YXJ0Q2VsbCIsImdldEJvYXJkQ2VsbHMiLCJ0b0hpZ2hsaWdodCIsImNlbGxJbmRleCIsImhpZ2hsaWdodENlbGxzT25Cb2FyZCIsImRhdGFzZXQiLCJpc1ZhbGlkUGxhY2VtZW50IiwiYWRkIiwiaGlnaGxpZ2h0Q2VsbHMiLCJoYW5kbGVEcmFnTGVhdmUiLCJoYW5kbGVEcm9wIiwibGFzdCIsInBsYWNlU2hpcE9uQm9hcmQiLCJjYW5CZVN0YXJ0ZWQiLCJzZXRTdGFydE1lc3NhZ2UiLCJoYW5kbGVEcmFnRW5kIiwiYm9hcmQiLCJwcmV2ZW50T2ZmQm9hcmRQbGFjZW1lbnQiLCJmaWxsQ2VsbHMiLCJoYW5kbGVNb3VzZXVwIiwiaGFuZGxlUm90YXRlIiwiY3VycmVudCIsImJsb2NrUmlnaHRDbGljayIsImFkZEV2ZW50TGlzdGVuZXJzVG9DZWxscyIsImFkZEV2ZW50TGlzdGVuZXIiLCJkcmFnZ2FibGUiLCJ1aSIsInN0YXR1c0JveCIsImJvYXJkcyIsInBWY0J0biIsIm5ld0dhbWVCdG4iLCJjVmNCdG4iLCJzdGFydEJ0biIsInJhbmRvbUJ0biIsImFsbEJ0bnMiLCJzcGVlZHMiLCJnZXRFbGVtZW50c0J5TmFtZSIsInNwZWVkVmFsdWUiLCJyZW5kZXJDZWxscyIsImVsZW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiY3JlYXRlQ2VsbCIsImFwcGVuZCIsImdldEJvYXJkSWQiLCJodW1hbkdhbWVib2FyZCIsImNvbXB1dGVyR2FtZWJvYXJkIiwicmVmcmVzaEJvYXJkIiwiaW5uZXJIVE1MIiwiZ2V0VXNlcklucHV0IiwiaGFuZGxlR2FtZU1vZGUiLCJzZWxlY3RlZEVsZW1lbnQiLCJkZXNlbGVjdGVkRWxlbWVudCIsIndhaXRpbmciLCJidG4iLCJkaXNhYmxlZCIsImdldFNwZWVkVmFsdWUiLCJyZXN0YXJ0Iiwic2V0UmVzdGFydE1lc3NhZ2UiLCJib29sIiwiZG9jdW1lbnRFbGVtZW50IiwidG9nZ2xlIiwicmVtb3ZlQm9hcmRQb2ludGVyIiwic2V0U2hpcFN0eWxlIiwic2hpcEVsZW1lbnQiLCJjZWxsU2l6ZSIsImh0bWxFbGVtZW50Iiwicm9vdEZvbnRTaXplIiwicGFyc2VGbG9hdCIsIndpbmRvdyIsImdldENvbXB1dGVkU3R5bGUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwid2lkdGgiLCJoZWlnaHQiLCJzdGF0dXNUZXh0TW9iaWxlIiwic3RhdHVzVGV4dERlc2t0b3AiLCJ0ZXh0Q29udGVudCIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiaW5wdXQiLCJ1bkZpbGxDZWxscyIsInNlY29uZCIsImFsbCIsIm5ld0dhbWUiLCJyYW5kb21pemVTaGlwc1BsYWNlbWVudCIsImh1bWFuU2hpcHMiLCJzZXRTcGVlZFZhbHVlIiwiZXZlbnQiLCJjaGVja2VkIiwic3BlZWRCdG4iLCJyZW5kZXJCb2FyZCIsInJlbW92ZUF0dHJpYnV0ZSIsImhhbmRsZVVzZXJJbnB1dCIsInVzZXJJbnB1dCIsIm9uY2UiLCJzZXRCb2FyZFBvaW50ZXIiLCJ3aGljaCIsImNyZWF0ZVNoaXBPdmVybGF5IiwiZmlyc3RDZWxsIiwiY3JlYXRlU2hpcEVsZW1lbnQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJhcHBlbmRDaGlsZCIsInJlc2l6ZUhhbmRsZXIiLCJzZXRUdXJuTWVzc2FnZVB2QyIsImlzUGxheWVyVHVybiIsInNldFR1cm5NZXNzYWdlQ3ZDIiwic2V0R2FtZU92ZXJNZXNzYWdlUHZDIiwid2hvIiwic2V0R2FtZU92ZXJNZXNzYWdlQ3ZDIiwiY29udHJvbGxlciIsImh1bWFuIiwicGxheWVyIiwiY29tcHV0ZXIiLCJpc1N0b3BwZWQiLCJodW1hbkNhcnJpZXIiLCJodW1hbkJhdHRsZXNoaXAiLCJodW1hbkRlc3Ryb3llciIsImh1bWFuU3VibWFyaW5lIiwiaHVtYW5QYXRyb2xib2F0IiwicG9wdWxhdGVTaGlwcyIsImlzR2FtZU92ZXIiLCJjb21wdXRlckFJIiwiYWxsU2hpcHMiLCJyYW5kb21PcmllbnRhdGlvbiIsInJhbmRvbVBsYWNlbWVudCIsInBpY2tHYW1lTW9kZSIsImluaXQiXSwic291cmNlUm9vdCI6IiJ9