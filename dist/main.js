(()=>{"use strict";const e=()=>{const e=["A","B","C","D","E","F","G","H","I","J"],t=["1","2","3","4","5","6","7","8","9","10"],a=[],r=[],s=(r,s)=>{const o=e.indexOf(r),n=t.indexOf(s);return-1===o||-1===n?null:a[n][o]},o=(r,s,o,n)=>{const i=e.indexOf(r),l=t.indexOf(s);return-1===i||-1===l?null:(a[l][i].status=o,n&&(a[l][i].takenBy=n),a[l][i])};return{generateArray:()=>{for(let r=0;r<10;r+=1){a[r]=[];for(let s=0;s<10;s+=1)a[r][s]={col:e[s],row:t[r],status:"empty",takenBy:null}}},clearBoard:()=>{a.flat().forEach((e=>{e.status="empty",e.takenBy=void 0})),r.length=0},getCell:s,setCell:o,removeShip:(e,t)=>{t.array.flat().forEach((t=>{"taken"===t.status&&t.takenBy.name===e.name&&(t.status="empty",t.takenBy=null);const a=r.indexOf(t);null===t.takenBy&&-1!==a&&r.splice(a,1)}))},placeShip:(a,n,i,l)=>{const c="horizontal"===l,d=c?e:t,u=d.indexOf(c?n:i);a.isVertical="horizontal"!==l;let h=[];if(u<0||u+a.size>d.length)return!1;for(let e=0;e<a.size;e+=1){const t=c?d[u+e]:n,r=c?i:d[u+e];if("empty"!==s(t,r).status)return!1;o(t,r,"taken",a),h.push(s(t,r))}return r.push(h[0]),!0},receiveAttack:(e,t)=>{const a=s(e,t);return"taken"===a.status?(a.takenBy.hit(),o(e,t,"hit"),a.status):"empty"===a.status||"reserved"===a.status?(o(e,t,"miss"),a.status):null},receiveAround:(e,t)=>{const a=s(e,t);return"empty"===a.status?(o(e,t,"reserved"),a.status):null},reserveSpace:(e,t,a)=>{const r=e.getCell(t,a);if(r&&r.takenBy){e.array.flat().filter((e=>e.takenBy&&e.takenBy.name===r.takenBy.name)).forEach((t=>{[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0},{col:-1,row:-1},{col:-1,row:1},{col:1,row:-1},{col:1,row:1}].forEach((a=>{const r=String.fromCharCode(t.col.charCodeAt(0)+a.col),s=(Number(t.row)+a.row).toString();e.getCell(r,s)&&e.receiveAround(r,s)}))}))}},hitButNotSunk:e=>e.array.flat().some((e=>"hit"===e.status&&!1===e.takenBy.isSunk())),sinkShip:(e,t,a)=>{const r=e.getCell(t,a);if(r&&r.takenBy&&r.takenBy.isSunk()){e.array.flat().filter((e=>e.takenBy&&e.takenBy.name===r.takenBy.name)).forEach((t=>{[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0},{col:-1,row:-1},{col:-1,row:1},{col:1,row:-1},{col:1,row:1}].forEach((a=>{const r=String.fromCharCode(t.col.charCodeAt(0)+a.col),s=(Number(t.row)+a.row).toString();e.getCell(r,s)&&e.receiveAttack(r,s)}))}))}},allSunk:e=>{let t=e.array.flat().filter((e=>e.takenBy));return!!(t.length>0&&t.every((e=>e.takenBy.isSunk())))},array:a,canBePlaced:(a,r,o,n)=>{const i="horizontal"===n,l=i?e:t,c=l.indexOf(i?r:o);if(c<0||c+a>l.length)return!1;const d=[];for(let e=0;e<a;e+=1){const t=i?l[c+e]:r,a=i?o:l[c+e];d.push("empty"===s(t,a).status)}return d.every((e=>!0===e))},shipsPlaced:r,removeReservedSpace:e=>{e.array.flat().forEach((e=>{"reserved"===e.status&&o(e.col,e.row,"empty")}))}}},t=e=>{let t;return"Carrier"===e&&(t=5),"Battleship"===e&&(t=4),"Destroyer"===e&&(t=3),"Submarine"===e&&(t=3),"PatrolBoat"===e&&(t=2),{name:e,size:t,hitCount:0,isVertical:!1,rotate(){this.isVertical=!this.isVertical},hit(){this.hitCount+=1},isSunk(){return this.hitCount===t}}},a=()=>{const e=["A","B","C","D","E","F","G","H","I","J"];let t=null,a=null;let r=1,s=!0,o=!0;const n=(e,t,c,d)=>{if(d.row===c)if(s){r=1;let o=String.fromCharCode(t.charCodeAt(0)+r);for(;e.getCell(o,c)&&"hit"===e.getCell(o,c).status;)r+=1,o=String.fromCharCode(t.charCodeAt(0)+r);e.getCell(o,c)&&"hit"!==e.getCell(o,c).status&&"miss"!==e.getCell(o,c).status?(e.receiveAttack(o,c),"hit"===e.getCell(o,c).status&&(i(a),l({col:o,row:c})),r+=1):(r=1,s=!1,n(e,o,c,d))}else{r=1;let o=String.fromCharCode(t.charCodeAt(0)-r);for(;e.getCell(o,c)&&"hit"===e.getCell(o,c).status;)r+=1,o=String.fromCharCode(t.charCodeAt(0)-r);e.getCell(o,c)&&"hit"!==e.getCell(o,c).status&&"miss"!==e.getCell(o,c).status?(e.receiveAttack(o,c),"hit"===e.getCell(o,c).status&&(i(a),l({col:o,row:c})),r+=1):(r=1,s=!0,n(e,o,c,d))}else if(d.col===t)if(o){r=1;let s=(Number(c)+r).toString();for(;e.getCell(t,s)&&"hit"===e.getCell(t,s).status;)r+=1,s=(Number(c)+r).toString();e.getCell(t,s)&&"hit"!==e.getCell(t,s).status&&"miss"!==e.getCell(t,s).status?(e.receiveAttack(t,s),"hit"===e.getCell(t,s).status&&(i(a),l({col:t,row:s})),r+=1):(r=1,o=!1,n(e,t,s,d))}else{r=1;let s=(Number(c)-r).toString();for(;e.getCell(t,s)&&"hit"===e.getCell(t,s).status;)r+=1,s=(Number(c)-r).toString();e.getCell(t,s)&&"hit"!==e.getCell(t,s).status&&"miss"!==e.getCell(t,s).status?(e.receiveAttack(t,s),"hit"===e.getCell(t,s).status&&(i(a),l({col:t,row:s})),r+=1):(r=1,o=!0,n(e,t,s,d))}},i=e=>{t=e},l=e=>{a=e};return{attack:(e,t,r)=>{if("hit"!==e.getCell(t,r).status&&"miss"!==e.getCell(t,r).status){let s=e.receiveAttack(t,r);return"hit"===s&&(i(a),l({col:t,row:r})),s}return"already shot"},randomAttack:t=>{let r,s;do{r=e[Math.floor(Math.random()*e.length)],s=Math.ceil(10*Math.random()).toString()}while("hit"===t.getCell(r,s).status||"miss"===t.getCell(r,s).status);if("hit"!==t.getCell(r,s).status&&"miss"!==t.getCell(r,s).status){const e=t.receiveAttack(r,s);return"hit"===t.getCell(r,s).status&&(i(a),l({col:r,row:s})),{result:e,col:r,row:s}}return{result:"already shot",col:r,row:s}},followupAttack:(e,t,s)=>{const o=[{col:0,row:-1},{col:0,row:1},{col:-1,row:0},{col:1,row:0}].filter((a=>{const r=String.fromCharCode(t.charCodeAt(0)+a.col),o=(Number(s)+a.row).toString(),n=e.getCell(r,o);return!(!n||"miss"===n.status||"hit"===n.status)}));if(o.length>0){const n=o[Math.floor(Math.random()*o.length)],c=String.fromCharCode(t.charCodeAt(0)+n.col),d=(Number(s)+n.row).toString();e.receiveAttack(c,d),r=1,"hit"===e.getCell(c,d).status&&(i(a),l({col:c,row:d}))}},finishingAttack:n,prevHit:t,lastHit:a,getPrevHit:()=>t,getLastHit:()=>a,setPrevHit:i,setLastHit:l}};var r=function(e,t,a,r){return new(a||(a=Promise))((function(s,o){function n(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,i)}l((r=r.apply(e,t||[])).next())}))};const s=(e,t,a)=>{const s=document.querySelector("#firstBoard"),o=document.querySelector("#secondBoard"),n=s.querySelectorAll(".cell"),l=o.querySelectorAll(".cell");let c,u,h,m,f=0,g=0,v=[];const p={carrier:a[0],battleship:a[1],destroyer:a[2],submarine:a[3],patrolboat:a[4]};let w=null;const y=document.querySelectorAll(".draggable");function S(e){return Array.from(e).filter((e=>!e.classList.contains("taken")))}const C=[...S(n),...S(l)];function B(e){return e.every((e=>e.classList.contains("empty")))&&(e.every((t=>t.dataset.col===e[0].dataset.col))||e.every((t=>t.dataset.row===e[0].dataset.row)))&&e.length===u&&e.every((e=>e.dataset.col>="A"&&e.dataset.col<="J"))&&e.every((e=>Number(e.dataset.row)>=1&&Number(e.dataset.row)<=10))}function b(e,t){return e.slice(Math.min(e.length-t,0))}const L=a=>{e.removeReservedSpace(e),t.removeReservedSpace(t);const r=a.target.getAttribute("data-name");let s=e.shipsPlaced.filter((e=>r!==e.takenBy.name.toLowerCase())),o=t.shipsPlaced.filter((e=>r!==e.takenBy.name.toLowerCase()));s.forEach((t=>{e.reserveSpace(e,t.col,t.row)})),o.forEach((e=>{t.reserveSpace(t,e.col,e.row)})),d.renew(),i.setInitMessage()};function k(a){return r(this,void 0,void 0,(function*(){yield new Promise((e=>setTimeout(e,0)));const r=a.target;let s;r.style.visibility="hidden",this.classList.add("dragging"),c=r.getAttribute("data-name"),u=Number(r.getAttribute("data-size")),f=a.offsetX,g=a.offsetY,h=p[c],m=h.isVertical?"vertical":"horizontal","firstBoard"===r.closest(".board").id&&(s=e),"secondBoard"===r.closest(".board").id&&(s=t),s.removeShip(h,s),i.clearShip(h,s)}))}function P(e){return function(t){const a=t.target;if("firstBoard"===a.closest(".board").id&&(t.preventDefault(),h)){let t=e-(h.isVertical?10*Math.floor(g/this.offsetHeight):Math.floor(f/this.offsetWidth));const a=[];for(let e=0;e<u;e++){let r=h.isVertical?t+10*e:t+e;n[r]&&(a.push(n[r]),v.push(n[r]))}B(a)&&(a.forEach((e=>{e.classList.add("highlight")})),w||(w=b(v,u)))}if("secondBoard"===a.closest(".board").id&&(t.preventDefault(),h)){let t=e-(h.isVertical?10*Math.floor(g/this.offsetHeight):Math.floor(f/this.offsetWidth));const a=[];for(let e=0;e<u;e++){let r=h.isVertical?t+10*e:t+e;l[r]&&(a.push(l[r]),v.push(l[r]))}B(a)&&(a.forEach((e=>{e.classList.add("highlight")})),w||(w=b(v,u)))}}}function E(){v.forEach((e=>{e.classList.remove("highlight")})),v=[]}function A(a){v.forEach((e=>{e.classList.remove("highlight")}));const r=b(v,u),s=a.target;"firstBoard"===s.closest(".board").id&&h&&null!==w&&(e.canBePlaced(h.size,r[0].dataset.col,r[0].dataset.row,m)?(e.placeShip(h,r[0].dataset.col,r[0].dataset.row,m),e.reserveSpace(e,r[0].dataset.col,r[0].dataset.row)):(e.placeShip(h,w[0].dataset.col,w[0].dataset.row,m),e.reserveSpace(e,w[0].dataset.col,w[0].dataset.row))),"secondBoard"===s.closest(".board").id&&h&&null!==w&&(t.canBePlaced(h.size,r[0].dataset.col,r[0].dataset.row,m)?(t.placeShip(h,r[0].dataset.col,r[0].dataset.row,m),t.reserveSpace(t,r[0].dataset.col,r[0].dataset.row)):(t.placeShip(h,w[0].dataset.col,w[0].dataset.row,m),t.reserveSpace(t,w[0].dataset.col,w[0].dataset.row))),e.removeReservedSpace(e),t.removeReservedSpace(t),e.shipsPlaced.forEach((t=>{e.reserveSpace(e,t.col,t.row)})),t.shipsPlaced.forEach((e=>{t.reserveSpace(t,e.col,e.row)})),d.renew(),i.canBeStarted(),i.setStartMessage(),w=null}function H(a){const r=a.target;r.style.visibility="visible",this.classList.remove("dragging"),0===v.length&&(r.closest(".board")&&"firstBoard"===r.closest(".board").id&&w&&e.canBePlaced(h.size,w[0].dataset.col,w[0].dataset.row,m)&&(e.placeShip(h,w[0].dataset.col,w[0].dataset.row,m),e.reserveSpace(e,w[0].dataset.col,w[0].dataset.row),d.renew()),r.closest(".board")&&"secondBoard"===r.closest(".board").id&&w&&t.canBePlaced(h.size,w[0].dataset.col,w[0].dataset.row,m)&&(t.placeShip(h,w[0].dataset.col,w[0].dataset.row,m),t.reserveSpace(t,w[0].dataset.col,w[0].dataset.row),d.renew()),i.canBeStarted()&&i.fillCells("second"),i.setStartMessage())}function M(){e.shipsPlaced.forEach((t=>{e.reserveSpace(e,t.col,t.row)})),t.shipsPlaced.forEach((e=>{t.reserveSpace(t,e.col,e.row)})),d.renew(),i.setStartMessage()}function V(a){a.preventDefault();const r=a.target;let s;"firstBoard"===r.closest(".board").id&&(s=e),"secondBoard"===r.closest(".board").id&&(s=t),c=r.getAttribute("data-name"),u=Number(r.getAttribute("data-size")),h=p[c];const o=h,n=s.shipsPlaced.filter((e=>e.takenBy.name.toLowerCase()===c));s.removeShip(h,s),s.removeReservedSpace(s),s.shipsPlaced.forEach((e=>{s.reserveSpace(s,e.col,e.row)})),o.rotate(),m=o.isVertical?"vertical":"horizontal",s.canBePlaced(o.size,n[0].col,n[0].row,m)||(o.rotate(),m=o.isVertical?"vertical":"horizontal"),s.placeShip(o,n[0].col,n[0].row,m),s.shipsPlaced.forEach((e=>{s.reserveSpace(s,e.col,e.row)})),d.renew(),i.canBeStarted()&&i.fillCells("second")}function q(e){e.preventDefault()}n.forEach(((e,t)=>{e.addEventListener("dragover",P(t)),e.addEventListener("dragleave",E),e.addEventListener("drop",A)})),l.forEach(((e,t)=>{e.addEventListener("dragover",P(t)),e.addEventListener("dragleave",E),e.addEventListener("drop",A)})),y.forEach((e=>{e.addEventListener("mousedown",L),e.addEventListener("dragstart",k),e.addEventListener("dragend",H),e.addEventListener("mouseup",M),e.addEventListener("contextmenu",V),C.forEach((e=>e.addEventListener("contextmenu",q)))}))};var o=function(e,t,a,r){return new(a||(a=Promise))((function(s,o){function n(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,i)}l((r=r.apply(e,t||[])).next())}))};const n=(()=>{const e=document.querySelector("#messageBox p"),t=document.querySelector("#boards"),a=document.querySelector("#playerVsComputer"),r=document.querySelector("#newGame"),i=document.querySelector("#computerVsComputer"),l=document.querySelector("#start"),c=document.querySelector("#randomPlacement"),u=[a,r,i,l,c],h=document.getElementsByName("speed");let m=1e3;const f=(e,t)=>{e.array.forEach((e=>{e.forEach((e=>{const a=(e=>{const t=document.createElement("div");return t.classList.add("cell"),t.classList.add(e.status),t.setAttribute("data-col",e.col),t.setAttribute("data-row",e.row),e.takenBy&&t.setAttribute("data-shipName",e.takenBy.name.toLowerCase()),t})(e);t.append(a)}))}))},g=e=>e===d.humanGameboard?"firstBoard":e===d.computerGameboard?"secondBoard":void 0,v=e=>{const t=document.querySelector(`#${g(e)}`);t.innerHTML="",f(e,t)},p=e=>{if(!e.target.classList.contains("hit")&&!e.target.classList.contains("miss")){return{col:e.target.getAttribute("data-col"),row:e.target.getAttribute("data-row")}}},w=(e,t)=>{t.classList.remove("selected"),e.classList.contains("selected")||(e.classList.add("selected"),e===a&&o(void 0,void 0,void 0,(function*(){L("first"),y(!0),u.forEach((e=>e.disabled=!0)),yield new Promise((e=>setTimeout(e,P()))),u.forEach((e=>e.disabled=!1)),y(!1),S(),C()})),e===i&&o(void 0,void 0,void 0,(function*(){y(!0),u.forEach((e=>e.disabled=!0)),yield new Promise((e=>setTimeout(e,P()))),u.forEach((e=>e.disabled=!1)),y(!1),l.disabled=!0,c.disabled=!0,i.disabled=!0})),d.restart(),b())},y=e=>{document.documentElement.classList.toggle("wait",e)},S=()=>5===d.humanGameboard.shipsPlaced.length&&0===d.computerGameboard.shipsPlaced.length?(L("second"),l.disabled=!1,!0):(l.disabled=!0,!1),C=()=>{const t="Use 'Random Placement' button, then press Start!",a="Drag and drop ships onto the left board or use 'Random Placement' button. Right click to rotate. When ready, press Start!";e.textContent!==t&&e.textContent!==a&&"Restarting..."!==e.textContent&&"You can now begin the game. Press start!"!==e.textContent||(e.textContent=t,window.matchMedia("(min-width: 1024px)").matches&&(e.textContent=a))},B=()=>{S()&&(e.textContent="You can now begin the game. Press start!")},b=()=>{e.textContent="Restarting..."},L=e=>{let t;"first"===e?t=document.querySelector("#firstBoard"):"second"===e&&(t=document.querySelector("#secondBoard"));t.querySelectorAll(".cell").forEach((e=>{e.classList.add("filled")}))},k=e=>o(void 0,void 0,void 0,(function*(){let t;y(!0),"first"===e?t=document.querySelector("#firstBoard"):"second"===e&&(t=document.querySelector("#secondBoard"));const a=t.querySelectorAll(".cell");a.forEach((e=>{e.classList.add("filled")})),yield new Promise((e=>{a.forEach(((t,r)=>{setTimeout((()=>{t.classList.remove("filled"),r===a.length-1&&e()}),P()/120*r)}))})),y(!1)}));a.addEventListener("click",(()=>{L("first"),w(a,i);document.querySelector("#secondBoard").classList.remove("start"),l.disabled=!0,a.disabled=!0,k("first")})),i.addEventListener("click",(()=>{L("first"),L("second"),w(i,a);const e=document.querySelector("#secondBoard");e.classList.remove("hide"),e.classList.add("start"),l.disabled=!0,c.disabled=!0,i.disabled=!0,Promise.all([k("first"),k("second")])})),r.addEventListener("click",(()=>o(void 0,void 0,void 0,(function*(){L("first"),i.classList.contains("selected")&&(L("second"),l.disabled=!0,c.disabled=!0,i.disabled=!0),n.removeBoardPointer(),yield o(void 0,void 0,void 0,(function*(){b(),y(!0),u.forEach((e=>e.disabled=!0)),yield d.newGame(),u.forEach((e=>e.disabled=!1)),y(!1),S(),a.classList.contains("selected")&&C()}));const e=document.querySelector("#secondBoard");e.classList.remove("hide"),a.classList.contains("selected")&&(e.classList.remove("start"),k("first"),l.disabled=!0,a.disabled=!0),i.classList.contains("selected")&&(e.classList.add("start"),c.disabled=!0,Promise.all([k("first"),k("second")]),l.disabled=!0,c.disabled=!0,i.disabled=!0)})))),l.addEventListener("click",(()=>{d.start();document.querySelector("#firstBoard").classList.add("hide");const e=document.querySelector("#secondBoard");e.classList.add("hide"),e.classList.add("start"),l.disabled=!0,c.disabled=!0,k("second")})),c.addEventListener("click",(()=>{d.computerGameboard.clearBoard(),v(d.computerGameboard),d.randomizeShipsPlacement(d.humanGameboard),s(d.humanGameboard,d.computerGameboard,d.humanShips),S(),B(),L("second")})),h.forEach((e=>{e.addEventListener("click",(()=>{let t=e;t.checked&&(m=Number(t.value))}))}));const P=()=>m;return window.addEventListener("resize",C),{renderBoard:e=>{const a=document.createElement("div");a.classList.add("board"),a.id=g(e),f(e,a),t.append(a)},clearShip:(e,t)=>{document.querySelectorAll(`#${g(t)} .cell`).forEach((t=>{t.classList.contains("taken")&&t.getAttribute("data-shipName")===e.name.toLowerCase()&&(t.classList.remove("taken"),t.classList.add("empty"),t.removeAttribute("data-shipName"))}))},refreshBoard:v,handleUserInput:()=>o(void 0,void 0,void 0,(function*(){const e=document.querySelectorAll("#secondBoard .cell");let t;do{t=yield new Promise((t=>{e.forEach((e=>{e.classList.contains("hit")||e.classList.contains("miss")||e.addEventListener("click",(e=>{t(p(e))}),{once:!0})}))}))}while(!t);return{col:t.col.toString(),row:t.row.toString()}})),pVcBtn:a,cVcBtn:i,waiting:y,setBoardPointer:e=>{const t=document.querySelector("#secondBoard");"player"===e?t.classList.add("boardOutline"):"computer"===e&&t.classList.remove("boardOutline")},removeBoardPointer:()=>{document.querySelector("#secondBoard").classList.remove("boardOutline")},createShipOverlay:e=>{e.shipsPlaced.forEach((t=>{const a=document.createElement("div"),r=t.takenBy.name.toLowerCase(),s=t.takenBy.size,o=t.takenBy.isVertical;a.classList.add("ship",r),a.setAttribute("data-size",`${s}`),a.setAttribute("data-name",`${r}`),a.setAttribute("draggable","true"),a.classList.add("draggable");const n=()=>{const e=document.querySelector("html"),t=parseFloat(window.getComputedStyle(e,null).getPropertyValue("font-size"));o?o&&(a.style.width=i/t+"rem",a.style.height=s*(i/t)+"rem"):(a.style.width=s*(i/t)+"rem",a.style.height=i/t+"rem")};let i=document.querySelector(".board .cell").getBoundingClientRect().width;n(),window.addEventListener("resize",(function(){i=document.querySelector(".board .cell").getBoundingClientRect().width,n()}));document.querySelector(`#${g(e)} .cell[data-col="${t.col}"][data-row="${t.row}"]`).appendChild(a)}))},canBeStarted:S,setInitMessage:C,setStartMessage:B,setTurnMessagePvC:t=>{e.textContent=t?"Player's turn. Take aim and attack!":"Computer's turn. The shot is coming!"},setTurnMessageCvC:t=>{e.textContent=t?"Violet's turn":"Blue's turn"},setGameOverMessagePvC:t=>{"player"===t?e.textContent="Game over, Player wins!":"computer"===t&&(e.textContent="Game over, Computer wins!")},setGameOverMessageCvC:t=>{"player"===t?e.textContent="Game over, Blue Computer wins!":"computer"===t&&(e.textContent="Game over, Violet Computer wins!")},setRestartMessage:b,getSpeedValue:P,fillCells:L,unFillCells:k}})(),i=n;var l=function(e,t,a,r){return new(a||(a=Promise))((function(s,o){function n(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,i)}l((r=r.apply(e,t||[])).next())}))};const c=(()=>{const r=e(),o=e(),n=a(),d=a();let u=!0,h=t("Carrier"),m=t("Battleship"),f=t("Destroyer"),g=t("Submarine"),v=t("PatrolBoat");const p=[h,m,f,g,v],w=()=>{o.placeShip(h,"A","1","horizontal"),o.placeShip(m,"A","3","horizontal"),o.placeShip(f,"A","5","horizontal"),o.placeShip(g,"A","7","horizontal"),o.placeShip(v,"A","9","horizontal"),o.reserveSpace(o,"A","1"),o.reserveSpace(o,"A","3"),o.reserveSpace(o,"A","5"),o.reserveSpace(o,"A","7"),o.reserveSpace(o,"A","9")};const y=()=>o.allSunk(o)?(i.removeBoardPointer(),i.pVcBtn.classList.contains("selected")&&i.setGameOverMessagePvC("player"),i.cVcBtn.classList.contains("selected")&&i.setGameOverMessageCvC("player"),!0):!!r.allSunk(r)&&(i.removeBoardPointer(),i.pVcBtn.classList.contains("selected")&&i.setGameOverMessagePvC("computer"),i.cVcBtn.classList.contains("selected")&&i.setGameOverMessageCvC("computer"),!0),S=e=>{let t;if(e===r?t=d:e===o&&(t=n),e.hitButNotSunk(e)){if(null!==t.getPrevHit()&&null!==t.getLastHit()&&e.getCell(t.getLastHit().col,t.getLastHit().row).takenBy.hitCount>=2&&e.getCell(t.getLastHit().col,t.getLastHit().row).takenBy.hitCount<=4){if(t.finishingAttack(e,t.getLastHit().col,t.getLastHit().row,t.getPrevHit()),e.sinkShip(e,t.getLastHit().col,t.getLastHit().row),y())return}else if(1===e.getCell(t.getLastHit().col,t.getLastHit().row).takenBy.hitCount&&(t.followupAttack(e,t.getLastHit().col,t.getLastHit().row),e.sinkShip(e,t.getLastHit().col,t.getLastHit().row),y()))return}else{const{col:a,row:r}=t.randomAttack(e);if("hit"===e.getCell(a,r).status&&(t.setPrevHit(t.getLastHit()),t.setLastHit({col:a,row:r})),"hit"===e.getCell(a,r).status&&e.getCell(a,r).takenBy.isSunk()&&(e.sinkShip(e,a,r),t.setPrevHit(null),t.setLastHit(null),y()))return}},C=e=>{e.clearBoard(),(e=>{let a;e===r?(h=t("Carrier"),m=t("Battleship"),f=t("Destroyer"),g=t("Submarine"),v=t("PatrolBoat"),a=[h,m,f,g,v]):e===o&&(a=[t("Carrier"),t("Battleship"),t("Destroyer"),t("Submarine"),t("PatrolBoat")]);c.humanShips.length=0;const s=["A","B","C","D","E","F","G","H","I","J"],n=()=>s[Math.floor(Math.random()*s.length)],i=()=>Math.ceil(10*Math.random()).toString(),l=()=>Math.random()>.5?"horizontal":"vertical";a.forEach((t=>{let a=n(),r=i(),s=l(),o=e.canBePlaced(t.size,a,r,s);for(;!o;)a=n(),r=i(),s=l(),o=e.canBePlaced(t.size,a,r,s);o&&(e.placeShip(t,a,r,s),e.reserveSpace(e,a,r)),c.humanShips.push(t)}))})(e),i.refreshBoard(e),e===r&&i.createShipOverlay(e)},B=()=>{i.cVcBtn.classList.contains("selected")&&(C(r),C(o),u=!1,l(void 0,void 0,void 0,(function*(){i.removeBoardPointer();let e=!0;for(;!y()&&!u;){if(i.waiting(!0),e){if(i.setTurnMessageCvC(e),yield new Promise((e=>setTimeout(e,i.getSpeedValue()))),!i.cVcBtn.classList.contains("selected")||u)break;S(r),i.refreshBoard(r),e=!1}if(y()||u)break;if(!e){if(i.setTurnMessageCvC(e),yield new Promise((e=>setTimeout(e,i.getSpeedValue()))),!i.cVcBtn.classList.contains("selected")||u)break;S(o),i.refreshBoard(o),e=!0}}u=!1,i.waiting(!1)})),i.refreshBoard(r))},b=()=>{u=!0,n.setPrevHit(null),n.setLastHit(null),d.setPrevHit(null),d.setLastHit(null),r.clearBoard(),o.clearBoard(),w(),i.refreshBoard(r),i.refreshBoard(o),i.createShipOverlay(o),s(r,o,p),i.canBeStarted(),B(),p.forEach((e=>{!0===e.isVertical&&(e.isVertical=!1)}))};return{init:()=>{i.setInitMessage(),r.generateArray(),o.generateArray(),i.renderBoard(r),i.renderBoard(o),w(),i.refreshBoard(o),i.createShipOverlay(o),s(r,o,p),i.canBeStarted(),B(),i.unFillCells("first"),i.pVcBtn.disabled=!0},renew:function(){i.refreshBoard(r),i.refreshBoard(o),i.createShipOverlay(r),i.createShipOverlay(o),s(r,o,p)},humanGameboard:r,computerGameboard:o,restart:b,newGame:()=>l(void 0,void 0,void 0,(function*(){u=!0,yield new Promise((e=>setTimeout(e,i.getSpeedValue()))),u=!1,b()})),start:()=>{i.refreshBoard(r),C(o),u=!1,l(void 0,void 0,void 0,(function*(){let e=!0;for(;!y()&&!u;){if(e){i.setTurnMessagePvC(e),i.setBoardPointer("player"),i.waiting(!1);const{col:t,row:a}=yield i.handleUserInput();n.attack(o,t,a),o.sinkShip(o,t,a),i.refreshBoard(o),e=!1}if(y()||u)break;if(!e){if(i.setTurnMessagePvC(e),i.setBoardPointer("computer"),i.waiting(!0),yield new Promise((e=>setTimeout(e,i.getSpeedValue()))),!i.pVcBtn.classList.contains("selected")||u)break;S(r),i.refreshBoard(r),e=!0}}u=!1,i.waiting(!1)}))},randomizeShipsPlacement:C,humanShips:p}})(),d=c;d.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxFQUM3QyxNQUVKUSxFQUFXeEUsR0FDWCxFQUFHRSxhQUFhRixHQUNoQnVELEdBQWUsQ0FDbkIsQ0FDSixDQUNBUyxHQUFZLEVBQ1osRUFBR3hELFNBQVEsRUFDZixHQXNHMEIsRUF3Q3dEcUIsMEJBQXlCQyxhQUM5RyxFQS9Ra0IsR0FnUm5CLElDM1JBLEVBQVcrQyxNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL2dhbWVib2FyZC50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvc2hpcC50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvcGxheWVyLnRzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9kcmFnQW5kRHJvcC50cyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvdWkudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL2NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBnYW1lYm9hcmRGYWN0b3J5ID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvbHMgPSBbJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onXTtcbiAgICBjb25zdCByb3dzID0gWycxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsICcxMCddO1xuICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgY29uc3Qgc2hpcHNQbGFjZWQgPSBbXTtcbiAgICBjb25zdCBnZW5lcmF0ZUFycmF5ID0gKCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGFycmF5W2ldID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwOyBqICs9IDEpIHtcbiAgICAgICAgICAgICAgICBhcnJheVtpXVtqXSA9IHsgY29sOiBjb2xzW2pdLCByb3c6IHJvd3NbaV0sIHN0YXR1czogJ2VtcHR5JywgdGFrZW5CeTogbnVsbCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBjbGVhckJvYXJkID0gKCkgPT4ge1xuICAgICAgICBhcnJheS5mbGF0KCkuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgY2VsbC5zdGF0dXMgPSAnZW1wdHknO1xuICAgICAgICAgICAgY2VsbC50YWtlbkJ5ID0gdW5kZWZpbmVkO1xuICAgICAgICB9KTtcbiAgICAgICAgc2hpcHNQbGFjZWQubGVuZ3RoID0gMDtcbiAgICB9O1xuICAgIGNvbnN0IGdldENlbGwgPSAoY29sLCByb3cpID0+IHtcbiAgICAgICAgY29uc3QgY29sSW5kZXggPSBjb2xzLmluZGV4T2YoY29sKTtcbiAgICAgICAgY29uc3Qgcm93SW5kZXggPSByb3dzLmluZGV4T2Yocm93KTtcbiAgICAgICAgaWYgKGNvbEluZGV4ID09PSAtMSB8fCByb3dJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheVtyb3dJbmRleF1bY29sSW5kZXhdO1xuICAgIH07XG4gICAgY29uc3Qgc2V0Q2VsbCA9IChjb2wsIHJvdywgbmV3U3RhdHVzLCBuZXdUYWtlbkJ5KSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbEluZGV4ID0gY29scy5pbmRleE9mKGNvbCk7XG4gICAgICAgIGNvbnN0IHJvd0luZGV4ID0gcm93cy5pbmRleE9mKHJvdyk7XG4gICAgICAgIGlmIChjb2xJbmRleCA9PT0gLTEgfHwgcm93SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBhcnJheVtyb3dJbmRleF1bY29sSW5kZXhdLnN0YXR1cyA9IG5ld1N0YXR1cztcbiAgICAgICAgaWYgKG5ld1Rha2VuQnkpIHtcbiAgICAgICAgICAgIGFycmF5W3Jvd0luZGV4XVtjb2xJbmRleF0udGFrZW5CeSA9IG5ld1Rha2VuQnk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFycmF5W3Jvd0luZGV4XVtjb2xJbmRleF07XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVTaGlwID0gKHNoaXAsIGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBjb25zdCBnYW1lYm9hcmRDZWxscyA9IGdhbWVib2FyZC5hcnJheS5mbGF0KCk7XG4gICAgICAgIGdhbWVib2FyZENlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ3Rha2VuJyAmJiBjZWxsLnRha2VuQnkubmFtZSA9PT0gc2hpcC5uYW1lKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5zdGF0dXMgPSAnZW1wdHknO1xuICAgICAgICAgICAgICAgIGNlbGwudGFrZW5CeSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzaGlwSW5kZXggPSBzaGlwc1BsYWNlZC5pbmRleE9mKGNlbGwpO1xuICAgICAgICAgICAgaWYgKGNlbGwudGFrZW5CeSA9PT0gbnVsbCAmJiBzaGlwSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgc2hpcHNQbGFjZWQuc3BsaWNlKHNoaXBJbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgcGxhY2VTaGlwID0gKHNoaXAsIGNvbCwgcm93LCBvcmllbnRhdGlvbikgPT4ge1xuICAgICAgICBjb25zdCBpc0hvcml6b250YWwgPSBvcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnO1xuICAgICAgICBjb25zdCBjZWxscyA9IGlzSG9yaXpvbnRhbCA/IGNvbHMgOiByb3dzO1xuICAgICAgICBjb25zdCBzdGFydCA9IGNlbGxzLmluZGV4T2YoaXNIb3Jpem9udGFsID8gY29sIDogcm93KTtcbiAgICAgICAgaWYgKG9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICAgIHNoaXAuaXNWZXJ0aWNhbCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2hpcC5pc1ZlcnRpY2FsID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2hpcENlbGxzID0gW107XG4gICAgICAgIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgKyBzaGlwLnNpemUgPiBjZWxscy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAuc2l6ZTsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q29sID0gaXNIb3Jpem9udGFsID8gY2VsbHNbc3RhcnQgKyBpXSA6IGNvbDtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRSb3cgPSBpc0hvcml6b250YWwgPyByb3cgOiBjZWxsc1tzdGFydCArIGldO1xuICAgICAgICAgICAgaWYgKGdldENlbGwoY3VycmVudENvbCwgY3VycmVudFJvdykuc3RhdHVzICE9PSAnZW1wdHknKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0Q2VsbChjdXJyZW50Q29sLCBjdXJyZW50Um93LCAndGFrZW4nLCBzaGlwKTtcbiAgICAgICAgICAgIHNoaXBDZWxscy5wdXNoKGdldENlbGwoY3VycmVudENvbCwgY3VycmVudFJvdykpO1xuICAgICAgICB9XG4gICAgICAgIHNoaXBzUGxhY2VkLnB1c2goc2hpcENlbGxzWzBdKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBjb25zdCBjYW5CZVBsYWNlZCA9IChzaXplLCBjb2wsIHJvdywgb3JpZW50YXRpb24pID0+IHtcbiAgICAgICAgY29uc3QgaXNIb3Jpem9udGFsID0gb3JpZW50YXRpb24gPT09ICdob3Jpem9udGFsJztcbiAgICAgICAgY29uc3QgY2VsbHMgPSBpc0hvcml6b250YWwgPyBjb2xzIDogcm93cztcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBjZWxscy5pbmRleE9mKGlzSG9yaXpvbnRhbCA/IGNvbCA6IHJvdyk7XG4gICAgICAgIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgKyBzaXplID4gY2VsbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXJlRW1wdHkgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb2wgPSBpc0hvcml6b250YWwgPyBjZWxsc1tzdGFydCArIGldIDogY29sO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFJvdyA9IGlzSG9yaXpvbnRhbCA/IHJvdyA6IGNlbGxzW3N0YXJ0ICsgaV07XG4gICAgICAgICAgICBhcmVFbXB0eS5wdXNoKGdldENlbGwoY3VycmVudENvbCwgY3VycmVudFJvdykuc3RhdHVzID09PSAnZW1wdHknKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJlRW1wdHkuZXZlcnkoKGl0ZW0pID0+IGl0ZW0gPT09IHRydWUpO1xuICAgIH07XG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb2wsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gZ2V0Q2VsbChjb2wsIHJvdyk7XG4gICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ3Rha2VuJykge1xuICAgICAgICAgICAgY2VsbC50YWtlbkJ5LmhpdCgpO1xuICAgICAgICAgICAgc2V0Q2VsbChjb2wsIHJvdywgJ2hpdCcpO1xuICAgICAgICAgICAgcmV0dXJuIGNlbGwuc3RhdHVzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ2VtcHR5JyB8fCBjZWxsLnN0YXR1cyA9PT0gJ3Jlc2VydmVkJykge1xuICAgICAgICAgICAgc2V0Q2VsbChjb2wsIHJvdywgJ21pc3MnKTtcbiAgICAgICAgICAgIHJldHVybiBjZWxsLnN0YXR1cztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IHJlY2VpdmVBcm91bmQgPSAoY29sLCByb3cpID0+IHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGdldENlbGwoY29sLCByb3cpO1xuICAgICAgICBpZiAoY2VsbC5zdGF0dXMgPT09ICdlbXB0eScpIHtcbiAgICAgICAgICAgIHNldENlbGwoY29sLCByb3csICdyZXNlcnZlZCcpO1xuICAgICAgICAgICAgcmV0dXJuIGNlbGwuc3RhdHVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgY29uc3QgcmVzZXJ2ZVNwYWNlID0gKGdhbWVib2FyZCwgY29sLCByb3cpID0+IHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KTtcbiAgICAgICAgaWYgKGNlbGwgJiYgY2VsbC50YWtlbkJ5KSB7XG4gICAgICAgICAgICBjb25zdCBnYW1lYm9hcmRDZWxscyA9IGdhbWVib2FyZC5hcnJheS5mbGF0KCk7XG4gICAgICAgICAgICBjb25zdCBzaGlwQ2VsbHMgPSBnYW1lYm9hcmRDZWxscy5maWx0ZXIoKGMpID0+IGMudGFrZW5CeSAmJiBjLnRha2VuQnkubmFtZSA9PT0gY2VsbC50YWtlbkJ5Lm5hbWUpO1xuICAgICAgICAgICAgc2hpcENlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkaXJlY3Rpb25zID0gW1xuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMCwgcm93OiAtMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMCwgcm93OiAxIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAtMSwgcm93OiAwIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAxLCByb3c6IDAgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IC0xLCByb3c6IC0xIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAtMSwgcm93OiAxIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAxLCByb3c6IC0xIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAxLCByb3c6IDEgfSxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbnMuZm9yRWFjaCgoZGlyZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2VsbC5jb2wuY2hhckNvZGVBdCgwKSArIGRpcmVjdGlvbi5jb2wpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdSb3cgPSAoTnVtYmVyKGNlbGwucm93KSArIGRpcmVjdGlvbi5yb3cpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIG5ld1JvdykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZC5yZWNlaXZlQXJvdW5kKG5ld0NvbCwgbmV3Um93KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVJlc2VydmVkU3BhY2UgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGNvbnN0IGdhbWVib2FyZENlbGxzID0gZ2FtZWJvYXJkLmFycmF5LmZsYXQoKTtcbiAgICAgICAgZ2FtZWJvYXJkQ2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNlbGwuc3RhdHVzID09PSAncmVzZXJ2ZWQnKSB7XG4gICAgICAgICAgICAgICAgc2V0Q2VsbChjZWxsLmNvbCwgY2VsbC5yb3csICdlbXB0eScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHNpbmtTaGlwID0gKGdhbWVib2FyZCwgY29sLCByb3cpID0+IHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KTtcbiAgICAgICAgaWYgKGNlbGwgJiYgY2VsbC50YWtlbkJ5ICYmIGNlbGwudGFrZW5CeS5pc1N1bmsoKSkge1xuICAgICAgICAgICAgY29uc3Qgc2hpcENlbGxzID0gZ2FtZWJvYXJkLmFycmF5LmZsYXQoKS5maWx0ZXIoKGMpID0+IGMudGFrZW5CeSAmJiBjLnRha2VuQnkubmFtZSA9PT0gY2VsbC50YWtlbkJ5Lm5hbWUpO1xuICAgICAgICAgICAgc2hpcENlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkaXJlY3Rpb25zID0gW1xuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMCwgcm93OiAtMSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGNvbDogMCwgcm93OiAxIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAtMSwgcm93OiAwIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAxLCByb3c6IDAgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjb2w6IC0xLCByb3c6IC0xIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAtMSwgcm93OiAxIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAxLCByb3c6IC0xIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY29sOiAxLCByb3c6IDEgfSxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbnMuZm9yRWFjaCgoZGlyZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2VsbC5jb2wuY2hhckNvZGVBdCgwKSArIGRpcmVjdGlvbi5jb2wpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdSb3cgPSAoTnVtYmVyKGNlbGwucm93KSArIGRpcmVjdGlvbi5yb3cpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIG5ld1JvdykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKG5ld0NvbCwgbmV3Um93KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGhpdEJ1dE5vdFN1bmsgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGNvbnN0IGdhbWVib2FyZENlbGxzID0gZ2FtZWJvYXJkLmFycmF5LmZsYXQoKTtcbiAgICAgICAgcmV0dXJuIGdhbWVib2FyZENlbGxzLnNvbWUoKGNlbGwpID0+IHtcbiAgICAgICAgICAgIGlmIChjZWxsLnN0YXR1cyA9PT0gJ2hpdCcgJiYgY2VsbC50YWtlbkJ5LmlzU3VuaygpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IGFsbFN1bmsgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGNvbnN0IGdhbWVib2FyZENlbGxzID0gZ2FtZWJvYXJkLmFycmF5LmZsYXQoKTtcbiAgICAgICAgbGV0IHRha2VuQnlDZWxscyA9IGdhbWVib2FyZENlbGxzLmZpbHRlcigoY2VsbCkgPT4gY2VsbC50YWtlbkJ5KTtcbiAgICAgICAgaWYgKHRha2VuQnlDZWxscy5sZW5ndGggPiAwICYmIHRha2VuQnlDZWxscy5ldmVyeSgoY2VsbCkgPT4gY2VsbC50YWtlbkJ5LmlzU3VuaygpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIGdlbmVyYXRlQXJyYXksXG4gICAgICAgIGNsZWFyQm9hcmQsXG4gICAgICAgIGdldENlbGwsXG4gICAgICAgIHNldENlbGwsXG4gICAgICAgIHJlbW92ZVNoaXAsXG4gICAgICAgIHBsYWNlU2hpcCxcbiAgICAgICAgcmVjZWl2ZUF0dGFjayxcbiAgICAgICAgcmVjZWl2ZUFyb3VuZCxcbiAgICAgICAgcmVzZXJ2ZVNwYWNlLFxuICAgICAgICBoaXRCdXROb3RTdW5rLFxuICAgICAgICBzaW5rU2hpcCxcbiAgICAgICAgYWxsU3VuayxcbiAgICAgICAgYXJyYXksXG4gICAgICAgIGNhbkJlUGxhY2VkLFxuICAgICAgICBzaGlwc1BsYWNlZCxcbiAgICAgICAgcmVtb3ZlUmVzZXJ2ZWRTcGFjZSxcbiAgICB9O1xufTtcbmV4cG9ydCBkZWZhdWx0IGdhbWVib2FyZEZhY3Rvcnk7XG4iLCJjb25zdCBzaGlwRmFjdG9yeSA9IChuYW1lKSA9PiB7XG4gICAgbGV0IHNpemU7XG4gICAgaWYgKG5hbWUgPT09ICdDYXJyaWVyJykge1xuICAgICAgICBzaXplID0gNTtcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09ICdCYXR0bGVzaGlwJykge1xuICAgICAgICBzaXplID0gNDtcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09ICdEZXN0cm95ZXInKSB7XG4gICAgICAgIHNpemUgPSAzO1xuICAgIH1cbiAgICBpZiAobmFtZSA9PT0gJ1N1Ym1hcmluZScpIHtcbiAgICAgICAgc2l6ZSA9IDM7XG4gICAgfVxuICAgIGlmIChuYW1lID09PSAnUGF0cm9sQm9hdCcpIHtcbiAgICAgICAgc2l6ZSA9IDI7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIHNpemUsXG4gICAgICAgIGhpdENvdW50OiAwLFxuICAgICAgICBpc1ZlcnRpY2FsOiBmYWxzZSxcbiAgICAgICAgcm90YXRlKCkge1xuICAgICAgICAgICAgdGhpcy5pc1ZlcnRpY2FsID0gIXRoaXMuaXNWZXJ0aWNhbDtcbiAgICAgICAgfSxcbiAgICAgICAgaGl0KCkge1xuICAgICAgICAgICAgdGhpcy5oaXRDb3VudCArPSAxO1xuICAgICAgICB9LFxuICAgICAgICBpc1N1bmsoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oaXRDb3VudCA9PT0gc2l6ZTtcbiAgICAgICAgfSxcbiAgICB9O1xufTtcbmV4cG9ydCBkZWZhdWx0IHNoaXBGYWN0b3J5O1xuIiwiY29uc3QgcGxheWVyRmFjdG9yeSA9ICgpID0+IHtcbiAgICBjb25zdCBjb2xzID0gWydBJywgJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAnSScsICdKJ107XG4gICAgbGV0IHByZXZIaXQgPSBudWxsO1xuICAgIGxldCBsYXN0SGl0ID0gbnVsbDtcbiAgICBjb25zdCBhdHRhY2sgPSAoZ2FtZWJvYXJkLCBjb2wsIHJvdykgPT4ge1xuICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpLnN0YXR1cyAhPT0gJ2hpdCcgJiYgZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpLnN0YXR1cyAhPT0gJ21pc3MnKSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soY29sLCByb3cpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICBzZXRQcmV2SGl0KGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IGNvbCwgcm93OiByb3cgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnYWxyZWFkeSBzaG90JztcbiAgICB9O1xuICAgIGNvbnN0IHJhbmRvbUF0dGFjayA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgbGV0IHJhbmRvbUNvbDtcbiAgICAgICAgbGV0IHJhbmRvbVJvdztcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgcmFuZG9tQ29sID0gY29sc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb2xzLmxlbmd0aCldO1xuICAgICAgICAgICAgcmFuZG9tUm93ID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAxMCkudG9TdHJpbmcoKTtcbiAgICAgICAgfSB3aGlsZSAoZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyA9PT0gJ2hpdCcgfHwgZ2FtZWJvYXJkLmdldENlbGwocmFuZG9tQ29sLCByYW5kb21Sb3cpLnN0YXR1cyA9PT0gJ21pc3MnKTtcbiAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKHJhbmRvbUNvbCwgcmFuZG9tUm93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKHJhbmRvbUNvbCwgcmFuZG9tUm93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2socmFuZG9tQ29sLCByYW5kb21Sb3cpO1xuICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKHJhbmRvbUNvbCwgcmFuZG9tUm93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICBzZXRMYXN0SGl0KHsgY29sOiByYW5kb21Db2wsIHJvdzogcmFuZG9tUm93IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgcmVzdWx0LCBjb2w6IHJhbmRvbUNvbCwgcm93OiByYW5kb21Sb3cgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyByZXN1bHQ6ICdhbHJlYWR5IHNob3QnLCBjb2w6IHJhbmRvbUNvbCwgcm93OiByYW5kb21Sb3cgfTtcbiAgICB9O1xuICAgIGNvbnN0IGZvbGxvd3VwQXR0YWNrID0gKGdhbWVib2FyZCwgY29sLCByb3cpID0+IHtcbiAgICAgICAgY29uc3QgZGlyZWN0aW9ucyA9IFtcbiAgICAgICAgICAgIHsgY29sOiAwLCByb3c6IC0xIH0sXG4gICAgICAgICAgICB7IGNvbDogMCwgcm93OiAxIH0sXG4gICAgICAgICAgICB7IGNvbDogLTEsIHJvdzogMCB9LFxuICAgICAgICAgICAgeyBjb2w6IDEsIHJvdzogMCB9LFxuICAgICAgICBdO1xuICAgICAgICBjb25zdCB2YWxpZERpcmVjdGlvbnMgPSBkaXJlY3Rpb25zLmZpbHRlcigoZGlyZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApICsgZGlyZWN0aW9uLmNvbCk7XG4gICAgICAgICAgICBjb25zdCBuZXdSb3cgPSAoTnVtYmVyKHJvdykgKyBkaXJlY3Rpb24ucm93KS50b1N0cmluZygpO1xuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgbmV3Um93KTtcbiAgICAgICAgICAgIGlmIChjZWxsICYmIGNlbGwuc3RhdHVzICE9PSAnbWlzcycgJiYgY2VsbC5zdGF0dXMgIT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodmFsaWREaXJlY3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJhbmRvbURpcmVjdGlvbiA9IHZhbGlkRGlyZWN0aW9uc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB2YWxpZERpcmVjdGlvbnMubGVuZ3RoKV07XG4gICAgICAgICAgICBjb25zdCBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApICsgcmFuZG9tRGlyZWN0aW9uLmNvbCk7XG4gICAgICAgICAgICBjb25zdCBuZXdSb3cgPSAoTnVtYmVyKHJvdykgKyByYW5kb21EaXJlY3Rpb24ucm93KS50b1N0cmluZygpO1xuICAgICAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2sobmV3Q29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgbmV3Um93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICBzZXRMYXN0SGl0KHsgY29sOiBuZXdDb2wsIHJvdzogbmV3Um93IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBsZXQgcmFuZ2UgPSAxO1xuICAgIGxldCBnb1JpZ2h0ID0gdHJ1ZTtcbiAgICBsZXQgZ29Eb3duID0gdHJ1ZTtcbiAgICBjb25zdCBmaW5pc2hpbmdBdHRhY2sgPSAoZ2FtZWJvYXJkLCBjb2wsIHJvdywgcHJldkhpdCkgPT4ge1xuICAgICAgICBpZiAocHJldkhpdC5yb3cgPT09IHJvdykge1xuICAgICAgICAgICAgaWYgKGdvUmlnaHQpIHtcbiAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgbGV0IG5ld0NvbCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sLmNoYXJDb2RlQXQoMCkgKyByYW5nZSk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgICAgICBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApICsgcmFuZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgIT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KS5zdGF0dXMgIT09ICdtaXNzJykge1xuICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhuZXdDb2wsIHJvdyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJldkhpdChsYXN0SGl0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldExhc3RIaXQoeyBjb2w6IG5ld0NvbCwgcm93OiByb3cgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgZ29SaWdodCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hpbmdBdHRhY2soZ2FtZWJvYXJkLCBuZXdDb2wsIHJvdywgcHJldkhpdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgICAgIGxldCBuZXdDb2wgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbC5jaGFyQ29kZUF0KDApIC0gcmFuZ2UpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykgJiYgZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgbmV3Q29sID0gU3RyaW5nLmZyb21DaGFyQ29kZShjb2wuY2hhckNvZGVBdCgwKSAtIHJhbmdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKG5ld0NvbCwgcm93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzICE9PSAnaGl0JyAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChuZXdDb2wsIHJvdykuc3RhdHVzICE9PSAnbWlzcycpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2sobmV3Q29sLCByb3cpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwobmV3Q29sLCByb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFByZXZIaXQobGFzdEhpdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMYXN0SGl0KHsgY29sOiBuZXdDb2wsIHJvdzogcm93IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGdvUmlnaHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hpbmdBdHRhY2soZ2FtZWJvYXJkLCBuZXdDb2wsIHJvdywgcHJldkhpdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHByZXZIaXQuY29sID09PSBjb2wpIHtcbiAgICAgICAgICAgIGlmIChnb0Rvd24pIHtcbiAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgbGV0IG5ld1JvdyA9IChOdW1iZXIocm93KSArIHJhbmdlKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1JvdykgJiYgZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgbmV3Um93ID0gKE51bWJlcihyb3cpICsgcmFuZ2UpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1JvdykgJiYgZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpLnN0YXR1cyAhPT0gJ2hpdCcgJiYgZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpLnN0YXR1cyAhPT0gJ21pc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKGNvbCwgbmV3Um93KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KS5zdGF0dXMgPT09ICdoaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRQcmV2SGl0KGxhc3RIaXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGFzdEhpdCh7IGNvbDogY29sLCByb3c6IG5ld1JvdyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgPSAxO1xuICAgICAgICAgICAgICAgICAgICBnb0Rvd24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZmluaXNoaW5nQXR0YWNrKGdhbWVib2FyZCwgY29sLCBuZXdSb3csIHByZXZIaXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJhbmdlID0gMTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Um93ID0gKE51bWJlcihyb3cpIC0gcmFuZ2UpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzID09PSAnaGl0Jykge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSArPSAxO1xuICAgICAgICAgICAgICAgICAgICBuZXdSb3cgPSAoTnVtYmVyKHJvdykgLSByYW5nZSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgbmV3Um93KSAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzICE9PSAnaGl0JyAmJiBnYW1lYm9hcmQuZ2V0Q2VsbChjb2wsIG5ld1Jvdykuc3RhdHVzICE9PSAnbWlzcycpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soY29sLCBuZXdSb3cpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCBuZXdSb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFByZXZIaXQobGFzdEhpdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMYXN0SGl0KHsgY29sOiBjb2wsIHJvdzogbmV3Um93IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGdvRG93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGZpbmlzaGluZ0F0dGFjayhnYW1lYm9hcmQsIGNvbCwgbmV3Um93LCBwcmV2SGl0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGdldFByZXZIaXQgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBwcmV2SGl0O1xuICAgIH07XG4gICAgY29uc3QgZ2V0TGFzdEhpdCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGxhc3RIaXQ7XG4gICAgfTtcbiAgICBjb25zdCBzZXRQcmV2SGl0ID0gKG5ld1ByZXZIaXQpID0+IHtcbiAgICAgICAgcHJldkhpdCA9IG5ld1ByZXZIaXQ7XG4gICAgfTtcbiAgICBjb25zdCBzZXRMYXN0SGl0ID0gKG5ld0xhc3RIaXQpID0+IHtcbiAgICAgICAgbGFzdEhpdCA9IG5ld0xhc3RIaXQ7XG4gICAgfTtcbiAgICByZXR1cm4geyBhdHRhY2ssIHJhbmRvbUF0dGFjaywgZm9sbG93dXBBdHRhY2ssIGZpbmlzaGluZ0F0dGFjaywgcHJldkhpdCwgbGFzdEhpdCwgZ2V0UHJldkhpdCwgZ2V0TGFzdEhpdCwgc2V0UHJldkhpdCwgc2V0TGFzdEhpdCB9O1xufTtcbmV4cG9ydCBkZWZhdWx0IHBsYXllckZhY3Rvcnk7XG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB1aSBmcm9tICcuL3VpJztcbmltcG9ydCBjb250cm9sbGVyIGZyb20gJy4vY29udHJvbGxlcic7XG5jb25zdCBkcmFnQW5kRHJvcCA9IChmaXJzdEdhbWVib2FyZCwgc2Vjb25kR2FtZWJvYXJkLCBzaGlwcykgPT4ge1xuICAgIGNvbnN0IGZpcnN0Qm9hcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpcnN0Qm9hcmQnKTtcbiAgICBjb25zdCBzZWNvbmRCb2FyZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICBjb25zdCBmaXJzdEJvYXJkQ2VsbHMgPSBmaXJzdEJvYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpO1xuICAgIGNvbnN0IHNlY29uZEJvYXJkQ2VsbHMgPSBzZWNvbmRCb2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKTtcbiAgICBsZXQgc2hpcE5hbWU7XG4gICAgbGV0IHNoaXBTaXplO1xuICAgIGxldCBncmFiUG9pbnRYID0gMDtcbiAgICBsZXQgZ3JhYlBvaW50WSA9IDA7XG4gICAgbGV0IHNoaXBPYmo7XG4gICAgbGV0IG9yaWVudGF0aW9uO1xuICAgIGxldCBoaWdobGlnaHRlZENlbGxzID0gW107XG4gICAgY29uc3Qgc2hpcE5hbWVUb09iaiA9IHtcbiAgICAgICAgY2Fycmllcjogc2hpcHNbMF0sXG4gICAgICAgIGJhdHRsZXNoaXA6IHNoaXBzWzFdLFxuICAgICAgICBkZXN0cm95ZXI6IHNoaXBzWzJdLFxuICAgICAgICBzdWJtYXJpbmU6IHNoaXBzWzNdLFxuICAgICAgICBwYXRyb2xib2F0OiBzaGlwc1s0XSxcbiAgICB9O1xuICAgIGxldCBsYXN0RHJhZ2dlZCA9IG51bGw7XG4gICAgY29uc3QgZHJhZ2dhYmxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcmFnZ2FibGUnKTtcbiAgICBmdW5jdGlvbiBnZXROb25TaGlwQ2VsbHMoYm9hcmRDZWxscykge1xuICAgICAgICBjb25zdCBib2FyZENlbGxzQXJyYXkgPSBBcnJheS5mcm9tKGJvYXJkQ2VsbHMpO1xuICAgICAgICByZXR1cm4gYm9hcmRDZWxsc0FycmF5LmZpbHRlcigoY2VsbCkgPT4gIWNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YWtlbicpKTtcbiAgICB9XG4gICAgY29uc3Qgbm9uU2hpcENlbGxzID0gWy4uLmdldE5vblNoaXBDZWxscyhmaXJzdEJvYXJkQ2VsbHMpLCAuLi5nZXROb25TaGlwQ2VsbHMoc2Vjb25kQm9hcmRDZWxscyldO1xuICAgIGZ1bmN0aW9uIGlzVmFsaWRQbGFjZW1lbnQodG9IaWdobGlnaHQpIHtcbiAgICAgICAgcmV0dXJuICh0b0hpZ2hsaWdodC5ldmVyeSgoY2VsbCkgPT4gY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2VtcHR5JykpICYmXG4gICAgICAgICAgICAodG9IaWdobGlnaHQuZXZlcnkoKGNlbGwpID0+IGNlbGwuZGF0YXNldC5jb2wgPT09IHRvSGlnaGxpZ2h0WzBdLmRhdGFzZXQuY29sKSB8fFxuICAgICAgICAgICAgICAgIHRvSGlnaGxpZ2h0LmV2ZXJ5KChjZWxsKSA9PiBjZWxsLmRhdGFzZXQucm93ID09PSB0b0hpZ2hsaWdodFswXS5kYXRhc2V0LnJvdykpICYmXG4gICAgICAgICAgICB0b0hpZ2hsaWdodC5sZW5ndGggPT09IHNoaXBTaXplICYmXG4gICAgICAgICAgICB0b0hpZ2hsaWdodC5ldmVyeSgoY2VsbCkgPT4gY2VsbC5kYXRhc2V0LmNvbCA+PSAnQScgJiYgY2VsbC5kYXRhc2V0LmNvbCA8PSAnSicpICYmXG4gICAgICAgICAgICB0b0hpZ2hsaWdodC5ldmVyeSgoY2VsbCkgPT4gTnVtYmVyKGNlbGwuZGF0YXNldC5yb3cpID49IDEgJiYgTnVtYmVyKGNlbGwuZGF0YXNldC5yb3cpIDw9IDEwKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldExhc3RTaGlwU2l6ZUVsZW1lbnRzKGhpZ2hsaWdodGVkQ2VsbHMsIHNoaXBTaXplKSB7XG4gICAgICAgIHJldHVybiBoaWdobGlnaHRlZENlbGxzLnNsaWNlKE1hdGgubWluKGhpZ2hsaWdodGVkQ2VsbHMubGVuZ3RoIC0gc2hpcFNpemUsIDApKTtcbiAgICB9XG4gICAgY29uc3QgaGFuZGxlTW91c2Vkb3duID0gKGUpID0+IHtcbiAgICAgICAgZmlyc3RHYW1lYm9hcmQucmVtb3ZlUmVzZXJ2ZWRTcGFjZShmaXJzdEdhbWVib2FyZCk7XG4gICAgICAgIHNlY29uZEdhbWVib2FyZC5yZW1vdmVSZXNlcnZlZFNwYWNlKHNlY29uZEdhbWVib2FyZCk7XG4gICAgICAgIGNvbnN0IHRhcmdldFNoaXBOYW1lID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnKTtcbiAgICAgICAgbGV0IHJlbWFpbmluZ1NoaXBzRmlyc3QgPSBmaXJzdEdhbWVib2FyZC5zaGlwc1BsYWNlZC5maWx0ZXIoKHNoaXApID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRTaGlwTmFtZSAhPT0gc2hpcC50YWtlbkJ5Lm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCByZW1haW5pbmdTaGlwc1NlY29uZCA9IHNlY29uZEdhbWVib2FyZC5zaGlwc1BsYWNlZC5maWx0ZXIoKHNoaXApID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRTaGlwTmFtZSAhPT0gc2hpcC50YWtlbkJ5Lm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlbWFpbmluZ1NoaXBzRmlyc3QuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgICAgICAgZmlyc3RHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGZpcnN0R2FtZWJvYXJkLCBzaGlwLmNvbCwgc2hpcC5yb3cpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVtYWluaW5nU2hpcHNTZWNvbmQuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgICAgICAgc2Vjb25kR2FtZWJvYXJkLnJlc2VydmVTcGFjZShzZWNvbmRHYW1lYm9hcmQsIHNoaXAuY29sLCBzaGlwLnJvdyk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb250cm9sbGVyLnJlbmV3KCk7XG4gICAgICAgIHVpLnNldEluaXRNZXNzYWdlKCk7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBoYW5kbGVEcmFnU3RhcnQoZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB0YXJnZXQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdkcmFnZ2luZycpO1xuICAgICAgICAgICAgc2hpcE5hbWUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnKTtcbiAgICAgICAgICAgIHNoaXBTaXplID0gTnVtYmVyKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2l6ZScpKTtcbiAgICAgICAgICAgIGdyYWJQb2ludFggPSBlLm9mZnNldFg7XG4gICAgICAgICAgICBncmFiUG9pbnRZID0gZS5vZmZzZXRZO1xuICAgICAgICAgICAgc2hpcE9iaiA9IHNoaXBOYW1lVG9PYmpbc2hpcE5hbWVdO1xuICAgICAgICAgICAgb3JpZW50YXRpb24gPSBzaGlwT2JqLmlzVmVydGljYWwgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnO1xuICAgICAgICAgICAgbGV0IGdhbWVib2FyZDtcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQgPT09ICdmaXJzdEJvYXJkJykge1xuICAgICAgICAgICAgICAgIGdhbWVib2FyZCA9IGZpcnN0R2FtZWJvYXJkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuYm9hcmQnKS5pZCA9PT0gJ3NlY29uZEJvYXJkJykge1xuICAgICAgICAgICAgICAgIGdhbWVib2FyZCA9IHNlY29uZEdhbWVib2FyZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdhbWVib2FyZC5yZW1vdmVTaGlwKHNoaXBPYmosIGdhbWVib2FyZCk7XG4gICAgICAgICAgICB1aS5jbGVhclNoaXAoc2hpcE9iaiwgZ2FtZWJvYXJkKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZURyYWdPdmVyKGluZGV4KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5ib2FyZCcpLmlkID09PSAnZmlyc3RCb2FyZCcpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaWYgKHNoaXBPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXJ0Q2VsbCA9IGluZGV4IC0gKHNoaXBPYmouaXNWZXJ0aWNhbCA/IE1hdGguZmxvb3IoZ3JhYlBvaW50WSAvIHRoaXMub2Zmc2V0SGVpZ2h0KSAqIDEwIDogTWF0aC5mbG9vcihncmFiUG9pbnRYIC8gdGhpcy5vZmZzZXRXaWR0aCkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b0hpZ2hsaWdodCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBTaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjZWxsSW5kZXggPSBzaGlwT2JqLmlzVmVydGljYWwgPyBzdGFydENlbGwgKyBpICogMTAgOiBzdGFydENlbGwgKyBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0Qm9hcmRDZWxsc1tjZWxsSW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9IaWdobGlnaHQucHVzaChmaXJzdEJvYXJkQ2VsbHNbY2VsbEluZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0ZWRDZWxscy5wdXNoKGZpcnN0Qm9hcmRDZWxsc1tjZWxsSW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZFBsYWNlbWVudCh0b0hpZ2hsaWdodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvSGlnaGxpZ2h0LmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxhc3REcmFnZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdERyYWdnZWQgPSBnZXRMYXN0U2hpcFNpemVFbGVtZW50cyhoaWdobGlnaHRlZENlbGxzLCBzaGlwU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5ib2FyZCcpLmlkID09PSAnc2Vjb25kQm9hcmQnKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGlmIChzaGlwT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzdGFydENlbGwgPSBpbmRleCAtIChzaGlwT2JqLmlzVmVydGljYWwgPyBNYXRoLmZsb29yKGdyYWJQb2ludFkgLyB0aGlzLm9mZnNldEhlaWdodCkgKiAxMCA6IE1hdGguZmxvb3IoZ3JhYlBvaW50WCAvIHRoaXMub2Zmc2V0V2lkdGgpKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9IaWdobGlnaHQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwU2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2VsbEluZGV4ID0gc2hpcE9iai5pc1ZlcnRpY2FsID8gc3RhcnRDZWxsICsgaSAqIDEwIDogc3RhcnRDZWxsICsgaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWNvbmRCb2FyZENlbGxzW2NlbGxJbmRleF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b0hpZ2hsaWdodC5wdXNoKHNlY29uZEJvYXJkQ2VsbHNbY2VsbEluZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0ZWRDZWxscy5wdXNoKHNlY29uZEJvYXJkQ2VsbHNbY2VsbEluZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzVmFsaWRQbGFjZW1lbnQodG9IaWdobGlnaHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b0hpZ2hsaWdodC5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsYXN0RHJhZ2dlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3REcmFnZ2VkID0gZ2V0TGFzdFNoaXBTaXplRWxlbWVudHMoaGlnaGxpZ2h0ZWRDZWxscywgc2hpcFNpemUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBoYW5kbGVEcmFnTGVhdmUoKSB7XG4gICAgICAgIGhpZ2hsaWdodGVkQ2VsbHMuZm9yRWFjaCgoaGlnaGxpZ2h0ZWRDZWxsKSA9PiB7XG4gICAgICAgICAgICBoaWdobGlnaHRlZENlbGwuY2xhc3NMaXN0LnJlbW92ZSgnaGlnaGxpZ2h0Jyk7XG4gICAgICAgIH0pO1xuICAgICAgICBoaWdobGlnaHRlZENlbGxzID0gW107XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZURyb3AoZSkge1xuICAgICAgICBoaWdobGlnaHRlZENlbGxzLmZvckVhY2goKGhpZ2hsaWdodGVkQ2VsbCkgPT4ge1xuICAgICAgICAgICAgaGlnaGxpZ2h0ZWRDZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZ2hsaWdodCcpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbGFzdCA9IGdldExhc3RTaGlwU2l6ZUVsZW1lbnRzKGhpZ2hsaWdodGVkQ2VsbHMsIHNoaXBTaXplKTtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQgPT09ICdmaXJzdEJvYXJkJykge1xuICAgICAgICAgICAgaWYgKHNoaXBPYmogJiYgbGFzdERyYWdnZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RHYW1lYm9hcmQuY2FuQmVQbGFjZWQoc2hpcE9iai5zaXplLCBsYXN0WzBdLmRhdGFzZXQuY29sLCBsYXN0WzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RHYW1lYm9hcmQucGxhY2VTaGlwKHNoaXBPYmosIGxhc3RbMF0uZGF0YXNldC5jb2wsIGxhc3RbMF0uZGF0YXNldC5yb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGZpcnN0R2FtZWJvYXJkLCBsYXN0WzBdLmRhdGFzZXQuY29sLCBsYXN0WzBdLmRhdGFzZXQucm93KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0R2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwT2JqLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGZpcnN0R2FtZWJvYXJkLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5ib2FyZCcpLmlkID09PSAnc2Vjb25kQm9hcmQnKSB7XG4gICAgICAgICAgICBpZiAoc2hpcE9iaiAmJiBsYXN0RHJhZ2dlZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWNvbmRHYW1lYm9hcmQuY2FuQmVQbGFjZWQoc2hpcE9iai5zaXplLCBsYXN0WzBdLmRhdGFzZXQuY29sLCBsYXN0WzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kR2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwT2JqLCBsYXN0WzBdLmRhdGFzZXQuY29sLCBsYXN0WzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHNlY29uZEdhbWVib2FyZC5yZXNlcnZlU3BhY2Uoc2Vjb25kR2FtZWJvYXJkLCBsYXN0WzBdLmRhdGFzZXQuY29sLCBsYXN0WzBdLmRhdGFzZXQucm93KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlY29uZEdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcE9iaiwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5jb2wsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHNlY29uZEdhbWVib2FyZC5yZXNlcnZlU3BhY2Uoc2Vjb25kR2FtZWJvYXJkLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmaXJzdEdhbWVib2FyZC5yZW1vdmVSZXNlcnZlZFNwYWNlKGZpcnN0R2FtZWJvYXJkKTtcbiAgICAgICAgc2Vjb25kR2FtZWJvYXJkLnJlbW92ZVJlc2VydmVkU3BhY2Uoc2Vjb25kR2FtZWJvYXJkKTtcbiAgICAgICAgZmlyc3RHYW1lYm9hcmQuc2hpcHNQbGFjZWQuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgICAgICAgZmlyc3RHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGZpcnN0R2FtZWJvYXJkLCBzaGlwLmNvbCwgc2hpcC5yb3cpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2Vjb25kR2FtZWJvYXJkLnNoaXBzUGxhY2VkLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgICAgIHNlY29uZEdhbWVib2FyZC5yZXNlcnZlU3BhY2Uoc2Vjb25kR2FtZWJvYXJkLCBzaGlwLmNvbCwgc2hpcC5yb3cpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29udHJvbGxlci5yZW5ldygpO1xuICAgICAgICB1aS5jYW5CZVN0YXJ0ZWQoKTtcbiAgICAgICAgdWkuc2V0U3RhcnRNZXNzYWdlKCk7XG4gICAgICAgIGxhc3REcmFnZ2VkID0gbnVsbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFuZGxlRHJhZ0VuZChlKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICB0YXJnZXQuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnZ2luZycpO1xuICAgICAgICBpZiAoaGlnaGxpZ2h0ZWRDZWxscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykgJiYgdGFyZ2V0LmNsb3Nlc3QoJy5ib2FyZCcpLmlkID09PSAnZmlyc3RCb2FyZCcpIHtcbiAgICAgICAgICAgICAgICBpZiAobGFzdERyYWdnZWQgJiYgZmlyc3RHYW1lYm9hcmQuY2FuQmVQbGFjZWQoc2hpcE9iai5zaXplLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3csIG9yaWVudGF0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdEdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcE9iaiwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5jb2wsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0R2FtZWJvYXJkLnJlc2VydmVTcGFjZShmaXJzdEdhbWVib2FyZCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5jb2wsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQucm93KTtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5yZW5ldygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykgJiYgdGFyZ2V0LmNsb3Nlc3QoJy5ib2FyZCcpLmlkID09PSAnc2Vjb25kQm9hcmQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3REcmFnZ2VkICYmIHNlY29uZEdhbWVib2FyZC5jYW5CZVBsYWNlZChzaGlwT2JqLnNpemUsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQuY29sLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LnJvdywgb3JpZW50YXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlY29uZEdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcE9iaiwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5jb2wsIGxhc3REcmFnZ2VkWzBdLmRhdGFzZXQucm93LCBvcmllbnRhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHNlY29uZEdhbWVib2FyZC5yZXNlcnZlU3BhY2Uoc2Vjb25kR2FtZWJvYXJkLCBsYXN0RHJhZ2dlZFswXS5kYXRhc2V0LmNvbCwgbGFzdERyYWdnZWRbMF0uZGF0YXNldC5yb3cpO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLnJlbmV3KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVpLmNhbkJlU3RhcnRlZCgpKSB7XG4gICAgICAgICAgICAgICAgdWkuZmlsbENlbGxzKCdzZWNvbmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVpLnNldFN0YXJ0TWVzc2FnZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZU1vdXNldXAoKSB7XG4gICAgICAgIGZpcnN0R2FtZWJvYXJkLnNoaXBzUGxhY2VkLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgICAgIGZpcnN0R2FtZWJvYXJkLnJlc2VydmVTcGFjZShmaXJzdEdhbWVib2FyZCwgc2hpcC5jb2wsIHNoaXAucm93KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlY29uZEdhbWVib2FyZC5zaGlwc1BsYWNlZC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBzZWNvbmRHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKHNlY29uZEdhbWVib2FyZCwgc2hpcC5jb2wsIHNoaXAucm93KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRyb2xsZXIucmVuZXcoKTtcbiAgICAgICAgdWkuc2V0U3RhcnRNZXNzYWdlKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZVJvdGF0ZShlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgIGxldCBnYW1lYm9hcmQ7XG4gICAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLmJvYXJkJykuaWQgPT09ICdmaXJzdEJvYXJkJykge1xuICAgICAgICAgICAgZ2FtZWJvYXJkID0gZmlyc3RHYW1lYm9hcmQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuYm9hcmQnKS5pZCA9PT0gJ3NlY29uZEJvYXJkJykge1xuICAgICAgICAgICAgZ2FtZWJvYXJkID0gc2Vjb25kR2FtZWJvYXJkO1xuICAgICAgICB9XG4gICAgICAgIHNoaXBOYW1lID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJyk7XG4gICAgICAgIHNoaXBTaXplID0gTnVtYmVyKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2l6ZScpKTtcbiAgICAgICAgc2hpcE9iaiA9IHNoaXBOYW1lVG9PYmpbc2hpcE5hbWVdO1xuICAgICAgICBjb25zdCB0ZW1wU2hpcCA9IHNoaXBPYmo7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBnYW1lYm9hcmQuc2hpcHNQbGFjZWQuZmlsdGVyKChzaGlwKSA9PiBzaGlwLnRha2VuQnkubmFtZS50b0xvd2VyQ2FzZSgpID09PSBzaGlwTmFtZSk7XG4gICAgICAgIGdhbWVib2FyZC5yZW1vdmVTaGlwKHNoaXBPYmosIGdhbWVib2FyZCk7XG4gICAgICAgIGdhbWVib2FyZC5yZW1vdmVSZXNlcnZlZFNwYWNlKGdhbWVib2FyZCk7XG4gICAgICAgIGdhbWVib2FyZC5zaGlwc1BsYWNlZC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBnYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGdhbWVib2FyZCwgc2hpcC5jb2wsIHNoaXAucm93KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRlbXBTaGlwLnJvdGF0ZSgpO1xuICAgICAgICBvcmllbnRhdGlvbiA9IHRlbXBTaGlwLmlzVmVydGljYWwgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnO1xuICAgICAgICBpZiAoZ2FtZWJvYXJkLmNhbkJlUGxhY2VkKHRlbXBTaGlwLnNpemUsIGN1cnJlbnRbMF0uY29sLCBjdXJyZW50WzBdLnJvdywgb3JpZW50YXRpb24pKSB7XG4gICAgICAgICAgICBnYW1lYm9hcmQucGxhY2VTaGlwKHRlbXBTaGlwLCBjdXJyZW50WzBdLmNvbCwgY3VycmVudFswXS5yb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRlbXBTaGlwLnJvdGF0ZSgpO1xuICAgICAgICAgICAgb3JpZW50YXRpb24gPSB0ZW1wU2hpcC5pc1ZlcnRpY2FsID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJztcbiAgICAgICAgICAgIGdhbWVib2FyZC5wbGFjZVNoaXAodGVtcFNoaXAsIGN1cnJlbnRbMF0uY29sLCBjdXJyZW50WzBdLnJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGdhbWVib2FyZC5zaGlwc1BsYWNlZC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBnYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGdhbWVib2FyZCwgc2hpcC5jb2wsIHNoaXAucm93KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRyb2xsZXIucmVuZXcoKTtcbiAgICAgICAgaWYgKHVpLmNhbkJlU3RhcnRlZCgpKSB7XG4gICAgICAgICAgICB1aS5maWxsQ2VsbHMoJ3NlY29uZCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJsb2NrUmlnaHRDbGljayhlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgZmlyc3RCb2FyZENlbGxzLmZvckVhY2goKGNlbGwsIGluZGV4KSA9PiB7XG4gICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBoYW5kbGVEcmFnT3ZlcihpbmRleCkpO1xuICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGhhbmRsZURyYWdMZWF2ZSk7XG4gICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGhhbmRsZURyb3ApO1xuICAgIH0pO1xuICAgIHNlY29uZEJvYXJkQ2VsbHMuZm9yRWFjaCgoY2VsbCwgaW5kZXgpID0+IHtcbiAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGhhbmRsZURyYWdPdmVyKGluZGV4KSk7XG4gICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgaGFuZGxlRHJhZ0xlYXZlKTtcbiAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgaGFuZGxlRHJvcCk7XG4gICAgfSk7XG4gICAgZHJhZ2dhYmxlcy5mb3JFYWNoKChkcmFnZ2FibGUpID0+IHtcbiAgICAgICAgZHJhZ2dhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZU1vdXNlZG93bik7XG4gICAgICAgIGRyYWdnYWJsZS5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBoYW5kbGVEcmFnU3RhcnQpO1xuICAgICAgICBkcmFnZ2FibGUuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIGhhbmRsZURyYWdFbmQpO1xuICAgICAgICBkcmFnZ2FibGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGhhbmRsZU1vdXNldXApO1xuICAgICAgICBkcmFnZ2FibGUuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBoYW5kbGVSb3RhdGUpO1xuICAgICAgICBub25TaGlwQ2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4gY2VsbC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIGJsb2NrUmlnaHRDbGljaykpO1xuICAgIH0pO1xufTtcbmV4cG9ydCBkZWZhdWx0IGRyYWdBbmREcm9wO1xuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgZHJhZ0FuZERyb3AgZnJvbSAnLi9kcmFnQW5kRHJvcCc7XG5pbXBvcnQgY29udHJvbGxlciBmcm9tICcuL2NvbnRyb2xsZXInO1xuY29uc3QgdWkgPSAoKCkgPT4ge1xuICAgIGNvbnN0IHN0YXR1c0JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQm94IHAnKTtcbiAgICBjb25zdCBib2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9hcmRzJyk7XG4gICAgY29uc3QgcFZjQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsYXllclZzQ29tcHV0ZXInKTtcbiAgICBjb25zdCBuZXdHYW1lQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25ld0dhbWUnKTtcbiAgICBjb25zdCBjVmNCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29tcHV0ZXJWc0NvbXB1dGVyJyk7XG4gICAgY29uc3Qgc3RhcnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3RhcnQnKTtcbiAgICBjb25zdCByYW5kb21CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmFuZG9tUGxhY2VtZW50Jyk7XG4gICAgY29uc3QgYWxsQnRucyA9IFtwVmNCdG4sIG5ld0dhbWVCdG4sIGNWY0J0biwgc3RhcnRCdG4sIHJhbmRvbUJ0bl07XG4gICAgY29uc3Qgc3BlZWRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoJ3NwZWVkJyk7XG4gICAgbGV0IHNwZWVkVmFsdWUgPSAxMDAwO1xuICAgIGNvbnN0IGNyZWF0ZUNlbGwgPSAoY2VsbCkgPT4ge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2VsbCcpO1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2VsbC5zdGF0dXMpO1xuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1jb2wnLCBjZWxsLmNvbCk7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXJvdycsIGNlbGwucm93KTtcbiAgICAgICAgaWYgKGNlbGwudGFrZW5CeSkge1xuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2hpcE5hbWUnLCBjZWxsLnRha2VuQnkubmFtZS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9O1xuICAgIGNvbnN0IHJlbmRlckNlbGxzID0gKGdhbWVib2FyZCwgYm9hcmQpID0+IHtcbiAgICAgICAgZ2FtZWJvYXJkLmFycmF5LmZvckVhY2goKHJvdykgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKGNvbCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBjcmVhdGVDZWxsKGNvbCk7XG4gICAgICAgICAgICAgICAgYm9hcmQuYXBwZW5kKGNlbGwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgZ2V0Qm9hcmRJZCA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgaWYgKGdhbWVib2FyZCA9PT0gY29udHJvbGxlci5odW1hbkdhbWVib2FyZCkge1xuICAgICAgICAgICAgcmV0dXJuICdmaXJzdEJvYXJkJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChnYW1lYm9hcmQgPT09IGNvbnRyb2xsZXIuY29tcHV0ZXJHYW1lYm9hcmQpIHtcbiAgICAgICAgICAgIHJldHVybiAnc2Vjb25kQm9hcmQnO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCByZW5kZXJCb2FyZCA9IChnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgYm9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgYm9hcmQuY2xhc3NMaXN0LmFkZCgnYm9hcmQnKTtcbiAgICAgICAgYm9hcmQuaWQgPSBnZXRCb2FyZElkKGdhbWVib2FyZCk7XG4gICAgICAgIHJlbmRlckNlbGxzKGdhbWVib2FyZCwgYm9hcmQpO1xuICAgICAgICBib2FyZHMuYXBwZW5kKGJvYXJkKTtcbiAgICB9O1xuICAgIGNvbnN0IGNsZWFyU2hpcCA9IChzaGlwLCBnYW1lYm9hcmQpID0+IHtcbiAgICAgICAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAjJHtnZXRCb2FyZElkKGdhbWVib2FyZCl9IC5jZWxsYCk7XG4gICAgICAgIGNlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgICAgIGlmIChjZWxsLmNsYXNzTGlzdC5jb250YWlucygndGFrZW4nKSAmJiBjZWxsLmdldEF0dHJpYnV0ZSgnZGF0YS1zaGlwTmFtZScpID09PSBzaGlwLm5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgndGFrZW4nKTtcbiAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2VtcHR5Jyk7XG4gICAgICAgICAgICAgICAgY2VsbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtc2hpcE5hbWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCByZWZyZXNoQm9hcmQgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7Z2V0Qm9hcmRJZChnYW1lYm9hcmQpfWApO1xuICAgICAgICBib2FyZC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgcmVuZGVyQ2VsbHMoZ2FtZWJvYXJkLCBib2FyZCk7XG4gICAgfTtcbiAgICBjb25zdCBnZXRVc2VySW5wdXQgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaGl0JykgJiYgIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbWlzcycpKSB7XG4gICAgICAgICAgICBjb25zdCBjb2wgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29sJyk7XG4gICAgICAgICAgICBjb25zdCByb3cgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcm93Jyk7XG4gICAgICAgICAgICByZXR1cm4geyBjb2wsIHJvdyB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVVc2VySW5wdXQgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjc2Vjb25kQm9hcmQgLmNlbGwnKTtcbiAgICAgICAgbGV0IHVzZXJJbnB1dDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgdXNlcklucHV0ID0geWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgICBjZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpdCcpICYmICFjZWxsLmNsYXNzTGlzdC5jb250YWlucygnbWlzcycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGdldFVzZXJJbnB1dChlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IHdoaWxlICghdXNlcklucHV0KTtcbiAgICAgICAgY29uc3QgY29sID0gdXNlcklucHV0LmNvbC50b1N0cmluZygpO1xuICAgICAgICBjb25zdCByb3cgPSB1c2VySW5wdXQucm93LnRvU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiB7IGNvbCwgcm93IH07XG4gICAgfSk7XG4gICAgY29uc3QgaGFuZGxlUHZDID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGZpbGxDZWxscygnZmlyc3QnKTtcbiAgICAgICAgd2FpdGluZyh0cnVlKTtcbiAgICAgICAgYWxsQnRucy5mb3JFYWNoKChidG4pID0+IChidG4uZGlzYWJsZWQgPSB0cnVlKSk7XG4gICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGdldFNwZWVkVmFsdWUoKSkpO1xuICAgICAgICBhbGxCdG5zLmZvckVhY2goKGJ0bikgPT4gKGJ0bi5kaXNhYmxlZCA9IGZhbHNlKSk7XG4gICAgICAgIHdhaXRpbmcoZmFsc2UpO1xuICAgICAgICBjYW5CZVN0YXJ0ZWQoKTtcbiAgICAgICAgc2V0SW5pdE1lc3NhZ2UoKTtcbiAgICB9KTtcbiAgICBjb25zdCBoYW5kbGVOZXdHYW1lID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHNldFJlc3RhcnRNZXNzYWdlKCk7XG4gICAgICAgIHdhaXRpbmcodHJ1ZSk7XG4gICAgICAgIGFsbEJ0bnMuZm9yRWFjaCgoYnRuKSA9PiAoYnRuLmRpc2FibGVkID0gdHJ1ZSkpO1xuICAgICAgICB5aWVsZCBjb250cm9sbGVyLm5ld0dhbWUoKTtcbiAgICAgICAgYWxsQnRucy5mb3JFYWNoKChidG4pID0+IChidG4uZGlzYWJsZWQgPSBmYWxzZSkpO1xuICAgICAgICB3YWl0aW5nKGZhbHNlKTtcbiAgICAgICAgY2FuQmVTdGFydGVkKCk7XG4gICAgICAgIGlmIChwVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBzZXRJbml0TWVzc2FnZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgaGFuZGxlQ3ZDID0gKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHdhaXRpbmcodHJ1ZSk7XG4gICAgICAgIGFsbEJ0bnMuZm9yRWFjaCgoYnRuKSA9PiAoYnRuLmRpc2FibGVkID0gdHJ1ZSkpO1xuICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBnZXRTcGVlZFZhbHVlKCkpKTtcbiAgICAgICAgYWxsQnRucy5mb3JFYWNoKChidG4pID0+IChidG4uZGlzYWJsZWQgPSBmYWxzZSkpO1xuICAgICAgICB3YWl0aW5nKGZhbHNlKTtcbiAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICByYW5kb21CdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBjVmNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0pO1xuICAgIGNvbnN0IGhhbmRsZUdhbWVNb2RlID0gKHNlbGVjdGVkRWxlbWVudCwgZGVzZWxlY3RlZEVsZW1lbnQpID0+IHtcbiAgICAgICAgZGVzZWxlY3RlZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgaWYgKCFzZWxlY3RlZEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZEVsZW1lbnQgPT09IHBWY0J0bikge1xuICAgICAgICAgICAgICAgIGhhbmRsZVB2QygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkRWxlbWVudCA9PT0gY1ZjQnRuKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlQ3ZDKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250cm9sbGVyLnJlc3RhcnQoKTtcbiAgICAgICAgICAgIHNldFJlc3RhcnRNZXNzYWdlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHdhaXRpbmcgPSAoYm9vbCkgPT4ge1xuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnd2FpdCcsIGJvb2wpO1xuICAgIH07XG4gICAgY29uc3Qgc2V0Qm9hcmRQb2ludGVyID0gKHdoaWNoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlY29uZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWNvbmRCb2FyZCcpO1xuICAgICAgICBpZiAod2hpY2ggPT09ICdwbGF5ZXInKSB7XG4gICAgICAgICAgICBzZWNvbmQuY2xhc3NMaXN0LmFkZCgnYm9hcmRPdXRsaW5lJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAod2hpY2ggPT09ICdjb21wdXRlcicpIHtcbiAgICAgICAgICAgIHNlY29uZC5jbGFzc0xpc3QucmVtb3ZlKCdib2FyZE91dGxpbmUnKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlQm9hcmRQb2ludGVyID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBzZWNvbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5yZW1vdmUoJ2JvYXJkT3V0bGluZScpO1xuICAgIH07XG4gICAgY29uc3QgY3JlYXRlU2hpcE92ZXJsYXkgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGdhbWVib2FyZC5zaGlwc1BsYWNlZC5mb3JFYWNoKChmaXJzdENlbGwpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBjb25zdCBzaGlwTmFtZSA9IGZpcnN0Q2VsbC50YWtlbkJ5Lm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBTaXplID0gZmlyc3RDZWxsLnRha2VuQnkuc2l6ZTtcbiAgICAgICAgICAgIGNvbnN0IGlzVmVydGljYWwgPSBmaXJzdENlbGwudGFrZW5CeS5pc1ZlcnRpY2FsO1xuICAgICAgICAgICAgc2hpcEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2hpcCcsIHNoaXBOYW1lKTtcbiAgICAgICAgICAgIHNoaXBFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1zaXplJywgYCR7c2hpcFNpemV9YCk7XG4gICAgICAgICAgICBzaGlwRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScsIGAke3NoaXBOYW1lfWApO1xuICAgICAgICAgICAgc2hpcEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkcmFnZ2FibGUnLCAndHJ1ZScpO1xuICAgICAgICAgICAgc2hpcEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZHJhZ2dhYmxlJyk7XG4gICAgICAgICAgICBjb25zdCBzZXRTaGlwU3R5bGUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaHRtbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdEZvbnRTaXplID0gcGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShodG1sRWxlbWVudCwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgnZm9udC1zaXplJykpO1xuICAgICAgICAgICAgICAgIGlmICghaXNWZXJ0aWNhbCkge1xuICAgICAgICAgICAgICAgICAgICBzaGlwRWxlbWVudC5zdHlsZS53aWR0aCA9IHNoaXBTaXplICogKGNlbGxTaXplIC8gcm9vdEZvbnRTaXplKSArICdyZW0nO1xuICAgICAgICAgICAgICAgICAgICBzaGlwRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBjZWxsU2l6ZSAvIHJvb3RGb250U2l6ZSArICdyZW0nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc1ZlcnRpY2FsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoaXBFbGVtZW50LnN0eWxlLndpZHRoID0gY2VsbFNpemUgLyByb290Rm9udFNpemUgKyAncmVtJztcbiAgICAgICAgICAgICAgICAgICAgc2hpcEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gc2hpcFNpemUgKiAoY2VsbFNpemUgLyByb290Rm9udFNpemUpICsgJ3JlbSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGxldCBjZWxsU2l6ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib2FyZCAuY2VsbCcpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgICAgICAgc2V0U2hpcFN0eWxlKCk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNlbGxTaXplID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvYXJkIC5jZWxsJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgICAgICAgICAgc2V0U2hpcFN0eWxlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0Q2VsbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtnZXRCb2FyZElkKGdhbWVib2FyZCl9IC5jZWxsW2RhdGEtY29sPVwiJHtmaXJzdENlbGwuY29sfVwiXVtkYXRhLXJvdz1cIiR7Zmlyc3RDZWxsLnJvd31cIl1gKTtcbiAgICAgICAgICAgIGZpcnN0Q2VsbEVsZW1lbnQuYXBwZW5kQ2hpbGQoc2hpcEVsZW1lbnQpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IGNhbkJlU3RhcnRlZCA9ICgpID0+IHtcbiAgICAgICAgaWYgKGNvbnRyb2xsZXIuaHVtYW5HYW1lYm9hcmQuc2hpcHNQbGFjZWQubGVuZ3RoID09PSA1ICYmIGNvbnRyb2xsZXIuY29tcHV0ZXJHYW1lYm9hcmQuc2hpcHNQbGFjZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBmaWxsQ2VsbHMoJ3NlY29uZCcpO1xuICAgICAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRJbml0TWVzc2FnZSA9ICgpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhdHVzVGV4dE1vYmlsZSA9IFwiVXNlICdSYW5kb20gUGxhY2VtZW50JyBidXR0b24sIHRoZW4gcHJlc3MgU3RhcnQhXCI7XG4gICAgICAgIGNvbnN0IHN0YXR1c1RleHREZXNrdG9wID0gXCJEcmFnIGFuZCBkcm9wIHNoaXBzIG9udG8gdGhlIGxlZnQgYm9hcmQgb3IgdXNlICdSYW5kb20gUGxhY2VtZW50JyBidXR0b24uIFJpZ2h0IGNsaWNrIHRvIHJvdGF0ZS4gV2hlbiByZWFkeSwgcHJlc3MgU3RhcnQhXCI7XG4gICAgICAgIGlmIChzdGF0dXNCb3gudGV4dENvbnRlbnQgPT09IHN0YXR1c1RleHRNb2JpbGUgfHxcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9PT0gc3RhdHVzVGV4dERlc2t0b3AgfHxcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9PT0gJ1Jlc3RhcnRpbmcuLi4nIHx8XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPT09ICdZb3UgY2FuIG5vdyBiZWdpbiB0aGUgZ2FtZS4gUHJlc3Mgc3RhcnQhJykge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gc3RhdHVzVGV4dE1vYmlsZTtcbiAgICAgICAgICAgIGlmICh3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogMTAyNHB4KScpLm1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSBzdGF0dXNUZXh0RGVza3RvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0U3RhcnRNZXNzYWdlID0gKCkgPT4ge1xuICAgICAgICBpZiAoY2FuQmVTdGFydGVkKCkpIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9ICdZb3UgY2FuIG5vdyBiZWdpbiB0aGUgZ2FtZS4gUHJlc3Mgc3RhcnQhJztcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0VHVybk1lc3NhZ2VQdkMgPSAoaXNQbGF5ZXJUdXJuKSA9PiB7XG4gICAgICAgIGlmIChpc1BsYXllclR1cm4pIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9IFwiUGxheWVyJ3MgdHVybi4gVGFrZSBhaW0gYW5kIGF0dGFjayFcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9IFwiQ29tcHV0ZXIncyB0dXJuLiBUaGUgc2hvdCBpcyBjb21pbmchXCI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldFR1cm5NZXNzYWdlQ3ZDID0gKGlzUGxheWVyVHVybikgPT4ge1xuICAgICAgICBpZiAoaXNQbGF5ZXJUdXJuKSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSBcIlZpb2xldCdzIHR1cm5cIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9IFwiQmx1ZSdzIHR1cm5cIjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0R2FtZU92ZXJNZXNzYWdlUHZDID0gKHdobykgPT4ge1xuICAgICAgICBpZiAod2hvID09PSAncGxheWVyJykge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gJ0dhbWUgb3ZlciwgUGxheWVyIHdpbnMhJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh3aG8gPT09ICdjb21wdXRlcicpIHtcbiAgICAgICAgICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9ICdHYW1lIG92ZXIsIENvbXB1dGVyIHdpbnMhJztcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0R2FtZU92ZXJNZXNzYWdlQ3ZDID0gKHdobykgPT4ge1xuICAgICAgICBpZiAod2hvID09PSAncGxheWVyJykge1xuICAgICAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gJ0dhbWUgb3ZlciwgQmx1ZSBDb21wdXRlciB3aW5zISc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAod2hvID09PSAnY29tcHV0ZXInKSB7XG4gICAgICAgICAgICBzdGF0dXNCb3gudGV4dENvbnRlbnQgPSAnR2FtZSBvdmVyLCBWaW9sZXQgQ29tcHV0ZXIgd2lucyEnO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRSZXN0YXJ0TWVzc2FnZSA9ICgpID0+IHtcbiAgICAgICAgc3RhdHVzQm94LnRleHRDb250ZW50ID0gJ1Jlc3RhcnRpbmcuLi4nO1xuICAgIH07XG4gICAgY29uc3QgZmlsbENlbGxzID0gKGlucHV0KSA9PiB7XG4gICAgICAgIGxldCBib2FyZDtcbiAgICAgICAgaWYgKGlucHV0ID09PSAnZmlyc3QnKSB7XG4gICAgICAgICAgICBib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmaXJzdEJvYXJkJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5wdXQgPT09ICdzZWNvbmQnKSB7XG4gICAgICAgICAgICBib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWNvbmRCb2FyZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNlbGxzID0gYm9hcmQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKTtcbiAgICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdmaWxsZWQnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCB1bkZpbGxDZWxscyA9IChpbnB1dCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHdhaXRpbmcodHJ1ZSk7XG4gICAgICAgIGxldCBib2FyZDtcbiAgICAgICAgaWYgKGlucHV0ID09PSAnZmlyc3QnKSB7XG4gICAgICAgICAgICBib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmaXJzdEJvYXJkJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5wdXQgPT09ICdzZWNvbmQnKSB7XG4gICAgICAgICAgICBib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWNvbmRCb2FyZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNlbGxzID0gYm9hcmQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKTtcbiAgICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdmaWxsZWQnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBjZWxscy5mb3JFYWNoKChjZWxsLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2ZpbGxlZCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IGNlbGxzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIChnZXRTcGVlZFZhbHVlKCkgLyAxMjApICogaW5kZXgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB3YWl0aW5nKGZhbHNlKTtcbiAgICB9KTtcbiAgICBwVmNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGZpbGxDZWxscygnZmlyc3QnKTtcbiAgICAgICAgaGFuZGxlR2FtZU1vZGUocFZjQnRuLCBjVmNCdG4pO1xuICAgICAgICBjb25zdCBzZWNvbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5yZW1vdmUoJ3N0YXJ0Jyk7XG4gICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgcFZjQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgdW5GaWxsQ2VsbHMoJ2ZpcnN0Jyk7XG4gICAgfSk7XG4gICAgY1ZjQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBmaWxsQ2VsbHMoJ2ZpcnN0Jyk7XG4gICAgICAgIGZpbGxDZWxscygnc2Vjb25kJyk7XG4gICAgICAgIGhhbmRsZUdhbWVNb2RlKGNWY0J0biwgcFZjQnRuKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIHNlY29uZC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XG4gICAgICAgIHNlY29uZC5jbGFzc0xpc3QuYWRkKCdzdGFydCcpO1xuICAgICAgICBzdGFydEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHJhbmRvbUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGNWY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIFByb21pc2UuYWxsKFt1bkZpbGxDZWxscygnZmlyc3QnKSwgdW5GaWxsQ2VsbHMoJ3NlY29uZCcpXSk7XG4gICAgfSk7XG4gICAgbmV3R2FtZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBmaWxsQ2VsbHMoJ2ZpcnN0Jyk7XG4gICAgICAgIGlmIChjVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBmaWxsQ2VsbHMoJ3NlY29uZCcpO1xuICAgICAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmFuZG9tQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNWY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdWkucmVtb3ZlQm9hcmRQb2ludGVyKCk7XG4gICAgICAgIHlpZWxkIGhhbmRsZU5ld0dhbWUoKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZEJvYXJkJyk7XG4gICAgICAgIHNlY29uZC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XG4gICAgICAgIGlmIChwVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBzZWNvbmQuY2xhc3NMaXN0LnJlbW92ZSgnc3RhcnQnKTtcbiAgICAgICAgICAgIHVuRmlsbENlbGxzKCdmaXJzdCcpO1xuICAgICAgICAgICAgc3RhcnRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgcFZjQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY1ZjQnRuLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5hZGQoJ3N0YXJ0Jyk7XG4gICAgICAgICAgICByYW5kb21CdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgUHJvbWlzZS5hbGwoW3VuRmlsbENlbGxzKCdmaXJzdCcpLCB1bkZpbGxDZWxscygnc2Vjb25kJyldKTtcbiAgICAgICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJhbmRvbUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICBjVmNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSkpO1xuICAgIHN0YXJ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjb250cm9sbGVyLnN0YXJ0KCk7XG4gICAgICAgIGNvbnN0IGZpcnN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpcnN0Qm9hcmQnKTtcbiAgICAgICAgZmlyc3QuY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xuICAgICAgICBjb25zdCBzZWNvbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kQm9hcmQnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICAgICAgc2Vjb25kLmNsYXNzTGlzdC5hZGQoJ3N0YXJ0Jyk7XG4gICAgICAgIHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgcmFuZG9tQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgdW5GaWxsQ2VsbHMoJ3NlY29uZCcpO1xuICAgIH0pO1xuICAgIHJhbmRvbUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY29udHJvbGxlci5jb21wdXRlckdhbWVib2FyZC5jbGVhckJvYXJkKCk7XG4gICAgICAgIHJlZnJlc2hCb2FyZChjb250cm9sbGVyLmNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgY29udHJvbGxlci5yYW5kb21pemVTaGlwc1BsYWNlbWVudChjb250cm9sbGVyLmh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgZHJhZ0FuZERyb3AoY29udHJvbGxlci5odW1hbkdhbWVib2FyZCwgY29udHJvbGxlci5jb21wdXRlckdhbWVib2FyZCwgY29udHJvbGxlci5odW1hblNoaXBzKTtcbiAgICAgICAgY2FuQmVTdGFydGVkKCk7XG4gICAgICAgIHNldFN0YXJ0TWVzc2FnZSgpO1xuICAgICAgICBmaWxsQ2VsbHMoJ3NlY29uZCcpO1xuICAgIH0pO1xuICAgIHNwZWVkcy5mb3JFYWNoKChzcGVlZEJ0bikgPT4ge1xuICAgICAgICBzcGVlZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGxldCBpbnB1dCA9IHNwZWVkQnRuO1xuICAgICAgICAgICAgaWYgKGlucHV0LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBzcGVlZFZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgY29uc3QgZ2V0U3BlZWRWYWx1ZSA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHNwZWVkVmFsdWU7XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgc2V0SW5pdE1lc3NhZ2UpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlbmRlckJvYXJkLFxuICAgICAgICBjbGVhclNoaXAsXG4gICAgICAgIHJlZnJlc2hCb2FyZCxcbiAgICAgICAgaGFuZGxlVXNlcklucHV0LFxuICAgICAgICBwVmNCdG4sXG4gICAgICAgIGNWY0J0bixcbiAgICAgICAgd2FpdGluZyxcbiAgICAgICAgc2V0Qm9hcmRQb2ludGVyLFxuICAgICAgICByZW1vdmVCb2FyZFBvaW50ZXIsXG4gICAgICAgIGNyZWF0ZVNoaXBPdmVybGF5LFxuICAgICAgICBjYW5CZVN0YXJ0ZWQsXG4gICAgICAgIHNldEluaXRNZXNzYWdlLFxuICAgICAgICBzZXRTdGFydE1lc3NhZ2UsXG4gICAgICAgIHNldFR1cm5NZXNzYWdlUHZDLFxuICAgICAgICBzZXRUdXJuTWVzc2FnZUN2QyxcbiAgICAgICAgc2V0R2FtZU92ZXJNZXNzYWdlUHZDLFxuICAgICAgICBzZXRHYW1lT3Zlck1lc3NhZ2VDdkMsXG4gICAgICAgIHNldFJlc3RhcnRNZXNzYWdlLFxuICAgICAgICBnZXRTcGVlZFZhbHVlLFxuICAgICAgICBmaWxsQ2VsbHMsXG4gICAgICAgIHVuRmlsbENlbGxzLFxuICAgIH07XG59KSgpO1xuZXhwb3J0IGRlZmF1bHQgdWk7XG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCBnYW1lYm9hcmRGYWN0b3J5IGZyb20gJy4vZ2FtZWJvYXJkJztcbmltcG9ydCBzaGlwRmFjdG9yeSBmcm9tICcuL3NoaXAnO1xuaW1wb3J0IHBsYXllckZhY3RvcnkgZnJvbSAnLi9wbGF5ZXInO1xuaW1wb3J0IHVpIGZyb20gJy4vdWknO1xuaW1wb3J0IGRyYWdBbmREcm9wIGZyb20gJy4vZHJhZ0FuZERyb3AnO1xuY29uc3QgY29udHJvbGxlciA9ICgoKSA9PiB7XG4gICAgY29uc3QgaHVtYW5HYW1lYm9hcmQgPSBnYW1lYm9hcmRGYWN0b3J5KCk7XG4gICAgY29uc3QgY29tcHV0ZXJHYW1lYm9hcmQgPSBnYW1lYm9hcmRGYWN0b3J5KCk7XG4gICAgY29uc3QgaHVtYW4gPSBwbGF5ZXJGYWN0b3J5KCk7XG4gICAgY29uc3QgY29tcHV0ZXIgPSBwbGF5ZXJGYWN0b3J5KCk7XG4gICAgbGV0IGlzU3RvcHBlZCA9IHRydWU7XG4gICAgbGV0IGh1bWFuQ2FycmllciA9IHNoaXBGYWN0b3J5KCdDYXJyaWVyJyk7XG4gICAgbGV0IGh1bWFuQmF0dGxlc2hpcCA9IHNoaXBGYWN0b3J5KCdCYXR0bGVzaGlwJyk7XG4gICAgbGV0IGh1bWFuRGVzdHJveWVyID0gc2hpcEZhY3RvcnkoJ0Rlc3Ryb3llcicpO1xuICAgIGxldCBodW1hblN1Ym1hcmluZSA9IHNoaXBGYWN0b3J5KCdTdWJtYXJpbmUnKTtcbiAgICBsZXQgaHVtYW5QYXRyb2xib2F0ID0gc2hpcEZhY3RvcnkoJ1BhdHJvbEJvYXQnKTtcbiAgICBjb25zdCBodW1hblNoaXBzID0gW2h1bWFuQ2FycmllciwgaHVtYW5CYXR0bGVzaGlwLCBodW1hbkRlc3Ryb3llciwgaHVtYW5TdWJtYXJpbmUsIGh1bWFuUGF0cm9sYm9hdF07XG4gICAgY29uc3QgcG9wdWxhdGVTaGlwcyA9ICgpID0+IHtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucGxhY2VTaGlwKGh1bWFuQ2FycmllciwgJ0EnLCAnMScsICdob3Jpem9udGFsJyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnBsYWNlU2hpcChodW1hbkJhdHRsZXNoaXAsICdBJywgJzMnLCAnaG9yaXpvbnRhbCcpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5wbGFjZVNoaXAoaHVtYW5EZXN0cm95ZXIsICdBJywgJzUnLCAnaG9yaXpvbnRhbCcpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5wbGFjZVNoaXAoaHVtYW5TdWJtYXJpbmUsICdBJywgJzcnLCAnaG9yaXpvbnRhbCcpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5wbGFjZVNoaXAoaHVtYW5QYXRyb2xib2F0LCAnQScsICc5JywgJ2hvcml6b250YWwnKTtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGNvbXB1dGVyR2FtZWJvYXJkLCAnQScsICcxJyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnJlc2VydmVTcGFjZShjb21wdXRlckdhbWVib2FyZCwgJ0EnLCAnMycpO1xuICAgICAgICBjb21wdXRlckdhbWVib2FyZC5yZXNlcnZlU3BhY2UoY29tcHV0ZXJHYW1lYm9hcmQsICdBJywgJzUnKTtcbiAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGNvbXB1dGVyR2FtZWJvYXJkLCAnQScsICc3Jyk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLnJlc2VydmVTcGFjZShjb21wdXRlckdhbWVib2FyZCwgJ0EnLCAnOScpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gcmVuZXcoKSB7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChodW1hbkdhbWVib2FyZCk7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIHVpLmNyZWF0ZVNoaXBPdmVybGF5KGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgdWkuY3JlYXRlU2hpcE92ZXJsYXkoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICBkcmFnQW5kRHJvcChodW1hbkdhbWVib2FyZCwgY29tcHV0ZXJHYW1lYm9hcmQsIGh1bWFuU2hpcHMpO1xuICAgIH1cbiAgICBjb25zdCBpc0dhbWVPdmVyID0gKCkgPT4ge1xuICAgICAgICBpZiAoY29tcHV0ZXJHYW1lYm9hcmQuYWxsU3Vuayhjb21wdXRlckdhbWVib2FyZCkpIHtcbiAgICAgICAgICAgIHVpLnJlbW92ZUJvYXJkUG9pbnRlcigpO1xuICAgICAgICAgICAgaWYgKHVpLnBWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgICAgICB1aS5zZXRHYW1lT3Zlck1lc3NhZ2VQdkMoJ3BsYXllcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVpLmNWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgICAgICB1aS5zZXRHYW1lT3Zlck1lc3NhZ2VDdkMoJ3BsYXllcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh1bWFuR2FtZWJvYXJkLmFsbFN1bmsoaHVtYW5HYW1lYm9hcmQpKSB7XG4gICAgICAgICAgICB1aS5yZW1vdmVCb2FyZFBvaW50ZXIoKTtcbiAgICAgICAgICAgIGlmICh1aS5wVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgdWkuc2V0R2FtZU92ZXJNZXNzYWdlUHZDKCdjb21wdXRlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVpLmNWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgICAgICB1aS5zZXRHYW1lT3Zlck1lc3NhZ2VDdkMoJ2NvbXB1dGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBjb25zdCBjb21wdXRlckFJID0gKGdhbWVib2FyZCkgPT4ge1xuICAgICAgICBsZXQgcGxheWVyO1xuICAgICAgICBpZiAoZ2FtZWJvYXJkID09PSBodW1hbkdhbWVib2FyZCkge1xuICAgICAgICAgICAgcGxheWVyID0gY29tcHV0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZ2FtZWJvYXJkID09PSBjb21wdXRlckdhbWVib2FyZCkge1xuICAgICAgICAgICAgcGxheWVyID0gaHVtYW47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdhbWVib2FyZC5oaXRCdXROb3RTdW5rKGdhbWVib2FyZCkpIHtcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuZ2V0UHJldkhpdCgpICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgcGxheWVyLmdldExhc3RIaXQoKSAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIGdhbWVib2FyZC5nZXRDZWxsKHBsYXllci5nZXRMYXN0SGl0KCkuY29sLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLnJvdykudGFrZW5CeS5oaXRDb3VudCA+PSAyICYmXG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLmdldENlbGwocGxheWVyLmdldExhc3RIaXQoKS5jb2wsIHBsYXllci5nZXRMYXN0SGl0KCkucm93KS50YWtlbkJ5LmhpdENvdW50IDw9IDQpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuZmluaXNoaW5nQXR0YWNrKGdhbWVib2FyZCwgcGxheWVyLmdldExhc3RIaXQoKS5jb2wsIHBsYXllci5nZXRMYXN0SGl0KCkucm93LCBwbGF5ZXIuZ2V0UHJldkhpdCgpKTtcbiAgICAgICAgICAgICAgICBnYW1lYm9hcmQuc2lua1NoaXAoZ2FtZWJvYXJkLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLmNvbCwgcGxheWVyLmdldExhc3RIaXQoKS5yb3cpO1xuICAgICAgICAgICAgICAgIGlmIChpc0dhbWVPdmVyKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGdhbWVib2FyZC5nZXRDZWxsKHBsYXllci5nZXRMYXN0SGl0KCkuY29sLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLnJvdykudGFrZW5CeS5oaXRDb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHBsYXllci5mb2xsb3d1cEF0dGFjayhnYW1lYm9hcmQsIHBsYXllci5nZXRMYXN0SGl0KCkuY29sLCBwbGF5ZXIuZ2V0TGFzdEhpdCgpLnJvdyk7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnNpbmtTaGlwKGdhbWVib2FyZCwgcGxheWVyLmdldExhc3RIaXQoKS5jb2wsIHBsYXllci5nZXRMYXN0SGl0KCkucm93KTtcbiAgICAgICAgICAgICAgICBpZiAoaXNHYW1lT3ZlcigpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB7IGNvbCwgcm93IH0gPSBwbGF5ZXIucmFuZG9tQXR0YWNrKGdhbWVib2FyZCk7XG4gICAgICAgICAgICBpZiAoZ2FtZWJvYXJkLmdldENlbGwoY29sLCByb3cpLnN0YXR1cyA9PT0gJ2hpdCcpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc2V0UHJldkhpdChwbGF5ZXIuZ2V0TGFzdEhpdCgpKTtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc2V0TGFzdEhpdCh7IGNvbCwgcm93IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KS5zdGF0dXMgPT09ICdoaXQnICYmIGdhbWVib2FyZC5nZXRDZWxsKGNvbCwgcm93KS50YWtlbkJ5LmlzU3VuaygpKSB7XG4gICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnNpbmtTaGlwKGdhbWVib2FyZCwgY29sLCByb3cpO1xuICAgICAgICAgICAgICAgIHBsYXllci5zZXRQcmV2SGl0KG51bGwpO1xuICAgICAgICAgICAgICAgIHBsYXllci5zZXRMYXN0SGl0KG51bGwpO1xuICAgICAgICAgICAgICAgIGlmIChpc0dhbWVPdmVyKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcGxheWVyVnNDb21wdXRlck1vZGUgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgbGV0IGlzUGxheWVyVHVybiA9IHRydWU7XG4gICAgICAgIHdoaWxlICghaXNHYW1lT3ZlcigpICYmICFpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIGlmIChpc1BsYXllclR1cm4pIHtcbiAgICAgICAgICAgICAgICB1aS5zZXRUdXJuTWVzc2FnZVB2Qyhpc1BsYXllclR1cm4pO1xuICAgICAgICAgICAgICAgIHVpLnNldEJvYXJkUG9pbnRlcigncGxheWVyJyk7XG4gICAgICAgICAgICAgICAgdWkud2FpdGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBjb2wsIHJvdyB9ID0geWllbGQgdWkuaGFuZGxlVXNlcklucHV0KCk7XG4gICAgICAgICAgICAgICAgaHVtYW4uYXR0YWNrKGNvbXB1dGVyR2FtZWJvYXJkLCBjb2wsIHJvdyk7XG4gICAgICAgICAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQuc2lua1NoaXAoY29tcHV0ZXJHYW1lYm9hcmQsIGNvbCwgcm93KTtcbiAgICAgICAgICAgICAgICB1aS5yZWZyZXNoQm9hcmQoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgIGlzUGxheWVyVHVybiA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzR2FtZU92ZXIoKSB8fCBpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNQbGF5ZXJUdXJuKSB7XG4gICAgICAgICAgICAgICAgdWkuc2V0VHVybk1lc3NhZ2VQdkMoaXNQbGF5ZXJUdXJuKTtcbiAgICAgICAgICAgICAgICB1aS5zZXRCb2FyZFBvaW50ZXIoJ2NvbXB1dGVyJyk7XG4gICAgICAgICAgICAgICAgdWkud2FpdGluZyh0cnVlKTtcbiAgICAgICAgICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCB1aS5nZXRTcGVlZFZhbHVlKCkpKTtcbiAgICAgICAgICAgICAgICBpZiAoIXVpLnBWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykgfHwgaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb21wdXRlckFJKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgICAgICAgICB1aS5yZWZyZXNoQm9hcmQoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgIGlzUGxheWVyVHVybiA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHVpLndhaXRpbmcoZmFsc2UpO1xuICAgIH0pO1xuICAgIGNvbnN0IGNvbXB1dGVyVnNDb21wdXRlck1vZGUgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgdWkucmVtb3ZlQm9hcmRQb2ludGVyKCk7XG4gICAgICAgIGxldCBpc1BsYXllclR1cm4gPSB0cnVlO1xuICAgICAgICB3aGlsZSAoIWlzR2FtZU92ZXIoKSAmJiAhaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB1aS53YWl0aW5nKHRydWUpO1xuICAgICAgICAgICAgaWYgKGlzUGxheWVyVHVybikge1xuICAgICAgICAgICAgICAgIHVpLnNldFR1cm5NZXNzYWdlQ3ZDKGlzUGxheWVyVHVybik7XG4gICAgICAgICAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdWkuZ2V0U3BlZWRWYWx1ZSgpKSk7XG4gICAgICAgICAgICAgICAgaWYgKCF1aS5jVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpIHx8IGlzU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29tcHV0ZXJBSShodW1hbkdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgdWkucmVmcmVzaEJvYXJkKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgICAgICAgICBpc1BsYXllclR1cm4gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0dhbWVPdmVyKCkgfHwgaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzUGxheWVyVHVybikge1xuICAgICAgICAgICAgICAgIHVpLnNldFR1cm5NZXNzYWdlQ3ZDKGlzUGxheWVyVHVybik7XG4gICAgICAgICAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdWkuZ2V0U3BlZWRWYWx1ZSgpKSk7XG4gICAgICAgICAgICAgICAgaWYgKCF1aS5jVmNCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpIHx8IGlzU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29tcHV0ZXJBSShjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgICAgICAgICAgdWkucmVmcmVzaEJvYXJkKGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgICAgICAgICBpc1BsYXllclR1cm4gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICB1aS53YWl0aW5nKGZhbHNlKTtcbiAgICB9KTtcbiAgICBjb25zdCByYW5kb21QbGFjZW1lbnQgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGxldCBhbGxTaGlwcztcbiAgICAgICAgaWYgKGdhbWVib2FyZCA9PT0gaHVtYW5HYW1lYm9hcmQpIHtcbiAgICAgICAgICAgIGh1bWFuQ2FycmllciA9IHNoaXBGYWN0b3J5KCdDYXJyaWVyJyk7XG4gICAgICAgICAgICBodW1hbkJhdHRsZXNoaXAgPSBzaGlwRmFjdG9yeSgnQmF0dGxlc2hpcCcpO1xuICAgICAgICAgICAgaHVtYW5EZXN0cm95ZXIgPSBzaGlwRmFjdG9yeSgnRGVzdHJveWVyJyk7XG4gICAgICAgICAgICBodW1hblN1Ym1hcmluZSA9IHNoaXBGYWN0b3J5KCdTdWJtYXJpbmUnKTtcbiAgICAgICAgICAgIGh1bWFuUGF0cm9sYm9hdCA9IHNoaXBGYWN0b3J5KCdQYXRyb2xCb2F0Jyk7XG4gICAgICAgICAgICBhbGxTaGlwcyA9IFtodW1hbkNhcnJpZXIsIGh1bWFuQmF0dGxlc2hpcCwgaHVtYW5EZXN0cm95ZXIsIGh1bWFuU3VibWFyaW5lLCBodW1hblBhdHJvbGJvYXRdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGdhbWVib2FyZCA9PT0gY29tcHV0ZXJHYW1lYm9hcmQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVyQ2FycmllciA9IHNoaXBGYWN0b3J5KCdDYXJyaWVyJyk7XG4gICAgICAgICAgICBjb25zdCBjb21wdXRlckJhdHRsZXNoaXAgPSBzaGlwRmFjdG9yeSgnQmF0dGxlc2hpcCcpO1xuICAgICAgICAgICAgY29uc3QgY29tcHV0ZXJEZXN0cm95ZXIgPSBzaGlwRmFjdG9yeSgnRGVzdHJveWVyJyk7XG4gICAgICAgICAgICBjb25zdCBjb21wdXRlclN1Ym1hcmluZSA9IHNoaXBGYWN0b3J5KCdTdWJtYXJpbmUnKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVyUGF0cm9sYm9hdCA9IHNoaXBGYWN0b3J5KCdQYXRyb2xCb2F0Jyk7XG4gICAgICAgICAgICBhbGxTaGlwcyA9IFtjb21wdXRlckNhcnJpZXIsIGNvbXB1dGVyQmF0dGxlc2hpcCwgY29tcHV0ZXJEZXN0cm95ZXIsIGNvbXB1dGVyU3VibWFyaW5lLCBjb21wdXRlclBhdHJvbGJvYXRdO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRyb2xsZXIuaHVtYW5TaGlwcy5sZW5ndGggPSAwO1xuICAgICAgICBjb25zdCBjb2xzID0gWydBJywgJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAnSScsICdKJ107XG4gICAgICAgIGNvbnN0IHJhbmRvbUNvbCA9ICgpID0+IGNvbHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY29scy5sZW5ndGgpXTtcbiAgICAgICAgY29uc3QgcmFuZG9tUm93ID0gKCkgPT4gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAxMCkudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgcmFuZG9tT3JpZW50YXRpb24gPSAoKSA9PiAoTWF0aC5yYW5kb20oKSA+IDAuNSA/ICdob3Jpem9udGFsJyA6ICd2ZXJ0aWNhbCcpO1xuICAgICAgICBhbGxTaGlwcy5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgICAgICBsZXQgY29sID0gcmFuZG9tQ29sKCk7XG4gICAgICAgICAgICBsZXQgcm93ID0gcmFuZG9tUm93KCk7XG4gICAgICAgICAgICBsZXQgb3JpZW50YXRpb24gPSByYW5kb21PcmllbnRhdGlvbigpO1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGdhbWVib2FyZC5jYW5CZVBsYWNlZChzaGlwLnNpemUsIGNvbCwgcm93LCBvcmllbnRhdGlvbik7XG4gICAgICAgICAgICB3aGlsZSAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGNvbCA9IHJhbmRvbUNvbCgpO1xuICAgICAgICAgICAgICAgIHJvdyA9IHJhbmRvbVJvdygpO1xuICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uID0gcmFuZG9tT3JpZW50YXRpb24oKTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBnYW1lYm9hcmQuY2FuQmVQbGFjZWQoc2hpcC5zaXplLCBjb2wsIHJvdywgb3JpZW50YXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcCwgY29sLCByb3csIG9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgICAgICBnYW1lYm9hcmQucmVzZXJ2ZVNwYWNlKGdhbWVib2FyZCwgY29sLCByb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udHJvbGxlci5odW1hblNoaXBzLnB1c2goc2hpcCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgcmFuZG9taXplU2hpcHNQbGFjZW1lbnQgPSAoZ2FtZWJvYXJkKSA9PiB7XG4gICAgICAgIGdhbWVib2FyZC5jbGVhckJvYXJkKCk7XG4gICAgICAgIHJhbmRvbVBsYWNlbWVudChnYW1lYm9hcmQpO1xuICAgICAgICB1aS5yZWZyZXNoQm9hcmQoZ2FtZWJvYXJkKTtcbiAgICAgICAgaWYgKGdhbWVib2FyZCA9PT0gaHVtYW5HYW1lYm9hcmQpIHtcbiAgICAgICAgICAgIHVpLmNyZWF0ZVNoaXBPdmVybGF5KGdhbWVib2FyZCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHJlc2V0T3JpZW50YXRpb24gPSAoKSA9PiB7XG4gICAgICAgIGh1bWFuU2hpcHMuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgICAgICAgaWYgKHNoaXAuaXNWZXJ0aWNhbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHNoaXAuaXNWZXJ0aWNhbCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHBpY2tHYW1lTW9kZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKHVpLmNWY0J0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgIHJhbmRvbWl6ZVNoaXBzUGxhY2VtZW50KGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgICAgIHJhbmRvbWl6ZVNoaXBzUGxhY2VtZW50KGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgICAgIGlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgY29tcHV0ZXJWc0NvbXB1dGVyTW9kZSgpO1xuICAgICAgICAgICAgdWkucmVmcmVzaEJvYXJkKGh1bWFuR2FtZWJvYXJkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc3RhcnQgPSAoKSA9PiB7XG4gICAgICAgIHVpLnJlZnJlc2hCb2FyZChodW1hbkdhbWVib2FyZCk7XG4gICAgICAgIHJhbmRvbWl6ZVNoaXBzUGxhY2VtZW50KGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHBsYXllclZzQ29tcHV0ZXJNb2RlKCk7XG4gICAgfTtcbiAgICBjb25zdCByZXN0YXJ0ID0gKCkgPT4ge1xuICAgICAgICBpc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICBodW1hbi5zZXRQcmV2SGl0KG51bGwpO1xuICAgICAgICBodW1hbi5zZXRMYXN0SGl0KG51bGwpO1xuICAgICAgICBjb21wdXRlci5zZXRQcmV2SGl0KG51bGwpO1xuICAgICAgICBjb21wdXRlci5zZXRMYXN0SGl0KG51bGwpO1xuICAgICAgICBodW1hbkdhbWVib2FyZC5jbGVhckJvYXJkKCk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLmNsZWFyQm9hcmQoKTtcbiAgICAgICAgcG9wdWxhdGVTaGlwcygpO1xuICAgICAgICB1aS5yZWZyZXNoQm9hcmQoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICB1aS5yZWZyZXNoQm9hcmQoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICB1aS5jcmVhdGVTaGlwT3ZlcmxheShjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIGRyYWdBbmREcm9wKGh1bWFuR2FtZWJvYXJkLCBjb21wdXRlckdhbWVib2FyZCwgaHVtYW5TaGlwcyk7XG4gICAgICAgIHVpLmNhbkJlU3RhcnRlZCgpO1xuICAgICAgICBwaWNrR2FtZU1vZGUoKTtcbiAgICAgICAgcmVzZXRPcmllbnRhdGlvbigpO1xuICAgIH07XG4gICAgY29uc3QgbmV3R2FtZSA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBpc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCB1aS5nZXRTcGVlZFZhbHVlKCkpKTtcbiAgICAgICAgaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHJlc3RhcnQoKTtcbiAgICB9KTtcbiAgICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgICAgICB1aS5zZXRJbml0TWVzc2FnZSgpO1xuICAgICAgICBodW1hbkdhbWVib2FyZC5nZW5lcmF0ZUFycmF5KCk7XG4gICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLmdlbmVyYXRlQXJyYXkoKTtcbiAgICAgICAgdWkucmVuZGVyQm9hcmQoaHVtYW5HYW1lYm9hcmQpO1xuICAgICAgICB1aS5yZW5kZXJCb2FyZChjb21wdXRlckdhbWVib2FyZCk7XG4gICAgICAgIHBvcHVsYXRlU2hpcHMoKTtcbiAgICAgICAgdWkucmVmcmVzaEJvYXJkKGNvbXB1dGVyR2FtZWJvYXJkKTtcbiAgICAgICAgdWkuY3JlYXRlU2hpcE92ZXJsYXkoY29tcHV0ZXJHYW1lYm9hcmQpO1xuICAgICAgICBkcmFnQW5kRHJvcChodW1hbkdhbWVib2FyZCwgY29tcHV0ZXJHYW1lYm9hcmQsIGh1bWFuU2hpcHMpO1xuICAgICAgICB1aS5jYW5CZVN0YXJ0ZWQoKTtcbiAgICAgICAgcGlja0dhbWVNb2RlKCk7XG4gICAgICAgIHVpLnVuRmlsbENlbGxzKCdmaXJzdCcpO1xuICAgICAgICB1aS5wVmNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH07XG4gICAgcmV0dXJuIHsgaW5pdCwgcmVuZXcsIGh1bWFuR2FtZWJvYXJkLCBjb21wdXRlckdhbWVib2FyZCwgcmVzdGFydCwgbmV3R2FtZSwgc3RhcnQsIHJhbmRvbWl6ZVNoaXBzUGxhY2VtZW50LCBodW1hblNoaXBzIH07XG59KSgpO1xuZXhwb3J0IGRlZmF1bHQgY29udHJvbGxlcjtcbiIsImltcG9ydCAnbm9ybWFsaXplLmNzcyc7XG5pbXBvcnQgJy4vc3R5bGUvc3R5bGUuY3NzJztcbmltcG9ydCBjb250cm9sbGVyIGZyb20gJy4vbW9kdWxlcy9jb250cm9sbGVyJztcbmNvbnRyb2xsZXIuaW5pdCgpO1xuIl0sIm5hbWVzIjpbImNvbHMiLCJyb3dzIiwiYXJyYXkiLCJzaGlwc1BsYWNlZCIsImdldENlbGwiLCJjb2wiLCJyb3ciLCJjb2xJbmRleCIsImluZGV4T2YiLCJyb3dJbmRleCIsInNldENlbGwiLCJuZXdTdGF0dXMiLCJuZXdUYWtlbkJ5Iiwic3RhdHVzIiwidGFrZW5CeSIsImdlbmVyYXRlQXJyYXkiLCJpIiwiaiIsImNsZWFyQm9hcmQiLCJmbGF0IiwiZm9yRWFjaCIsImNlbGwiLCJ1bmRlZmluZWQiLCJsZW5ndGgiLCJyZW1vdmVTaGlwIiwic2hpcCIsImdhbWVib2FyZCIsIm5hbWUiLCJzaGlwSW5kZXgiLCJzcGxpY2UiLCJwbGFjZVNoaXAiLCJvcmllbnRhdGlvbiIsImlzSG9yaXpvbnRhbCIsImNlbGxzIiwic3RhcnQiLCJpc1ZlcnRpY2FsIiwic2hpcENlbGxzIiwic2l6ZSIsImN1cnJlbnRDb2wiLCJjdXJyZW50Um93IiwicHVzaCIsInJlY2VpdmVBdHRhY2siLCJoaXQiLCJyZWNlaXZlQXJvdW5kIiwicmVzZXJ2ZVNwYWNlIiwiZmlsdGVyIiwiYyIsImRpcmVjdGlvbiIsIm5ld0NvbCIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImNoYXJDb2RlQXQiLCJuZXdSb3ciLCJOdW1iZXIiLCJ0b1N0cmluZyIsImhpdEJ1dE5vdFN1bmsiLCJzb21lIiwiaXNTdW5rIiwic2lua1NoaXAiLCJhbGxTdW5rIiwidGFrZW5CeUNlbGxzIiwiZXZlcnkiLCJjYW5CZVBsYWNlZCIsImFyZUVtcHR5IiwiaXRlbSIsInJlbW92ZVJlc2VydmVkU3BhY2UiLCJoaXRDb3VudCIsInJvdGF0ZSIsInRoaXMiLCJwcmV2SGl0IiwibGFzdEhpdCIsInJhbmdlIiwiZ29SaWdodCIsImdvRG93biIsImZpbmlzaGluZ0F0dGFjayIsInNldFByZXZIaXQiLCJzZXRMYXN0SGl0IiwibmV3UHJldkhpdCIsIm5ld0xhc3RIaXQiLCJhdHRhY2siLCJyZXN1bHQiLCJyYW5kb21BdHRhY2siLCJyYW5kb21Db2wiLCJyYW5kb21Sb3ciLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjZWlsIiwiZm9sbG93dXBBdHRhY2siLCJ2YWxpZERpcmVjdGlvbnMiLCJyYW5kb21EaXJlY3Rpb24iLCJnZXRQcmV2SGl0IiwiZ2V0TGFzdEhpdCIsIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJmaXJzdEdhbWVib2FyZCIsInNlY29uZEdhbWVib2FyZCIsInNoaXBzIiwiZmlyc3RCb2FyZEVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzZWNvbmRCb2FyZEVsZW1lbnQiLCJmaXJzdEJvYXJkQ2VsbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2Vjb25kQm9hcmRDZWxscyIsInNoaXBOYW1lIiwic2hpcFNpemUiLCJzaGlwT2JqIiwiZ3JhYlBvaW50WCIsImdyYWJQb2ludFkiLCJoaWdobGlnaHRlZENlbGxzIiwic2hpcE5hbWVUb09iaiIsImNhcnJpZXIiLCJiYXR0bGVzaGlwIiwiZGVzdHJveWVyIiwic3VibWFyaW5lIiwicGF0cm9sYm9hdCIsImxhc3REcmFnZ2VkIiwiZHJhZ2dhYmxlcyIsImdldE5vblNoaXBDZWxscyIsImJvYXJkQ2VsbHMiLCJBcnJheSIsImZyb20iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsIm5vblNoaXBDZWxscyIsImlzVmFsaWRQbGFjZW1lbnQiLCJ0b0hpZ2hsaWdodCIsImRhdGFzZXQiLCJnZXRMYXN0U2hpcFNpemVFbGVtZW50cyIsInNsaWNlIiwibWluIiwiaGFuZGxlTW91c2Vkb3duIiwidGFyZ2V0U2hpcE5hbWUiLCJ0YXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJyZW1haW5pbmdTaGlwc0ZpcnN0IiwidG9Mb3dlckNhc2UiLCJyZW1haW5pbmdTaGlwc1NlY29uZCIsInJlbmV3Iiwic2V0SW5pdE1lc3NhZ2UiLCJoYW5kbGVEcmFnU3RhcnQiLCJzZXRUaW1lb3V0Iiwic3R5bGUiLCJ2aXNpYmlsaXR5IiwiYWRkIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJjbG9zZXN0IiwiaWQiLCJjbGVhclNoaXAiLCJoYW5kbGVEcmFnT3ZlciIsImluZGV4IiwicHJldmVudERlZmF1bHQiLCJzdGFydENlbGwiLCJvZmZzZXRIZWlnaHQiLCJvZmZzZXRXaWR0aCIsImNlbGxJbmRleCIsImhhbmRsZURyYWdMZWF2ZSIsImhpZ2hsaWdodGVkQ2VsbCIsInJlbW92ZSIsImhhbmRsZURyb3AiLCJsYXN0IiwiY2FuQmVTdGFydGVkIiwic2V0U3RhcnRNZXNzYWdlIiwiaGFuZGxlRHJhZ0VuZCIsImZpbGxDZWxscyIsImhhbmRsZU1vdXNldXAiLCJoYW5kbGVSb3RhdGUiLCJ0ZW1wU2hpcCIsImN1cnJlbnQiLCJibG9ja1JpZ2h0Q2xpY2siLCJhZGRFdmVudExpc3RlbmVyIiwiZHJhZ2dhYmxlIiwidWkiLCJzdGF0dXNCb3giLCJib2FyZHMiLCJwVmNCdG4iLCJuZXdHYW1lQnRuIiwiY1ZjQnRuIiwic3RhcnRCdG4iLCJyYW5kb21CdG4iLCJhbGxCdG5zIiwic3BlZWRzIiwiZ2V0RWxlbWVudHNCeU5hbWUiLCJzcGVlZFZhbHVlIiwicmVuZGVyQ2VsbHMiLCJib2FyZCIsImVsZW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiY3JlYXRlQ2VsbCIsImFwcGVuZCIsImdldEJvYXJkSWQiLCJodW1hbkdhbWVib2FyZCIsImNvbXB1dGVyR2FtZWJvYXJkIiwicmVmcmVzaEJvYXJkIiwiaW5uZXJIVE1MIiwiZ2V0VXNlcklucHV0IiwiaGFuZGxlR2FtZU1vZGUiLCJzZWxlY3RlZEVsZW1lbnQiLCJkZXNlbGVjdGVkRWxlbWVudCIsIndhaXRpbmciLCJidG4iLCJkaXNhYmxlZCIsImdldFNwZWVkVmFsdWUiLCJyZXN0YXJ0Iiwic2V0UmVzdGFydE1lc3NhZ2UiLCJib29sIiwiZG9jdW1lbnRFbGVtZW50IiwidG9nZ2xlIiwic3RhdHVzVGV4dE1vYmlsZSIsInN0YXR1c1RleHREZXNrdG9wIiwidGV4dENvbnRlbnQiLCJ3aW5kb3ciLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsImlucHV0IiwidW5GaWxsQ2VsbHMiLCJzZWNvbmQiLCJhbGwiLCJyZW1vdmVCb2FyZFBvaW50ZXIiLCJuZXdHYW1lIiwicmFuZG9taXplU2hpcHNQbGFjZW1lbnQiLCJodW1hblNoaXBzIiwic3BlZWRCdG4iLCJjaGVja2VkIiwicmVuZGVyQm9hcmQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJoYW5kbGVVc2VySW5wdXQiLCJ1c2VySW5wdXQiLCJvbmNlIiwic2V0Qm9hcmRQb2ludGVyIiwid2hpY2giLCJjcmVhdGVTaGlwT3ZlcmxheSIsImZpcnN0Q2VsbCIsInNoaXBFbGVtZW50Iiwic2V0U2hpcFN0eWxlIiwiaHRtbEVsZW1lbnQiLCJyb290Rm9udFNpemUiLCJwYXJzZUZsb2F0IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImdldFByb3BlcnR5VmFsdWUiLCJ3aWR0aCIsImNlbGxTaXplIiwiaGVpZ2h0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiYXBwZW5kQ2hpbGQiLCJzZXRUdXJuTWVzc2FnZVB2QyIsImlzUGxheWVyVHVybiIsInNldFR1cm5NZXNzYWdlQ3ZDIiwic2V0R2FtZU92ZXJNZXNzYWdlUHZDIiwid2hvIiwic2V0R2FtZU92ZXJNZXNzYWdlQ3ZDIiwiY29udHJvbGxlciIsImh1bWFuIiwicGxheWVyIiwiY29tcHV0ZXIiLCJpc1N0b3BwZWQiLCJodW1hbkNhcnJpZXIiLCJodW1hbkJhdHRsZXNoaXAiLCJodW1hbkRlc3Ryb3llciIsImh1bWFuU3VibWFyaW5lIiwiaHVtYW5QYXRyb2xib2F0IiwicG9wdWxhdGVTaGlwcyIsImlzR2FtZU92ZXIiLCJjb21wdXRlckFJIiwiYWxsU2hpcHMiLCJyYW5kb21PcmllbnRhdGlvbiIsInJhbmRvbVBsYWNlbWVudCIsInBpY2tHYW1lTW9kZSIsImluaXQiXSwic291cmNlUm9vdCI6IiJ9